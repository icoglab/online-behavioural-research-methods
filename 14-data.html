<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="An open source textbook for psychology students learning programming and online research methods.Primary Author: Nicholaus P. Brosowsky Co-Authors: Liam Yeo, Jackie Spear">

<title>14&nbsp; Saving and Labeling Data – Online Behavioural Research Methods: Programming with jsPsych</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./15-data-2.html" rel="next">
<link href="./13-L05.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e9b5551c1c55c86b42a831a3c09ea90c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-f4f6c4c33169695420a9dce568207992.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>
.tabset-fullscreen-btn {
  position: absolute;
  top: 5px;
  right: 10px;
  z-index: 1000;
  padding: 5px 10px;
  background-color: none;
  color: #6c757d;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}
.tabset-fullscreen-btn:hover {
  background-color: #e9ecef;
  color: #495057;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.panel-tabset').forEach(function(tabset) {
    const btn = document.createElement('button');
    btn.innerHTML = '⛶ Open Code in New Tab';
    btn.className = 'tabset-fullscreen-btn';

    tabset.style.position = 'relative';
    tabset.insertBefore(btn, tabset.firstChild);

    btn.addEventListener('click', function() {
      const clone = tabset.cloneNode(true);
      const cloneBtn = clone.querySelector('.tabset-fullscreen-btn');
      if (cloneBtn) cloneBtn.remove();

      // Get all stylesheets from current page
      const stylesheets = Array.from(document.styleSheets)
        .map(sheet => {
          try {
            if (sheet.href) {
              return `<link rel="stylesheet" href="${sheet.href}">`;
            } else if (sheet.ownerNode) {
              return `<style>${Array.from(sheet.cssRules).map(rule => rule.cssText).join('\n')}</style>`;
            }
          } catch (e) {
            if (sheet.href) return `<link rel="stylesheet" href="${sheet.href}">`;
          }
          return '';
        })
        .join('\n');

      const newWindow = window.open('', '_blank');
      newWindow.document.write(`
        <html>
          <head>
            <title>Tab Panel View</title>
            ${stylesheets}
            <style>
              body { 
                margin: 20px auto; 
                padding: 20px; 
                max-width: 1200px;
              }
            </style>
          </head>
          <body>
            ${clone.outerHTML}
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"><\/script>
          </body>
        </html>
      `);
      newWindow.document.close();
    });
  });
});
</script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./14-data.html">Unit 6: Data</a></li><li class="breadcrumb-item"><a href="./14-data.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Saving and Labeling Data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Online Behavioural Research Methods: Programming with jsPsych</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/icoglab/online-behavioural-research-methods" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 1: Fundamentals (I)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">HTML</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">CSS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-L01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lab 1: About Me</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 2: Fundamentals (II)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Javascript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-debugging-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Debugging JavaScript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-L02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lab 2: JS Exercises</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 3: Intro to JsPsych</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-jspsych.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">jsPsych</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-L03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 3: Language &amp; Thought</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 4: Timelines</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-timelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Timelines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-plugins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">More Plugins</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-L04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lab 4: Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 5: Multimedia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-multimedia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multimedia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-L05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Lab 5: Mental Imagery</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 6: Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Saving and Labeling Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-data-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Accessing and Summarizing Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-L06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Lab 6: Creativity</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 7: Dynamic Parameters</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-dynamic-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dynamic Parameters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-L07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Lab 7: Spatial Attention</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 8: Controlling the Flow</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-dynamic-flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Controlling the Flow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-L08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Lab 8: Cognitive Control</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 9: Skills Checkpoint</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-L09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Lab 9: Working Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 10: Randomization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-randomization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Randomization in Experimental Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-L10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Lab 10: Judgment &amp; Decision-Making</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-L11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Lab 11: Face Perception</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Unit 11: Gamification</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A01_JS_Builtins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">JavaScript Built-in Functions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p>© 2024. This work is openly licensed via <a href="https://creativecommons.org/licenses/by-nc/4.0">CC BY NC 4.0</a>.</p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#how-jspsych-stores-data" id="toc-how-jspsych-stores-data" class="nav-link active" data-scroll-target="#how-jspsych-stores-data"><span class="header-section-number">14.1</span> How jsPsych Stores Data</a></li>
  <li><a href="#saving-data" id="toc-saving-data" class="nav-link" data-scroll-target="#saving-data"><span class="header-section-number">14.2</span> Saving Data</a>
  <ul class="collapse">
  <li><a href="#where-data-lives-browser-memory-vs.-permanent-storage" id="toc-where-data-lives-browser-memory-vs.-permanent-storage" class="nav-link" data-scroll-target="#where-data-lives-browser-memory-vs.-permanent-storage"><span class="header-section-number">14.2.1</span> Where Data Lives: Browser Memory vs.&nbsp;Permanent Storage</a></li>
  <li><a href="#saving-data-locally" id="toc-saving-data-locally" class="nav-link" data-scroll-target="#saving-data-locally"><span class="header-section-number">14.2.2</span> Saving Data Locally</a></li>
  <li><a href="#creating-a-data-saving-trial" id="toc-creating-a-data-saving-trial" class="nav-link" data-scroll-target="#creating-a-data-saving-trial"><span class="header-section-number">14.2.3</span> Creating a Data Saving Trial</a></li>
  <li><a href="#save-data-example" id="toc-save-data-example" class="nav-link" data-scroll-target="#save-data-example"><span class="header-section-number">14.2.4</span> Save Data Example</a></li>
  </ul></li>
  <li><a href="#labeling-data" id="toc-labeling-data" class="nav-link" data-scroll-target="#labeling-data"><span class="header-section-number">14.3</span> Labeling Data</a>
  <ul class="collapse">
  <li><a href="#adding-context-with-the-data-parameter" id="toc-adding-context-with-the-data-parameter" class="nav-link" data-scroll-target="#adding-context-with-the-data-parameter"><span class="header-section-number">14.3.1</span> Adding Context with the <code>data</code> Parameter</a></li>
  <li><a href="#adding-data-to-timelines" id="toc-adding-data-to-timelines" class="nav-link" data-scroll-target="#adding-data-to-timelines"><span class="header-section-number">14.3.2</span> Adding Data to Timelines</a></li>
  <li><a href="#dynamic-data-with-timeline-variables" id="toc-dynamic-data-with-timeline-variables" class="nav-link" data-scroll-target="#dynamic-data-with-timeline-variables"><span class="header-section-number">14.3.3</span> Dynamic Data with Timeline Variables</a></li>
  <li><a href="#saving-trial-parameters" id="toc-saving-trial-parameters" class="nav-link" data-scroll-target="#saving-trial-parameters"><span class="header-section-number">14.3.4</span> Saving Trial Parameters</a></li>
  <li><a href="#adding-global-properties-to-all-trials" id="toc-adding-global-properties-to-all-trials" class="nav-link" data-scroll-target="#adding-global-properties-to-all-trials"><span class="header-section-number">14.3.5</span> Adding Global Properties to All Trials</a></li>
  <li><a href="#data-labels-full-example" id="toc-data-labels-full-example" class="nav-link" data-scroll-target="#data-labels-full-example"><span class="header-section-number">14.3.6</span> Data Labels: Full Example</a></li>
  </ul></li>
  <li><a href="#basic-data-updates-with-on_finish" id="toc-basic-data-updates-with-on_finish" class="nav-link" data-scroll-target="#basic-data-updates-with-on_finish"><span class="header-section-number">14.4</span> Basic Data Updates with <code>on_finish</code></a>
  <ul class="collapse">
  <li><a href="#checking-accuracy" id="toc-checking-accuracy" class="nav-link" data-scroll-target="#checking-accuracy"><span class="header-section-number">14.4.1</span> Checking Accuracy</a></li>
  <li><a href="#categorizing-response-times" id="toc-categorizing-response-times" class="nav-link" data-scroll-target="#categorizing-response-times"><span class="header-section-number">14.4.2</span> Categorizing Response Times:</a></li>
  </ul></li>
  <li><a href="#final-thoughts-on-data-labeling" id="toc-final-thoughts-on-data-labeling" class="nav-link" data-scroll-target="#final-thoughts-on-data-labeling"><span class="header-section-number">14.5</span> Final Thoughts on Data Labeling</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/14-data.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./14-data.html">Unit 6: Data</a></li><li class="breadcrumb-item"><a href="./14-data.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Saving and Labeling Data</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Saving and Labeling Data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled" title="learning goals">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
learning goals
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ul>
<li>Understand how jsPsych stores data and the difference between browser memory and permanent storage</li>
<li>Add meaningful labels using the data parameter, timeline data, and timeline variables</li>
<li>Apply global properties to all trials using jsPsych.data.addProperties()</li>
<li>Save data locally for testing using jsPsych.data.get().localSave()</li>
</ul>
</div>
</div>
</div>
<section id="how-jspsych-stores-data" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="how-jspsych-stores-data"><span class="header-section-number">14.1</span> How jsPsych Stores Data</h2>
<p>Before we dive into labeling data, it’s important to understand how jsPsych actually saves your experimental data. jsPsych uses a simple but powerful principle: one event per row. Every time something happens in your experiment (a participant responds to a stimulus, views an instruction screen, or completes any trial) jsPsych creates a new row of data.</p>
<p>Let’s start with a simple example to see this in action:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb1-6"><a href="#cb1-6"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Welcome to the experiment!&lt;/p&gt;&lt;p&gt;Press any key to continue.&lt;/p&gt;'</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>}<span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="kw">const</span> question1 <span class="op">=</span> {</span>
<span id="cb1-11"><a href="#cb1-11"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like chocolate?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]</span>
<span id="cb1-14"><a href="#cb1-14"></a>}<span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15"></a></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="kw">const</span> question2 <span class="op">=</span> {</span>
<span id="cb1-17"><a href="#cb1-17"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like vanilla?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb1-19"><a href="#cb1-19"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]</span>
<span id="cb1-20"><a href="#cb1-20"></a>}<span class="op">;</span></span>
<span id="cb1-21"><a href="#cb1-21"></a></span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="kw">const</span> goodbye <span class="op">=</span> {</span>
<span id="cb1-23"><a href="#cb1-23"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb1-24"><a href="#cb1-24"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Thank you for participating!&lt;/p&gt;&lt;p&gt;Press any key to finish.&lt;/p&gt;'</span></span>
<span id="cb1-25"><a href="#cb1-25"></a>}<span class="op">;</span></span>
<span id="cb1-26"><a href="#cb1-26"></a></span>
<span id="cb1-27"><a href="#cb1-27"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb1-28"><a href="#cb1-28"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([welcome<span class="op">,</span> question1<span class="op">,</span> question2<span class="op">,</span> goodbye])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div id="demo-container-1" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-1" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'<p>Welcome to the experiment!</p><p>Press any key to continue.</p>\'\n};\n\nconst question1 = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'<p>Do you like chocolate?</p><p>Press Y for yes, N for no.</p>\',\n  choices: [\'y\', \'n\']\n};\n\nconst question2 = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'<p>Do you like vanilla?</p><p>Press Y for yes, N for no.</p>\',\n  choices: [\'y\', \'n\']\n};\n\nconst goodbye = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'<p>Thank you for participating!</p><p>Press any key to finish.</p>\',\n  on_start: function(){\n    jsPsych.data.get().localSave(\'csv\',\'mydata.csv\');\n  }\n};\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=\'text-align: center;\'>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=\'save-btn\' style=\'padding: 10px 20px; font-size: 16px; cursor: pointer;\'>\n        Click here to save the data locally\n      </button>\n      <div id=\'status-message\' style=\'margin-top: 20px;\'></div>\n    </div>\n  `,\n  choices: \'NO_KEYS\', // Disable keyboard responses\n  trial_duration: null, // Keep trial active indefinitely\n  on_load: function() {\n    document.getElementById(\'save-btn\').addEventListener(\'click\', function() {\n      // Save the data\n      jsPsych.data.get().localSave(\'csv\', \'experiment_data.csv\');\n    });\n  }\n};\n\njsPsych.run([welcome, question1, question2, saveData]);\n  \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-1');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-1" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: '<p>Welcome to the experiment!</p><p>Press any key to continue.</p>'
};

const question1 = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: '<p>Do you like chocolate?</p><p>Press Y for yes, N for no.</p>',
  choices: ['y', 'n']
};

const question2 = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: '<p>Do you like vanilla?</p><p>Press Y for yes, N for no.</p>',
  choices: ['y', 'n']
};

const goodbye = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: '<p>Thank you for participating!</p><p>Press any key to finish.</p>',
  on_start: function(){
    jsPsych.data.get().localSave('csv','mydata.csv');
  }
};

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style='text-align: center;'>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id='save-btn' style='padding: 10px 20px; font-size: 16px; cursor: pointer;'>
        Click here to save the data locally
      </button>
      <div id='status-message' style='margin-top: 20px;'></div>
    </div>
  `,
  choices: 'NO_KEYS', // Disable keyboard responses
  trial_duration: null, // Keep trial active indefinitely
  on_load: function() {
    document.getElementById('save-btn').addEventListener('click', function() {
      // Save the data
      jsPsych.data.get().localSave('csv', 'experiment_data.csv');
    });
  }
};

jsPsych.run([welcome, question1, question2, saveData]);
  
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-1&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-1&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>When this simple experiment runs, jsPsych automatically collects data for each trial. Here’s what the resulting CSV file would look like:</p>
<div class="dual-scroll-container">
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>rt</th>
<th>stimulus</th>
<th>response</th>
<th>trial_type</th>
<th>trial_index</th>
<th>plugin_version</th>
<th>time_elapsed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>4128</td>
<td><code>&lt;p&gt;Welcome to the experiment!&lt;/p&gt;&lt;p&gt;Press any key to continue.&lt;/p&gt;</code></td>
<td>k</td>
<td>html-keyboard-response</td>
<td>0</td>
<td>2.1.0</td>
<td>4128</td>
</tr>
<tr class="even">
<td>1556</td>
<td><code>&lt;p&gt;Do you like chocolate?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;</code></td>
<td>y</td>
<td>html-keyboard-response</td>
<td>1</td>
<td>2.1.0</td>
<td>5689</td>
</tr>
<tr class="odd">
<td>411</td>
<td><code>&lt;p&gt;Do you like vanilla?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;</code></td>
<td>y</td>
<td>html-keyboard-response</td>
<td>2</td>
<td>2.1.0</td>
<td>6101</td>
</tr>
</tbody>
</table>
</div>
<p>Notice that we have three rows, one for each trial that ran. jsPsych automatically includes several pieces of information in each row. The <code>trial_type</code> column tells us which plugin was used, while <code>trial_index</code> shows the order in which trials occurred (starting from 0). The <code>time_elapsed</code> column records the total time since the experiment started in milliseconds, and <code>rt</code> shows the response time for this specific trial. The <code>stimulus</code> column contains what was presented to the participant, <code>response</code> records what key they pressed, and plugin_version tells us which version of jsPsych was used.</p>
<p>It’s important to understand that jsPsych saves a row for everything that happens in your experiment. Instruction screens, fixation crosses, feedback screens, and actual experimental trials all get their own rows. This means you’ll often need to filter your data during analysis to focus only on the trials that contain your actual experimental responses.</p>
<p>While this data captures the basic mechanics of what happened, notice how little meaningful information we actually have about our experiment. Looking at row 2, we can see that the participant pressed ‘y’ in response to the chocolate question, but we have no easy way to know what ‘y’ means, whether this was correct, or what type of question this was. The same problem exists for row 3 with the vanilla question. Without additional context, we can’t easily determine what their response pattern means or how to categorize these responses for analysis. .</p>
<p>To best understand why this is a problem, we can return to the memory experiment in Chapter 11. Let’s have a look at our code and the resulting data:</p>
<div class="cell">
<style type="text/css">
#cb2 {
  height: 335px;
  overflow: scroll;
}
</style>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`Welcome to the Experiment! Press any key to begin.`</span><span class="op">,</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb2-9"><a href="#cb2-9"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>}</span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb2-13"><a href="#cb2-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb2-15"><a href="#cb2-15"></a>    <span class="co">// Page 1: Welcome and Overview</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="vs">      &lt;p&gt;You will participate in a memory experiment with two phases:&lt;/p&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="vs">     &lt;p&gt;&lt;strong&gt;Phase 1:&lt;/strong&gt; Study a list of words&lt;/p&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="vs">     &lt;p&gt;&lt;strong&gt;Phase 2:&lt;/strong&gt; Decide if words are OLD or NEW&lt;/p&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="vs">     &lt;p&gt;Click Next to continue.&lt;/p&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="vs">     &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb2-22"><a href="#cb2-22"></a></span>
<span id="cb2-23"><a href="#cb2-23"></a>    <span class="co">// Page 2: Study Phase Instructions  </span></span>
<span id="cb2-24"><a href="#cb2-24"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="vs">      &lt;p&gt;During the study phase, you will see words appear one at a time. Read each word carefully and try to remember it.&lt;/p&gt;</span></span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="vs">     &lt;p&gt;Each word appears for 1 second.You will study about 15 words total.&lt;/p&gt;</span></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="vs">     &lt;p&gt;You do not need to press any keys during this phase.&lt;/p&gt;</span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="vs">     &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb2-29"><a href="#cb2-29"></a></span>
<span id="cb2-30"><a href="#cb2-30"></a>    <span class="co">// Page 3: Test Phase Instructions</span></span>
<span id="cb2-31"><a href="#cb2-31"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb2-32"><a href="#cb2-32"></a><span class="vs">      &lt;p&gt;During the test phase, you will see words one at a time. Some words are OLD (from the study list). Some words are NEW (not from the study list).&lt;/p&gt;</span></span>
<span id="cb2-33"><a href="#cb2-33"></a><span class="vs">     &lt;p&gt;Press the 'OLD' button if the word was old.&lt;/p&gt;</span></span>
<span id="cb2-34"><a href="#cb2-34"></a><span class="vs">     &lt;p&gt;Press the 'NEW' button if the word was new&lt;/p&gt;</span></span>
<span id="cb2-35"><a href="#cb2-35"></a><span class="vs">     &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb2-36"><a href="#cb2-36"></a></span>
<span id="cb2-37"><a href="#cb2-37"></a>    <span class="co">// Page 4: Stay focused</span></span>
<span id="cb2-38"><a href="#cb2-38"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb2-39"><a href="#cb2-39"></a><span class="vs">      &lt;p&gt;Trust your first instinct.&lt;/p&gt;</span></span>
<span id="cb2-40"><a href="#cb2-40"></a><span class="vs">      &lt;p&gt;If unsure, make your best guess.&lt;/p&gt;</span></span>
<span id="cb2-41"><a href="#cb2-41"></a><span class="vs">    &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb2-42"><a href="#cb2-42"></a></span>
<span id="cb2-43"><a href="#cb2-43"></a>    <span class="co">// Page 5: Final Instructions</span></span>
<span id="cb2-44"><a href="#cb2-44"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb2-45"><a href="#cb2-45"></a><span class="vs">      &lt;p&gt;Try to stay focused throughout the experiment. The experiment only takes a few minutes.&lt;/p&gt;</span></span>
<span id="cb2-46"><a href="#cb2-46"></a><span class="vs">      &lt;p&gt;Click Next to start the study phase.&lt;/p&gt;</span></span>
<span id="cb2-47"><a href="#cb2-47"></a><span class="vs">     &lt;/div&gt;`</span></span>
<span id="cb2-48"><a href="#cb2-48"></a>  ]<span class="op">,</span></span>
<span id="cb2-49"><a href="#cb2-49"></a>  <span class="dt">key_forward</span><span class="op">:</span> <span class="st">'ArrowRight'</span><span class="op">,</span></span>
<span id="cb2-50"><a href="#cb2-50"></a>  <span class="dt">key_backward</span><span class="op">:</span> <span class="st">'ArrowLeft'</span><span class="op">,</span></span>
<span id="cb2-51"><a href="#cb2-51"></a>  <span class="dt">allow_backward</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-52"><a href="#cb2-52"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-53"><a href="#cb2-53"></a>  <span class="dt">button_label_previous</span><span class="op">:</span> <span class="st">'Back'</span><span class="op">,</span></span>
<span id="cb2-54"><a href="#cb2-54"></a>  <span class="dt">button_label_next</span><span class="op">:</span> <span class="st">'Next'</span></span>
<span id="cb2-55"><a href="#cb2-55"></a>}<span class="op">;</span></span>
<span id="cb2-56"><a href="#cb2-56"></a></span>
<span id="cb2-57"><a href="#cb2-57"></a></span>
<span id="cb2-58"><a href="#cb2-58"></a><span class="kw">let</span> study <span class="op">=</span> {</span>
<span id="cb2-59"><a href="#cb2-59"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb2-60"><a href="#cb2-60"></a>    {</span>
<span id="cb2-61"><a href="#cb2-61"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb2-62"><a href="#cb2-62"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"+"</span><span class="op">,</span></span>
<span id="cb2-63"><a href="#cb2-63"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb2-64"><a href="#cb2-64"></a>      <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb2-65"><a href="#cb2-65"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb2-66"><a href="#cb2-66"></a>      <span class="dt">css_classess</span><span class="op">:</span> <span class="st">"wordStyle"</span></span>
<span id="cb2-67"><a href="#cb2-67"></a>    }<span class="op">,</span></span>
<span id="cb2-68"><a href="#cb2-68"></a>    {</span>
<span id="cb2-69"><a href="#cb2-69"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb2-70"><a href="#cb2-70"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb2-71"><a href="#cb2-71"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb2-72"><a href="#cb2-72"></a>      <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb2-73"><a href="#cb2-73"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb2-74"><a href="#cb2-74"></a>      <span class="dt">css_classess</span><span class="op">:</span> <span class="st">"wordStyle"</span></span>
<span id="cb2-75"><a href="#cb2-75"></a>    }</span>
<span id="cb2-76"><a href="#cb2-76"></a>  ]<span class="op">,</span></span>
<span id="cb2-77"><a href="#cb2-77"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb2-78"><a href="#cb2-78"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BED"</span>}<span class="op">,</span></span>
<span id="cb2-79"><a href="#cb2-79"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"REST"</span>}<span class="op">,</span></span>
<span id="cb2-80"><a href="#cb2-80"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"AWAKE"</span>}<span class="op">,</span></span>
<span id="cb2-81"><a href="#cb2-81"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"TIRED"</span>}<span class="op">,</span></span>
<span id="cb2-82"><a href="#cb2-82"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DREAM"</span>}<span class="op">,</span></span>
<span id="cb2-83"><a href="#cb2-83"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"WAKE"</span>}<span class="op">,</span></span>
<span id="cb2-84"><a href="#cb2-84"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SNOOZE"</span>}<span class="op">,</span></span>
<span id="cb2-85"><a href="#cb2-85"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLANKET"</span>}<span class="op">,</span></span>
<span id="cb2-86"><a href="#cb2-86"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DOZE"</span>}<span class="op">,</span></span>
<span id="cb2-87"><a href="#cb2-87"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SLUMBER"</span>}<span class="op">,</span></span>
<span id="cb2-88"><a href="#cb2-88"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SNORE"</span>}<span class="op">,</span></span>
<span id="cb2-89"><a href="#cb2-89"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"NAP"</span>}<span class="op">,</span></span>
<span id="cb2-90"><a href="#cb2-90"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"PEACE"</span>}<span class="op">,</span></span>
<span id="cb2-91"><a href="#cb2-91"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"YAWN"</span>}<span class="op">,</span></span>
<span id="cb2-92"><a href="#cb2-92"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DROWSY"</span>}</span>
<span id="cb2-93"><a href="#cb2-93"></a>  ]<span class="op">,</span></span>
<span id="cb2-94"><a href="#cb2-94"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb2-95"><a href="#cb2-95"></a>}</span>
<span id="cb2-96"><a href="#cb2-96"></a></span>
<span id="cb2-97"><a href="#cb2-97"></a><span class="kw">let</span> test <span class="op">=</span> {</span>
<span id="cb2-98"><a href="#cb2-98"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb2-99"><a href="#cb2-99"></a>    {</span>
<span id="cb2-100"><a href="#cb2-100"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlButtonResponse<span class="op">,</span></span>
<span id="cb2-101"><a href="#cb2-101"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb2-102"><a href="#cb2-102"></a>      <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb2-103"><a href="#cb2-103"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">"OLD"</span><span class="op">,</span> <span class="st">"NEW"</span>]<span class="op">,</span></span>
<span id="cb2-104"><a href="#cb2-104"></a>      <span class="dt">css_classess</span><span class="op">:</span> <span class="st">"wordStyle"</span></span>
<span id="cb2-105"><a href="#cb2-105"></a>    }</span>
<span id="cb2-106"><a href="#cb2-106"></a>  ]<span class="op">,</span></span>
<span id="cb2-107"><a href="#cb2-107"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb2-108"><a href="#cb2-108"></a>         <span class="co">// OLD WORDS </span></span>
<span id="cb2-109"><a href="#cb2-109"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BED"</span>}<span class="op">,</span></span>
<span id="cb2-110"><a href="#cb2-110"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"REST"</span>}<span class="op">,</span></span>
<span id="cb2-111"><a href="#cb2-111"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"AWAKE"</span>}<span class="op">,</span></span>
<span id="cb2-112"><a href="#cb2-112"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"TIRED"</span>}<span class="op">,</span></span>
<span id="cb2-113"><a href="#cb2-113"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DREAM"</span>}<span class="op">,</span></span>
<span id="cb2-114"><a href="#cb2-114"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"WAKE"</span>}<span class="op">,</span></span>
<span id="cb2-115"><a href="#cb2-115"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SNOOZE"</span>}<span class="op">,</span></span>
<span id="cb2-116"><a href="#cb2-116"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLANKET"</span>}<span class="op">,</span></span>
<span id="cb2-117"><a href="#cb2-117"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DOZE"</span>}<span class="op">,</span></span>
<span id="cb2-118"><a href="#cb2-118"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SLUMBER"</span>}<span class="op">,</span></span>
<span id="cb2-119"><a href="#cb2-119"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SNORE"</span>}<span class="op">,</span></span>
<span id="cb2-120"><a href="#cb2-120"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"NAP"</span>}<span class="op">,</span></span>
<span id="cb2-121"><a href="#cb2-121"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"PEACE"</span>}<span class="op">,</span></span>
<span id="cb2-122"><a href="#cb2-122"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"YAWN"</span>}<span class="op">,</span></span>
<span id="cb2-123"><a href="#cb2-123"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DROWSY"</span>}<span class="op">,</span></span>
<span id="cb2-124"><a href="#cb2-124"></a>        <span class="co">// NEW WORDS</span></span>
<span id="cb2-125"><a href="#cb2-125"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DOCTOR"</span>}<span class="op">,</span></span>
<span id="cb2-126"><a href="#cb2-126"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"NURSE"</span>}<span class="op">,</span></span>
<span id="cb2-127"><a href="#cb2-127"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SICK"</span>}<span class="op">,</span></span>
<span id="cb2-128"><a href="#cb2-128"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"LAWYER"</span>}<span class="op">,</span></span>
<span id="cb2-129"><a href="#cb2-129"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"MEDICINE"</span>}<span class="op">,</span></span>
<span id="cb2-130"><a href="#cb2-130"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"HEALTH"</span>}<span class="op">,</span></span>
<span id="cb2-131"><a href="#cb2-131"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"HOSPITAL"</span>}<span class="op">,</span></span>
<span id="cb2-132"><a href="#cb2-132"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DENTIST"</span>}<span class="op">,</span></span>
<span id="cb2-133"><a href="#cb2-133"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"PHYSICIAN"</span>}<span class="op">,</span></span>
<span id="cb2-134"><a href="#cb2-134"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"ILL"</span>}<span class="op">,</span></span>
<span id="cb2-135"><a href="#cb2-135"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"PATIENT"</span>}<span class="op">,</span></span>
<span id="cb2-136"><a href="#cb2-136"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"OFFICE"</span>}<span class="op">,</span></span>
<span id="cb2-137"><a href="#cb2-137"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"STETHOSCOPE"</span>}<span class="op">,</span></span>
<span id="cb2-138"><a href="#cb2-138"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SURGEON"</span>}<span class="op">,</span></span>
<span id="cb2-139"><a href="#cb2-139"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"CLINIC"</span>}<span class="op">,</span></span>
<span id="cb2-140"><a href="#cb2-140"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"CURE"</span>}<span class="op">,</span></span>
<span id="cb2-141"><a href="#cb2-141"></a>        <span class="co">// critical word </span></span>
<span id="cb2-142"><a href="#cb2-142"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SLEEP"</span>}</span>
<span id="cb2-143"><a href="#cb2-143"></a>  ]<span class="op">,</span></span>
<span id="cb2-144"><a href="#cb2-144"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb2-145"><a href="#cb2-145"></a>}</span>
<span id="cb2-146"><a href="#cb2-146"></a></span>
<span id="cb2-147"><a href="#cb2-147"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb2-148"><a href="#cb2-148"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb2-149"><a href="#cb2-149"></a>  welcome<span class="op">,</span></span>
<span id="cb2-150"><a href="#cb2-150"></a>  instructions<span class="op">,</span></span>
<span id="cb2-151"><a href="#cb2-151"></a>  study<span class="op">,</span></span>
<span id="cb2-152"><a href="#cb2-152"></a>  test</span>
<span id="cb2-153"><a href="#cb2-153"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The resulting data from running this code looks like this:</p>
<div class="dual-scroll-container">
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>rt</th>
<th>stimulus</th>
<th>response</th>
<th>trial_type</th>
<th>trial_index</th>
<th>plugin_version</th>
<th>time_elapsed</th>
<th>view_history</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>9689</td>
<td>Welcome …</td>
<td>a</td>
<td>html-keyboard-response</td>
<td>0</td>
<td>2.1.0</td>
<td>9690</td>
<td></td>
</tr>
<tr class="even">
<td>3973</td>
<td></td>
<td></td>
<td>instructions</td>
<td>1</td>
<td>2.1.0</td>
<td>14173</td>
<td><code>[{" page_index":0, "viewing_time":1014} ... { "page_index":4, "viewing_time":1093 }]</code></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>2</td>
<td>2.1.0</td>
<td>14685</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>SNOOZE</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>3</td>
<td>2.1.0</td>
<td>15952</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>4</td>
<td>2.1.0</td>
<td>16954</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>AWAKE</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>5</td>
<td>2.1.0</td>
<td>18205</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>6</td>
<td>2.1.0</td>
<td>19206</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>BLANKET</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>7</td>
<td>2.1.0</td>
<td>20491</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>8</td>
<td>2.1.0</td>
<td>21491</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>PEACE</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>9</td>
<td>2.1.0</td>
<td>22743</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>10</td>
<td>2.1.0</td>
<td>23743</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>SNORE</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>11</td>
<td>2.1.0</td>
<td>24994</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>12</td>
<td>2.1.0</td>
<td>26012</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>YAWN</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>13</td>
<td>2.1.0</td>
<td>27262</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>14</td>
<td>2.1.0</td>
<td>28264</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>SLUMBER</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>15</td>
<td>2.1.0</td>
<td>29531</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>16</td>
<td>2.1.0</td>
<td>30532</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>REST</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>17</td>
<td>2.1.0</td>
<td>31783</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>18</td>
<td>2.1.0</td>
<td>32801</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>TIRED</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>19</td>
<td>2.1.0</td>
<td>34051</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>20</td>
<td>2.1.0</td>
<td>35053</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>DROWSY</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>21</td>
<td>2.1.0</td>
<td>36320</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>22</td>
<td>2.1.0</td>
<td>37321</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>DREAM</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>23</td>
<td>2.1.0</td>
<td>38571</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>24</td>
<td>2.1.0</td>
<td>39573</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>WAKE</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>25</td>
<td>2.1.0</td>
<td>40823</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>26</td>
<td>2.1.0</td>
<td>41824</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>BED</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>27</td>
<td>2.1.0</td>
<td>43075</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>28</td>
<td>2.1.0</td>
<td>44092</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>NAP</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>29</td>
<td>2.1.0</td>
<td>45344</td>
<td></td>
</tr>
<tr class="odd">
<td>null</td>
<td>+</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>30</td>
<td>2.1.0</td>
<td>46347</td>
<td></td>
</tr>
<tr class="even">
<td>null</td>
<td>DOZE</td>
<td>null</td>
<td>html-keyboard-response</td>
<td>31</td>
<td>2.1.0</td>
<td>47615</td>
<td></td>
</tr>
<tr class="odd">
<td>2016</td>
<td>STETHOSCOPE</td>
<td>0</td>
<td>html-button-response</td>
<td>32</td>
<td>2.1.0</td>
<td>50150</td>
<td></td>
</tr>
<tr class="even">
<td>407</td>
<td>BLANKET</td>
<td>1</td>
<td>html-button-response</td>
<td>33</td>
<td>2.1.0</td>
<td>51072</td>
<td></td>
</tr>
<tr class="odd">
<td>313</td>
<td>DROWSY</td>
<td>0</td>
<td>html-button-response</td>
<td>34</td>
<td>2.1.0</td>
<td>51894</td>
<td></td>
</tr>
<tr class="even">
<td>302</td>
<td>REST</td>
<td>0</td>
<td>html-button-response</td>
<td>35</td>
<td>2.1.0</td>
<td>52700</td>
<td></td>
</tr>
<tr class="odd">
<td>328</td>
<td>HEALTH</td>
<td>0</td>
<td>html-button-response</td>
<td>36</td>
<td>2.1.0</td>
<td>53546</td>
<td></td>
</tr>
<tr class="even">
<td>362</td>
<td>SLUMBER</td>
<td>1</td>
<td>html-button-response</td>
<td>37</td>
<td>2.1.0</td>
<td>54413</td>
<td></td>
</tr>
<tr class="odd">
<td>250</td>
<td>PATIENT</td>
<td>0</td>
<td>html-button-response</td>
<td>38</td>
<td>2.1.0</td>
<td>55170</td>
<td></td>
</tr>
<tr class="even">
<td>388</td>
<td>YAWN</td>
<td>0</td>
<td>html-button-response</td>
<td>39</td>
<td>2.1.0</td>
<td>56072</td>
<td></td>
</tr>
<tr class="odd">
<td>412</td>
<td>DENTIST</td>
<td>0</td>
<td>html-button-response</td>
<td>40</td>
<td>2.1.0</td>
<td>56997</td>
<td></td>
</tr>
<tr class="even">
<td>568</td>
<td>ILL</td>
<td>0</td>
<td>html-button-response</td>
<td>41</td>
<td>2.1.0</td>
<td>58071</td>
<td></td>
</tr>
<tr class="odd">
<td>962</td>
<td>DREAM</td>
<td>0</td>
<td>html-button-response</td>
<td>42</td>
<td>2.1.0</td>
<td>59535</td>
<td></td>
</tr>
<tr class="even">
<td>433</td>
<td>SLEEP</td>
<td>1</td>
<td>html-button-response</td>
<td>43</td>
<td>2.1.0</td>
<td>60474</td>
<td></td>
</tr>
<tr class="odd">
<td>389</td>
<td>MEDICINE</td>
<td>1</td>
<td>html-button-response</td>
<td>44</td>
<td>2.1.0</td>
<td>61380</td>
<td></td>
</tr>
<tr class="even">
<td>426</td>
<td>LAWYER</td>
<td>1</td>
<td>html-button-response</td>
<td>45</td>
<td>2.1.0</td>
<td>62319</td>
<td></td>
</tr>
<tr class="odd">
<td>449</td>
<td>NAP</td>
<td>0</td>
<td>html-button-response</td>
<td>46</td>
<td>2.1.0</td>
<td>63275</td>
<td></td>
</tr>
<tr class="even">
<td>444</td>
<td>DOCTOR</td>
<td>0</td>
<td>html-button-response</td>
<td>47</td>
<td>2.1.0</td>
<td>64221</td>
<td></td>
</tr>
<tr class="odd">
<td>308</td>
<td>CURE</td>
<td>0</td>
<td>html-button-response</td>
<td>48</td>
<td>2.1.0</td>
<td>65034</td>
<td></td>
</tr>
<tr class="even">
<td>333</td>
<td>PEACE</td>
<td>0</td>
<td>html-button-response</td>
<td>49</td>
<td>2.1.0</td>
<td>65877</td>
<td></td>
</tr>
<tr class="odd">
<td>1072</td>
<td>OFFICE</td>
<td>0</td>
<td>html-button-response</td>
<td>50</td>
<td>2.1.0</td>
<td>67451</td>
<td></td>
</tr>
<tr class="even">
<td>544</td>
<td>TIRED</td>
<td>1</td>
<td>html-button-response</td>
<td>51</td>
<td>2.1.0</td>
<td>68524</td>
<td></td>
</tr>
<tr class="odd">
<td>359</td>
<td>SICK</td>
<td>1</td>
<td>html-button-response</td>
<td>52</td>
<td>2.1.0</td>
<td>69390</td>
<td></td>
</tr>
<tr class="even">
<td>417</td>
<td>NURSE</td>
<td>0</td>
<td>html-button-response</td>
<td>53</td>
<td>2.1.0</td>
<td>70313</td>
<td></td>
</tr>
<tr class="odd">
<td>533</td>
<td>AWAKE</td>
<td>0</td>
<td>html-button-response</td>
<td>54</td>
<td>2.1.0</td>
<td>71347</td>
<td></td>
</tr>
<tr class="even">
<td>285</td>
<td>SNOOZE</td>
<td>1</td>
<td>html-button-response</td>
<td>55</td>
<td>2.1.0</td>
<td>72134</td>
<td></td>
</tr>
<tr class="odd">
<td>241</td>
<td>HOSPITAL</td>
<td>0</td>
<td>html-button-response</td>
<td>56</td>
<td>2.1.0</td>
<td>72893</td>
<td></td>
</tr>
<tr class="even">
<td>476</td>
<td>SURGEON</td>
<td>1</td>
<td>html-button-response</td>
<td>57</td>
<td>2.1.0</td>
<td>73877</td>
<td></td>
</tr>
<tr class="odd">
<td>252</td>
<td>SNORE</td>
<td>0</td>
<td>html-button-response</td>
<td>58</td>
<td>2.1.0</td>
<td>74636</td>
<td></td>
</tr>
<tr class="even">
<td>315</td>
<td>BED</td>
<td>0</td>
<td>html-button-response</td>
<td>59</td>
<td>2.1.0</td>
<td>75467</td>
<td></td>
</tr>
<tr class="odd">
<td>409</td>
<td>WAKE</td>
<td>0</td>
<td>html-button-response</td>
<td>60</td>
<td>2.1.0</td>
<td>76379</td>
<td></td>
</tr>
<tr class="even">
<td>628</td>
<td>PHYSICIAN</td>
<td>0</td>
<td>html-button-response</td>
<td>61</td>
<td>2.1.0</td>
<td>77514</td>
<td></td>
</tr>
<tr class="odd">
<td>614</td>
<td>DOZE</td>
<td>0</td>
<td>html-button-response</td>
<td>62</td>
<td>2.1.0</td>
<td>78635</td>
<td></td>
</tr>
<tr class="even">
<td>1271</td>
<td>CLINIC</td>
<td>1</td>
<td>html-button-response</td>
<td>63</td>
<td>2.1.0</td>
<td>80410</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>If you’ve just collected this data how would you analyze it? How would you know which words were the studied words and which were the new ones? Which rows are part of the study phase versus the test phase? Which word is the critical lure?</p>
<p>Of course, you could go through this file row-by-row and figure it out, but if we had properly labelled each row, then we’ll have a much easier time analyzing the data when we have 100 of these files. This is exactly why we need to add our own data labels to make the dataset meaningful and analysis-ready. We’ll return to our memory experiment later to illustrate proper data labeling.</p>
</section>
<section id="saving-data" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="saving-data"><span class="header-section-number">14.2</span> Saving Data</h2>
<section id="where-data-lives-browser-memory-vs.-permanent-storage" class="level3" data-number="14.2.1">
<h3 data-number="14.2.1" class="anchored" data-anchor-id="where-data-lives-browser-memory-vs.-permanent-storage"><span class="header-section-number">14.2.1</span> Where Data Lives: Browser Memory vs.&nbsp;Permanent Storage</h3>
<p>A quick aside before discussing data labeling: It’s important to understand that when jsPsych collects this data, it’s initially stored only in the browser’s memory. This means the data exists only as long as the browser tab is open. If the participant closes the browser window or refreshes the page, all the data disappears forever.</p>
<p>For a real experiment, you need to transfer this data from the browser’s temporary memory to somewhere permanent. There are several options for permanent storage:</p>
<ol type="1">
<li>Save to a server database (most common for online studies)</li>
<li>Save to a file on a server (requires server setup)</li>
<li>Save locally to the participant’s computer (good for testing and development)</li>
</ol>
<p>In this chapter, we’ll focus on saving data locally, which is perfect for testing your experiments during development. Later in the book, we’ll cover how to set up server-based data storage for real data collection.</p>
</section>
<section id="saving-data-locally" class="level3" data-number="14.2.2">
<h3 data-number="14.2.2" class="anchored" data-anchor-id="saving-data-locally"><span class="header-section-number">14.2.2</span> Saving Data Locally</h3>
<p>For development and testing purposes, jsPsych provides a convenient way to save data directly to your computer using the <code>localSave()</code> method. This downloads the data as a file that you can open in Excel or other data analysis programs.</p>
<p>The syntax to call this function looks like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a>jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">'csv'</span><span class="op">,</span> <span class="st">'experiment_data.csv'</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>The <code>jsPsych.data.get()</code> part retrieves all of the data.</li>
<li>The <code>.localSave('csv', 'experiment_data.csv')</code> saves the data as a csv file, with the file name ‘experiment_data.csv’ (you can change that part to be whatever you want it to be).</li>
</ul>
<p>In order to give participants the ability to download their own data, however, we need to incorporate this method into our experiment as a custom trial.</p>
</section>
<section id="creating-a-data-saving-trial" class="level3" data-number="14.2.3">
<h3 data-number="14.2.3" class="anchored" data-anchor-id="creating-a-data-saving-trial"><span class="header-section-number">14.2.3</span> Creating a Data Saving Trial</h3>
<p>To save data, we need to create a special trial that gives participants a way to download their data. This requires some techniques we haven’t covered yet, so let’s break down each part:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="vs">    &lt;div style='text-align: center;'&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="vs">      &lt;button id='save-btn' style='padding: 10px 20px; font-size: 16px; cursor: pointer;'&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb4-15"><a href="#cb4-15"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'save-btn'</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'click'</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb4-16"><a href="#cb4-16"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">'csv'</span><span class="op">,</span> <span class="st">'experiment_data.csv'</span>)<span class="op">;</span></span>
<span id="cb4-17"><a href="#cb4-17"></a>    })<span class="op">;</span></span>
<span id="cb4-18"><a href="#cb4-18"></a>  }</span>
<span id="cb4-19"><a href="#cb4-19"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s understand what each part does:</p>
<section id="the-html-structure" class="level4" data-number="14.2.3.1">
<h4 data-number="14.2.3.1" class="anchored" data-anchor-id="the-html-structure"><span class="header-section-number">14.2.3.1</span> (1) The HTML Structure:</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1"></a>stimulus<span class="op">:</span> <span class="vs">`</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="vs">  &lt;div style='text-align: center;'&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="vs">    &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="vs">    &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="vs">    &lt;button id='save-btn' style='padding: 10px 20px; font-size: 16px; cursor: pointer;'&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="vs">      Click here to save the data locally</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="vs">    &lt;/button&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="vs">  `</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We create HTML that includes a clickable button. The button has an <code>id='save-btn'</code> so we can reference it later.</p>
</section>
<section id="disabling-keyboard-input" class="level4" data-number="14.2.3.2">
<h4 data-number="14.2.3.2" class="anchored" data-anchor-id="disabling-keyboard-input"><span class="header-section-number">14.2.3.2</span> (2) Disabling Keyboard Input</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a>choices<span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>trial_duration<span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This should be familiar:</p>
<ul>
<li>‘NO_KEYS’ means participants can’t press keys to continue</li>
<li>null duration means the trial stays active until we end it programmatically</li>
<li>This forces participants to use the button instead of keyboard shortcuts</li>
</ul>
<p>This means that participants cannot click or press anything to make this screen change.</p>
</section>
<section id="the-button-functionality" class="level4" data-number="14.2.3.3">
<h4 data-number="14.2.3.3" class="anchored" data-anchor-id="the-button-functionality"><span class="header-section-number">14.2.3.3</span> (3) The Button Functionality:</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1"></a>on_load<span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'save-btn'</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'click'</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb7-3"><a href="#cb7-3"></a>    jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">'csv'</span><span class="op">,</span> <span class="st">'experiment_data.csv'</span>)<span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  })<span class="op">;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is where the magic happens. The <code>on_load</code> is a parameter that takes a function. This function will run when the trial first appears on the screen.</p>
<p>The rest of the code is common JavaScript that finds our button element in the HTML and tells the webpage what to do when someone clicks that button:</p>
<ol type="1">
<li><code>document.getElementById('save-btn')</code> finds our button in the HTML</li>
<li><code>addEventListener('click', ...)</code> tells the button what to do when clicked and ‘listens’ or waits for a click</li>
<li><code>jsPsych.data.get().localSave('csv', 'experiment_data.csv')</code> downloads the data</li>
</ol>
<p><strong>Important</strong>: Don’t worry if you don’t fully understand (or remember) this code! Now that we’ve written this generic save trial once, we’ll be able to copy-paste it into our lab experiments and re-use it whenever we need it.</p>
</section>
</section>
<section id="save-data-example" class="level3" data-number="14.2.4">
<h3 data-number="14.2.4" class="anchored" data-anchor-id="save-data-example"><span class="header-section-number">14.2.4</span> Save Data Example</h3>
<p>Let’s see a full example of the local data saving. Take note that we need to add our <code>saveData</code> to the end of our timeline when we run our experiment.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb8-1"><a href="#cb8-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Saving Data<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>    </span>
<span id="cb8-9"><a href="#cb8-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-11"><a href="#cb8-11"></a></span>
<span id="cb8-12"><a href="#cb8-12"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1"></a><span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb9-6"><a href="#cb9-6"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="vs">             &lt;p&gt;Press any key to begin.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>}</span>
<span id="cb9-12"><a href="#cb9-12"></a></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="kw">const</span> questions <span class="op">=</span> {</span>
<span id="cb9-14"><a href="#cb9-14"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb9-15"><a href="#cb9-15"></a>        {</span>
<span id="cb9-16"><a href="#cb9-16"></a>            <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-17"><a href="#cb9-17"></a>            <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"question"</span>)<span class="op">,</span></span>
<span id="cb9-18"><a href="#cb9-18"></a>            <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]<span class="op">,</span></span>
<span id="cb9-19"><a href="#cb9-19"></a>            <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb9-20"><a href="#cb9-20"></a>        }</span>
<span id="cb9-21"><a href="#cb9-21"></a>    ]<span class="op">,</span></span>
<span id="cb9-22"><a href="#cb9-22"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb9-23"><a href="#cb9-23"></a>        {<span class="dt">question</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Do you like chocolate?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;`</span>}<span class="op">,</span></span>
<span id="cb9-24"><a href="#cb9-24"></a>        {<span class="dt">question</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Do you like vanilla?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;`</span>}<span class="op">,</span></span>
<span id="cb9-25"><a href="#cb9-25"></a>    ]</span>
<span id="cb9-26"><a href="#cb9-26"></a>}</span>
<span id="cb9-27"><a href="#cb9-27"></a></span>
<span id="cb9-28"><a href="#cb9-28"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb9-29"><a href="#cb9-29"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-30"><a href="#cb9-30"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb9-31"><a href="#cb9-31"></a><span class="vs">    &lt;div style='text-align: center;'&gt;</span></span>
<span id="cb9-32"><a href="#cb9-32"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb9-33"><a href="#cb9-33"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb9-34"><a href="#cb9-34"></a><span class="vs">      &lt;button id='save-btn' style='padding: 10px 20px; font-size: 16px; cursor: pointer;'&gt;</span></span>
<span id="cb9-35"><a href="#cb9-35"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb9-36"><a href="#cb9-36"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb9-37"><a href="#cb9-37"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb9-38"><a href="#cb9-38"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb9-39"><a href="#cb9-39"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span> <span class="co">// Disable keyboard responses</span></span>
<span id="cb9-40"><a href="#cb9-40"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="co">// Keep trial active indefinitely</span></span>
<span id="cb9-41"><a href="#cb9-41"></a>    <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb9-42"><a href="#cb9-42"></a>        <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'save-btn'</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'click'</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb9-43"><a href="#cb9-43"></a>            <span class="co">// Save the data as a CSV file</span></span>
<span id="cb9-44"><a href="#cb9-44"></a>            jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">'csv'</span><span class="op">,</span> <span class="st">'experiment_data.csv'</span>)<span class="op">;</span></span>
<span id="cb9-45"><a href="#cb9-45"></a>        })<span class="op">;</span></span>
<span id="cb9-46"><a href="#cb9-46"></a>    }</span>
<span id="cb9-47"><a href="#cb9-47"></a>}<span class="op">;</span></span>
<span id="cb9-48"><a href="#cb9-48"></a></span>
<span id="cb9-49"><a href="#cb9-49"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(</span>
<span id="cb9-50"><a href="#cb9-50"></a>    [</span>
<span id="cb9-51"><a href="#cb9-51"></a>        welcome<span class="op">,</span></span>
<span id="cb9-52"><a href="#cb9-52"></a>        questions<span class="op">,</span></span>
<span id="cb9-53"><a href="#cb9-53"></a>        saveData</span>
<span id="cb9-54"><a href="#cb9-54"></a>    ]</span>
<span id="cb9-55"><a href="#cb9-55"></a>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div id="demo-container-savedata" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-savedata" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// 2. Define our trials\nconst welcome = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p>Welcome to the Experiment!</p>\n             <p>Press any key to begin.</p>`,\n    choices: \'ALL_KEYS\',\n    post_trial_gap: 1000\n}\n\nconst questions = {\n    timeline: [\n        {\n            type: jsPsychHtmlKeyboardResponse,\n            stimulus: jsPsych.timelineVariable(\'question\'),\n            choices: [\'y\', \'n\'],\n            post_trial_gap: 250\n        }\n    ],\n    timeline_variables: [\n        {question: `<p>Do you like chocolate?</p><p>Press Y for yes, N for no.</p>`},\n        {question: `<p>Do you like vanilla?</p><p>Press Y for yes, N for no.</p>`},\n    ]\n}\n\nconst saveData = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `\n    <div style=\'text-align: center;\'>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=\'save-btn\' style=\'padding: 10px 20px; font-size: 16px; cursor: pointer;\'>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n    choices: \'NO_KEYS\', // Disable keyboard responses\n    trial_duration: null, // Keep trial active indefinitely\n    on_load: function() {\n        document.getElementById(\'save-btn\').addEventListener(\'click\', function() {\n            // Save the data as a CSV file\n            jsPsych.data.get().localSave(\'csv\', \'experiment_data.csv\');\n        });\n    }\n};\n\njsPsych.run(\n    [\n        welcome,\n        questions,\n        saveData\n    ]\n);\n  \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-savedata');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-savedata" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// 2. Define our trials
const welcome = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p>Welcome to the Experiment!</p>
             <p>Press any key to begin.</p>`,
    choices: 'ALL_KEYS',
    post_trial_gap: 1000
}

const questions = {
    timeline: [
        {
            type: jsPsychHtmlKeyboardResponse,
            stimulus: jsPsych.timelineVariable('question'),
            choices: ['y', 'n'],
            post_trial_gap: 250
        }
    ],
    timeline_variables: [
        {question: `<p>Do you like chocolate?</p><p>Press Y for yes, N for no.</p>`},
        {question: `<p>Do you like vanilla?</p><p>Press Y for yes, N for no.</p>`},
    ]
}

const saveData = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `
    <div style='text-align: center;'>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id='save-btn' style='padding: 10px 20px; font-size: 16px; cursor: pointer;'>
        Click here to save the data locally
      </button>
    </div>
  `,
    choices: 'NO_KEYS', // Disable keyboard responses
    trial_duration: null, // Keep trial active indefinitely
    on_load: function() {
        document.getElementById('save-btn').addEventListener('click', function() {
            // Save the data as a CSV file
            jsPsych.data.get().localSave('csv', 'experiment_data.csv');
        });
    }
};

jsPsych.run(
    [
        welcome,
        questions,
        saveData
    ]
);
  
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-savedata&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-savedata&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>We’ll use this pattern throughout the course for testing and development. Note that <code>localSave()</code> only works for local testing and development. For actual data collection with participants, you’ll need a more robust solution for storing data permanently on a server.</p>
</section>
</section>
<section id="labeling-data" class="level2" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="labeling-data"><span class="header-section-number">14.3</span> Labeling Data</h2>
<p>While jsPsych automatically saves basic information, notice what’s missing from our first data table above. Looking at the data, we can see that trial 1 showed a question about chocolate and the participant pressed ‘y’, while trial 2 asked about vanilla and they pressed ‘n’. However, we have no idea what these questions were actually asking (we have to read the full HTML stimulus), what each response means, or how to categorize these trials for analysis.</p>
<p>This is where data labeling becomes important. We need to add meaningful information to each trial so that our data tells the complete story of what happened during the experiment.</p>
<section id="adding-context-with-the-data-parameter" class="level3" data-number="14.3.1">
<h3 data-number="14.3.1" class="anchored" data-anchor-id="adding-context-with-the-data-parameter"><span class="header-section-number">14.3.1</span> Adding Context with the <code>data</code> Parameter</h3>
<p>The <code>data</code> parameter is always available and allows us to add custom information to any trial. Whenever we add a <code>data</code> parameter, jsPsych creates a new column with that name and adds that label when it’s present. The <code>data</code> parameter takes an object with key-value pairs. Each key-value pair indicates the column label (key) and the value that should be included in that column, on that row (value).</p>
<p>Let’s look at the first example from above and try to improve our data by adding some context:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">const</span> question1 <span class="op">=</span> {</span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like chocolate?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]<span class="op">,</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb11-6"><a href="#cb11-6"></a>    <span class="dt">question_type</span><span class="op">:</span> <span class="st">'preference'</span><span class="op">,</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>    <span class="dt">food_item</span><span class="op">:</span> <span class="st">'chocolate'</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>  }</span>
<span id="cb11-9"><a href="#cb11-9"></a>}<span class="op">;</span></span>
<span id="cb11-10"><a href="#cb11-10"></a></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="kw">const</span> question2 <span class="op">=</span> {</span>
<span id="cb11-12"><a href="#cb11-12"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like vanilla?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]<span class="op">,</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb11-16"><a href="#cb11-16"></a>    <span class="dt">question_type</span><span class="op">:</span> <span class="st">'preference'</span><span class="op">,</span></span>
<span id="cb11-17"><a href="#cb11-17"></a>    <span class="dt">food_item</span><span class="op">:</span> <span class="st">'vanilla'</span></span>
<span id="cb11-18"><a href="#cb11-18"></a>  }</span>
<span id="cb11-19"><a href="#cb11-19"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now our CSV output becomes much more informative:</p>
<div class="dual-scroll-container">
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>trial_type</th>
<th>trial_index</th>
<th>time_elapsed</th>
<th>rt</th>
<th>stimulus</th>
<th>response</th>
<th>question_type</th>
<th>food_item</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>html-keyboard-response</td>
<td>0</td>
<td>1247</td>
<td>1247</td>
<td><code>&lt;p&gt;Welcome...&lt;/p&gt;</code></td>
<td>” ”</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>html-keyboard-response</td>
<td>1</td>
<td>3891</td>
<td>2644</td>
<td><code>&lt;p&gt;Do you like chocolate?&lt;/p&gt;...</code></td>
<td>y</td>
<td>preference</td>
<td>chocolate</td>
</tr>
<tr class="odd">
<td>html-keyboard-response</td>
<td>2</td>
<td>6234</td>
<td>2343</td>
<td><code>&lt;p&gt;Do you like vanilla?&lt;/p&gt;...</code></td>
<td>n</td>
<td>preference</td>
<td>vanilla</td>
</tr>
</tbody>
</table>
</div>
<p>Notice how our custom data (<code>question_type</code> and <code>food_item</code>) appears as new columns in the CSV. The <code>welcome</code> trial has empty cells for these columns because we didn’t add this data to that trial. Now, in your analysis software you could filter it by indicating that you only want to see rows where <code>question_type</code> is equal to <code>"preference"</code>. That would filter out the instructions and leave you with just the analysis-relevant questions.</p>
<p>I could also use the <code>food_item</code> column to determine which question was asked on each row without having to figure it out from the <code>stimulus</code> HTML; Much better!</p>
</section>
<section id="adding-data-to-timelines" class="level3" data-number="14.3.2">
<h3 data-number="14.3.2" class="anchored" data-anchor-id="adding-data-to-timelines"><span class="header-section-number">14.3.2</span> Adding Data to Timelines</h3>
<p>One of the powerful features of jsPsych’s data system is that you can add data labels to entire timelines. When you add data to a timeline, that information is automatically included in every trial within that timeline. This creates a hierarchical data system where information can be applied at different levels.</p>
<p>Consider this example where we’re organizing our questions into blocks:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">const</span> preference_block <span class="op">=</span> {</span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb12-3"><a href="#cb12-3"></a>    {</span>
<span id="cb12-4"><a href="#cb12-4"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like chocolate?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]</span>
<span id="cb12-7"><a href="#cb12-7"></a>    }<span class="op">,</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>    {</span>
<span id="cb12-9"><a href="#cb12-9"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like vanilla?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]</span>
<span id="cb12-12"><a href="#cb12-12"></a>    }</span>
<span id="cb12-13"><a href="#cb12-13"></a>  ]<span class="op">,</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb12-15"><a href="#cb12-15"></a>    <span class="dt">block_type</span><span class="op">:</span> <span class="st">'preferences'</span><span class="op">,</span></span>
<span id="cb12-16"><a href="#cb12-16"></a>    <span class="dt">category</span><span class="op">:</span> <span class="st">'food'</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>  }</span>
<span id="cb12-18"><a href="#cb12-18"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, both trials will automatically include <code>block_type: 'preferences'</code> and <code>category: 'food'</code> in their data. This saves you from having to add the same information to each individual trial.</p>
<p>You can combine timeline-level and trial-level data. The trial-level data will be added to the timeline-level data:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">const</span> preference_block <span class="op">=</span> {</span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb13-3"><a href="#cb13-3"></a>    {</span>
<span id="cb13-4"><a href="#cb13-4"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like chocolate?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]<span class="op">,</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>      <span class="dt">data</span><span class="op">:</span> { <span class="dt">food_item</span><span class="op">:</span> <span class="st">'chocolate'</span> }</span>
<span id="cb13-8"><a href="#cb13-8"></a>    }<span class="op">,</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>    {</span>
<span id="cb13-10"><a href="#cb13-10"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb13-11"><a href="#cb13-11"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like vanilla?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb13-12"><a href="#cb13-12"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]<span class="op">,</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>      <span class="dt">data</span><span class="op">:</span> { <span class="dt">food_item</span><span class="op">:</span> <span class="st">'vanilla'</span> }</span>
<span id="cb13-14"><a href="#cb13-14"></a>    }</span>
<span id="cb13-15"><a href="#cb13-15"></a>  ]<span class="op">,</span></span>
<span id="cb13-16"><a href="#cb13-16"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb13-17"><a href="#cb13-17"></a>    <span class="dt">block_type</span><span class="op">:</span> <span class="st">'preferences'</span><span class="op">,</span></span>
<span id="cb13-18"><a href="#cb13-18"></a>    <span class="dt">category</span><span class="op">:</span> <span class="st">'food'</span></span>
<span id="cb13-19"><a href="#cb13-19"></a>  }</span>
<span id="cb13-20"><a href="#cb13-20"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Each trial will now have both the timeline data (<code>block_type</code> and <code>category</code>) and its specific trial data (<code>food_item</code>). This hierarchical approach lets you organize your data labels efficiently, applying broad categories at the timeline level and specific details at the trial level.</p>
</section>
<section id="dynamic-data-with-timeline-variables" class="level3" data-number="14.3.3">
<h3 data-number="14.3.3" class="anchored" data-anchor-id="dynamic-data-with-timeline-variables"><span class="header-section-number">14.3.3</span> Dynamic Data with Timeline Variables</h3>
<p>When you’re using timeline variables to create multiple similar trials, you can use <code>jsPsych.timelineVariable()</code> to dynamically pull data labels from your timeline variables. This is extremely powerful for creating well-labeled data without repetition.</p>
<p>Here’s an example using timeline variables for our food preference questions. Take note of how I include relevant data labels in the <code>timeline_variables</code> and reference them in my <code>data</code> object after.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1"></a><span class="co">// Create the timeline</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw">const</span> preference_block <span class="op">=</span> {</span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb14-4"><a href="#cb14-4"></a>      {</span>
<span id="cb14-5"><a href="#cb14-5"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'question'</span>)<span class="op">,</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]<span class="op">,</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>      <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb14-9"><a href="#cb14-9"></a>        <span class="dt">food_item</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'food_item'</span>)<span class="op">,</span></span>
<span id="cb14-10"><a href="#cb14-10"></a>        <span class="dt">food_category</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'food_category'</span>)<span class="op">,</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>        <span class="dt">expected_popularity</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'expected_popularity'</span>)<span class="op">,</span></span>
<span id="cb14-12"><a href="#cb14-12"></a>        <span class="dt">question_type</span><span class="op">:</span> <span class="st">'preference'</span></span>
<span id="cb14-13"><a href="#cb14-13"></a>      }</span>
<span id="cb14-14"><a href="#cb14-14"></a>  }]<span class="op">,</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb14-16"><a href="#cb14-16"></a>      {</span>
<span id="cb14-17"><a href="#cb14-17"></a>        <span class="dt">question</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like chocolate?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb14-18"><a href="#cb14-18"></a>        <span class="dt">food_item</span><span class="op">:</span> <span class="st">'chocolate'</span><span class="op">,</span></span>
<span id="cb14-19"><a href="#cb14-19"></a>        <span class="dt">food_category</span><span class="op">:</span> <span class="st">'sweet'</span><span class="op">,</span></span>
<span id="cb14-20"><a href="#cb14-20"></a>        <span class="dt">expected_popularity</span><span class="op">:</span> <span class="st">'high'</span></span>
<span id="cb14-21"><a href="#cb14-21"></a>      }<span class="op">,</span></span>
<span id="cb14-22"><a href="#cb14-22"></a>      {</span>
<span id="cb14-23"><a href="#cb14-23"></a>        <span class="dt">question</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like vanilla?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb14-24"><a href="#cb14-24"></a>        <span class="dt">food_item</span><span class="op">:</span> <span class="st">'vanilla'</span><span class="op">,</span></span>
<span id="cb14-25"><a href="#cb14-25"></a>        <span class="dt">food_category</span><span class="op">:</span> <span class="st">'sweet'</span><span class="op">,</span></span>
<span id="cb14-26"><a href="#cb14-26"></a>        <span class="dt">expected_popularity</span><span class="op">:</span> <span class="st">'medium'</span></span>
<span id="cb14-27"><a href="#cb14-27"></a>      }<span class="op">,</span></span>
<span id="cb14-28"><a href="#cb14-28"></a>      {</span>
<span id="cb14-29"><a href="#cb14-29"></a>        <span class="dt">question</span><span class="op">:</span> <span class="st">'&lt;p&gt;Do you like broccoli?&lt;/p&gt;&lt;p&gt;Press Y for yes, N for no.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb14-30"><a href="#cb14-30"></a>        <span class="dt">food_item</span><span class="op">:</span> <span class="st">'broccoli'</span><span class="op">,</span></span>
<span id="cb14-31"><a href="#cb14-31"></a>        <span class="dt">food_category</span><span class="op">:</span> <span class="st">'vegetable'</span><span class="op">,</span></span>
<span id="cb14-32"><a href="#cb14-32"></a>        <span class="dt">expected_popularity</span><span class="op">:</span> <span class="st">'low'</span></span>
<span id="cb14-33"><a href="#cb14-33"></a>      }</span>
<span id="cb14-34"><a href="#cb14-34"></a>  ]<span class="op">,</span></span>
<span id="cb14-35"><a href="#cb14-35"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb14-36"><a href="#cb14-36"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb14-37"><a href="#cb14-37"></a>    <span class="dt">block_type</span><span class="op">:</span> <span class="st">'food_preferences'</span><span class="op">,</span></span>
<span id="cb14-38"><a href="#cb14-38"></a>    <span class="dt">block_number</span><span class="op">:</span> <span class="dv">1</span></span>
<span id="cb14-39"><a href="#cb14-39"></a>  }</span>
<span id="cb14-40"><a href="#cb14-40"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This approach automatically pulls the appropriate data labels for each trial from the timeline variables. Each trial will have:</p>
<ol type="1">
<li>Timeline-level data:<code>block_type: 'food_preferences'</code> and <code>block_number: 1</code></li>
<li>Static trial data: <code>question_type: 'preference'</code></li>
<li>Dynamic trial data: <code>food_item</code>, <code>food_category</code>, and <code>expected_popularity</code> that change based on the timeline variable for that specific trial</li>
</ol>
<p>The resulting data will look like this:</p>
<div class="dual-scroll-container">
<table class="caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th>trial_type</th>
<th>trial_index</th>
<th>stimulus</th>
<th>response</th>
<th>block_type</th>
<th>block_number</th>
<th>question_type</th>
<th>food_item</th>
<th>food_category</th>
<th>expected_popularity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>html-keyboard-response</td>
<td>0</td>
<td><code>&lt;p&gt;Do you like chocolate?&lt;/p&gt;...</code></td>
<td>y</td>
<td>food_preferences</td>
<td>1</td>
<td>preference</td>
<td>chocolate</td>
<td>sweet</td>
<td>high</td>
</tr>
<tr class="even">
<td>html-keyboard-response</td>
<td>1</td>
<td><code>&lt;p&gt;Do you like broccoli?&lt;/p&gt;...</code></td>
<td>n</td>
<td>food_preferences</td>
<td>1</td>
<td>preference</td>
<td>broccoli</td>
<td>vegetable</td>
<td>low</td>
</tr>
<tr class="odd">
<td>html-keyboard-response</td>
<td>2</td>
<td><code>&lt;p&gt;Do you like vanilla?&lt;/p&gt;...</code></td>
<td>y</td>
<td>food_preferences</td>
<td>1</td>
<td>preference</td>
<td>vanilla</td>
<td>sweet</td>
<td>medium</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="saving-trial-parameters" class="level3" data-number="14.3.4">
<h3 data-number="14.3.4" class="anchored" data-anchor-id="saving-trial-parameters"><span class="header-section-number">14.3.4</span> Saving Trial Parameters</h3>
</section>
<section id="adding-global-properties-to-all-trials" class="level3" data-number="14.3.5">
<h3 data-number="14.3.5" class="anchored" data-anchor-id="adding-global-properties-to-all-trials"><span class="header-section-number">14.3.5</span> Adding Global Properties to All Trials</h3>
<p>One of the most common uses of the data module is adding information that applies to every trial in your experiment. The <code>jsPsych.data.addProperties()</code> function lets you add properties to all trials, both past and future ones.</p>
<p>This function takes an object as input, with each key-value pair indicating a new column and value to add to every row.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1"></a><span class="co">// Add these properties to every trial in the experiment</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">addProperties</span>({</span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="dt">subject_id</span><span class="op">:</span> <span class="st">"001"</span><span class="op">,</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="dt">condition</span><span class="op">:</span> <span class="st">"control"</span><span class="op">,</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="dt">experiment_version</span><span class="op">:</span> <span class="st">"2.1"</span><span class="op">,</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>  <span class="dt">session_date</span><span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">'T'</span>)[<span class="dv">0</span>] <span class="co">// YYYY-MM-DD format</span></span>
<span id="cb15-7"><a href="#cb15-7"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is useful because it’s (1) retroactive: Even trials that already happened get these properties and (2) it’s persistent: All future trials automatically include these properties</p>
<p>Here are some common properties that you might want to add to all trials:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1"></a>jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">addProperties</span>({</span>
<span id="cb16-2"><a href="#cb16-2"></a>    <span class="co">// Participant identification</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>    <span class="dt">subject_id</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">randomID</span>(<span class="dv">8</span>)<span class="op">,</span></span>
<span id="cb16-4"><a href="#cb16-4"></a></span>
<span id="cb16-5"><a href="#cb16-5"></a>    <span class="co">// Experimental design</span></span>
<span id="cb16-6"><a href="#cb16-6"></a>    <span class="dt">condition</span><span class="op">:</span> <span class="st">"experimental"</span><span class="op">,</span> <span class="co">// or randomly assigned</span></span>
<span id="cb16-7"><a href="#cb16-7"></a>    <span class="dt">experiment_version</span><span class="op">:</span> <span class="st">"1.0"</span><span class="op">,</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>    <span class="dt">researcher</span><span class="op">:</span> <span class="st">"Dr. Smith"</span><span class="op">,</span></span>
<span id="cb16-9"><a href="#cb16-9"></a></span>
<span id="cb16-10"><a href="#cb16-10"></a>    <span class="co">// Session information</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>    <span class="dt">session_date</span><span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">'T'</span>)[<span class="dv">0</span>]<span class="op">,</span> <span class="co">// YYYY-MM-DD format</span></span>
<span id="cb16-12"><a href="#cb16-12"></a>    <span class="dt">start_time</span><span class="op">:</span>  <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">'T'</span>)[<span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb16-13"><a href="#cb16-13"></a>    <span class="dt">browser</span><span class="op">:</span> <span class="bu">navigator</span><span class="op">.</span><span class="at">userAgent</span><span class="op">,</span></span>
<span id="cb16-14"><a href="#cb16-14"></a>    <span class="dt">screen_width</span><span class="op">:</span> <span class="bu">screen</span><span class="op">.</span><span class="at">width</span><span class="op">,</span></span>
<span id="cb16-15"><a href="#cb16-15"></a>    <span class="dt">screen_height</span><span class="op">:</span> <span class="bu">screen</span><span class="op">.</span><span class="at">height</span></span>
<span id="cb16-16"><a href="#cb16-16"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="data-labels-full-example" class="level3" data-number="14.3.6">
<h3 data-number="14.3.6" class="anchored" data-anchor-id="data-labels-full-example"><span class="header-section-number">14.3.6</span> Data Labels: Full Example</h3>
<p>Now let’s return to our memory experiment and apply the concepts we’ve just learned to apply proper data labels.</p>
<p>For this example, I’ve added (1) global data properties that get added to every row, (2) trial- and timeline-level data labels, and (3) added the save data trial to the end of the experiment.</p>
<p>You can try running this in the example below and you can save the resulting data to your computer.</p>
<div class="cell">
<style type="text/css">
[id^="cb18-"]:nth-child(n+4):nth-child(-n+19),
[id^="cb18-"]:nth-child(n+27):nth-child(-n+30),
[id^="cb18-"]:nth-child(n+76):nth-child(-n+79),
[id^="cb18-"]:nth-child(n+91):nth-child(-n+94),
[id^="cb18-"]:nth-child(n+103):nth-child(-n+108),
[id^="cb18-"]:nth-child(n+139):nth-child(-n+145),
[id^="cb18-"]:nth-child(n+188):nth-child(-n+207),
[id^="cb18-"]:nth-child(n+215):nth-child(-n+215) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}
</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb17-1"><a href="#cb17-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Saving Data<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8"></a>    </span>
<span id="cb17-9"><a href="#cb17-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-11"><a href="#cb17-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-12"><a href="#cb17-12"></a></span>
<span id="cb17-13"><a href="#cb17-13"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb17-14"><a href="#cb17-14"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb17-17"><a href="#cb17-17"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb17-18"><a href="#cb17-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-19"><a href="#cb17-19"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb17-20"><a href="#cb17-20"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1"></a><span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a>jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">addProperties</span>({</span>
<span id="cb18-5"><a href="#cb18-5"></a>    <span class="co">// Participant identification</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>    <span class="dt">subject_id</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">randomID</span>(<span class="dv">8</span>)<span class="op">,</span></span>
<span id="cb18-7"><a href="#cb18-7"></a></span>
<span id="cb18-8"><a href="#cb18-8"></a>    <span class="co">// Experimental design</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>    <span class="dt">condition</span><span class="op">:</span> <span class="st">"experimental"</span><span class="op">,</span> <span class="co">// or randomly assigned</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>    <span class="dt">experiment_version</span><span class="op">:</span> <span class="st">"1.0"</span><span class="op">,</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>    <span class="dt">researcher</span><span class="op">:</span> <span class="st">"Dr. Smith"</span><span class="op">,</span></span>
<span id="cb18-12"><a href="#cb18-12"></a></span>
<span id="cb18-13"><a href="#cb18-13"></a>    <span class="co">// Session information</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>    <span class="dt">session_date</span><span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">'T'</span>)[<span class="dv">0</span>]<span class="op">,</span> <span class="co">// YYYY-MM-DD format</span></span>
<span id="cb18-15"><a href="#cb18-15"></a>    <span class="dt">start_time</span><span class="op">:</span>  <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">'T'</span>)[<span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>    <span class="dt">browser</span><span class="op">:</span> <span class="bu">navigator</span><span class="op">.</span><span class="at">userAgent</span><span class="op">,</span></span>
<span id="cb18-17"><a href="#cb18-17"></a>    <span class="dt">screen_width</span><span class="op">:</span> <span class="bu">screen</span><span class="op">.</span><span class="at">width</span><span class="op">,</span></span>
<span id="cb18-18"><a href="#cb18-18"></a>    <span class="dt">screen_height</span><span class="op">:</span> <span class="bu">screen</span><span class="op">.</span><span class="at">height</span></span>
<span id="cb18-19"><a href="#cb18-19"></a>})<span class="op">;</span></span>
<span id="cb18-20"><a href="#cb18-20"></a></span>
<span id="cb18-21"><a href="#cb18-21"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb18-22"><a href="#cb18-22"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb18-23"><a href="#cb18-23"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb18-24"><a href="#cb18-24"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`Welcome to the Experiment! Press any key to begin.`</span><span class="op">,</span></span>
<span id="cb18-25"><a href="#cb18-25"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb18-26"><a href="#cb18-26"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb18-27"><a href="#cb18-27"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb18-28"><a href="#cb18-28"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"welcome"</span><span class="op">,</span></span>
<span id="cb18-29"><a href="#cb18-29"></a>    <span class="dt">trial_type</span><span class="op">:</span> <span class="st">"instruction"</span></span>
<span id="cb18-30"><a href="#cb18-30"></a>  }</span>
<span id="cb18-31"><a href="#cb18-31"></a>}</span>
<span id="cb18-32"><a href="#cb18-32"></a></span>
<span id="cb18-33"><a href="#cb18-33"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb18-34"><a href="#cb18-34"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb18-35"><a href="#cb18-35"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb18-36"><a href="#cb18-36"></a>    <span class="co">// Page 1: Welcome and Overview</span></span>
<span id="cb18-37"><a href="#cb18-37"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb18-38"><a href="#cb18-38"></a><span class="vs">      &lt;p&gt;You will participate in a memory experiment with two phases:&lt;/p&gt;</span></span>
<span id="cb18-39"><a href="#cb18-39"></a><span class="vs">     &lt;p&gt;&lt;strong&gt;Phase 1:&lt;/strong&gt; Study a list of words&lt;/p&gt;</span></span>
<span id="cb18-40"><a href="#cb18-40"></a><span class="vs">     &lt;p&gt;&lt;strong&gt;Phase 2:&lt;/strong&gt; Decide if words are OLD or NEW&lt;/p&gt;</span></span>
<span id="cb18-41"><a href="#cb18-41"></a><span class="vs">     &lt;p&gt;Click Next to continue.&lt;/p&gt;</span></span>
<span id="cb18-42"><a href="#cb18-42"></a><span class="vs">     &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb18-43"><a href="#cb18-43"></a></span>
<span id="cb18-44"><a href="#cb18-44"></a>    <span class="co">// Page 2: Study Phase Instructions  </span></span>
<span id="cb18-45"><a href="#cb18-45"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb18-46"><a href="#cb18-46"></a><span class="vs">      &lt;p&gt;During the study phase, you will see words appear one at a time. Read each word carefully and try to remember it.&lt;/p&gt;</span></span>
<span id="cb18-47"><a href="#cb18-47"></a><span class="vs">     &lt;p&gt;Each word appears for 1 second. You will study about 15 words total.&lt;/p&gt;</span></span>
<span id="cb18-48"><a href="#cb18-48"></a><span class="vs">     &lt;p&gt;You do not need to press any keys during this phase.&lt;/p&gt;</span></span>
<span id="cb18-49"><a href="#cb18-49"></a><span class="vs">     &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb18-50"><a href="#cb18-50"></a></span>
<span id="cb18-51"><a href="#cb18-51"></a>    <span class="co">// Page 3: Test Phase Instructions</span></span>
<span id="cb18-52"><a href="#cb18-52"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb18-53"><a href="#cb18-53"></a><span class="vs">      &lt;p&gt;During the test phase, you will see words one at a time. Some words are OLD (from the study list). Some words are NEW (not from the study list).&lt;/p&gt;</span></span>
<span id="cb18-54"><a href="#cb18-54"></a><span class="vs">     &lt;p&gt;Press the 'OLD' button if the word was old.&lt;/p&gt;</span></span>
<span id="cb18-55"><a href="#cb18-55"></a><span class="vs">     &lt;p&gt;Press the 'NEW' button if the word was new&lt;/p&gt;</span></span>
<span id="cb18-56"><a href="#cb18-56"></a><span class="vs">     &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb18-57"><a href="#cb18-57"></a></span>
<span id="cb18-58"><a href="#cb18-58"></a>    <span class="co">// Page 4: Stay focused</span></span>
<span id="cb18-59"><a href="#cb18-59"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb18-60"><a href="#cb18-60"></a><span class="vs">      &lt;p&gt;Trust your first instinct.&lt;/p&gt;</span></span>
<span id="cb18-61"><a href="#cb18-61"></a><span class="vs">      &lt;p&gt;If unsure, make your best guess.&lt;/p&gt;</span></span>
<span id="cb18-62"><a href="#cb18-62"></a><span class="vs">    &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb18-63"><a href="#cb18-63"></a></span>
<span id="cb18-64"><a href="#cb18-64"></a>    <span class="co">// Page 5: Final Instructions</span></span>
<span id="cb18-65"><a href="#cb18-65"></a>    <span class="vs">`&lt;div class='instructionStyle'&gt;</span></span>
<span id="cb18-66"><a href="#cb18-66"></a><span class="vs">      &lt;p&gt;Try to stay focused throughout the experiment. The experiment only takes a few minutes.&lt;/p&gt;</span></span>
<span id="cb18-67"><a href="#cb18-67"></a><span class="vs">      &lt;p&gt;Click Next to start the study phase.&lt;/p&gt;</span></span>
<span id="cb18-68"><a href="#cb18-68"></a><span class="vs">     &lt;/div&gt;`</span></span>
<span id="cb18-69"><a href="#cb18-69"></a>  ]<span class="op">,</span></span>
<span id="cb18-70"><a href="#cb18-70"></a>  <span class="dt">key_forward</span><span class="op">:</span> <span class="st">'ArrowRight'</span><span class="op">,</span></span>
<span id="cb18-71"><a href="#cb18-71"></a>  <span class="dt">key_backward</span><span class="op">:</span> <span class="st">'ArrowLeft'</span><span class="op">,</span></span>
<span id="cb18-72"><a href="#cb18-72"></a>  <span class="dt">allow_backward</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb18-73"><a href="#cb18-73"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb18-74"><a href="#cb18-74"></a>  <span class="dt">button_label_previous</span><span class="op">:</span> <span class="st">'Back'</span><span class="op">,</span></span>
<span id="cb18-75"><a href="#cb18-75"></a>  <span class="dt">button_label_next</span><span class="op">:</span> <span class="st">'Next'</span><span class="op">,</span></span>
<span id="cb18-76"><a href="#cb18-76"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb18-77"><a href="#cb18-77"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"instructions"</span><span class="op">,</span></span>
<span id="cb18-78"><a href="#cb18-78"></a>    <span class="dt">trial_type</span><span class="op">:</span> <span class="st">"instruction"</span></span>
<span id="cb18-79"><a href="#cb18-79"></a>  }</span>
<span id="cb18-80"><a href="#cb18-80"></a>}<span class="op">;</span></span>
<span id="cb18-81"><a href="#cb18-81"></a></span>
<span id="cb18-82"><a href="#cb18-82"></a><span class="kw">let</span> study <span class="op">=</span> {</span>
<span id="cb18-83"><a href="#cb18-83"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb18-84"><a href="#cb18-84"></a>    {</span>
<span id="cb18-85"><a href="#cb18-85"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb18-86"><a href="#cb18-86"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"+"</span><span class="op">,</span></span>
<span id="cb18-87"><a href="#cb18-87"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb18-88"><a href="#cb18-88"></a>      <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb18-89"><a href="#cb18-89"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb18-90"><a href="#cb18-90"></a>      <span class="dt">css_classes</span><span class="op">:</span> <span class="st">"wordStyle"</span><span class="op">,</span></span>
<span id="cb18-91"><a href="#cb18-91"></a>      <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb18-92"><a href="#cb18-92"></a>        <span class="dt">phase</span><span class="op">:</span> <span class="st">"study"</span><span class="op">,</span></span>
<span id="cb18-93"><a href="#cb18-93"></a>        <span class="dt">trial_type</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb18-94"><a href="#cb18-94"></a>      }</span>
<span id="cb18-95"><a href="#cb18-95"></a>    }<span class="op">,</span></span>
<span id="cb18-96"><a href="#cb18-96"></a>    {</span>
<span id="cb18-97"><a href="#cb18-97"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb18-98"><a href="#cb18-98"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb18-99"><a href="#cb18-99"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb18-100"><a href="#cb18-100"></a>      <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb18-101"><a href="#cb18-101"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb18-102"><a href="#cb18-102"></a>      <span class="dt">css_classes</span><span class="op">:</span> <span class="st">"wordStyle"</span><span class="op">,</span></span>
<span id="cb18-103"><a href="#cb18-103"></a>      <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb18-104"><a href="#cb18-104"></a>        <span class="dt">phase</span><span class="op">:</span> <span class="st">"study"</span><span class="op">,</span></span>
<span id="cb18-105"><a href="#cb18-105"></a>        <span class="dt">trial_type</span><span class="op">:</span> <span class="st">"word_presentation"</span><span class="op">,</span></span>
<span id="cb18-106"><a href="#cb18-106"></a>        <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb18-107"><a href="#cb18-107"></a>        <span class="dt">word_type</span><span class="op">:</span> <span class="st">"study_item"</span></span>
<span id="cb18-108"><a href="#cb18-108"></a>      }</span>
<span id="cb18-109"><a href="#cb18-109"></a>    }</span>
<span id="cb18-110"><a href="#cb18-110"></a>  ]<span class="op">,</span></span>
<span id="cb18-111"><a href="#cb18-111"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb18-112"><a href="#cb18-112"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BED"</span>}<span class="op">,</span></span>
<span id="cb18-113"><a href="#cb18-113"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"REST"</span>}<span class="op">,</span></span>
<span id="cb18-114"><a href="#cb18-114"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"AWAKE"</span>}<span class="op">,</span></span>
<span id="cb18-115"><a href="#cb18-115"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"TIRED"</span>}<span class="op">,</span></span>
<span id="cb18-116"><a href="#cb18-116"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DREAM"</span>}<span class="op">,</span></span>
<span id="cb18-117"><a href="#cb18-117"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"WAKE"</span>}<span class="op">,</span></span>
<span id="cb18-118"><a href="#cb18-118"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SNOOZE"</span>}<span class="op">,</span></span>
<span id="cb18-119"><a href="#cb18-119"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLANKET"</span>}<span class="op">,</span></span>
<span id="cb18-120"><a href="#cb18-120"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DOZE"</span>}<span class="op">,</span></span>
<span id="cb18-121"><a href="#cb18-121"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SLUMBER"</span>}<span class="op">,</span></span>
<span id="cb18-122"><a href="#cb18-122"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SNORE"</span>}<span class="op">,</span></span>
<span id="cb18-123"><a href="#cb18-123"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"NAP"</span>}<span class="op">,</span></span>
<span id="cb18-124"><a href="#cb18-124"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"PEACE"</span>}<span class="op">,</span></span>
<span id="cb18-125"><a href="#cb18-125"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"YAWN"</span>}<span class="op">,</span></span>
<span id="cb18-126"><a href="#cb18-126"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DROWSY"</span>}</span>
<span id="cb18-127"><a href="#cb18-127"></a>  ]<span class="op">,</span></span>
<span id="cb18-128"><a href="#cb18-128"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb18-129"><a href="#cb18-129"></a>}</span>
<span id="cb18-130"><a href="#cb18-130"></a></span>
<span id="cb18-131"><a href="#cb18-131"></a><span class="kw">let</span> test <span class="op">=</span> {</span>
<span id="cb18-132"><a href="#cb18-132"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb18-133"><a href="#cb18-133"></a>    {</span>
<span id="cb18-134"><a href="#cb18-134"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlButtonResponse<span class="op">,</span></span>
<span id="cb18-135"><a href="#cb18-135"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb18-136"><a href="#cb18-136"></a>      <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb18-137"><a href="#cb18-137"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">"OLD"</span><span class="op">,</span> <span class="st">"NEW"</span>]<span class="op">,</span></span>
<span id="cb18-138"><a href="#cb18-138"></a>      <span class="dt">css_classes</span><span class="op">:</span> <span class="st">"wordStyle"</span><span class="op">,</span></span>
<span id="cb18-139"><a href="#cb18-139"></a>      <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb18-140"><a href="#cb18-140"></a>        <span class="dt">phase</span><span class="op">:</span> <span class="st">"test"</span><span class="op">,</span></span>
<span id="cb18-141"><a href="#cb18-141"></a>        <span class="dt">trial_type</span><span class="op">:</span> <span class="st">"recognition_test"</span><span class="op">,</span></span>
<span id="cb18-142"><a href="#cb18-142"></a>        <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb18-143"><a href="#cb18-143"></a>        <span class="dt">word_type</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word_type"</span>)<span class="op">,</span></span>
<span id="cb18-144"><a href="#cb18-144"></a>        <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb18-145"><a href="#cb18-145"></a>      }</span>
<span id="cb18-146"><a href="#cb18-146"></a>    }</span>
<span id="cb18-147"><a href="#cb18-147"></a>  ]<span class="op">,</span></span>
<span id="cb18-148"><a href="#cb18-148"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb18-149"><a href="#cb18-149"></a>         <span class="co">// OLD WORDS (should respond "OLD")</span></span>
<span id="cb18-150"><a href="#cb18-150"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BED"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-151"><a href="#cb18-151"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"REST"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-152"><a href="#cb18-152"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"AWAKE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-153"><a href="#cb18-153"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"TIRED"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-154"><a href="#cb18-154"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DREAM"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-155"><a href="#cb18-155"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"WAKE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-156"><a href="#cb18-156"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SNOOZE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-157"><a href="#cb18-157"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLANKET"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-158"><a href="#cb18-158"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DOZE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-159"><a href="#cb18-159"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SLUMBER"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-160"><a href="#cb18-160"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SNORE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-161"><a href="#cb18-161"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"NAP"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-162"><a href="#cb18-162"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"PEACE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-163"><a href="#cb18-163"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"YAWN"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-164"><a href="#cb18-164"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DROWSY"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"OLD"</span>}<span class="op">,</span></span>
<span id="cb18-165"><a href="#cb18-165"></a>        <span class="co">// NEW WORDS (should respond "NEW")</span></span>
<span id="cb18-166"><a href="#cb18-166"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DOCTOR"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-167"><a href="#cb18-167"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"NURSE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-168"><a href="#cb18-168"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SICK"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-169"><a href="#cb18-169"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"LAWYER"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-170"><a href="#cb18-170"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"MEDICINE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-171"><a href="#cb18-171"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"HEALTH"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-172"><a href="#cb18-172"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"HOSPITAL"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-173"><a href="#cb18-173"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"DENTIST"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-174"><a href="#cb18-174"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"PHYSICIAN"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-175"><a href="#cb18-175"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"ILL"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-176"><a href="#cb18-176"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"PATIENT"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-177"><a href="#cb18-177"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"OFFICE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-178"><a href="#cb18-178"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"STETHOSCOPE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-179"><a href="#cb18-179"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SURGEON"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-180"><a href="#cb18-180"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"CLINIC"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-181"><a href="#cb18-181"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"CURE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}<span class="op">,</span></span>
<span id="cb18-182"><a href="#cb18-182"></a>        <span class="co">// CRITICAL LURE (never studied, but related to study words)</span></span>
<span id="cb18-183"><a href="#cb18-183"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"SLEEP"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"critical_lure"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"NEW"</span>}</span>
<span id="cb18-184"><a href="#cb18-184"></a>  ]<span class="op">,</span></span>
<span id="cb18-185"><a href="#cb18-185"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb18-186"><a href="#cb18-186"></a>}</span>
<span id="cb18-187"><a href="#cb18-187"></a></span>
<span id="cb18-188"><a href="#cb18-188"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb18-189"><a href="#cb18-189"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb18-190"><a href="#cb18-190"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb18-191"><a href="#cb18-191"></a><span class="vs">    &lt;div style='text-align: center;'&gt;</span></span>
<span id="cb18-192"><a href="#cb18-192"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb18-193"><a href="#cb18-193"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb18-194"><a href="#cb18-194"></a><span class="vs">      &lt;button id='save-btn' style='padding: 10px 20px; font-size: 16px; cursor: pointer;'&gt;</span></span>
<span id="cb18-195"><a href="#cb18-195"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb18-196"><a href="#cb18-196"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb18-197"><a href="#cb18-197"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb18-198"><a href="#cb18-198"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb18-199"><a href="#cb18-199"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span> <span class="co">// Disable keyboard responses</span></span>
<span id="cb18-200"><a href="#cb18-200"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="co">// Keep trial active indefinitely</span></span>
<span id="cb18-201"><a href="#cb18-201"></a>    <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb18-202"><a href="#cb18-202"></a>        <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'save-btn'</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'click'</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb18-203"><a href="#cb18-203"></a>            <span class="co">// Save the data as a CSV file</span></span>
<span id="cb18-204"><a href="#cb18-204"></a>            jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">'csv'</span><span class="op">,</span> <span class="st">'recognition_data.csv'</span>)<span class="op">;</span></span>
<span id="cb18-205"><a href="#cb18-205"></a>        })<span class="op">;</span></span>
<span id="cb18-206"><a href="#cb18-206"></a>    }</span>
<span id="cb18-207"><a href="#cb18-207"></a>}<span class="op">;</span></span>
<span id="cb18-208"><a href="#cb18-208"></a></span>
<span id="cb18-209"><a href="#cb18-209"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb18-210"><a href="#cb18-210"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb18-211"><a href="#cb18-211"></a>  welcome<span class="op">,</span></span>
<span id="cb18-212"><a href="#cb18-212"></a>  instructions<span class="op">,</span></span>
<span id="cb18-213"><a href="#cb18-213"></a>  study<span class="op">,</span></span>
<span id="cb18-214"><a href="#cb18-214"></a>  test<span class="op">,</span></span>
<span id="cb18-215"><a href="#cb18-215"></a>  saveData</span>
<span id="cb18-216"><a href="#cb18-216"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div id="demo-container-fullexample" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-fullexample" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n\njsPsych.data.addProperties({\n    // Participant identification\n    subject_id: jsPsych.randomization.randomID(8),\n\n    // Experimental design\n    condition: \'experimental\', // or randomly assigned\n    experiment_version: \'1.0\',\n    researcher: \'Dr. Smith\',\n\n    // Session information\n    session_date: new Date().toISOString().split(\'T\')[0], // YYYY-MM-DD format\n    start_time:  new Date().toISOString().split(\'T\')[1],\n    browser: navigator.userAgent,\n    screen_width: screen.width,\n    screen_height: screen.height\n});\n\n// 2. Define our trials\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `Welcome to the Experiment! Press any key to begin.`,\n  choices: \'ALL_KEYS\', \n  post_trial_gap: 500,\n  data: {\n    phase: \'welcome\',\n    trial_type: \'instruction\'\n  }\n}\n\nconst instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    // Page 1: Welcome and Overview\n    `<div class=\'instructionStyle\'>\n      <p>You will participate in a memory experiment with two phases:</p>\n     <p><strong>Phase 1:</strong> Study a list of words</p>\n     <p><strong>Phase 2:</strong> Decide if words are OLD or NEW</p>\n     <p>Click Next to continue.</p>\n     </div>`,\n\n    // Page 2: Study Phase Instructions  \n    `<div class=\'instructionStyle\'>\n      <p>During the study phase, you will see words appear one at a time. Read each word carefully and try to remember it.</p>\n     <p>Each word appears for 1 second. You will study about 15 words total.</p>\n     <p>You do not need to press any keys during this phase.</p>\n     </div>`,\n\n    // Page 3: Test Phase Instructions\n    `<div class=\'instructionStyle\'>\n      <p>During the test phase, you will see words one at a time. Some words are OLD (from the study list). Some words are NEW (not from the study list).</p>\n     <p>Press the \'OLD\' button if the word was old.</p>\n     <p>Press the \'NEW\' button if the word was new</p>\n     </div>`,\n\n    // Page 4: Stay focused\n    `<div class=\'instructionStyle\'>\n      <p>Trust your first instinct.</p>\n      <p>If unsure, make your best guess.</p>\n    </div>`,\n\n    // Page 5: Final Instructions\n    `<div class=\'instructionStyle\'>\n      <p>Try to stay focused throughout the experiment. The experiment only takes a few minutes.</p>\n      <p>Click Next to start the study phase.</p>\n     </div>`\n  ],\n  key_forward: \'ArrowRight\',\n  key_backward: \'ArrowLeft\',\n  allow_backward: true,\n  show_clickable_nav: true,\n  button_label_previous: \'Back\',\n  button_label_next: \'Next\',\n  data: {\n    phase: \'instructions\',\n    trial_type: \'instruction\'\n  }\n};\n\nlet study = {\n  timeline: [\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: \'+\',\n      choices: \'NO_KEYS\',\n      post_trial_gap: 250,\n      trial_duration: 500,\n      css_classes: \'wordStyle\',\n      data: {\n        phase: \'study\',\n        trial_type: \'fixation\'\n      }\n    },\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: jsPsych.timelineVariable(\'word\'),\n      choices: \'NO_KEYS\',\n      post_trial_gap: 500,\n      trial_duration: 1000,\n      css_classes: \'wordStyle\',\n      data: {\n        phase: \'study\',\n        trial_type: \'word_presentation\',\n        word: jsPsych.timelineVariable(\'word\'),\n        word_type: \'study_item\'\n      }\n    }\n  ],\n  timeline_variables: [\n        {word: \'BED\'},\n        {word: \'REST\'},\n        {word: \'AWAKE\'},\n        {word: \'TIRED\'},\n        {word: \'DREAM\'},\n        {word: \'WAKE\'},\n        {word: \'SNOOZE\'},\n        {word: \'BLANKET\'},\n        {word: \'DOZE\'},\n        {word: \'SLUMBER\'},\n        {word: \'SNORE\'},\n        {word: \'NAP\'},\n        {word: \'PEACE\'},\n        {word: \'YAWN\'},\n        {word: \'DROWSY\'}\n  ],\n  randomize_order: true\n}\n\nlet test = {\n  timeline: [\n    {\n      type: jsPsychHtmlButtonResponse,\n      stimulus: jsPsych.timelineVariable(\'word\'),\n      post_trial_gap: 500,\n      choices: [\'OLD\', \'NEW\'],\n      css_classes: \'wordStyle\',\n      data: {\n        phase: \'test\',\n        trial_type: \'recognition_test\',\n        word: jsPsych.timelineVariable(\'word\'),\n        word_type: jsPsych.timelineVariable(\'word_type\'),\n        correct_response: jsPsych.timelineVariable(\'correct_response\')\n      }\n    }\n  ],\n  timeline_variables: [\n         // OLD WORDS (should respond \'OLD\')\n        {word: \'BED\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'REST\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'AWAKE\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'TIRED\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'DREAM\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'WAKE\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'SNOOZE\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'BLANKET\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'DOZE\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'SLUMBER\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'SNORE\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'NAP\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'PEACE\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'YAWN\', word_type: \'old\', correct_response: \'OLD\'},\n        {word: \'DROWSY\', word_type: \'old\', correct_response: \'OLD\'},\n        // NEW WORDS (should respond \'NEW\')\n        {word: \'DOCTOR\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'NURSE\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'SICK\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'LAWYER\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'MEDICINE\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'HEALTH\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'HOSPITAL\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'DENTIST\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'PHYSICIAN\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'ILL\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'PATIENT\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'OFFICE\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'STETHOSCOPE\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'SURGEON\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'CLINIC\', word_type: \'new\', correct_response: \'NEW\'},\n        {word: \'CURE\', word_type: \'new\', correct_response: \'NEW\'},\n        // CRITICAL LURE (never studied, but related to study words)\n        {word: \'SLEEP\', word_type: \'critical_lure\', correct_response: \'NEW\'}\n  ],\n  randomize_order: true\n}\n\nconst saveData = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `\n    <div style=\'text-align: center;\'>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=\'save-btn\' style=\'padding: 10px 20px; font-size: 16px; cursor: pointer;\'>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n    choices: \'NO_KEYS\', // Disable keyboard responses\n    trial_duration: null, // Keep trial active indefinitely\n    on_load: function() {\n        document.getElementById(\'save-btn\').addEventListener(\'click\', function() {\n            // Save the data as a CSV file\n            jsPsych.data.get().localSave(\'csv\', \'recognition_data.csv\');\n        });\n    }\n};\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n  welcome,\n  instructions,\n  study,\n  test,\n  saveData\n]);\n\n  \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-fullexample');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-fullexample" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});




jsPsych.data.addProperties({
    // Participant identification
    subject_id: jsPsych.randomization.randomID(8),

    // Experimental design
    condition: 'experimental', // or randomly assigned
    experiment_version: '1.0',
    researcher: 'Dr. Smith',

    // Session information
    session_date: new Date().toISOString().split('T')[0], // YYYY-MM-DD format
    start_time:  new Date().toISOString().split('T')[1],
    browser: navigator.userAgent,
    screen_width: screen.width,
    screen_height: screen.height
});

// 2. Define our trials
const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `Welcome to the Experiment! Press any key to begin.`,
  choices: 'ALL_KEYS', 
  post_trial_gap: 500,
  data: {
    phase: 'welcome',
    trial_type: 'instruction'
  }
}

const instructions = {
  type: jsPsychInstructions,
  pages: [
    // Page 1: Welcome and Overview
    `<div class='instructionStyle'>
      <p>You will participate in a memory experiment with two phases:</p>
     <p><strong>Phase 1:</strong> Study a list of words</p>
     <p><strong>Phase 2:</strong> Decide if words are OLD or NEW</p>
     <p>Click Next to continue.</p>
     </div>`,

    // Page 2: Study Phase Instructions  
    `<div class='instructionStyle'>
      <p>During the study phase, you will see words appear one at a time. Read each word carefully and try to remember it.</p>
     <p>Each word appears for 1 second. You will study about 15 words total.</p>
     <p>You do not need to press any keys during this phase.</p>
     </div>`,

    // Page 3: Test Phase Instructions
    `<div class='instructionStyle'>
      <p>During the test phase, you will see words one at a time. Some words are OLD (from the study list). Some words are NEW (not from the study list).</p>
     <p>Press the 'OLD' button if the word was old.</p>
     <p>Press the 'NEW' button if the word was new</p>
     </div>`,

    // Page 4: Stay focused
    `<div class='instructionStyle'>
      <p>Trust your first instinct.</p>
      <p>If unsure, make your best guess.</p>
    </div>`,

    // Page 5: Final Instructions
    `<div class='instructionStyle'>
      <p>Try to stay focused throughout the experiment. The experiment only takes a few minutes.</p>
      <p>Click Next to start the study phase.</p>
     </div>`
  ],
  key_forward: 'ArrowRight',
  key_backward: 'ArrowLeft',
  allow_backward: true,
  show_clickable_nav: true,
  button_label_previous: 'Back',
  button_label_next: 'Next',
  data: {
    phase: 'instructions',
    trial_type: 'instruction'
  }
};

let study = {
  timeline: [
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: '+',
      choices: 'NO_KEYS',
      post_trial_gap: 250,
      trial_duration: 500,
      css_classes: 'wordStyle',
      data: {
        phase: 'study',
        trial_type: 'fixation'
      }
    },
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: jsPsych.timelineVariable('word'),
      choices: 'NO_KEYS',
      post_trial_gap: 500,
      trial_duration: 1000,
      css_classes: 'wordStyle',
      data: {
        phase: 'study',
        trial_type: 'word_presentation',
        word: jsPsych.timelineVariable('word'),
        word_type: 'study_item'
      }
    }
  ],
  timeline_variables: [
        {word: 'BED'},
        {word: 'REST'},
        {word: 'AWAKE'},
        {word: 'TIRED'},
        {word: 'DREAM'},
        {word: 'WAKE'},
        {word: 'SNOOZE'},
        {word: 'BLANKET'},
        {word: 'DOZE'},
        {word: 'SLUMBER'},
        {word: 'SNORE'},
        {word: 'NAP'},
        {word: 'PEACE'},
        {word: 'YAWN'},
        {word: 'DROWSY'}
  ],
  randomize_order: true
}

let test = {
  timeline: [
    {
      type: jsPsychHtmlButtonResponse,
      stimulus: jsPsych.timelineVariable('word'),
      post_trial_gap: 500,
      choices: ['OLD', 'NEW'],
      css_classes: 'wordStyle',
      data: {
        phase: 'test',
        trial_type: 'recognition_test',
        word: jsPsych.timelineVariable('word'),
        word_type: jsPsych.timelineVariable('word_type'),
        correct_response: jsPsych.timelineVariable('correct_response')
      }
    }
  ],
  timeline_variables: [
         // OLD WORDS (should respond 'OLD')
        {word: 'BED', word_type: 'old', correct_response: 'OLD'},
        {word: 'REST', word_type: 'old', correct_response: 'OLD'},
        {word: 'AWAKE', word_type: 'old', correct_response: 'OLD'},
        {word: 'TIRED', word_type: 'old', correct_response: 'OLD'},
        {word: 'DREAM', word_type: 'old', correct_response: 'OLD'},
        {word: 'WAKE', word_type: 'old', correct_response: 'OLD'},
        {word: 'SNOOZE', word_type: 'old', correct_response: 'OLD'},
        {word: 'BLANKET', word_type: 'old', correct_response: 'OLD'},
        {word: 'DOZE', word_type: 'old', correct_response: 'OLD'},
        {word: 'SLUMBER', word_type: 'old', correct_response: 'OLD'},
        {word: 'SNORE', word_type: 'old', correct_response: 'OLD'},
        {word: 'NAP', word_type: 'old', correct_response: 'OLD'},
        {word: 'PEACE', word_type: 'old', correct_response: 'OLD'},
        {word: 'YAWN', word_type: 'old', correct_response: 'OLD'},
        {word: 'DROWSY', word_type: 'old', correct_response: 'OLD'},
        // NEW WORDS (should respond 'NEW')
        {word: 'DOCTOR', word_type: 'new', correct_response: 'NEW'},
        {word: 'NURSE', word_type: 'new', correct_response: 'NEW'},
        {word: 'SICK', word_type: 'new', correct_response: 'NEW'},
        {word: 'LAWYER', word_type: 'new', correct_response: 'NEW'},
        {word: 'MEDICINE', word_type: 'new', correct_response: 'NEW'},
        {word: 'HEALTH', word_type: 'new', correct_response: 'NEW'},
        {word: 'HOSPITAL', word_type: 'new', correct_response: 'NEW'},
        {word: 'DENTIST', word_type: 'new', correct_response: 'NEW'},
        {word: 'PHYSICIAN', word_type: 'new', correct_response: 'NEW'},
        {word: 'ILL', word_type: 'new', correct_response: 'NEW'},
        {word: 'PATIENT', word_type: 'new', correct_response: 'NEW'},
        {word: 'OFFICE', word_type: 'new', correct_response: 'NEW'},
        {word: 'STETHOSCOPE', word_type: 'new', correct_response: 'NEW'},
        {word: 'SURGEON', word_type: 'new', correct_response: 'NEW'},
        {word: 'CLINIC', word_type: 'new', correct_response: 'NEW'},
        {word: 'CURE', word_type: 'new', correct_response: 'NEW'},
        // CRITICAL LURE (never studied, but related to study words)
        {word: 'SLEEP', word_type: 'critical_lure', correct_response: 'NEW'}
  ],
  randomize_order: true
}

const saveData = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `
    <div style='text-align: center;'>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id='save-btn' style='padding: 10px 20px; font-size: 16px; cursor: pointer;'>
        Click here to save the data locally
      </button>
    </div>
  `,
    choices: 'NO_KEYS', // Disable keyboard responses
    trial_duration: null, // Keep trial active indefinitely
    on_load: function() {
        document.getElementById('save-btn').addEventListener('click', function() {
            // Save the data as a CSV file
            jsPsych.data.get().localSave('csv', 'recognition_data.csv');
        });
    }
};

// 3. Run jsPsych with our trials
jsPsych.run([
  welcome,
  instructions,
  study,
  test,
  saveData
]);

  
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-fullexample&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-fullexample&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>Now, let’s look at the data that would result from this new labeling:</p>
<div class="dual-scroll-container">
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th>phase</th>
<th>trial_type</th>
<th>rt</th>
<th>stimulus</th>
<th>response</th>
<th>trial_index</th>
<th>plugin_version</th>
<th>time_elapsed</th>
<th>subject_id</th>
<th>condition</th>
<th>experiment_version</th>
<th>researcher</th>
<th>session_date</th>
<th>start_time</th>
<th>browser</th>
<th>screen_width</th>
<th>screen_height</th>
<th>view_history</th>
<th>word</th>
<th>word_type</th>
<th>correct_response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>welcome</td>
<td>html-keyboard-response</td>
<td>2257</td>
<td>Welcome to the Experiment! Press any key to begin.</td>
<td>f</td>
<td>0</td>
<td>2.1.0</td>
<td>2258</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>instructions</td>
<td>instructions</td>
<td>3088</td>
<td></td>
<td></td>
<td>1</td>
<td>2.1.0</td>
<td>5851</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td>[{“page_index”: 0,“viewing_time”: 1297} … {“page_index”: 4,“viewing_time”:384 }]</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>2</td>
<td>2.1.0</td>
<td>6356</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>WAKE</td>
<td>null</td>
<td>3</td>
<td>2.1.0</td>
<td>7621</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>WAKE</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>4</td>
<td>2.1.0</td>
<td>8692</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>DROWSY</td>
<td>null</td>
<td>5</td>
<td>2.1.0</td>
<td>9963</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>DROWSY</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>6</td>
<td>2.1.0</td>
<td>11012</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>SLUMBER</td>
<td>null</td>
<td>7</td>
<td>2.1.0</td>
<td>12269</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>SLUMBER</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>8</td>
<td>2.1.0</td>
<td>13286</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>DREAM</td>
<td>null</td>
<td>9</td>
<td>2.1.0</td>
<td>14651</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>DREAM</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>10</td>
<td>2.1.0</td>
<td>15691</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>BLANKET</td>
<td>null</td>
<td>11</td>
<td>2.1.0</td>
<td>16977</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>BLANKET</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>12</td>
<td>2.1.0</td>
<td>18010</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>TIRED</td>
<td>null</td>
<td>13</td>
<td>2.1.0</td>
<td>19285</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>TIRED</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>14</td>
<td>2.1.0</td>
<td>110847</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>YAWN</td>
<td>null</td>
<td>15</td>
<td>2.1.0</td>
<td>112112</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>YAWN</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>16</td>
<td>2.1.0</td>
<td>113136</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>BED</td>
<td>null</td>
<td>17</td>
<td>2.1.0</td>
<td>114391</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>BED</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>18</td>
<td>2.1.0</td>
<td>115456</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>DOZE</td>
<td>null</td>
<td>19</td>
<td>2.1.0</td>
<td>116821</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>DOZE</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>20</td>
<td>2.1.0</td>
<td>117823</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>AWAKE</td>
<td>null</td>
<td>21</td>
<td>2.1.0</td>
<td>119200</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>AWAKE</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>22</td>
<td>2.1.0</td>
<td>120220</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>NAP</td>
<td>null</td>
<td>23</td>
<td>2.1.0</td>
<td>121481</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>NAP</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>24</td>
<td>2.1.0</td>
<td>122498</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>SNORE</td>
<td>null</td>
<td>25</td>
<td>2.1.0</td>
<td>123824</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>SNORE</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>26</td>
<td>2.1.0</td>
<td>124842</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>SNOOZE</td>
<td>null</td>
<td>27</td>
<td>2.1.0</td>
<td>126112</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>SNOOZE</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>28</td>
<td>2.1.0</td>
<td>127132</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>PEACE</td>
<td>null</td>
<td>29</td>
<td>2.1.0</td>
<td>128385</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>PEACE</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>+</td>
<td>null</td>
<td>30</td>
<td>2.1.0</td>
<td>129418</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>study</td>
<td>html-keyboard-response</td>
<td>null</td>
<td>REST</td>
<td>null</td>
<td>31</td>
<td>2.1.0</td>
<td>130701</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>REST</td>
<td>study_item</td>
<td></td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>3542</td>
<td>HEALTH</td>
<td>0</td>
<td>32</td>
<td>2.1.0</td>
<td>134745</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>HEALTH</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>611</td>
<td>BED</td>
<td>1</td>
<td>33</td>
<td>2.1.0</td>
<td>135857</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>BED</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>289</td>
<td>TIRED</td>
<td>0</td>
<td>34</td>
<td>2.1.0</td>
<td>136658</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>TIRED</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>279</td>
<td>REST</td>
<td>0</td>
<td>35</td>
<td>2.1.0</td>
<td>137459</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>REST</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>763</td>
<td>HOSPITAL</td>
<td>1</td>
<td>36</td>
<td>2.1.0</td>
<td>138731</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>HOSPITAL</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>366</td>
<td>DOZE</td>
<td>0</td>
<td>37</td>
<td>2.1.0</td>
<td>139620</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>DOZE</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>455</td>
<td>SURGEON</td>
<td>0</td>
<td>38</td>
<td>2.1.0</td>
<td>140587</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>SURGEON</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>326</td>
<td>SNORE</td>
<td>0</td>
<td>39</td>
<td>2.1.0</td>
<td>141428</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>SNORE</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>386</td>
<td>CURE</td>
<td>1</td>
<td>40</td>
<td>2.1.0</td>
<td>142322</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>CURE</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>361</td>
<td>AWAKE</td>
<td>0</td>
<td>41</td>
<td>2.1.0</td>
<td>143198</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>AWAKE</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>431</td>
<td>DROWSY</td>
<td>0</td>
<td>42</td>
<td>2.1.0</td>
<td>144140</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>DROWSY</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>646</td>
<td>SICK</td>
<td>0</td>
<td>43</td>
<td>2.1.0</td>
<td>145288</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>SICK</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>531</td>
<td>OFFICE</td>
<td>0</td>
<td>44</td>
<td>2.1.0</td>
<td>146344</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>OFFICE</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>385</td>
<td>PATIENT</td>
<td>0</td>
<td>45</td>
<td>2.1.0</td>
<td>147269</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>PATIENT</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>363</td>
<td>DOCTOR</td>
<td>0</td>
<td>46</td>
<td>2.1.0</td>
<td>148150</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>DOCTOR</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>363</td>
<td>LAWYER</td>
<td>0</td>
<td>47</td>
<td>2.1.0</td>
<td>149049</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>LAWYER</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>505</td>
<td>ILL</td>
<td>1</td>
<td>48</td>
<td>2.1.0</td>
<td>150077</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>ILL</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>369</td>
<td>BLANKET</td>
<td>1</td>
<td>49</td>
<td>2.1.0</td>
<td>150959</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>BLANKET</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>316</td>
<td>YAWN</td>
<td>1</td>
<td>50</td>
<td>2.1.0</td>
<td>151792</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>YAWN</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>563</td>
<td>PEACE</td>
<td>0</td>
<td>51</td>
<td>2.1.0</td>
<td>152871</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>PEACE</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>434</td>
<td>CLINIC</td>
<td>0</td>
<td>52</td>
<td>2.1.0</td>
<td>153813</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>CLINIC</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>387</td>
<td>SLEEP</td>
<td>0</td>
<td>53</td>
<td>2.1.0</td>
<td>154751</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>SLEEP</td>
<td>critical_lure</td>
<td>NEW</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>469</td>
<td>SLUMBER</td>
<td>0</td>
<td>54</td>
<td>2.1.0</td>
<td>155731</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>SLUMBER</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>470</td>
<td>NURSE</td>
<td>0</td>
<td>55</td>
<td>2.1.0</td>
<td>156717</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>NURSE</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>368</td>
<td>SNOOZE</td>
<td>0</td>
<td>56</td>
<td>2.1.0</td>
<td>157603</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>SNOOZE</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>351</td>
<td>DREAM</td>
<td>1</td>
<td>57</td>
<td>2.1.0</td>
<td>158471</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>DREAM</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>400</td>
<td>NAP</td>
<td>1</td>
<td>58</td>
<td>2.1.0</td>
<td>159391</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>NAP</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>767</td>
<td>PHYSICIAN</td>
<td>0</td>
<td>59</td>
<td>2.1.0</td>
<td>160663</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>PHYSICIAN</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>526</td>
<td>WAKE</td>
<td>0</td>
<td>60</td>
<td>2.1.0</td>
<td>161700</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>WAKE</td>
<td>old</td>
<td>OLD</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>615</td>
<td>MEDICINE</td>
<td>0</td>
<td>61</td>
<td>2.1.0</td>
<td>162844</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>MEDICINE</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="odd">
<td>test</td>
<td>html-button-response</td>
<td>697</td>
<td>STETHOSCOPE</td>
<td>0</td>
<td>62</td>
<td>2.1.0</td>
<td>164044</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>STETHOSCOPE</td>
<td>new</td>
<td>NEW</td>
</tr>
<tr class="even">
<td>test</td>
<td>html-button-response</td>
<td>1572</td>
<td>DENTIST</td>
<td>0</td>
<td>63</td>
<td>2.1.0</td>
<td>166119</td>
<td>m8kx3pqw</td>
<td>experimental</td>
<td>1.0</td>
<td>Dr.&nbsp;Smith</td>
<td>2025-09-14</td>
<td>13:56:07.382Z</td>
<td>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0</td>
<td>1760</td>
<td>1100</td>
<td></td>
<td>DENTIST</td>
<td>new</td>
<td>NEW</td>
</tr>
</tbody>
</table>
</div>
<p>What we’ve improved:</p>
<p>Consistent phase labeling: Every trial now has a phase field (welcome, instructions, study, test)</p>
<p>Trial type classification: Each trial has a <code>trial_type</code> field describing what kind of trial it is (<code>fixation</code>, <code>word_presentation</code>, <code>recognition_test</code>, etc.)</p>
<p>Stimulus tracking: Test trials include the actual word being presented and its <code>word_type</code> (<code>old</code>, <code>new</code>, <code>critical_lure</code>)</p>
<p>Response accuracy: Each test trial includes the <code>correct_response</code>, making it easy to calculate accuracy later</p>
<p>Critical lure identification: The word <code>"SLEEP"</code> is specifically labeled as a <code>critical_lure</code>. This is the key manipulation in DRM experiments, as it’s semantically related to the study words but was never actually presented.</p>
<p>With these labels, analyzing your data becomes straightforward. You can easily filter trials by phase, calculate accuracy rates for different word types, and examine false alarm rates for critical lures.</p>
</section>
</section>
<section id="basic-data-updates-with-on_finish" class="level2" data-number="14.4">
<h2 data-number="14.4" class="anchored" data-anchor-id="basic-data-updates-with-on_finish"><span class="header-section-number">14.4</span> Basic Data Updates with <code>on_finish</code></h2>
<p>Often you’ll want to add computed information to your data after a trial completes (e.g., determine whether the response was accurate). The <code>on_finish</code> callback function is perfect for this. It receives the trial’s data as a parameter and allows you to modify or add to it.</p>
<p>When the <code>on_finish</code> function runs, it receives a <code>data</code> parameter that contains all the information collected during that specific trial. This includes:</p>
<p>Automatic jsPsych properties:</p>
<ul>
<li><code>trial_type</code>: The plugin that was used (e.g., “html-keyboard-response”)</li>
<li><code>trial_index</code>: The position of this trial in the experiment (starts at 0)</li>
<li><code>time_elapsed</code>: Total time since the experiment started (in milliseconds)</li>
<li><code>rt</code>: Response time for this trial (in milliseconds)</li>
<li><code>response</code>: The participant’s response (key pressed, button clicked, etc.)</li>
</ul>
<p>Properties from your trial definition:</p>
<ul>
<li>Any properties you added in the data object of your trial</li>
<li>Timeline variables that were active for this trial</li>
</ul>
<p>Properties from <code>addProperties()</code>:</p>
<ul>
<li>Any global properties you added (like <code>subject_id</code>, <code>condition</code>, etc.)</li>
</ul>
<p>First, here’s an example to show the proper syntax of adding the <code>on_finish</code> parameter:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">const</span> recognition_trial <span class="op">=</span> {</span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb20-3"><a href="#cb20-3"></a>    {</span>
<span id="cb20-4"><a href="#cb20-4"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb20-6"><a href="#cb20-6"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>      <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb20-8"><a href="#cb20-8"></a>        <span class="dt">task</span><span class="op">:</span> <span class="st">"recognition_test"</span><span class="op">,</span></span>
<span id="cb20-9"><a href="#cb20-9"></a>        <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>        <span class="dt">word_type</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word_type"</span>)<span class="op">,</span></span>
<span id="cb20-11"><a href="#cb20-11"></a>        <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb20-12"><a href="#cb20-12"></a>      }<span class="op">,</span></span>
<span id="cb20-13"><a href="#cb20-13"></a>      <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb20-14"><a href="#cb20-14"></a>          <span class="co">// on_finish code goes inside here</span></span>
<span id="cb20-15"><a href="#cb20-15"></a>      }</span>
<span id="cb20-16"><a href="#cb20-16"></a>    }</span>
<span id="cb20-17"><a href="#cb20-17"></a>  ]<span class="op">,</span></span>
<span id="cb20-18"><a href="#cb20-18"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb20-19"><a href="#cb20-19"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"DOCTOR"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb20-20"><a href="#cb20-20"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"PLANET"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }<span class="op">,</span></span>
<span id="cb20-21"><a href="#cb20-21"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"GARDEN"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb20-22"><a href="#cb20-22"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"WINDOW"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }<span class="op">,</span></span>
<span id="cb20-23"><a href="#cb20-23"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"BRIDGE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb20-24"><a href="#cb20-24"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"FOREST"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }</span>
<span id="cb20-25"><a href="#cb20-25"></a>  ]</span>
<span id="cb20-26"><a href="#cb20-26"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that we add it just like the other parameters <code>on_finish:</code>. However, it’s value is a function: <code>function(data){ }</code>. We add the <code>data</code> in the parentheses because this is how we add inputs to our functions and we want the <code>data</code> from that trial to be available inside the function.</p>
<p>Using that function, we can access any of trial properties by using standard object notation like <code>data.rt</code> or <code>data["rt"]</code>. Here’s an example showing what’s available by accessing them inside the function and printing them in the JavaScript console:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">const</span> recognition_trial <span class="op">=</span> {</span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb21-3"><a href="#cb21-3"></a>    {</span>
<span id="cb21-4"><a href="#cb21-4"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>      <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb21-8"><a href="#cb21-8"></a>        <span class="dt">task</span><span class="op">:</span> <span class="st">"recognition_test"</span><span class="op">,</span></span>
<span id="cb21-9"><a href="#cb21-9"></a>        <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>        <span class="dt">word_type</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word_type"</span>)<span class="op">,</span></span>
<span id="cb21-11"><a href="#cb21-11"></a>        <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb21-12"><a href="#cb21-12"></a>      }<span class="op">,</span></span>
<span id="cb21-13"><a href="#cb21-13"></a>      <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb21-14"><a href="#cb21-14"></a>          <span class="co">// At this point, 'data' contains:</span></span>
<span id="cb21-15"><a href="#cb21-15"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Trial type:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">trial_type</span>)<span class="op">;</span>           <span class="co">// "html-keyboard-response"</span></span>
<span id="cb21-16"><a href="#cb21-16"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Trial index:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">trial_index</span>)<span class="op">;</span>         <span class="co">// e.g., 15</span></span>
<span id="cb21-17"><a href="#cb21-17"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Time elapsed:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">time_elapsed</span>)<span class="op">;</span>       <span class="co">// e.g., 45230</span></span>
<span id="cb21-18"><a href="#cb21-18"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Response time:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">rt</span>)<span class="op">;</span>                <span class="co">// e.g., 1205</span></span>
<span id="cb21-19"><a href="#cb21-19"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Key pressed:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">response</span>)<span class="op">;</span>            <span class="co">// "f" or "j"</span></span>
<span id="cb21-20"><a href="#cb21-20"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Task:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">task</span>)<span class="op">;</span>                       <span class="co">// "recognition_test"</span></span>
<span id="cb21-21"><a href="#cb21-21"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Word shown:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">word</span>)<span class="op">;</span>                 <span class="co">// e.g., "DOCTOR"</span></span>
<span id="cb21-22"><a href="#cb21-22"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Word type:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">word_type</span>)<span class="op">;</span>             <span class="co">// e.g., "new"</span></span>
<span id="cb21-23"><a href="#cb21-23"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Correct response:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)<span class="op">;</span> <span class="co">// e.g., "j"</span></span>
<span id="cb21-24"><a href="#cb21-24"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Subject ID:"</span><span class="op">,</span> data<span class="op">.</span><span class="at">subject_id</span>)<span class="op">;</span>           <span class="co">// from addProperties()</span></span>
<span id="cb21-25"><a href="#cb21-25"></a>      </span>
<span id="cb21-26"><a href="#cb21-26"></a>          <span class="co">// At this point, we're just examining the data, not changing it yet</span></span>
<span id="cb21-27"><a href="#cb21-27"></a>          <span class="co">// This code would just print the data values in the console</span></span>
<span id="cb21-28"><a href="#cb21-28"></a>      }</span>
<span id="cb21-29"><a href="#cb21-29"></a>    }</span>
<span id="cb21-30"><a href="#cb21-30"></a>  ]<span class="op">,</span></span>
<span id="cb21-31"><a href="#cb21-31"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb21-32"><a href="#cb21-32"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"DOCTOR"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb21-33"><a href="#cb21-33"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"PLANET"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }<span class="op">,</span></span>
<span id="cb21-34"><a href="#cb21-34"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"GARDEN"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb21-35"><a href="#cb21-35"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"WINDOW"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }<span class="op">,</span></span>
<span id="cb21-36"><a href="#cb21-36"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"BRIDGE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb21-37"><a href="#cb21-37"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"FOREST"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }</span>
<span id="cb21-38"><a href="#cb21-38"></a>  ]</span>
<span id="cb21-39"><a href="#cb21-39"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>However, we typically don’t just want to access the data, we want to do something with in. The <code>on_finish</code> function is your opportunity to add new properties or modify existing ones based on what happened during the trial. This is commonly used to assess accuracy and categorize performance.</p>
<section id="checking-accuracy" class="level3" data-number="14.4.1">
<h3 data-number="14.4.1" class="anchored" data-anchor-id="checking-accuracy"><span class="header-section-number">14.4.1</span> Checking Accuracy</h3>
<p>Let’s look at an example of how we can determine whether the participant provided the correct response at the end of the trial. This is probably the most common use-case for modifying the <code>data</code> at the end of the trial:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw">const</span> recognition_trial <span class="op">=</span> {</span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb22-3"><a href="#cb22-3"></a>    {</span>
<span id="cb22-4"><a href="#cb22-4"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-5"><a href="#cb22-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb22-7"><a href="#cb22-7"></a>      <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-8"><a href="#cb22-8"></a>        <span class="dt">task</span><span class="op">:</span> <span class="st">"recognition_test"</span><span class="op">,</span></span>
<span id="cb22-9"><a href="#cb22-9"></a>        <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb22-10"><a href="#cb22-10"></a>        <span class="dt">word_type</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word_type"</span>)<span class="op">,</span></span>
<span id="cb22-11"><a href="#cb22-11"></a>        <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb22-12"><a href="#cb22-12"></a>      }<span class="op">,</span></span>
<span id="cb22-13"><a href="#cb22-13"></a>      <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb22-14"><a href="#cb22-14"></a>        <span class="co">// Use compareKeys() to properly compare key responses</span></span>
<span id="cb22-15"><a href="#cb22-15"></a>        <span class="cf">if</span> (jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)) {</span>
<span id="cb22-16"><a href="#cb22-16"></a>          data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb22-17"><a href="#cb22-17"></a>        } <span class="cf">else</span> {</span>
<span id="cb22-18"><a href="#cb22-18"></a>          data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb22-19"><a href="#cb22-19"></a>        }</span>
<span id="cb22-20"><a href="#cb22-20"></a>    </span>
<span id="cb22-21"><a href="#cb22-21"></a>        <span class="co">// Or more concisely:</span></span>
<span id="cb22-22"><a href="#cb22-22"></a>        <span class="co">// data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response);</span></span>
<span id="cb22-23"><a href="#cb22-23"></a>      }</span>
<span id="cb22-24"><a href="#cb22-24"></a>    }</span>
<span id="cb22-25"><a href="#cb22-25"></a>  ]<span class="op">,</span></span>
<span id="cb22-26"><a href="#cb22-26"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb22-27"><a href="#cb22-27"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"DOCTOR"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb22-28"><a href="#cb22-28"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"PLANET"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }<span class="op">,</span></span>
<span id="cb22-29"><a href="#cb22-29"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"GARDEN"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb22-30"><a href="#cb22-30"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"WINDOW"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }<span class="op">,</span></span>
<span id="cb22-31"><a href="#cb22-31"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"BRIDGE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb22-32"><a href="#cb22-32"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"FOREST"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }</span>
<span id="cb22-33"><a href="#cb22-33"></a>  ]</span>
<span id="cb22-34"><a href="#cb22-34"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this code, I check whether <code>data.response</code> is equal to <code>data.correct_response</code>. If it is <code>true</code>, then I update <code>data.correct</code> to be <code>true</code>. If <code>data.response</code> is NOT equal to <code>data.correct_response</code>, then I set it to <code>false</code>. This will update my data file that is saved at the end with a new column called <code>correct</code> with <code>true</code>/<code>false</code> values.</p>
<p>Here is an example of the data output. Take note of the new columns that were added, including <code>task</code>, <code>word</code>, etc.</p>
<div class="dual-scroll-container">
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th>rt</th>
<th>stimulus</th>
<th>response</th>
<th>trial_type</th>
<th>trial_index</th>
<th>plugin_version</th>
<th>time_elapsed</th>
<th>subject_id</th>
<th>experiment_version</th>
<th>task</th>
<th>word</th>
<th>word_type</th>
<th>correct_response</th>
<th>correct</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2121</td>
<td>”</td>
<td>f</td>
<td>html-keyboard-response</td>
<td>0</td>
<td>2.1.0</td>
<td>2121</td>
<td>q4jr9zbl</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>879</td>
<td>DOCTOR</td>
<td>f</td>
<td>html-keyboard-response</td>
<td>1</td>
<td>2.1.0</td>
<td>3002</td>
<td>q4jr9zbl</td>
<td>1</td>
<td>recognition_test</td>
<td>DOCTOR</td>
<td>old</td>
<td>f</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td>3264</td>
<td>PLANET</td>
<td>j</td>
<td>html-keyboard-response</td>
<td>2</td>
<td>2.1.0</td>
<td>6266</td>
<td>q4jr9zbl</td>
<td>1</td>
<td>recognition_test</td>
<td>PLANET</td>
<td>new</td>
<td>j</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td>767</td>
<td>GARDEN</td>
<td>f</td>
<td>html-keyboard-response</td>
<td>3</td>
<td>2.1.0</td>
<td>7033</td>
<td>q4jr9zbl</td>
<td>1</td>
<td>recognition_test</td>
<td>GARDEN</td>
<td>old</td>
<td>f</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td>808</td>
<td>WINDOW</td>
<td>j</td>
<td>html-keyboard-response</td>
<td>4</td>
<td>2.1.0</td>
<td>7842</td>
<td>q4jr9zbl</td>
<td>1</td>
<td>recognition_test</td>
<td>WINDOW</td>
<td>new</td>
<td>j</td>
<td>TRUE</td>
</tr>
</tbody>
</table>
</div>
<p>Different plugins represent responses in different ways, so you’ll need to adjust your accuracy checking accordingly. When using the keyboard response plugin, we need to compare the key the participant pressed against the correct key. It’s important to use jsPsych’s built-in <code>compareKeys()</code> function rather than simple equality checks. This function handles case sensitivity and different key representations properly. For example, if the participant had caps lock on and the correct response was set to <code>"e"</code>, then <code>"e" === "E"</code> would be <code>false</code>. We want that comparison to be true regardless of case, so we use the built-in function to handle the comparison correctly.</p>
<p>Here’s an example using the button response plugin, which represents button responses numerically (0 for the first button, 1 for the second, etc.):</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw">const</span> recognition_trial <span class="op">=</span> {</span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb23-3"><a href="#cb23-3"></a>    {</span>
<span id="cb23-4"><a href="#cb23-4"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlButtonResponse<span class="op">,</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'OLD'</span><span class="op">,</span> <span class="st">'NEW'</span>]<span class="op">,</span></span>
<span id="cb23-7"><a href="#cb23-7"></a>      <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb23-8"><a href="#cb23-8"></a>        <span class="dt">task</span><span class="op">:</span> <span class="st">"recognition_test"</span><span class="op">,</span></span>
<span id="cb23-9"><a href="#cb23-9"></a>        <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb23-10"><a href="#cb23-10"></a>        <span class="dt">word_type</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word_type"</span>)<span class="op">,</span></span>
<span id="cb23-11"><a href="#cb23-11"></a>        <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>) <span class="co">// This should be 0 or 1 (0 == 'OLD' and 1 == 'NEW')</span></span>
<span id="cb23-12"><a href="#cb23-12"></a>      }<span class="op">,</span></span>
<span id="cb23-13"><a href="#cb23-13"></a>      <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb23-14"><a href="#cb23-14"></a>        <span class="co">// For button responses, we compare numbers directly</span></span>
<span id="cb23-15"><a href="#cb23-15"></a>        <span class="cf">if</span> (data<span class="op">.</span><span class="at">response</span> <span class="op">===</span> data<span class="op">.</span><span class="at">correct_response</span>) {</span>
<span id="cb23-16"><a href="#cb23-16"></a>          data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb23-17"><a href="#cb23-17"></a>        } <span class="cf">else</span> {</span>
<span id="cb23-18"><a href="#cb23-18"></a>          data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb23-19"><a href="#cb23-19"></a>        }</span>
<span id="cb23-20"><a href="#cb23-20"></a>    </span>
<span id="cb23-21"><a href="#cb23-21"></a>        <span class="co">// Or more concisely:</span></span>
<span id="cb23-22"><a href="#cb23-22"></a>        <span class="co">// data.correct = data.response === data.correct_response;</span></span>
<span id="cb23-23"><a href="#cb23-23"></a>      }</span>
<span id="cb23-24"><a href="#cb23-24"></a>    }</span>
<span id="cb23-25"><a href="#cb23-25"></a>  ]<span class="op">,</span></span>
<span id="cb23-26"><a href="#cb23-26"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb23-27"><a href="#cb23-27"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"DOCTOR"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb23-28"><a href="#cb23-28"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"PLANET"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }<span class="op">,</span></span>
<span id="cb23-29"><a href="#cb23-29"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"GARDEN"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb23-30"><a href="#cb23-30"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"WINDOW"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }<span class="op">,</span></span>
<span id="cb23-31"><a href="#cb23-31"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"BRIDGE"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"old"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"f"</span> }<span class="op">,</span></span>
<span id="cb23-32"><a href="#cb23-32"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">"FOREST"</span><span class="op">,</span> <span class="dt">word_type</span><span class="op">:</span> <span class="st">"new"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"j"</span> }</span>
<span id="cb23-33"><a href="#cb23-33"></a>  ]</span>
<span id="cb23-34"><a href="#cb23-34"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Important Note:</strong> Always check the “Data Generated” section of each plugin’s documentation to understand how responses are represented. For keyboard plugins, responses are typically strings (the key pressed), while button plugins use numeric indices (0, 1, 2, etc.).</p>
</section>
<section id="categorizing-response-times" class="level3" data-number="14.4.2">
<h3 data-number="14.4.2" class="anchored" data-anchor-id="categorizing-response-times"><span class="header-section-number">14.4.2</span> Categorizing Response Times:</h3>
<p>To provide another example of modifying the data at the end of the trial, let’s look at how you can add categories and computed measures based on performance. This could be useful for adding feedback after the trial, something we’ll return to in the following chapters. It’s important to understand that <code>on_finish</code> is an arbitrary function, which means we can add whatever code we want here and it will be executed after the trials.</p>
<p>In this example, I will (1) check accuracy, (2) check the response time and categorize it based on speed, and (3) use BOTH response time and accuracy to categorize their performance.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">const</span> stroop_trial <span class="op">=</span> {</span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb24-3"><a href="#cb24-3"></a>    {</span>
<span id="cb24-4"><a href="#cb24-4"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"stimulus"</span>)<span class="op">,</span></span>
<span id="cb24-6"><a href="#cb24-6"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'r'</span><span class="op">,</span> <span class="st">'g'</span><span class="op">,</span> <span class="st">'b'</span>]<span class="op">,</span></span>
<span id="cb24-7"><a href="#cb24-7"></a>      <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb24-8"><a href="#cb24-8"></a>        <span class="dt">task</span><span class="op">:</span> <span class="st">"stroop"</span><span class="op">,</span></span>
<span id="cb24-9"><a href="#cb24-9"></a>        <span class="dt">condition</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"condition"</span>)<span class="op">,</span></span>
<span id="cb24-10"><a href="#cb24-10"></a>        <span class="dt">correct_key</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_key"</span>)</span>
<span id="cb24-11"><a href="#cb24-11"></a>      }<span class="op">,</span></span>
<span id="cb24-12"><a href="#cb24-12"></a>      <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb24-13"><a href="#cb24-13"></a>        <span class="co">// Determine accuracy using compareKeys</span></span>
<span id="cb24-14"><a href="#cb24-14"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_key</span>)<span class="op">;</span></span>
<span id="cb24-15"><a href="#cb24-15"></a>    </span>
<span id="cb24-16"><a href="#cb24-16"></a>        <span class="co">// Categorize response time</span></span>
<span id="cb24-17"><a href="#cb24-17"></a>        <span class="cf">if</span> (data<span class="op">.</span><span class="at">rt</span> <span class="op">&lt;</span> <span class="dv">300</span>) {</span>
<span id="cb24-18"><a href="#cb24-18"></a>          data<span class="op">.</span><span class="at">rt_category</span> <span class="op">=</span> <span class="st">"fast"</span><span class="op">;</span></span>
<span id="cb24-19"><a href="#cb24-19"></a>        } <span class="cf">else</span> <span class="cf">if</span> (data<span class="op">.</span><span class="at">rt</span> <span class="op">&lt;</span> <span class="dv">800</span>) {</span>
<span id="cb24-20"><a href="#cb24-20"></a>          data<span class="op">.</span><span class="at">rt_category</span> <span class="op">=</span> <span class="st">"normal"</span><span class="op">;</span></span>
<span id="cb24-21"><a href="#cb24-21"></a>        } <span class="cf">else</span> {</span>
<span id="cb24-22"><a href="#cb24-22"></a>          data<span class="op">.</span><span class="at">rt_category</span> <span class="op">=</span> <span class="st">"slow"</span><span class="op">;</span></span>
<span id="cb24-23"><a href="#cb24-23"></a>        }</span>
<span id="cb24-24"><a href="#cb24-24"></a>    </span>
<span id="cb24-25"><a href="#cb24-25"></a>        <span class="co">// Add performance score combining accuracy and speed</span></span>
<span id="cb24-26"><a href="#cb24-26"></a>        <span class="cf">if</span> (data<span class="op">.</span><span class="at">correct</span> <span class="op">&amp;&amp;</span> data<span class="op">.</span><span class="at">rt</span> <span class="op">&lt;</span> <span class="dv">600</span>) {</span>
<span id="cb24-27"><a href="#cb24-27"></a>          data<span class="op">.</span><span class="at">performance</span> <span class="op">=</span> <span class="st">"excellent"</span><span class="op">;</span></span>
<span id="cb24-28"><a href="#cb24-28"></a>        } <span class="cf">else</span> <span class="cf">if</span> (data<span class="op">.</span><span class="at">correct</span>) {</span>
<span id="cb24-29"><a href="#cb24-29"></a>          data<span class="op">.</span><span class="at">performance</span> <span class="op">=</span> <span class="st">"good"</span><span class="op">;</span></span>
<span id="cb24-30"><a href="#cb24-30"></a>        } <span class="cf">else</span> {</span>
<span id="cb24-31"><a href="#cb24-31"></a>          data<span class="op">.</span><span class="at">performance</span> <span class="op">=</span> <span class="st">"needs_improvement"</span><span class="op">;</span></span>
<span id="cb24-32"><a href="#cb24-32"></a>        }</span>
<span id="cb24-33"><a href="#cb24-33"></a>      }</span>
<span id="cb24-34"><a href="#cb24-34"></a>    }  </span>
<span id="cb24-35"><a href="#cb24-35"></a>  ]<span class="op">,</span></span>
<span id="cb24-36"><a href="#cb24-36"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb24-37"><a href="#cb24-37"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style='color: red;'&gt;RED&lt;/span&gt;`</span><span class="op">,</span> <span class="dt">condition</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_key</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb24-38"><a href="#cb24-38"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style='color: blue;'&gt;RED&lt;/span&gt;`</span><span class="op">,</span> <span class="dt">condition</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_key</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb24-39"><a href="#cb24-39"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style='color: green;'&gt;GREEN&lt;/span&gt;&gt;`</span><span class="op">,</span> <span class="dt">condition</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_key</span><span class="op">:</span> <span class="st">"g"</span>}<span class="op">,</span></span>
<span id="cb24-40"><a href="#cb24-40"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style='color: red;'&gt;BLUE&lt;/span&gt;`</span><span class="op">,</span> <span class="dt">condition</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_key</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb24-41"><a href="#cb24-41"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style='color: blue;'&gt;BLUE&lt;/span&gt;`</span><span class="op">,</span> <span class="dt">condition</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_key</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb24-42"><a href="#cb24-42"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style='color: green;'&gt;RED&lt;/span&gt;`</span><span class="op">,</span> <span class="dt">condition</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_key</span><span class="op">:</span> <span class="st">"g"</span>}<span class="op">,</span></span>
<span id="cb24-43"><a href="#cb24-43"></a>  ]</span>
<span id="cb24-44"><a href="#cb24-44"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Again, we are updating the data that is being saved. So, our data output will now include new columns for our categories and values if one is provided:</p>
<div class="dual-scroll-container">
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th>rt</th>
<th>stimulus</th>
<th>response</th>
<th>trial_type</th>
<th>trial_index</th>
<th>plugin_version</th>
<th>time_elapsed</th>
<th>subject_id</th>
<th>experiment_version</th>
<th>task</th>
<th>condition</th>
<th>correct_key</th>
<th>correct</th>
<th>rt_category</th>
<th>performance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>542</td>
<td><span style="color: red;">RED</span></td>
<td>r</td>
<td>html-keyboard-response</td>
<td>0</td>
<td>2.1.0</td>
<td>542</td>
<td>m8kx3pqw</td>
<td>1</td>
<td>stroop</td>
<td>congruent</td>
<td>r</td>
<td>TRUE</td>
<td>normal</td>
<td>excellent</td>
</tr>
<tr class="even">
<td>1205</td>
<td><span style="color: blue;">RED</span></td>
<td>b</td>
<td>html-keyboard-response</td>
<td>1</td>
<td>2.1.0</td>
<td>1747</td>
<td>m8kx3pqw</td>
<td>1</td>
<td>stroop</td>
<td>incongruent</td>
<td>r</td>
<td>FALSE</td>
<td>slow</td>
<td>needs_improvement</td>
</tr>
<tr class="odd">
<td>287</td>
<td><span style="color: green;">GREEN</span></td>
<td>g</td>
<td>html-keyboard-response</td>
<td>2</td>
<td>2.1.0</td>
<td>2034</td>
<td>m8kx3pqw</td>
<td>1</td>
<td>stroop</td>
<td>congruent</td>
<td>g</td>
<td>TRUE</td>
<td>fast</td>
<td>excellent</td>
</tr>
<tr class="even">
<td>934</td>
<td><span style="color: red;">BLUE</span></td>
<td>r</td>
<td>html-keyboard-response</td>
<td>3</td>
<td>2.1.0</td>
<td>2968</td>
<td>m8kx3pqw</td>
<td>1</td>
<td>stroop</td>
<td>incongruent</td>
<td>b</td>
<td>FALSE</td>
<td>slow</td>
<td>needs_improvement</td>
</tr>
<tr class="odd">
<td>678</td>
<td><span style="color: blue;">BLUE</span></td>
<td>b</td>
<td>html-keyboard-response</td>
<td>4</td>
<td>2.1.0</td>
<td>3646</td>
<td>m8kx3pqw</td>
<td>1</td>
<td>stroop</td>
<td>congruent</td>
<td>b</td>
<td>TRUE</td>
<td>normal</td>
<td>good</td>
</tr>
<tr class="even">
<td>445</td>
<td><span style="color: green;">RED</span></td>
<td>g</td>
<td>html-keyboard-response</td>
<td>5</td>
<td>2.1.0</td>
<td>4091</td>
<td>m8kx3pqw</td>
<td>1</td>
<td>stroop</td>
<td>incongruent</td>
<td>r</td>
<td>FALSE</td>
<td>normal</td>
<td>needs_improvement</td>
</tr>
</tbody>
</table>
</div>
<p>Some final points about <code>on_finish</code>:</p>
<ul>
<li>Timing: <code>on_finish</code> runs immediately after the participant responds, before the next trial begins</li>
<li>Persistence: Any properties you add or modify in <code>on_finish</code> become part of the permanent data record for that trial</li>
<li>Flexibility: You can add as many new properties as you want, and they’ll all appear in your final dataset</li>
</ul>
<p>The <code>on_finish</code> function is your opportunity to enrich your data with computed information that will be valuable during analysis. By adding accuracy scores, performance categories, and other derived measures, you make your data much more useful for statistical analysis.</p>
</section>
</section>
<section id="final-thoughts-on-data-labeling" class="level2" data-number="14.5">
<h2 data-number="14.5" class="anchored" data-anchor-id="final-thoughts-on-data-labeling"><span class="header-section-number">14.5</span> Final Thoughts on Data Labeling</h2>
<p>Data labeling is one of the most important skills in experimental programming because it determines whether your results will be analyzable and meaningful. Throughout this chapter, you’ve learned multiple techniques for adding context to your data including simple trial labels and global properties that track participants and experimental conditions. The key insight is to think about your data analysis needs before you start collecting data. What variables will you need to group trials? What information will help you identify different experimental conditions? By planning your data labels carefully and testing them with local saves, you’ll avoid the frustration of collecting unusable data and ensure your experiments produce clean, analysis-ready datasets from the start.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./13-L05.html" class="pagination-link" aria-label="Lab 5: Mental Imagery">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Lab 5: Mental Imagery</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./15-data-2.html" class="pagination-link" aria-label="Accessing and Summarizing Data">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Accessing and Summarizing Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/14-data.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>