<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="An open source textbook for psychology students learning programming and online research methods.Primary Author: Nicholaus P. Brosowsky Co-Authors: Liam Yeo, Jackie Spear">

<title>24&nbsp; Lab 11: Face Perception â€“ Online Behavioural Research Methods: Programming with jsPsych</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./25-gamification.html" rel="next">
<link href="./23-L10.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e9b5551c1c55c86b42a831a3c09ea90c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-f4f6c4c33169695420a9dce568207992.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>
.tabset-fullscreen-btn {
  position: absolute;
  top: 5px;
  right: 10px;
  z-index: 1000;
  padding: 5px 10px;
  background-color: none;
  color: #6c757d;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}
.tabset-fullscreen-btn:hover {
  background-color: #e9ecef;
  color: #495057;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.panel-tabset').forEach(function(tabset) {
    const btn = document.createElement('button');
    btn.innerHTML = 'â›¶ Open Code in New Tab';
    btn.className = 'tabset-fullscreen-btn';

    tabset.style.position = 'relative';
    tabset.insertBefore(btn, tabset.firstChild);

    btn.addEventListener('click', function() {
      const clone = tabset.cloneNode(true);
      const cloneBtn = clone.querySelector('.tabset-fullscreen-btn');
      if (cloneBtn) cloneBtn.remove();

      // Get all stylesheets from current page
      const stylesheets = Array.from(document.styleSheets)
        .map(sheet => {
          try {
            if (sheet.href) {
              return `<link rel="stylesheet" href="${sheet.href}">`;
            } else if (sheet.ownerNode) {
              return `<style>${Array.from(sheet.cssRules).map(rule => rule.cssText).join('\n')}</style>`;
            }
          } catch (e) {
            if (sheet.href) return `<link rel="stylesheet" href="${sheet.href}">`;
          }
          return '';
        })
        .join('\n');

      const newWindow = window.open('', '_blank');
      newWindow.document.write(`
        <html>
          <head>
            <title>Tab Panel View</title>
            ${stylesheets}
            <style>
              body { 
                margin: 20px auto; 
                padding: 20px; 
                max-width: 1200px;
              }
            </style>
          </head>
          <body>
            ${clone.outerHTML}
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"><\/script>
          </body>
        </html>
      `);
      newWindow.document.close();
    });
  });
});
</script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./22-randomization.html">Unit 10: Randomization</a></li><li class="breadcrumb-item"><a href="./24-L11.html"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Lab 11: Face Perception</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Online Behavioural Research Methods: Programming with jsPsych</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/icoglab/online-behavioural-research-methods" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 1: Fundamentals (I)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">HTML</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">CSS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-L01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lab 1: About Me</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 2: Fundamentals (II)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Javascript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-debugging-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Debugging JavaScript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-L02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lab 2: JS Exercises</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 3: Intro to JsPsych</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-jspsych.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">jsPsych</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-L03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 3: Language &amp; Thought</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 4: Timelines</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-timelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Timelines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-plugins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">More Plugins</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-L04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lab 4: Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 5: Multimedia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-multimedia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multimedia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-L05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Lab 5: Mental Imagery</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 6: Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Saving and Labeling Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-data-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Accessing and Summarizing Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-L06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Lab 6: Creativity</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 7: Dynamic Parameters</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-dynamic-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dynamic Parameters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-L07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Lab 7: Spatial Attention</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 8: Controlling the Flow</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-dynamic-flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Controlling the Flow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-L08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Lab 8: Cognitive Control</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 9: Skills Checkpoint</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-L09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Lab 9: Working Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 10: Randomization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-randomization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Randomization in Experimental Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-L10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Lab 10: Judgment &amp; Decision-Making</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-L11.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Lab 11: Face Perception</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 11: Gamification</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-gamification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Gamification in Behavioural Research</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-L12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Lab 12: Implicit Learning</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A01_JS_Builtins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">JavaScript Built-in Functions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p>Â© 2024. This work is openly licensed via <a href="https://creativecommons.org/licenses/by-nc/4.0">CC BY NC 4.0</a>.</p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#research-in-brief-face-inversion" id="toc-research-in-brief-face-inversion" class="nav-link active" data-scroll-target="#research-in-brief-face-inversion"><span class="header-section-number">24.1</span> Research in Brief: Face Inversion</a>
  <ul class="collapse">
  <li><a href="#the-research-area" id="toc-the-research-area" class="nav-link" data-scroll-target="#the-research-area"><span class="header-section-number">24.1.1</span> The Research Area</a></li>
  <li><a href="#types-of-face-processing" id="toc-types-of-face-processing" class="nav-link" data-scroll-target="#types-of-face-processing"><span class="header-section-number">24.1.2</span> Types of Face Processing</a></li>
  <li><a href="#the-research-design" id="toc-the-research-design" class="nav-link" data-scroll-target="#the-research-design"><span class="header-section-number">24.1.3</span> The Research Design</a></li>
  <li><a href="#key-findings" id="toc-key-findings" class="nav-link" data-scroll-target="#key-findings"><span class="header-section-number">24.1.4</span> Key Findings</a></li>
  <li><a href="#implications" id="toc-implications" class="nav-link" data-scroll-target="#implications"><span class="header-section-number">24.1.5</span> Implications</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">24.1.6</span> Further Reading</a></li>
  </ul></li>
  <li><a href="#program-a-face-inversion-paradigm" id="toc-program-a-face-inversion-paradigm" class="nav-link" data-scroll-target="#program-a-face-inversion-paradigm"><span class="header-section-number">24.2</span> Program a Face Inversion Paradigm</a>
  <ul class="collapse">
  <li><a href="#initiate-jspsych" id="toc-initiate-jspsych" class="nav-link" data-scroll-target="#initiate-jspsych"><span class="header-section-number">24.2.1</span> Initiate JsPsych</a></li>
  <li><a href="#add-study-phase" id="toc-add-study-phase" class="nav-link" data-scroll-target="#add-study-phase"><span class="header-section-number">24.2.2</span> Add Study Phase</a></li>
  <li><a href="#add-test-phase" id="toc-add-test-phase" class="nav-link" data-scroll-target="#add-test-phase"><span class="header-section-number">24.2.3</span> Add Test Phase</a></li>
  <li><a href="#randomize-stimulus-selection-and-assignments" id="toc-randomize-stimulus-selection-and-assignments" class="nav-link" data-scroll-target="#randomize-stimulus-selection-and-assignments"><span class="header-section-number">24.2.4</span> Randomize Stimulus Selection and Assignments</a></li>
  <li><a href="#repeat-the-randomization-for-house-images" id="toc-repeat-the-randomization-for-house-images" class="nav-link" data-scroll-target="#repeat-the-randomization-for-house-images"><span class="header-section-number">24.2.5</span> Repeat the randomization for house images</a></li>
  <li><a href="#add-preload" id="toc-add-preload" class="nav-link" data-scroll-target="#add-preload"><span class="header-section-number">24.2.6</span> Add Preload</a></li>
  </ul></li>
  <li><a href="#stretch-goals" id="toc-stretch-goals" class="nav-link" data-scroll-target="#stretch-goals"><span class="header-section-number">24.3</span> Stretch Goals</a>
  <ul class="collapse">
  <li><a href="#add-data-labels" id="toc-add-data-labels" class="nav-link" data-scroll-target="#add-data-labels"><span class="header-section-number">24.3.1</span> Add data labels</a></li>
  <li><a href="#add-cat-faces" id="toc-add-cat-faces" class="nav-link" data-scroll-target="#add-cat-faces"><span class="header-section-number">24.3.2</span> Add cat faces</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/24-L11.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./22-randomization.html">Unit 10: Randomization</a></li><li class="breadcrumb-item"><a href="./24-L11.html"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Lab 11: Face Perception</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Lab 11: Face Perception</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="research-in-brief-face-inversion" class="level2" data-number="24.1">
<h2 data-number="24.1" class="anchored" data-anchor-id="research-in-brief-face-inversion"><span class="header-section-number">24.1</span> Research in Brief: Face Inversion</h2>
<section id="the-research-area" class="level3" data-number="24.1.1">
<h3 data-number="24.1.1" class="anchored" data-anchor-id="the-research-area"><span class="header-section-number">24.1.1</span> The Research Area</h3>
<p>Perception refers to the cognitive processes through which we interpret and make sense of sensory information from our environment. Face perception represents a specialized domain within this broader system, involving mechanisms that allow us to extract various types of information from faces, including identity, emotion, age, and social characteristics. Our visual system processes faces differently from other objects, reflecting the importance of faces in human social interaction.</p>
<p>Face recognition addresses fundamental questions about how we identify individuals and maintain stable representations of people despite substantial variations in their appearance. How do we recognize someone across different viewing angles, lighting conditions, and expressions? What makes some faces easier to remember than others? Why do we struggle to match photographs of unfamiliar faces but effortlessly recognize people we know? Understanding face recognition has important implications for eyewitness testimony, security systems, and disorders affecting social cognition.</p>
<p>The study of face recognition connects to many practical applications in forensic contexts, passport control, surveillance systems, and understanding conditions like prosopagnosia (face blindness). To investigate these mechanisms systematically, researchers have developed experimental paradigms that can isolate different aspects of face processing, including how faces are represented in memory and what happens when faces are transformed or degraded.</p>
</section>
<section id="types-of-face-processing" class="level3" data-number="24.1.2">
<h3 data-number="24.1.2" class="anchored" data-anchor-id="types-of-face-processing"><span class="header-section-number">24.1.2</span> Types of Face Processing</h3>
<p>Face processing operates through several distinct systems that extract different types of information. Configural processing involves perceiving faces as integrated wholes rather than collections of separate features, allowing us to detect subtle differences in the spatial relationships between facial features. Featural processing focuses on individual components like eyes, nose, and mouth, though these features are typically processed within the context of the whole face rather than in isolation.</p>
<p>Holistic processing represents a particularly important aspect of face perception that involves integrating all facial features into a unified representation. Unlike processing individual features separately, holistic processing treats the face as a gestalt pattern where the whole is more than the sum of its parts. This system allows us to recognize faces rapidly and accurately, even when individual features might be difficult to identify in isolation.</p>
<p>Research distinguishes between processing of familiar and unfamiliar faces, which show markedly different characteristics. Familiar face recognition is robust across variations in viewpoint, lighting, and expression, while unfamiliar face matching is surprisingly error-prone even when comparing two photographs of the same person. These systems rely on different types of information, with unfamiliar face processing dominated by external features like hairstyle, while familiar face recognition depends more heavily on internal features like the eyes and nose.</p>
</section>
<section id="the-research-design" class="level3" data-number="24.1.3">
<h3 data-number="24.1.3" class="anchored" data-anchor-id="the-research-design"><span class="header-section-number">24.1.3</span> The Research Design</h3>
<p>The face inversion paradigm developed by Yin (1969) uses a within-subjects experimental design to examine how orientation affects face recognition. Participants recognize faces that are presented either upright or inverted (rotated 180 degrees).</p>
<p>Stimulus Presentation: Participants view photographs of faces in either normal upright orientation or turned upside down. The faces may be familiar (celebrities or personally known individuals) or unfamiliar faces that participants study before testing. The same face images are used in both orientations, controlling for differences in image quality or distinctiveness.</p>
<p>Task Requirements: Participants must identify familiar faces by naming them or matching them to provided names, or they must recognize previously studied unfamiliar faces in a memory test. They respond as accurately as possible, with both accuracy and response time measured to assess recognition performance.</p>
<p>The design manipulates face orientation as the key variable: upright presentation where faces appear in their normal orientation, and inverted presentation where faces are rotated 180 degrees. For comparison, the same inversion manipulation is often applied to other visual stimuli such as houses, objects, or body postures to determine whether faces show a disproportionate inversion effect.</p>
<p>The within-subjects design allows researchers to compare recognition performance for upright versus inverted presentations within the same participants. Each person experiences both upright and inverted faces, acting as their own control. This approach controls for individual differences in overall recognition ability while isolating the specific effects of orientation on face processing.</p>
</section>
<section id="key-findings" class="level3" data-number="24.1.4">
<h3 data-number="24.1.4" class="anchored" data-anchor-id="key-findings"><span class="header-section-number">24.1.4</span> Key Findings</h3>
<p>The within-subjects comparisons have revealed that face recognition is disproportionately impaired by inversion compared to recognition of other visual objects. Upright faces are typically recognized with 95% accuracy, while inverted faces drop to approximately 70% accuracy. This inversion effect is larger for faces than for other categories of objects, suggesting that faces rely on specialized processing mechanisms that are disrupted by inversion.</p>
<p>The inversion effect appears to result from disruption of configural processing. When faces are upright, observers readily perceive the spatial relationships between features and the holistic pattern of the face. Inversion disrupts this configural processing, forcing observers to rely more on individual features. Evidence for this comes from the composite face effect, where the top half of one face combined with the bottom half of another creates a new perceived identity in upright faces, but this effect disappears when faces are inverted.</p>
<p>The magnitude of the inversion effect varies with face familiarity and type of information available. Familiar faces show substantial inversion effects, though they remain more recognizable when inverted than unfamiliar faces in the same orientation. Line drawings of faces show larger benefits from caricaturing when inverted, suggesting that reduced information makes configural processing more difficult. Photographic negatives show even larger impairments than inversion, with inverted negatives recognized only 25% of the time.</p>
</section>
<section id="implications" class="level3" data-number="24.1.5">
<h3 data-number="24.1.5" class="anchored" data-anchor-id="implications"><span class="header-section-number">24.1.5</span> Implications</h3>
<p>The disproportionate effect of inversion on face recognition provides evidence for specialized face processing mechanisms that rely heavily on configural information. This behavioral evidence is supported by neuroimaging studies showing that face-selective regions like the fusiform face area respond differently to upright versus inverted faces. The inversion effect demonstrates that face recognition depends on perceiving faces as integrated patterns rather than collections of independent features.</p>
<p>These findings support holistic processing theories of face recognition, demonstrating that the spatial arrangement of features within the standard face template is important for recognition. The consistent patterns across participants suggest these represent fundamental properties of human face processing rather than learned strategies. Studies of prosopagnosia further support this interpretation, as individuals with face recognition deficits often show reduced or absent inversion effects, suggesting their impairment involves disrupted configural processing.</p>
<p>The face inversion paradigm exemplifies how simple experimental manipulations can reveal fundamental cognitive mechanisms. Its elegant design allows researchers to isolate configural processing while maintaining experimental control, making it a model for investigating specialized perceptual systems. The paradigm continues to generate insights into face processing, including how expertise develops and how different types of facial information contribute to recognition across the lifespan.</p>
</section>
<section id="further-reading" class="level3" data-number="24.1.6">
<h3 data-number="24.1.6" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">24.1.6</span> Further Reading</h3>
<p>Maurer, D., Le Grand, R., &amp; Mondloch, C. J. (2002). The many faces of configural processing. Trends in Cognitive Sciences, 6, 255-260.</p>
<p>McKone, E., &amp; Yovel, G. (2009). Why does picture-plane inversion sometimes dissociate perception of features and spacing in faces, and sometimes not? Toward a new theory of holistic processing. Psychonomic Bulletin &amp; Review, 16(5), 778-797.</p>
<p>Rossion, B. (2008). Picture-plane inversion leads to qualitative changes of face perception. Acta Psychologica, 128(2), 274-289.</p>
<p>Yin, R. K. (1969). Looking at upside-down faces. Journal of Experimental Psychology, 81(1), 141-145.</p>
<p>Young, A. W., &amp; Burton, A. M. (2018). Are we face experts? Trends in Cognitive Sciences, 22, 100-110.</p>
</section>
</section>
<section id="program-a-face-inversion-paradigm" class="level2" data-number="24.2">
<h2 data-number="24.2" class="anchored" data-anchor-id="program-a-face-inversion-paradigm"><span class="header-section-number">24.2</span> Program a Face Inversion Paradigm</h2>
<p>In this lab, we will program the classic face inversion memory task comparing memory for faces to memory for houses. The task is a recognition task, which requires participants to study a list of images, then in a test phase, participants see an old image and a new image, and they have to decide which is the old image.</p>
<p>Half the images will be presented upside down and half rightside up. The orientation for each particular image is repeated in the study and test phases.</p>
<p>In the lab folder, we have the usual boilerplate files in addition to folders with images that we will use for our experiment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>ðŸ“‚ L11</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€  ðŸ“„ index.html</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€  ðŸ“„ exp.js</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€  ðŸ“„ style.css</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€  ðŸ“‚ images</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>â”‚     â”œâ”€â”€  ðŸ“‚ faces</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>â”‚     â”œâ”€â”€  ðŸ“‚ houses</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>â”‚     â””â”€â”€  ðŸ“‚ cats</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>â””â”€â”€  ðŸ“‚ jspsych</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="initiate-jspsych" class="level3" data-number="24.2.1">
<h3 data-number="24.2.1" class="anchored" data-anchor-id="initiate-jspsych"><span class="header-section-number">24.2.1</span> Initiate JsPsych</h3>
<p>Letâ€™s begin by initializing jsPsych with the basic setup we typically need. In the HTML index page, all necessary files have been linked: the jsPsych core files, our exp.js file, our style.css file, and the plugins required for this experiment.</p>
<p>Iâ€™ve also added a welcome screen and our save data trial at the end.</p>
<div class="cell">
<style type="text/css">
/* CB2 */
[id^="cb2-"]:nth-child(n+5):nth-child(-n+7),  
[id^="cb2-"]:nth-child(n+9):nth-child(-n+13),  
[id^="cb2-"]:nth-child(n+15):nth-child(-n+16),  
[id^="cb2-"]:nth-child(n+19):nth-child(-n+20) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB3 */
[id^="cb3-"]:nth-child(n+1):nth-child(-n+6),
[id^="cb3-"]:nth-child(n+8):nth-child(-n+16),
[id^="cb3-"]:nth-child(n+18):nth-child(-n+43),
[id^="cb3-"]:nth-child(n+45):nth-child(-n+52) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB4 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 11: Face Perception<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>    </span>
<span id="cb2-9"><a href="#cb2-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-button-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-14"><a href="#cb2-14"></a></span>
<span id="cb2-15"><a href="#cb2-15"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb2-23"><a href="#cb2-23"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a> </span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">// ============================================</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">// ============================================</span></span>
<span id="cb3-5"><a href="#cb3-5"></a></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb3-7"><a href="#cb3-7"></a></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">// ============================================</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">// Welcome</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">// ============================================</span></span>
<span id="cb3-11"><a href="#cb3-11"></a></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="kw">let</span> welcome <span class="op">=</span> {</span>
<span id="cb3-13"><a href="#cb3-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"Welcome to the experiment! Press the space bar to begin."</span><span class="op">,</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>}</span>
<span id="cb3-17"><a href="#cb3-17"></a></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co">// ============================================</span></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="co">// ============================================</span></span>
<span id="cb3-21"><a href="#cb3-21"></a></span>
<span id="cb3-22"><a href="#cb3-22"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb3-23"><a href="#cb3-23"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb3-24"><a href="#cb3-24"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb3-25"><a href="#cb3-25"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb3-26"><a href="#cb3-26"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb3-28"><a href="#cb3-28"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb3-30"><a href="#cb3-30"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb3-31"><a href="#cb3-31"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb3-32"><a href="#cb3-32"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb3-33"><a href="#cb3-33"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb3-34"><a href="#cb3-34"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb3-35"><a href="#cb3-35"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb3-36"><a href="#cb3-36"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb3-37"><a href="#cb3-37"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"faceInversion_data.csv"</span>)<span class="op">;</span></span>
<span id="cb3-38"><a href="#cb3-38"></a>    })<span class="op">;</span></span>
<span id="cb3-39"><a href="#cb3-39"></a>  }<span class="op">,</span></span>
<span id="cb3-40"><a href="#cb3-40"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb3-41"><a href="#cb3-41"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"save data trial"</span></span>
<span id="cb3-42"><a href="#cb3-42"></a>  }</span>
<span id="cb3-43"><a href="#cb3-43"></a>}<span class="op">;</span></span>
<span id="cb3-44"><a href="#cb3-44"></a></span>
<span id="cb3-45"><a href="#cb3-45"></a><span class="co">// ============================================</span></span>
<span id="cb3-46"><a href="#cb3-46"></a><span class="co">// Run jsPsych </span></span>
<span id="cb3-47"><a href="#cb3-47"></a><span class="co">// ============================================</span></span>
<span id="cb3-48"><a href="#cb3-48"></a></span>
<span id="cb3-49"><a href="#cb3-49"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb3-50"><a href="#cb3-50"></a>  welcome<span class="op">,</span></span>
<span id="cb3-51"><a href="#cb3-51"></a>  saveData</span>
<span id="cb3-52"><a href="#cb3-52"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb4-1"><a href="#cb4-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div id="demo-container-1" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-1" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    \n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Welcome\n// ============================================\n\nlet welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,\n  choices: &quot; &quot;\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);\n    });\n  },\n  data: {\n    phase: &quot;save data trial&quot;\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  welcome,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-1');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-1" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Welcome
// ============================================

let welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,
  choices: &quot; &quot;
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);
    });
  },
  data: {
    phase: &quot;save data trial&quot;
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  welcome,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-1&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-1&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;âœ“ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="add-study-phase" class="level3" data-number="24.2.2">
<h3 data-number="24.2.2" class="anchored" data-anchor-id="add-study-phase"><span class="header-section-number">24.2.2</span> Add Study Phase</h3>
<p>Letâ€™s construct a short study phase with two images in our timeline variables: a right-side up face and an upside down house.</p>
<p>Weâ€™ll need to control the CSS of the images to be able to rotate them and make them upside down. Unfortunately, the image plugins donâ€™t give us enough control for that, so instead, weâ€™ll use the HTML plugin and write a function to display our image in its correct orientation according to the timeline variables.</p>
<p>Iâ€™ve also set some other base CSS for the images to ensure theyâ€™re not too wide or tall and added a filter to make them all black and white.</p>
<div class="cell">
<style type="text/css">
/* CB6 */
[id^="cb6-"]:nth-child(n+19):nth-child(-n+21),
[id^="cb6-"]:nth-child(n+23):nth-child(-n+33),
[id^="cb6-"]:nth-child(n+35):nth-child(-n+57),
[id^="cb6-"]:nth-child(n+59):nth-child(-n+64),
[id^="cb6-"]:nth-child(n+99):nth-child(-n+99) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB7 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb5-1"><a href="#cb5-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 8: Cognitive Control<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>    </span>
<span id="cb5-9"><a href="#cb5-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-button-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14"></a></span>
<span id="cb5-15"><a href="#cb5-15"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb5-20"><a href="#cb5-20"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb5-23"><a href="#cb5-23"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a> </span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">// ============================================</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">// ============================================</span></span>
<span id="cb6-5"><a href="#cb6-5"></a></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb6-7"><a href="#cb6-7"></a></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">// ============================================</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">// Welcome</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">// ============================================</span></span>
<span id="cb6-11"><a href="#cb6-11"></a></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="kw">let</span> welcome <span class="op">=</span> {</span>
<span id="cb6-13"><a href="#cb6-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"Welcome to the experiment! Press the space bar to begin."</span><span class="op">,</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb6-16"><a href="#cb6-16"></a>}</span>
<span id="cb6-17"><a href="#cb6-17"></a></span>
<span id="cb6-18"><a href="#cb6-18"></a></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="co">// ============================================</span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="co">// Study Phase</span></span>
<span id="cb6-21"><a href="#cb6-21"></a><span class="co">// ============================================</span></span>
<span id="cb6-22"><a href="#cb6-22"></a></span>
<span id="cb6-23"><a href="#cb6-23"></a><span class="kw">let</span> study_instructions <span class="op">=</span> {</span>
<span id="cb6-24"><a href="#cb6-24"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb6-25"><a href="#cb6-25"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb6-26"><a href="#cb6-26"></a>    <span class="st">"Welcome to the study phase."</span><span class="op">,</span></span>
<span id="cb6-27"><a href="#cb6-27"></a>    <span class="st">"You will see a series of faces and houses."</span><span class="op">,</span></span>
<span id="cb6-28"><a href="#cb6-28"></a>    <span class="st">"Please pay attention to each image and try to memorize them."</span><span class="op">,</span></span>
<span id="cb6-29"><a href="#cb6-29"></a>    <span class="st">"Press Next to begin."</span></span>
<span id="cb6-30"><a href="#cb6-30"></a>  ]<span class="op">,</span></span>
<span id="cb6-31"><a href="#cb6-31"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-32"><a href="#cb6-32"></a>  <span class="dt">key_forward</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb6-33"><a href="#cb6-33"></a>}<span class="op">;</span></span>
<span id="cb6-34"><a href="#cb6-34"></a></span>
<span id="cb6-35"><a href="#cb6-35"></a><span class="kw">let</span> study_trials <span class="op">=</span> {</span>
<span id="cb6-36"><a href="#cb6-36"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb6-37"><a href="#cb6-37"></a>      {</span>
<span id="cb6-38"><a href="#cb6-38"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-39"><a href="#cb6-39"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 60px;"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb6-40"><a href="#cb6-40"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb6-41"><a href="#cb6-41"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb6-42"><a href="#cb6-42"></a>      }<span class="op">,</span></span>
<span id="cb6-43"><a href="#cb6-43"></a>      {</span>
<span id="cb6-44"><a href="#cb6-44"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-45"><a href="#cb6-45"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb6-46"><a href="#cb6-46"></a>            <span class="cf">return</span> <span class="vs">`&lt;img class="base_image </span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"image_orientation"</span>)<span class="sc">}</span><span class="vs">"   src=</span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"old_image_src"</span>)<span class="sc">}</span><span class="vs"> &gt;`</span></span>
<span id="cb6-47"><a href="#cb6-47"></a>        }<span class="op">,</span></span>
<span id="cb6-48"><a href="#cb6-48"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb6-49"><a href="#cb6-49"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb6-50"><a href="#cb6-50"></a>      }</span>
<span id="cb6-51"><a href="#cb6-51"></a>  ]<span class="op">,</span></span>
<span id="cb6-52"><a href="#cb6-52"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb6-53"><a href="#cb6-53"></a>    {<span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_1.jpg"</span><span class="op">,</span> <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span>}<span class="op">,</span></span>
<span id="cb6-54"><a href="#cb6-54"></a>    {<span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_1.jpg"</span><span class="op">,</span> <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span>}</span>
<span id="cb6-55"><a href="#cb6-55"></a>  ]<span class="op">,</span></span>
<span id="cb6-56"><a href="#cb6-56"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb6-57"><a href="#cb6-57"></a>}</span>
<span id="cb6-58"><a href="#cb6-58"></a></span>
<span id="cb6-59"><a href="#cb6-59"></a><span class="kw">let</span> study_phase <span class="op">=</span> {</span>
<span id="cb6-60"><a href="#cb6-60"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb6-61"><a href="#cb6-61"></a>      study_instructions<span class="op">,</span></span>
<span id="cb6-62"><a href="#cb6-62"></a>      study_trials</span>
<span id="cb6-63"><a href="#cb6-63"></a>    ]</span>
<span id="cb6-64"><a href="#cb6-64"></a>}</span>
<span id="cb6-65"><a href="#cb6-65"></a></span>
<span id="cb6-66"><a href="#cb6-66"></a><span class="co">// ============================================</span></span>
<span id="cb6-67"><a href="#cb6-67"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb6-68"><a href="#cb6-68"></a><span class="co">// ============================================</span></span>
<span id="cb6-69"><a href="#cb6-69"></a></span>
<span id="cb6-70"><a href="#cb6-70"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb6-71"><a href="#cb6-71"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-72"><a href="#cb6-72"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb6-73"><a href="#cb6-73"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb6-74"><a href="#cb6-74"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb6-75"><a href="#cb6-75"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb6-76"><a href="#cb6-76"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb6-77"><a href="#cb6-77"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb6-78"><a href="#cb6-78"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb6-79"><a href="#cb6-79"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb6-80"><a href="#cb6-80"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb6-81"><a href="#cb6-81"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb6-82"><a href="#cb6-82"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb6-83"><a href="#cb6-83"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb6-84"><a href="#cb6-84"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb6-85"><a href="#cb6-85"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"faceInversion_data.csv"</span>)<span class="op">;</span></span>
<span id="cb6-86"><a href="#cb6-86"></a>    })<span class="op">;</span></span>
<span id="cb6-87"><a href="#cb6-87"></a>  }<span class="op">,</span></span>
<span id="cb6-88"><a href="#cb6-88"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb6-89"><a href="#cb6-89"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"save data trial"</span></span>
<span id="cb6-90"><a href="#cb6-90"></a>  }</span>
<span id="cb6-91"><a href="#cb6-91"></a>}<span class="op">;</span></span>
<span id="cb6-92"><a href="#cb6-92"></a></span>
<span id="cb6-93"><a href="#cb6-93"></a><span class="co">// ============================================</span></span>
<span id="cb6-94"><a href="#cb6-94"></a><span class="co">// Run jsPsych </span></span>
<span id="cb6-95"><a href="#cb6-95"></a><span class="co">// ============================================</span></span>
<span id="cb6-96"><a href="#cb6-96"></a></span>
<span id="cb6-97"><a href="#cb6-97"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb6-98"><a href="#cb6-98"></a>  welcome<span class="op">,</span></span>
<span id="cb6-99"><a href="#cb6-99"></a>  study_phase<span class="op">,</span></span>
<span id="cb6-100"><a href="#cb6-100"></a>  saveData</span>
<span id="cb6-101"><a href="#cb6-101"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb7-1"><a href="#cb7-1"></a> <span class="fu">.base_image</span> {</span>
<span id="cb7-2"><a href="#cb7-2"></a>    <span class="kw">max-width</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>    <span class="kw">max-height</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>    <span class="kw">filter</span><span class="ch">:</span> <span class="fu">grayscale(</span><span class="dv">100</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  }</span>
<span id="cb7-6"><a href="#cb7-6"></a>  </span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="fu">.up</span> {</span>
<span id="cb7-8"><a href="#cb7-8"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">0</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>  }</span>
<span id="cb7-10"><a href="#cb7-10"></a>  </span>
<span id="cb7-11"><a href="#cb7-11"></a>  <span class="fu">.down</span> {</span>
<span id="cb7-12"><a href="#cb7-12"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">180</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb7-13"><a href="#cb7-13"></a>  } </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div id="demo-container-2" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-2" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    \n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      .base_image {\n    max-width: 250px;\n    max-height: 250px;\n    filter: grayscale(100%);\n  }\n  \n  .up {\n    transform: rotate(0deg);\n  }\n  \n  .down {\n    transform: rotate(180deg);\n  }\n    </style>\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Welcome\n// ============================================\n\nlet welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,\n  choices: &quot; &quot;\n}\n\n\n// ============================================\n// Study Phase\n// ============================================\n\nlet study_instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    &quot;Welcome to the study phase.&quot;,\n    &quot;You will see a series of faces and houses.&quot;,\n    &quot;Please pay attention to each image and try to memorize them.&quot;,\n    &quot;Press Next to begin.&quot;\n  ],\n  show_clickable_nav: true,\n  key_forward: &quot; &quot;\n};\n\nlet study_trials = {\n  timeline: [\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 500\n      },\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: function(){\n            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`\n        },\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 1000\n      }\n  ],\n  timeline_variables: [\n    {old_image_src: &quot;images/faces/face_1.jpg&quot;, image_orientation: &quot;up&quot;},\n    {old_image_src: &quot;images/houses/house_1.jpg&quot;, image_orientation: &quot;down&quot;}\n  ],\n  randomize_order: true\n}\n\nlet study_phase = {\n    timeline: [\n      study_instructions,\n      study_trials\n    ]\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);\n    });\n  },\n  data: {\n    phase: &quot;save data trial&quot;\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  welcome,\n  study_phase,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-2');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-2" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      .base_image {
    max-width: 250px;
    max-height: 250px;
    filter: grayscale(100%);
  }
  
  .up {
    transform: rotate(0deg);
  }
  
  .down {
    transform: rotate(180deg);
  }
    </style>
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Welcome
// ============================================

let welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,
  choices: &quot; &quot;
}


// ============================================
// Study Phase
// ============================================

let study_instructions = {
  type: jsPsychInstructions,
  pages: [
    &quot;Welcome to the study phase.&quot;,
    &quot;You will see a series of faces and houses.&quot;,
    &quot;Please pay attention to each image and try to memorize them.&quot;,
    &quot;Press Next to begin.&quot;
  ],
  show_clickable_nav: true,
  key_forward: &quot; &quot;
};

let study_trials = {
  timeline: [
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 500
      },
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: function(){
            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`
        },
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 1000
      }
  ],
  timeline_variables: [
    {old_image_src: &quot;images/faces/face_1.jpg&quot;, image_orientation: &quot;up&quot;},
    {old_image_src: &quot;images/houses/house_1.jpg&quot;, image_orientation: &quot;down&quot;}
  ],
  randomize_order: true
}

let study_phase = {
    timeline: [
      study_instructions,
      study_trials
    ]
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);
    });
  },
  data: {
    phase: &quot;save data trial&quot;
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  welcome,
  study_phase,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-2&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-2&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;âœ“ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="add-test-phase" class="level3" data-number="24.2.3">
<h3 data-number="24.2.3" class="anchored" data-anchor-id="add-test-phase"><span class="header-section-number">24.2.3</span> Add Test Phase</h3>
<p>Letâ€™s again construct a short version of the test phase with only a couple of images. For the test phase, weâ€™ll need to think a bit more carefully about what we need.</p>
<ol type="1">
<li>Weâ€™ll need both the old and new image in our timeline variables.</li>
<li>In the test phase, two images are presented side-by-side and participants indicate which one is the OLD image. Weâ€™ll use the HTML button response plugin and construct our HTML for the two images ourselves.</li>
<li>We also donâ€™t want to always put the correct response in the same location on every trial. Weâ€™ll need some logic to determine whether the â€˜oldâ€™ image goes on the left or the right based on another timeline variable.</li>
</ol>
<div class="cell">
<style type="text/css">
/* CB8 */


/* CB9 */
[id^="cb9-"]:nth-child(n+65):nth-child(-n+67),
[id^="cb9-"]:nth-child(n+69):nth-child(-n+79),
[id^="cb9-"]:nth-child(n+81):nth-child(-n+132),
[id^="cb9-"]:nth-child(n+134):nth-child(-n+139),
[id^="cb9-"]:nth-child(n+175):nth-child(-n+175) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB10 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb8-1"><a href="#cb8-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 11: Face Perception<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>    </span>
<span id="cb8-9"><a href="#cb8-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-button-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-14"><a href="#cb8-14"></a></span>
<span id="cb8-15"><a href="#cb8-15"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb8-16"><a href="#cb8-16"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb8-20"><a href="#cb8-20"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb8-23"><a href="#cb8-23"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1"></a> </span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">// ============================================</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">// ============================================</span></span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">// ============================================</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">// Welcome</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">// ============================================</span></span>
<span id="cb9-11"><a href="#cb9-11"></a></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="kw">let</span> welcome <span class="op">=</span> {</span>
<span id="cb9-13"><a href="#cb9-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"Welcome to the experiment! Press the space bar to begin."</span><span class="op">,</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>}</span>
<span id="cb9-17"><a href="#cb9-17"></a></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="co">// ============================================</span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="co">// Study Phase</span></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="co">// ============================================</span></span>
<span id="cb9-21"><a href="#cb9-21"></a></span>
<span id="cb9-22"><a href="#cb9-22"></a><span class="kw">let</span> study_instructions <span class="op">=</span> {</span>
<span id="cb9-23"><a href="#cb9-23"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb9-24"><a href="#cb9-24"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb9-25"><a href="#cb9-25"></a>    <span class="st">"Welcome to the study phase."</span><span class="op">,</span></span>
<span id="cb9-26"><a href="#cb9-26"></a>    <span class="st">"You will see a series of faces and houses."</span><span class="op">,</span></span>
<span id="cb9-27"><a href="#cb9-27"></a>    <span class="st">"Please pay attention to each image and try to memorize them."</span><span class="op">,</span></span>
<span id="cb9-28"><a href="#cb9-28"></a>    <span class="st">"Press Next to begin."</span></span>
<span id="cb9-29"><a href="#cb9-29"></a>  ]<span class="op">,</span></span>
<span id="cb9-30"><a href="#cb9-30"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb9-31"><a href="#cb9-31"></a>  <span class="dt">key_forward</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb9-32"><a href="#cb9-32"></a>}<span class="op">;</span></span>
<span id="cb9-33"><a href="#cb9-33"></a></span>
<span id="cb9-34"><a href="#cb9-34"></a><span class="kw">let</span> study_trials <span class="op">=</span> {</span>
<span id="cb9-35"><a href="#cb9-35"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb9-36"><a href="#cb9-36"></a>      {</span>
<span id="cb9-37"><a href="#cb9-37"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-38"><a href="#cb9-38"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 60px;"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb9-39"><a href="#cb9-39"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb9-40"><a href="#cb9-40"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb9-41"><a href="#cb9-41"></a>      }<span class="op">,</span></span>
<span id="cb9-42"><a href="#cb9-42"></a>      {</span>
<span id="cb9-43"><a href="#cb9-43"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-44"><a href="#cb9-44"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb9-45"><a href="#cb9-45"></a>            <span class="cf">return</span> <span class="vs">`&lt;img class="base_image </span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"image_orientation"</span>)<span class="sc">}</span><span class="vs">"   src=</span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"old_image_src"</span>)<span class="sc">}</span><span class="vs"> &gt;`</span></span>
<span id="cb9-46"><a href="#cb9-46"></a>        }<span class="op">,</span></span>
<span id="cb9-47"><a href="#cb9-47"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb9-48"><a href="#cb9-48"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb9-49"><a href="#cb9-49"></a>      }</span>
<span id="cb9-50"><a href="#cb9-50"></a>  ]<span class="op">,</span></span>
<span id="cb9-51"><a href="#cb9-51"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb9-52"><a href="#cb9-52"></a>    {<span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_1.jpg"</span><span class="op">,</span> <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span>}<span class="op">,</span></span>
<span id="cb9-53"><a href="#cb9-53"></a>    {<span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_1.jpg"</span><span class="op">,</span> <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span>}</span>
<span id="cb9-54"><a href="#cb9-54"></a>  ]<span class="op">,</span></span>
<span id="cb9-55"><a href="#cb9-55"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb9-56"><a href="#cb9-56"></a>}</span>
<span id="cb9-57"><a href="#cb9-57"></a></span>
<span id="cb9-58"><a href="#cb9-58"></a><span class="kw">let</span> study_phase <span class="op">=</span> {</span>
<span id="cb9-59"><a href="#cb9-59"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb9-60"><a href="#cb9-60"></a>      study_instructions<span class="op">,</span></span>
<span id="cb9-61"><a href="#cb9-61"></a>      study_trials</span>
<span id="cb9-62"><a href="#cb9-62"></a>    ]</span>
<span id="cb9-63"><a href="#cb9-63"></a>}</span>
<span id="cb9-64"><a href="#cb9-64"></a></span>
<span id="cb9-65"><a href="#cb9-65"></a><span class="co">// ============================================</span></span>
<span id="cb9-66"><a href="#cb9-66"></a><span class="co">// Test Phase</span></span>
<span id="cb9-67"><a href="#cb9-67"></a><span class="co">// ============================================</span></span>
<span id="cb9-68"><a href="#cb9-68"></a></span>
<span id="cb9-69"><a href="#cb9-69"></a><span class="kw">let</span> test_instructions <span class="op">=</span> {</span>
<span id="cb9-70"><a href="#cb9-70"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb9-71"><a href="#cb9-71"></a>    <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb9-72"><a href="#cb9-72"></a>      <span class="st">"That completes the study phase. You will now complete the memory test phase"</span><span class="op">,</span></span>
<span id="cb9-73"><a href="#cb9-73"></a>      <span class="st">"You will see two images side-by-side."</span><span class="op">,</span></span>
<span id="cb9-74"><a href="#cb9-74"></a>      <span class="st">"One image is from the study phase (OLD) and one is new (NEW)."</span><span class="op">,</span></span>
<span id="cb9-75"><a href="#cb9-75"></a>      <span class="st">"Your task is to identify the OLD image by clicking either the Left Image or Right Image button."</span><span class="op">,</span></span>
<span id="cb9-76"><a href="#cb9-76"></a>      <span class="st">"Press NEXT to begin."</span></span>
<span id="cb9-77"><a href="#cb9-77"></a>    ]<span class="op">,</span></span>
<span id="cb9-78"><a href="#cb9-78"></a>    <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb9-79"><a href="#cb9-79"></a>  }<span class="op">;</span></span>
<span id="cb9-80"><a href="#cb9-80"></a></span>
<span id="cb9-81"><a href="#cb9-81"></a><span class="kw">let</span> test_trials <span class="op">=</span>  {</span>
<span id="cb9-82"><a href="#cb9-82"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb9-83"><a href="#cb9-83"></a>    {</span>
<span id="cb9-84"><a href="#cb9-84"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-85"><a href="#cb9-85"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 60px;"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb9-86"><a href="#cb9-86"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb9-87"><a href="#cb9-87"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb9-88"><a href="#cb9-88"></a>    }<span class="op">,</span></span>
<span id="cb9-89"><a href="#cb9-89"></a>    {</span>
<span id="cb9-90"><a href="#cb9-90"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlButtonResponse<span class="op">,</span></span>
<span id="cb9-91"><a href="#cb9-91"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb9-92"><a href="#cb9-92"></a>        <span class="kw">let</span> old_src <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"old_image_src"</span>)<span class="op">;</span></span>
<span id="cb9-93"><a href="#cb9-93"></a>        <span class="kw">let</span> new_src <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"new_image_src"</span>)<span class="op">;</span></span>
<span id="cb9-94"><a href="#cb9-94"></a>        <span class="kw">let</span> image_orientation <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"image_orientation"</span>)<span class="op">;</span></span>
<span id="cb9-95"><a href="#cb9-95"></a>        <span class="kw">let</span> old_location <span class="op">=</span>  jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"correct_location"</span>)<span class="op">;</span></span>
<span id="cb9-96"><a href="#cb9-96"></a></span>
<span id="cb9-97"><a href="#cb9-97"></a>        <span class="kw">let</span> output</span>
<span id="cb9-98"><a href="#cb9-98"></a>        </span>
<span id="cb9-99"><a href="#cb9-99"></a>        <span class="cf">if</span>(old_location <span class="op">==</span> <span class="st">"left"</span>){</span>
<span id="cb9-100"><a href="#cb9-100"></a>          output <span class="op">=</span> <span class="vs">`&lt;div style="display: flex; justify-content: center; gap: 50px;"&gt;</span></span>
<span id="cb9-101"><a href="#cb9-101"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>old_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb9-102"><a href="#cb9-102"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>new_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb9-103"><a href="#cb9-103"></a><span class="vs">          &lt;/div&gt;`</span></span>
<span id="cb9-104"><a href="#cb9-104"></a>        } <span class="cf">else</span> {</span>
<span id="cb9-105"><a href="#cb9-105"></a>          output <span class="op">=</span> <span class="vs">`&lt;div style="display: flex; justify-content: center; gap: 50px;"&gt;</span></span>
<span id="cb9-106"><a href="#cb9-106"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>new_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb9-107"><a href="#cb9-107"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>old_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb9-108"><a href="#cb9-108"></a><span class="vs">          &lt;/div&gt;`</span></span>
<span id="cb9-109"><a href="#cb9-109"></a>        }</span>
<span id="cb9-110"><a href="#cb9-110"></a></span>
<span id="cb9-111"><a href="#cb9-111"></a>        <span class="cf">return</span> output</span>
<span id="cb9-112"><a href="#cb9-112"></a>      }<span class="op">,</span></span>
<span id="cb9-113"><a href="#cb9-113"></a>      <span class="dt">prompt</span><span class="op">:</span> <span class="st">"Which image is an OLD (studied) image?"</span><span class="op">,</span></span>
<span id="cb9-114"><a href="#cb9-114"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">"Left Image"</span><span class="op">,</span> <span class="st">"Right Image"</span>]</span>
<span id="cb9-115"><a href="#cb9-115"></a>    }</span>
<span id="cb9-116"><a href="#cb9-116"></a>  ]<span class="op">,</span></span>
<span id="cb9-117"><a href="#cb9-117"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb9-118"><a href="#cb9-118"></a>      { </span>
<span id="cb9-119"><a href="#cb9-119"></a>        <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_1.jpg"</span><span class="op">,</span></span>
<span id="cb9-120"><a href="#cb9-120"></a>        <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_2.jpg"</span><span class="op">,</span></span>
<span id="cb9-121"><a href="#cb9-121"></a>        <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span><span class="op">,</span></span>
<span id="cb9-122"><a href="#cb9-122"></a>        <span class="dt">correct_location</span><span class="op">:</span> <span class="st">"left"</span></span>
<span id="cb9-123"><a href="#cb9-123"></a>      }<span class="op">,</span></span>
<span id="cb9-124"><a href="#cb9-124"></a>      { </span>
<span id="cb9-125"><a href="#cb9-125"></a>        <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_1.jpg"</span><span class="op">,</span></span>
<span id="cb9-126"><a href="#cb9-126"></a>        <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_2.jpg"</span><span class="op">,</span></span>
<span id="cb9-127"><a href="#cb9-127"></a>        <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span><span class="op">,</span></span>
<span id="cb9-128"><a href="#cb9-128"></a>        <span class="dt">correct_location</span><span class="op">:</span> <span class="st">"right"</span></span>
<span id="cb9-129"><a href="#cb9-129"></a>      }<span class="op">,</span></span>
<span id="cb9-130"><a href="#cb9-130"></a>  ]<span class="op">,</span></span>
<span id="cb9-131"><a href="#cb9-131"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb9-132"><a href="#cb9-132"></a>}<span class="op">;</span></span>
<span id="cb9-133"><a href="#cb9-133"></a></span>
<span id="cb9-134"><a href="#cb9-134"></a><span class="kw">let</span> test_phase <span class="op">=</span> {</span>
<span id="cb9-135"><a href="#cb9-135"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb9-136"><a href="#cb9-136"></a>      test_instructions<span class="op">,</span></span>
<span id="cb9-137"><a href="#cb9-137"></a>      test_trials</span>
<span id="cb9-138"><a href="#cb9-138"></a>    ]</span>
<span id="cb9-139"><a href="#cb9-139"></a>}</span>
<span id="cb9-140"><a href="#cb9-140"></a></span>
<span id="cb9-141"><a href="#cb9-141"></a><span class="co">// ============================================</span></span>
<span id="cb9-142"><a href="#cb9-142"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb9-143"><a href="#cb9-143"></a><span class="co">// ============================================</span></span>
<span id="cb9-144"><a href="#cb9-144"></a></span>
<span id="cb9-145"><a href="#cb9-145"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb9-146"><a href="#cb9-146"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-147"><a href="#cb9-147"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb9-148"><a href="#cb9-148"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb9-149"><a href="#cb9-149"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb9-150"><a href="#cb9-150"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb9-151"><a href="#cb9-151"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb9-152"><a href="#cb9-152"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb9-153"><a href="#cb9-153"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb9-154"><a href="#cb9-154"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb9-155"><a href="#cb9-155"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb9-156"><a href="#cb9-156"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb9-157"><a href="#cb9-157"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb9-158"><a href="#cb9-158"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb9-159"><a href="#cb9-159"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb9-160"><a href="#cb9-160"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"faceInversion_data.csv"</span>)<span class="op">;</span></span>
<span id="cb9-161"><a href="#cb9-161"></a>    })<span class="op">;</span></span>
<span id="cb9-162"><a href="#cb9-162"></a>  }<span class="op">,</span></span>
<span id="cb9-163"><a href="#cb9-163"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb9-164"><a href="#cb9-164"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"save data trial"</span></span>
<span id="cb9-165"><a href="#cb9-165"></a>  }</span>
<span id="cb9-166"><a href="#cb9-166"></a>}<span class="op">;</span></span>
<span id="cb9-167"><a href="#cb9-167"></a></span>
<span id="cb9-168"><a href="#cb9-168"></a><span class="co">// ============================================</span></span>
<span id="cb9-169"><a href="#cb9-169"></a><span class="co">// Run jsPsych </span></span>
<span id="cb9-170"><a href="#cb9-170"></a><span class="co">// ============================================</span></span>
<span id="cb9-171"><a href="#cb9-171"></a></span>
<span id="cb9-172"><a href="#cb9-172"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb9-173"><a href="#cb9-173"></a>  welcome<span class="op">,</span></span>
<span id="cb9-174"><a href="#cb9-174"></a>  study_phase<span class="op">,</span></span>
<span id="cb9-175"><a href="#cb9-175"></a>  test_phase<span class="op">,</span></span>
<span id="cb9-176"><a href="#cb9-176"></a>  saveData</span>
<span id="cb9-177"><a href="#cb9-177"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb10-1"><a href="#cb10-1"></a> </span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">.base_image</span> {</span>
<span id="cb10-3"><a href="#cb10-3"></a>    <span class="kw">max-width</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>    <span class="kw">max-height</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>    <span class="kw">filter</span><span class="ch">:</span> <span class="fu">grayscale(</span><span class="dv">100</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>  }</span>
<span id="cb10-7"><a href="#cb10-7"></a>  </span>
<span id="cb10-8"><a href="#cb10-8"></a>  <span class="fu">.up</span> {</span>
<span id="cb10-9"><a href="#cb10-9"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">0</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb10-10"><a href="#cb10-10"></a>  }</span>
<span id="cb10-11"><a href="#cb10-11"></a>  </span>
<span id="cb10-12"><a href="#cb10-12"></a>  <span class="fu">.down</span> {</span>
<span id="cb10-13"><a href="#cb10-13"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">180</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>  }</span>
<span id="cb10-15"><a href="#cb10-15"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div id="demo-container-3" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-3" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    \n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      \n  .base_image {\n    max-width: 250px;\n    max-height: 250px;\n    filter: grayscale(100%);\n  }\n  \n  .up {\n    transform: rotate(0deg);\n  }\n  \n  .down {\n    transform: rotate(180deg);\n  }\n\n    </style>\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Welcome\n// ============================================\n\nlet welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,\n  choices: &quot; &quot;\n}\n\n// ============================================\n// Study Phase\n// ============================================\n\nlet study_instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    &quot;Welcome to the study phase.&quot;,\n    &quot;You will see a series of faces and houses.&quot;,\n    &quot;Please pay attention to each image and try to memorize them.&quot;,\n    &quot;Press Next to begin.&quot;\n  ],\n  show_clickable_nav: true,\n  key_forward: &quot; &quot;\n};\n\nlet study_trials = {\n  timeline: [\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 500\n      },\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: function(){\n            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`\n        },\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 1000\n      }\n  ],\n  timeline_variables: [\n    {old_image_src: &quot;images/faces/face_1.jpg&quot;, image_orientation: &quot;up&quot;},\n    {old_image_src: &quot;images/houses/house_1.jpg&quot;, image_orientation: &quot;down&quot;}\n  ],\n  randomize_order: true\n}\n\nlet study_phase = {\n    timeline: [\n      study_instructions,\n      study_trials\n    ]\n}\n\n// ============================================\n// Test Phase\n// ============================================\n\nlet test_instructions = {\n    type: jsPsychInstructions,\n    pages: [\n      &quot;That completes the study phase. You will now complete the memory test phase&quot;,\n      &quot;You will see two images side-by-side.&quot;,\n      &quot;One image is from the study phase (OLD) and one is new (NEW).&quot;,\n      &quot;Your task is to identify the OLD image by clicking either the Left Image or Right Image button.&quot;,\n      &quot;Press NEXT to begin.&quot;\n    ],\n    show_clickable_nav: true\n  };\n\nlet test_trials =  {\n  timeline: [\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,\n      choices: &quot;NO_KEYS&quot;,\n      trial_duration: 500\n    },\n    {\n      type: jsPsychHtmlButtonResponse,\n      stimulus: function() {\n        let old_src = jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;);\n        let new_src = jsPsych.evaluateTimelineVariable(&quot;new_image_src&quot;);\n        let image_orientation = jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;);\n        let old_location =  jsPsych.evaluateTimelineVariable(&quot;correct_location&quot;);\n\n        let output\n        \n        if(old_location == &quot;left&quot;){\n          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>\n          </div>`\n        } else {\n          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>\n          </div>`\n        }\n\n        return output\n      },\n      prompt: &quot;Which image is an OLD (studied) image?&quot;,\n      choices: [&quot;Left Image&quot;, &quot;Right Image&quot;]\n    }\n  ],\n  timeline_variables: [\n      { \n        old_image_src: &quot;images/faces/face_1.jpg&quot;,\n        new_image_src: &quot;images/faces/face_2.jpg&quot;,\n        image_orientation: &quot;up&quot;,\n        correct_location: &quot;left&quot;\n      },\n      { \n        old_image_src: &quot;images/houses/house_1.jpg&quot;,\n        new_image_src: &quot;images/houses/house_2.jpg&quot;,\n        image_orientation: &quot;down&quot;,\n        correct_location: &quot;right&quot;\n      },\n  ],\n  randomize_order: true\n};\n\nlet test_phase = {\n    timeline: [\n      test_instructions,\n      test_trials\n    ]\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);\n    });\n  },\n  data: {\n    phase: &quot;save data trial&quot;\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  welcome,\n  study_phase,\n  test_phase,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-3');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-3" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      
  .base_image {
    max-width: 250px;
    max-height: 250px;
    filter: grayscale(100%);
  }
  
  .up {
    transform: rotate(0deg);
  }
  
  .down {
    transform: rotate(180deg);
  }

    </style>
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Welcome
// ============================================

let welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,
  choices: &quot; &quot;
}

// ============================================
// Study Phase
// ============================================

let study_instructions = {
  type: jsPsychInstructions,
  pages: [
    &quot;Welcome to the study phase.&quot;,
    &quot;You will see a series of faces and houses.&quot;,
    &quot;Please pay attention to each image and try to memorize them.&quot;,
    &quot;Press Next to begin.&quot;
  ],
  show_clickable_nav: true,
  key_forward: &quot; &quot;
};

let study_trials = {
  timeline: [
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 500
      },
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: function(){
            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`
        },
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 1000
      }
  ],
  timeline_variables: [
    {old_image_src: &quot;images/faces/face_1.jpg&quot;, image_orientation: &quot;up&quot;},
    {old_image_src: &quot;images/houses/house_1.jpg&quot;, image_orientation: &quot;down&quot;}
  ],
  randomize_order: true
}

let study_phase = {
    timeline: [
      study_instructions,
      study_trials
    ]
}

// ============================================
// Test Phase
// ============================================

let test_instructions = {
    type: jsPsychInstructions,
    pages: [
      &quot;That completes the study phase. You will now complete the memory test phase&quot;,
      &quot;You will see two images side-by-side.&quot;,
      &quot;One image is from the study phase (OLD) and one is new (NEW).&quot;,
      &quot;Your task is to identify the OLD image by clicking either the Left Image or Right Image button.&quot;,
      &quot;Press NEXT to begin.&quot;
    ],
    show_clickable_nav: true
  };

let test_trials =  {
  timeline: [
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,
      choices: &quot;NO_KEYS&quot;,
      trial_duration: 500
    },
    {
      type: jsPsychHtmlButtonResponse,
      stimulus: function() {
        let old_src = jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;);
        let new_src = jsPsych.evaluateTimelineVariable(&quot;new_image_src&quot;);
        let image_orientation = jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;);
        let old_location =  jsPsych.evaluateTimelineVariable(&quot;correct_location&quot;);

        let output
        
        if(old_location == &quot;left&quot;){
          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>
          </div>`
        } else {
          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>
          </div>`
        }

        return output
      },
      prompt: &quot;Which image is an OLD (studied) image?&quot;,
      choices: [&quot;Left Image&quot;, &quot;Right Image&quot;]
    }
  ],
  timeline_variables: [
      { 
        old_image_src: &quot;images/faces/face_1.jpg&quot;,
        new_image_src: &quot;images/faces/face_2.jpg&quot;,
        image_orientation: &quot;up&quot;,
        correct_location: &quot;left&quot;
      },
      { 
        old_image_src: &quot;images/houses/house_1.jpg&quot;,
        new_image_src: &quot;images/houses/house_2.jpg&quot;,
        image_orientation: &quot;down&quot;,
        correct_location: &quot;right&quot;
      },
  ],
  randomize_order: true
};

let test_phase = {
    timeline: [
      test_instructions,
      test_trials
    ]
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);
    });
  },
  data: {
    phase: &quot;save data trial&quot;
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  welcome,
  study_phase,
  test_phase,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-3&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-3&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;âœ“ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="randomize-stimulus-selection-and-assignments" class="level3" data-number="24.2.4">
<h3 data-number="24.2.4" class="anchored" data-anchor-id="randomize-stimulus-selection-and-assignments"><span class="header-section-number">24.2.4</span> Randomize Stimulus Selection and Assignments</h3>
<p>Before deciding how to randomize our stimulus assignments, we need to have a good idea about what we want to end up with.</p>
<ol type="1">
<li>We have 50 face and 50 house images. We only 20 of each, 10 for the old images and 10 for the new images. Therefore, we need to randomly select 20 images from the full 50.</li>
<li>Images need to be randomly split into an OLD set and a NEW set.</li>
<li>OLD and NEW Images need to be randomly split into upside down or right-side up.</li>
<li>The OLD and NEW images are presented together during the test phase, so they need to be paired together</li>
<li>When we present them together, we need to know which one goes on the left versus right side, to know which is the correct one and to make sure the old image isnâ€™t always on the same side.</li>
</ol>
<p>Letâ€™s make a mock single timeline variable that contains all these labels:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1"></a><span class="co">// what type of image is it?</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>image_type<span class="op">:</span> <span class="st">"face"</span> <span class="co">// or "house"</span></span>
<span id="cb11-3"><a href="#cb11-3"></a></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">// Two images paired together, with a src label </span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">// these images need to be randomly assigned</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>old_image_src<span class="op">:</span> <span class="st">"images/faces/face_1.jpg"</span><span class="op">,</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>new_image_src<span class="op">:</span> <span class="st">"images/faces/face_2.jpg"</span></span>
<span id="cb11-8"><a href="#cb11-8"></a></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co">// Orientation needs to be labelled too</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">// Half the images need to be up, half down</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>image_orientation<span class="op">:</span> <span class="st">"up"</span> <span class="co">// or "down"</span></span>
<span id="cb11-12"><a href="#cb11-12"></a></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="co">// The location of the old image during test</span></span>
<span id="cb11-14"><a href="#cb11-14"></a><span class="co">// This also needs to be randomly assigned</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>correct_location<span class="op">:</span> <span class="st">"left"</span> <span class="co">// or "right</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, weâ€™ll need to construct our <code>timeline_variables</code> array so that each object inside it contains all those labels, but with proper randomization:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">let</span> stims <span class="op">=</span> [</span>
<span id="cb12-2"><a href="#cb12-2"></a>  {</span>
<span id="cb12-3"><a href="#cb12-3"></a>    <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span> </span>
<span id="cb12-4"><a href="#cb12-4"></a>    <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_1.jpg"</span><span class="op">,</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>    <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_2.jpg"</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>    <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span><span class="op">,</span> </span>
<span id="cb12-7"><a href="#cb12-7"></a>    <span class="dt">correct_location</span><span class="op">:</span> <span class="st">"left"</span> </span>
<span id="cb12-8"><a href="#cb12-8"></a>  }<span class="op">,</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>  </span>
<span id="cb12-10"><a href="#cb12-10"></a>  {</span>
<span id="cb12-11"><a href="#cb12-11"></a>    <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb12-12"><a href="#cb12-12"></a>    <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_3.jpg"</span><span class="op">,</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>    <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_4.jpg"</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>    <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span><span class="op">,</span> </span>
<span id="cb12-15"><a href="#cb12-15"></a>    <span class="dt">correct_location</span><span class="op">:</span> <span class="st">"left"</span> </span>
<span id="cb12-16"><a href="#cb12-16"></a>  }<span class="op">,</span></span>
<span id="cb12-17"><a href="#cb12-17"></a></span>
<span id="cb12-18"><a href="#cb12-18"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Although we have two phases: study phase and a test phase, we can actually use the same timeline variables array for both since it contains all the info we need for both trials.</p>
<p>Before we put the code into our exp.js file, Iâ€™m going to walk through, step-by-step how I randomized the image assignments.</p>
<p><strong>1. Setup our variables</strong></p>
<p>First, we need our list of images. Since the filenames are numbered (e.g., faces_1, faces_2, faces_3 â€¦), we can just use the numbers 1 to 50 randomly select images. Weâ€™ll still need to make our list of numbers though.</p>
<p>Iâ€™ll also create an empty array for the timeline variables called <code>stims</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1"></a><span class="co">// ============================================</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co">// Select &amp; Assign Images</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co">// ============================================</span></span>
<span id="cb13-4"><a href="#cb13-4"></a></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co">// the images are numbered 1 to 50 (e.g., faces_34.jpg)</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">// create a list of numbers 1 to 50</span></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="kw">let</span> face_numbers <span class="op">=</span> []</span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="kw">let</span> house_numbers <span class="op">=</span> []</span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb13-10"><a href="#cb13-10"></a>  face_numbers<span class="op">.</span><span class="fu">push</span>(i)<span class="op">;</span></span>
<span id="cb13-11"><a href="#cb13-11"></a>  house_numbers<span class="op">.</span><span class="fu">push</span>(i)</span>
<span id="cb13-12"><a href="#cb13-12"></a>}</span>
<span id="cb13-13"><a href="#cb13-13"></a></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="co">// variable for our timeline_variables array</span></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="kw">let</span> stims <span class="op">=</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>2. Randomly select 20 images split into conditions</strong></p>
<p>Now that I have a list of numbers from 1 to 50, I can randomize the order and select out 5 per condition. Using slice and selecting 0-5, 6-10, etc. will make sure I use each number only once.</p>
<div class="cell">
<style type="text/css">
/* CB14 */
[id^="cb14-"]:nth-child(n+17):nth-child(-n+19),
[id^="cb14-"]:nth-child(n+21):nth-child(-n+25) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}
</style>
</div>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1"></a><span class="co">// ============================================</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="co">// Select &amp; Assign Images</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co">// ============================================</span></span>
<span id="cb14-4"><a href="#cb14-4"></a></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co">// the images are numbered 1 to 50 (e.g., faces_34.jpg)</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="co">// create a list of numbers 1 to 50</span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="kw">let</span> face_numbers <span class="op">=</span> []</span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="kw">let</span> house_numbers <span class="op">=</span> []</span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb14-10"><a href="#cb14-10"></a>  face_numbers<span class="op">.</span><span class="fu">push</span>(i)<span class="op">;</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>  house_numbers<span class="op">.</span><span class="fu">push</span>(i)</span>
<span id="cb14-12"><a href="#cb14-12"></a>}</span>
<span id="cb14-13"><a href="#cb14-13"></a></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="co">// variable for our timeline_variables array</span></span>
<span id="cb14-15"><a href="#cb14-15"></a><span class="kw">let</span> stims <span class="op">=</span> []</span>
<span id="cb14-16"><a href="#cb14-16"></a></span>
<span id="cb14-17"><a href="#cb14-17"></a><span class="co">// Face Images</span></span>
<span id="cb14-18"><a href="#cb14-18"></a><span class="co">// 1. Randomize the order</span></span>
<span id="cb14-19"><a href="#cb14-19"></a>face_numbers <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(face_numbers)</span>
<span id="cb14-20"><a href="#cb14-20"></a></span>
<span id="cb14-21"><a href="#cb14-21"></a><span class="co">// 2. Split into four sets</span></span>
<span id="cb14-22"><a href="#cb14-22"></a><span class="kw">let</span> old_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">5</span>)</span>
<span id="cb14-23"><a href="#cb14-23"></a><span class="kw">let</span> old_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">10</span>)</span>
<span id="cb14-24"><a href="#cb14-24"></a><span class="kw">let</span> new_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">15</span>)</span>
<span id="cb14-25"><a href="#cb14-25"></a><span class="kw">let</span> new_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">15</span><span class="op">,</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>3. Pair the old/new images together and add to an array</strong></p>
<p>Now we loop through the <code>old_faces_down</code> and <code>old_faces_up</code> arrays and create an object that has an old image and a new image with proper labels.</p>
<p>I also need the image source location with the filename. Iâ€™m constructing that from the number and pasting the text together: <code>"images/faces/face_" + old_faces_up[i] + ".jpg"</code>.</p>
<p>Remember that <code>old_faces_[0]</code> will be whatever number is in the first position of the array, <code>old_faces_[1]</code> will be whatever number is in the second position and so on. Since we randomize the order it can be any number from 1 to 50.</p>
<div class="cell">
<style type="text/css">
/* CB15 */
[id^="cb15-"]:nth-child(n+27):nth-child(-n+39),
[id^="cb15-"]:nth-child(n+41):nth-child(-n+52) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}
</style>
</div>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1"></a><span class="co">// ============================================</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">// Select &amp; Assign Images</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co">// ============================================</span></span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co">// the images are numbered 1 to 50 (e.g., faces_34.jpg)</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co">// create a list of numbers 1 to 50</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="kw">let</span> face_numbers <span class="op">=</span> []</span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="kw">let</span> house_numbers <span class="op">=</span> []</span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb15-10"><a href="#cb15-10"></a>  face_numbers<span class="op">.</span><span class="fu">push</span>(i)<span class="op">;</span></span>
<span id="cb15-11"><a href="#cb15-11"></a>  house_numbers<span class="op">.</span><span class="fu">push</span>(i)</span>
<span id="cb15-12"><a href="#cb15-12"></a>}</span>
<span id="cb15-13"><a href="#cb15-13"></a></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">// variable for our timeline_variables array</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="kw">let</span> stims <span class="op">=</span> []</span>
<span id="cb15-16"><a href="#cb15-16"></a></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co">// Face Images</span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">// 1. Randomize the order</span></span>
<span id="cb15-19"><a href="#cb15-19"></a>face_numbers <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(face_numbers)</span>
<span id="cb15-20"><a href="#cb15-20"></a></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co">// 2. Split into four sets</span></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="kw">let</span> old_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">5</span>)</span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="kw">let</span> old_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">10</span>)</span>
<span id="cb15-24"><a href="#cb15-24"></a><span class="kw">let</span> new_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">15</span>)</span>
<span id="cb15-25"><a href="#cb15-25"></a><span class="kw">let</span> new_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">15</span><span class="op">,</span><span class="dv">20</span>)</span>
<span id="cb15-26"><a href="#cb15-26"></a></span>
<span id="cb15-27"><a href="#cb15-27"></a><span class="co">// 3. Create object with image pair and add to stims</span></span>
<span id="cb15-28"><a href="#cb15-28"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_up<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb15-29"><a href="#cb15-29"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb15-30"><a href="#cb15-30"></a>      {</span>
<span id="cb15-31"><a href="#cb15-31"></a>        <span class="dt">old_image_number</span><span class="op">:</span> old_faces_up[i]<span class="op">,</span></span>
<span id="cb15-32"><a href="#cb15-32"></a>        <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb15-33"><a href="#cb15-33"></a>        <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_up[i]<span class="op">,</span></span>
<span id="cb15-34"><a href="#cb15-34"></a>        <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb15-35"><a href="#cb15-35"></a>        <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb15-36"><a href="#cb15-36"></a>        <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span></span>
<span id="cb15-37"><a href="#cb15-37"></a>      }</span>
<span id="cb15-38"><a href="#cb15-38"></a>  )<span class="op">;</span></span>
<span id="cb15-39"><a href="#cb15-39"></a>}</span>
<span id="cb15-40"><a href="#cb15-40"></a>  </span>
<span id="cb15-41"><a href="#cb15-41"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_down<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb15-42"><a href="#cb15-42"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb15-43"><a href="#cb15-43"></a>      {</span>
<span id="cb15-44"><a href="#cb15-44"></a>        <span class="dt">old_image_number</span><span class="op">:</span> old_faces_down[i]<span class="op">,</span></span>
<span id="cb15-45"><a href="#cb15-45"></a>        <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb15-46"><a href="#cb15-46"></a>        <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_down[i]<span class="op">,</span></span>
<span id="cb15-47"><a href="#cb15-47"></a>        <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb15-48"><a href="#cb15-48"></a>        <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb15-49"><a href="#cb15-49"></a>        <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span></span>
<span id="cb15-50"><a href="#cb15-50"></a>      }</span>
<span id="cb15-51"><a href="#cb15-51"></a>  )<span class="op">;</span></span>
<span id="cb15-52"><a href="#cb15-52"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>4. Randomly select left or right as the old image location</strong></p>
<p>Finally, I need to set the test locations for the images. Iâ€™m just going to randomly select the old image location using a jsPsych function.</p>
<div class="cell">
<style type="text/css">
/* CB16 */
[id^="cb16-"]:nth-child(n+36):nth-child(-n+37),
[id^="cb16-"]:nth-child(n+50):nth-child(-n+51) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}
</style>
</div>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1"></a><span class="co">// ============================================</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="co">// Select &amp; Assign Images</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="co">// ============================================</span></span>
<span id="cb16-4"><a href="#cb16-4"></a></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="co">// the images are numbered 1 to 50 (e.g., faces_34.jpg)</span></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co">// create a list of numbers 1 to 50</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="kw">let</span> face_numbers <span class="op">=</span> []</span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="kw">let</span> house_numbers <span class="op">=</span> []</span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb16-10"><a href="#cb16-10"></a>  face_numbers<span class="op">.</span><span class="fu">push</span>(i)<span class="op">;</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>  house_numbers<span class="op">.</span><span class="fu">push</span>(i)</span>
<span id="cb16-12"><a href="#cb16-12"></a>}</span>
<span id="cb16-13"><a href="#cb16-13"></a></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="co">// variable for our timeline_variables array</span></span>
<span id="cb16-15"><a href="#cb16-15"></a><span class="kw">let</span> stims <span class="op">=</span> []</span>
<span id="cb16-16"><a href="#cb16-16"></a></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="co">// Face Images</span></span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="co">// 1. Randomize the order</span></span>
<span id="cb16-19"><a href="#cb16-19"></a>face_numbers <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(face_numbers)</span>
<span id="cb16-20"><a href="#cb16-20"></a></span>
<span id="cb16-21"><a href="#cb16-21"></a><span class="co">// 2. Split into four sets</span></span>
<span id="cb16-22"><a href="#cb16-22"></a><span class="kw">let</span> old_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">5</span>)</span>
<span id="cb16-23"><a href="#cb16-23"></a><span class="kw">let</span> old_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">10</span>)</span>
<span id="cb16-24"><a href="#cb16-24"></a><span class="kw">let</span> new_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">15</span>)</span>
<span id="cb16-25"><a href="#cb16-25"></a><span class="kw">let</span> new_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">15</span><span class="op">,</span><span class="dv">20</span>)</span>
<span id="cb16-26"><a href="#cb16-26"></a></span>
<span id="cb16-27"><a href="#cb16-27"></a><span class="co">// 3. Create object with image pair and add to stims</span></span>
<span id="cb16-28"><a href="#cb16-28"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_up<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb16-29"><a href="#cb16-29"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb16-30"><a href="#cb16-30"></a>      {</span>
<span id="cb16-31"><a href="#cb16-31"></a>        <span class="dt">old_image_number</span><span class="op">:</span> old_faces_up[i]<span class="op">,</span></span>
<span id="cb16-32"><a href="#cb16-32"></a>        <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb16-33"><a href="#cb16-33"></a>        <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_up[i]<span class="op">,</span></span>
<span id="cb16-34"><a href="#cb16-34"></a>        <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb16-35"><a href="#cb16-35"></a>        <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb16-36"><a href="#cb16-36"></a>        <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span><span class="op">,</span></span>
<span id="cb16-37"><a href="#cb16-37"></a>        <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb16-38"><a href="#cb16-38"></a>      }</span>
<span id="cb16-39"><a href="#cb16-39"></a>  )<span class="op">;</span></span>
<span id="cb16-40"><a href="#cb16-40"></a>}</span>
<span id="cb16-41"><a href="#cb16-41"></a>  </span>
<span id="cb16-42"><a href="#cb16-42"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_down<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb16-43"><a href="#cb16-43"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb16-44"><a href="#cb16-44"></a>      {</span>
<span id="cb16-45"><a href="#cb16-45"></a>        <span class="dt">old_image_number</span><span class="op">:</span> old_faces_down[i]<span class="op">,</span></span>
<span id="cb16-46"><a href="#cb16-46"></a>        <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb16-47"><a href="#cb16-47"></a>        <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_down[i]<span class="op">,</span></span>
<span id="cb16-48"><a href="#cb16-48"></a>        <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb16-49"><a href="#cb16-49"></a>        <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb16-50"><a href="#cb16-50"></a>        <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span><span class="op">,</span></span>
<span id="cb16-51"><a href="#cb16-51"></a>        <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb16-52"><a href="#cb16-52"></a>      }</span>
<span id="cb16-53"><a href="#cb16-53"></a>  )<span class="op">;</span></span>
<span id="cb16-54"><a href="#cb16-54"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>5. Add to our code</strong></p>
<p>Now letâ€™s add that code to our experiment and replace our <code>timeline_variables</code> with <code>stims</code>.</p>
<div class="cell">
<style type="text/css">
/* CB17 */

/* CB18 */
[id^="cb18-"]:nth-child(n+18):nth-child(-n+20),
[id^="cb18-"]:nth-child(n+22):nth-child(-n+29),
[id^="cb18-"]:nth-child(n+31):nth-child(-n+32),
[id^="cb18-"]:nth-child(n+34):nth-child(-n+36),
[id^="cb18-"]:nth-child(n+38):nth-child(-n+42),
[id^="cb18-"]:nth-child(n+44):nth-child(-n+57),
[id^="cb18-"]:nth-child(n+59):nth-child(-n+69),
[id^="cb18-"]:nth-child(n+104):nth-child(-n+104),
[id^="cb18-"]:nth-child(n+167):nth-child(-n+167) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}


/* CB19 */

</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb17-1"><a href="#cb17-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 11: Face Perception<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8"></a>    </span>
<span id="cb17-9"><a href="#cb17-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-11"><a href="#cb17-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-12"><a href="#cb17-12"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-13"><a href="#cb17-13"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-button-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-14"><a href="#cb17-14"></a></span>
<span id="cb17-15"><a href="#cb17-15"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb17-16"><a href="#cb17-16"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb17-19"><a href="#cb17-19"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb17-20"><a href="#cb17-20"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-21"><a href="#cb17-21"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb17-22"><a href="#cb17-22"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb17-23"><a href="#cb17-23"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1"></a> </span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="co">// ============================================</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co">// ============================================</span></span>
<span id="cb18-5"><a href="#cb18-5"></a></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb18-7"><a href="#cb18-7"></a></span>
<span id="cb18-8"><a href="#cb18-8"></a><span class="co">// ============================================</span></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="co">// Welcome</span></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="co">// ============================================</span></span>
<span id="cb18-11"><a href="#cb18-11"></a></span>
<span id="cb18-12"><a href="#cb18-12"></a><span class="kw">let</span> welcome <span class="op">=</span> {</span>
<span id="cb18-13"><a href="#cb18-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"Welcome to the experiment! Press the space bar to begin."</span><span class="op">,</span></span>
<span id="cb18-15"><a href="#cb18-15"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>}</span>
<span id="cb18-17"><a href="#cb18-17"></a></span>
<span id="cb18-18"><a href="#cb18-18"></a><span class="co">// ============================================</span></span>
<span id="cb18-19"><a href="#cb18-19"></a><span class="co">// Select &amp; Assign Images</span></span>
<span id="cb18-20"><a href="#cb18-20"></a><span class="co">// ============================================</span></span>
<span id="cb18-21"><a href="#cb18-21"></a></span>
<span id="cb18-22"><a href="#cb18-22"></a><span class="co">// the images are numbered 1 to 50 (e.g., faces_34.jpg)</span></span>
<span id="cb18-23"><a href="#cb18-23"></a><span class="co">// create a list of numbers 1 to 50</span></span>
<span id="cb18-24"><a href="#cb18-24"></a><span class="kw">let</span> face_numbers <span class="op">=</span> []</span>
<span id="cb18-25"><a href="#cb18-25"></a><span class="kw">let</span> house_numbers <span class="op">=</span> []</span>
<span id="cb18-26"><a href="#cb18-26"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb18-27"><a href="#cb18-27"></a>  face_numbers<span class="op">.</span><span class="fu">push</span>(i)<span class="op">;</span></span>
<span id="cb18-28"><a href="#cb18-28"></a>  house_numbers<span class="op">.</span><span class="fu">push</span>(i)</span>
<span id="cb18-29"><a href="#cb18-29"></a>}</span>
<span id="cb18-30"><a href="#cb18-30"></a></span>
<span id="cb18-31"><a href="#cb18-31"></a><span class="co">// variable for our timeline_variables array</span></span>
<span id="cb18-32"><a href="#cb18-32"></a><span class="kw">let</span> stims <span class="op">=</span> []</span>
<span id="cb18-33"><a href="#cb18-33"></a></span>
<span id="cb18-34"><a href="#cb18-34"></a><span class="co">// Face Images</span></span>
<span id="cb18-35"><a href="#cb18-35"></a><span class="co">// 1. Randomize the order</span></span>
<span id="cb18-36"><a href="#cb18-36"></a>face_numbers <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(face_numbers)</span>
<span id="cb18-37"><a href="#cb18-37"></a></span>
<span id="cb18-38"><a href="#cb18-38"></a><span class="co">// 2. Split into four sets</span></span>
<span id="cb18-39"><a href="#cb18-39"></a><span class="kw">let</span> old_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">5</span>)</span>
<span id="cb18-40"><a href="#cb18-40"></a><span class="kw">let</span> old_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">10</span>)</span>
<span id="cb18-41"><a href="#cb18-41"></a><span class="kw">let</span> new_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">15</span>)</span>
<span id="cb18-42"><a href="#cb18-42"></a><span class="kw">let</span> new_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">15</span><span class="op">,</span><span class="dv">20</span>)</span>
<span id="cb18-43"><a href="#cb18-43"></a></span>
<span id="cb18-44"><a href="#cb18-44"></a><span class="co">// 3. Create object with image pair and add to stims</span></span>
<span id="cb18-45"><a href="#cb18-45"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_up<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb18-46"><a href="#cb18-46"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb18-47"><a href="#cb18-47"></a>    {</span>
<span id="cb18-48"><a href="#cb18-48"></a>    <span class="dt">old_image_number</span><span class="op">:</span> old_faces_up[i]<span class="op">,</span></span>
<span id="cb18-49"><a href="#cb18-49"></a>    <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb18-50"><a href="#cb18-50"></a>    <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_up[i]<span class="op">,</span></span>
<span id="cb18-51"><a href="#cb18-51"></a>    <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb18-52"><a href="#cb18-52"></a>    <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb18-53"><a href="#cb18-53"></a>    <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span><span class="op">,</span></span>
<span id="cb18-54"><a href="#cb18-54"></a>    <span class="dt">correct_location</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb18-55"><a href="#cb18-55"></a>    }</span>
<span id="cb18-56"><a href="#cb18-56"></a>  )<span class="op">;</span></span>
<span id="cb18-57"><a href="#cb18-57"></a>}</span>
<span id="cb18-58"><a href="#cb18-58"></a></span>
<span id="cb18-59"><a href="#cb18-59"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_down<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb18-60"><a href="#cb18-60"></a>  stims<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb18-61"><a href="#cb18-61"></a>    <span class="dt">old_image_number</span><span class="op">:</span> old_faces_down[i]<span class="op">,</span></span>
<span id="cb18-62"><a href="#cb18-62"></a>    <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb18-63"><a href="#cb18-63"></a>    <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_down[i]<span class="op">,</span></span>
<span id="cb18-64"><a href="#cb18-64"></a>    <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb18-65"><a href="#cb18-65"></a>    <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb18-66"><a href="#cb18-66"></a>    <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span><span class="op">,</span></span>
<span id="cb18-67"><a href="#cb18-67"></a>    <span class="dt">correct_location</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb18-68"><a href="#cb18-68"></a>  })<span class="op">;</span></span>
<span id="cb18-69"><a href="#cb18-69"></a>}</span>
<span id="cb18-70"><a href="#cb18-70"></a></span>
<span id="cb18-71"><a href="#cb18-71"></a><span class="co">// ============================================</span></span>
<span id="cb18-72"><a href="#cb18-72"></a><span class="co">// Study Phase</span></span>
<span id="cb18-73"><a href="#cb18-73"></a><span class="co">// ============================================</span></span>
<span id="cb18-74"><a href="#cb18-74"></a></span>
<span id="cb18-75"><a href="#cb18-75"></a><span class="kw">let</span> study_instructions <span class="op">=</span> {</span>
<span id="cb18-76"><a href="#cb18-76"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb18-77"><a href="#cb18-77"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb18-78"><a href="#cb18-78"></a>    <span class="st">"Welcome to the study phase."</span><span class="op">,</span></span>
<span id="cb18-79"><a href="#cb18-79"></a>    <span class="st">"You will see a series of faces and houses."</span><span class="op">,</span></span>
<span id="cb18-80"><a href="#cb18-80"></a>    <span class="st">"Please pay attention to each image and try to memorize them."</span><span class="op">,</span></span>
<span id="cb18-81"><a href="#cb18-81"></a>    <span class="st">"Press Next to begin."</span></span>
<span id="cb18-82"><a href="#cb18-82"></a>  ]<span class="op">,</span></span>
<span id="cb18-83"><a href="#cb18-83"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb18-84"><a href="#cb18-84"></a>  <span class="dt">key_forward</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb18-85"><a href="#cb18-85"></a>}<span class="op">;</span></span>
<span id="cb18-86"><a href="#cb18-86"></a></span>
<span id="cb18-87"><a href="#cb18-87"></a><span class="kw">let</span> study_trials <span class="op">=</span> {</span>
<span id="cb18-88"><a href="#cb18-88"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb18-89"><a href="#cb18-89"></a>      {</span>
<span id="cb18-90"><a href="#cb18-90"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb18-91"><a href="#cb18-91"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 60px;"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb18-92"><a href="#cb18-92"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb18-93"><a href="#cb18-93"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb18-94"><a href="#cb18-94"></a>      }<span class="op">,</span></span>
<span id="cb18-95"><a href="#cb18-95"></a>      {</span>
<span id="cb18-96"><a href="#cb18-96"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb18-97"><a href="#cb18-97"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb18-98"><a href="#cb18-98"></a>            <span class="cf">return</span> <span class="vs">`&lt;img class="base_image </span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"image_orientation"</span>)<span class="sc">}</span><span class="vs">"   src=</span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"old_image_src"</span>)<span class="sc">}</span><span class="vs"> &gt;`</span></span>
<span id="cb18-99"><a href="#cb18-99"></a>        }<span class="op">,</span></span>
<span id="cb18-100"><a href="#cb18-100"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb18-101"><a href="#cb18-101"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb18-102"><a href="#cb18-102"></a>      }</span>
<span id="cb18-103"><a href="#cb18-103"></a>  ]<span class="op">,</span></span>
<span id="cb18-104"><a href="#cb18-104"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> stims<span class="op">,</span></span>
<span id="cb18-105"><a href="#cb18-105"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb18-106"><a href="#cb18-106"></a>}</span>
<span id="cb18-107"><a href="#cb18-107"></a></span>
<span id="cb18-108"><a href="#cb18-108"></a><span class="kw">let</span> study_phase <span class="op">=</span> {</span>
<span id="cb18-109"><a href="#cb18-109"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb18-110"><a href="#cb18-110"></a>      study_instructions<span class="op">,</span></span>
<span id="cb18-111"><a href="#cb18-111"></a>      study_trials</span>
<span id="cb18-112"><a href="#cb18-112"></a>    ]</span>
<span id="cb18-113"><a href="#cb18-113"></a>}</span>
<span id="cb18-114"><a href="#cb18-114"></a></span>
<span id="cb18-115"><a href="#cb18-115"></a><span class="co">// ============================================</span></span>
<span id="cb18-116"><a href="#cb18-116"></a><span class="co">// Test Phase</span></span>
<span id="cb18-117"><a href="#cb18-117"></a><span class="co">// ============================================</span></span>
<span id="cb18-118"><a href="#cb18-118"></a></span>
<span id="cb18-119"><a href="#cb18-119"></a><span class="kw">let</span> test_instructions <span class="op">=</span> {</span>
<span id="cb18-120"><a href="#cb18-120"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb18-121"><a href="#cb18-121"></a>    <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb18-122"><a href="#cb18-122"></a>      <span class="st">"That completes the study phase. You will now complete the memory test phase"</span><span class="op">,</span></span>
<span id="cb18-123"><a href="#cb18-123"></a>      <span class="st">"You will see two images side-by-side."</span><span class="op">,</span></span>
<span id="cb18-124"><a href="#cb18-124"></a>      <span class="st">"One image is from the study phase (OLD) and one is new (NEW)."</span><span class="op">,</span></span>
<span id="cb18-125"><a href="#cb18-125"></a>      <span class="st">"Your task is to identify the OLD image by clicking either the Left Image or Right Image button."</span><span class="op">,</span></span>
<span id="cb18-126"><a href="#cb18-126"></a>      <span class="st">"Press NEXT to begin."</span></span>
<span id="cb18-127"><a href="#cb18-127"></a>    ]<span class="op">,</span></span>
<span id="cb18-128"><a href="#cb18-128"></a>    <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb18-129"><a href="#cb18-129"></a>  }<span class="op">;</span></span>
<span id="cb18-130"><a href="#cb18-130"></a></span>
<span id="cb18-131"><a href="#cb18-131"></a><span class="kw">let</span> test_trials <span class="op">=</span>  {</span>
<span id="cb18-132"><a href="#cb18-132"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb18-133"><a href="#cb18-133"></a>    {</span>
<span id="cb18-134"><a href="#cb18-134"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb18-135"><a href="#cb18-135"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 60px;"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb18-136"><a href="#cb18-136"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb18-137"><a href="#cb18-137"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb18-138"><a href="#cb18-138"></a>    }<span class="op">,</span></span>
<span id="cb18-139"><a href="#cb18-139"></a>    {</span>
<span id="cb18-140"><a href="#cb18-140"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlButtonResponse<span class="op">,</span></span>
<span id="cb18-141"><a href="#cb18-141"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb18-142"><a href="#cb18-142"></a>        <span class="kw">let</span> old_src <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"old_image_src"</span>)<span class="op">;</span></span>
<span id="cb18-143"><a href="#cb18-143"></a>        <span class="kw">let</span> new_src <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"new_image_src"</span>)<span class="op">;</span></span>
<span id="cb18-144"><a href="#cb18-144"></a>        <span class="kw">let</span> image_orientation <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"image_orientation"</span>)<span class="op">;</span></span>
<span id="cb18-145"><a href="#cb18-145"></a>        <span class="kw">let</span> old_location <span class="op">=</span>  jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"correct_location"</span>)<span class="op">;</span></span>
<span id="cb18-146"><a href="#cb18-146"></a></span>
<span id="cb18-147"><a href="#cb18-147"></a>        <span class="kw">let</span> output</span>
<span id="cb18-148"><a href="#cb18-148"></a>        </span>
<span id="cb18-149"><a href="#cb18-149"></a>        <span class="cf">if</span>(old_location <span class="op">==</span> <span class="st">"left"</span>){</span>
<span id="cb18-150"><a href="#cb18-150"></a>          output <span class="op">=</span> <span class="vs">`&lt;div style="display: flex; justify-content: center; gap: 50px;"&gt;</span></span>
<span id="cb18-151"><a href="#cb18-151"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>old_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb18-152"><a href="#cb18-152"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>new_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb18-153"><a href="#cb18-153"></a><span class="vs">          &lt;/div&gt;`</span></span>
<span id="cb18-154"><a href="#cb18-154"></a>        } <span class="cf">else</span> {</span>
<span id="cb18-155"><a href="#cb18-155"></a>          output <span class="op">=</span> <span class="vs">`&lt;div style="display: flex; justify-content: center; gap: 50px;"&gt;</span></span>
<span id="cb18-156"><a href="#cb18-156"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>new_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb18-157"><a href="#cb18-157"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>old_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb18-158"><a href="#cb18-158"></a><span class="vs">          &lt;/div&gt;`</span></span>
<span id="cb18-159"><a href="#cb18-159"></a>        }</span>
<span id="cb18-160"><a href="#cb18-160"></a></span>
<span id="cb18-161"><a href="#cb18-161"></a>        <span class="cf">return</span> output</span>
<span id="cb18-162"><a href="#cb18-162"></a>      }<span class="op">,</span></span>
<span id="cb18-163"><a href="#cb18-163"></a>      <span class="dt">prompt</span><span class="op">:</span> <span class="st">"Which image is an OLD (studied) image?"</span><span class="op">,</span></span>
<span id="cb18-164"><a href="#cb18-164"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">"Left Image"</span><span class="op">,</span> <span class="st">"Right Image"</span>]</span>
<span id="cb18-165"><a href="#cb18-165"></a>    }</span>
<span id="cb18-166"><a href="#cb18-166"></a>  ]<span class="op">,</span></span>
<span id="cb18-167"><a href="#cb18-167"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> stims<span class="op">,</span></span>
<span id="cb18-168"><a href="#cb18-168"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb18-169"><a href="#cb18-169"></a>}<span class="op">;</span></span>
<span id="cb18-170"><a href="#cb18-170"></a></span>
<span id="cb18-171"><a href="#cb18-171"></a><span class="kw">let</span> test_phase <span class="op">=</span> {</span>
<span id="cb18-172"><a href="#cb18-172"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb18-173"><a href="#cb18-173"></a>      test_instructions<span class="op">,</span></span>
<span id="cb18-174"><a href="#cb18-174"></a>      test_trials</span>
<span id="cb18-175"><a href="#cb18-175"></a>    ]</span>
<span id="cb18-176"><a href="#cb18-176"></a>}</span>
<span id="cb18-177"><a href="#cb18-177"></a></span>
<span id="cb18-178"><a href="#cb18-178"></a><span class="co">// ============================================</span></span>
<span id="cb18-179"><a href="#cb18-179"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb18-180"><a href="#cb18-180"></a><span class="co">// ============================================</span></span>
<span id="cb18-181"><a href="#cb18-181"></a></span>
<span id="cb18-182"><a href="#cb18-182"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb18-183"><a href="#cb18-183"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb18-184"><a href="#cb18-184"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb18-185"><a href="#cb18-185"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb18-186"><a href="#cb18-186"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb18-187"><a href="#cb18-187"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb18-188"><a href="#cb18-188"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb18-189"><a href="#cb18-189"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb18-190"><a href="#cb18-190"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb18-191"><a href="#cb18-191"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb18-192"><a href="#cb18-192"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb18-193"><a href="#cb18-193"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb18-194"><a href="#cb18-194"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb18-195"><a href="#cb18-195"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb18-196"><a href="#cb18-196"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb18-197"><a href="#cb18-197"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"faceInversion_data.csv"</span>)<span class="op">;</span></span>
<span id="cb18-198"><a href="#cb18-198"></a>    })<span class="op">;</span></span>
<span id="cb18-199"><a href="#cb18-199"></a>  }<span class="op">,</span></span>
<span id="cb18-200"><a href="#cb18-200"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb18-201"><a href="#cb18-201"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"save data trial"</span></span>
<span id="cb18-202"><a href="#cb18-202"></a>  }</span>
<span id="cb18-203"><a href="#cb18-203"></a>}<span class="op">;</span></span>
<span id="cb18-204"><a href="#cb18-204"></a></span>
<span id="cb18-205"><a href="#cb18-205"></a><span class="co">// ============================================</span></span>
<span id="cb18-206"><a href="#cb18-206"></a><span class="co">// Run jsPsych </span></span>
<span id="cb18-207"><a href="#cb18-207"></a><span class="co">// ============================================</span></span>
<span id="cb18-208"><a href="#cb18-208"></a></span>
<span id="cb18-209"><a href="#cb18-209"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb18-210"><a href="#cb18-210"></a>  welcome<span class="op">,</span></span>
<span id="cb18-211"><a href="#cb18-211"></a>  study_phase<span class="op">,</span></span>
<span id="cb18-212"><a href="#cb18-212"></a>  test_phase<span class="op">,</span></span>
<span id="cb18-213"><a href="#cb18-213"></a>  saveData</span>
<span id="cb18-214"><a href="#cb18-214"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb19-1"><a href="#cb19-1"></a> </span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">.base_image</span> {</span>
<span id="cb19-3"><a href="#cb19-3"></a>    <span class="kw">max-width</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>    <span class="kw">max-height</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>    <span class="kw">filter</span><span class="ch">:</span> <span class="fu">grayscale(</span><span class="dv">100</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>  }</span>
<span id="cb19-7"><a href="#cb19-7"></a>  </span>
<span id="cb19-8"><a href="#cb19-8"></a>  <span class="fu">.up</span> {</span>
<span id="cb19-9"><a href="#cb19-9"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">0</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb19-10"><a href="#cb19-10"></a>  }</span>
<span id="cb19-11"><a href="#cb19-11"></a>  </span>
<span id="cb19-12"><a href="#cb19-12"></a>  <span class="fu">.down</span> {</span>
<span id="cb19-13"><a href="#cb19-13"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">180</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb19-14"><a href="#cb19-14"></a>  }</span>
<span id="cb19-15"><a href="#cb19-15"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<div id="demo-container-4" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-4" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    \n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      \n  .base_image {\n    max-width: 250px;\n    max-height: 250px;\n    filter: grayscale(100%);\n  }\n  \n  .up {\n    transform: rotate(0deg);\n  }\n  \n  .down {\n    transform: rotate(180deg);\n  }\n\n    </style>\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Welcome\n// ============================================\n\nlet welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,\n  choices: &quot; &quot;\n}\n\n// ============================================\n// Select &amp; Assign Images\n// ============================================\n\n// the images are numbered 1 to 50 (e.g., faces_34.jpg)\n// create a list of numbers 1 to 50\nlet face_numbers = []\nlet house_numbers = []\nfor (let i = 1; i <= 50; i++) {\n  face_numbers.push(i);\n  house_numbers.push(i)\n}\n\n// variable for our timeline_variables array\nlet stims = []\n\n// Face Images\n// 1. Randomize the order\nface_numbers = jsPsych.randomization.shuffle(face_numbers)\n\n// 2. Split into four sets\nlet old_faces_down = face_numbers.slice(0,5)\nlet old_faces_up = face_numbers.slice(5,10)\nlet new_faces_down = face_numbers.slice(10,15)\nlet new_faces_up = face_numbers.slice(15,20)\n\n// 3. Create object with image pair and add to stims\nfor (let i = 0; i < old_faces_up.length; i++) {\n  stims.push(\n    {\n    old_image_number: old_faces_up[i],\n    old_image_src: &quot;images/faces/face_&quot; + old_faces_up[i] + &quot;.jpg&quot;,\n    new_image_number:  new_faces_up[i],\n    new_image_src: &quot;images/faces/face_&quot; + new_faces_up[i] + &quot;.jpg&quot;,\n    image_type: &quot;face&quot;,\n    image_orientation: &quot;up&quot;,\n    correct_location: jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n    }\n  );\n}\n\nfor (let i = 0; i < old_faces_down.length; i++) {\n  stims.push({\n    old_image_number: old_faces_down[i],\n    old_image_src: &quot;images/faces/face_&quot; + old_faces_down[i] + &quot;.jpg&quot;,\n    new_image_number:  new_faces_down[i],\n    new_image_src: &quot;images/faces/face_&quot; + new_faces_down[i] + &quot;.jpg&quot;,\n    image_type: &quot;face&quot;,\n    image_orientation: &quot;down&quot;,\n    correct_location: jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n  });\n}\n\n// ============================================\n// Study Phase\n// ============================================\n\nlet study_instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    &quot;Welcome to the study phase.&quot;,\n    &quot;You will see a series of faces and houses.&quot;,\n    &quot;Please pay attention to each image and try to memorize them.&quot;,\n    &quot;Press Next to begin.&quot;\n  ],\n  show_clickable_nav: true,\n  key_forward: &quot; &quot;\n};\n\nlet study_trials = {\n  timeline: [\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 500\n      },\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: function(){\n            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`\n        },\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 1000\n      }\n  ],\n  timeline_variables: stims,\n  randomize_order: true\n}\n\nlet study_phase = {\n    timeline: [\n      study_instructions,\n      study_trials\n    ]\n}\n\n// ============================================\n// Test Phase\n// ============================================\n\nlet test_instructions = {\n    type: jsPsychInstructions,\n    pages: [\n      &quot;That completes the study phase. You will now complete the memory test phase&quot;,\n      &quot;You will see two images side-by-side.&quot;,\n      &quot;One image is from the study phase (OLD) and one is new (NEW).&quot;,\n      &quot;Your task is to identify the OLD image by clicking either the Left Image or Right Image button.&quot;,\n      &quot;Press NEXT to begin.&quot;\n    ],\n    show_clickable_nav: true\n  };\n\nlet test_trials =  {\n  timeline: [\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,\n      choices: &quot;NO_KEYS&quot;,\n      trial_duration: 500\n    },\n    {\n      type: jsPsychHtmlButtonResponse,\n      stimulus: function() {\n        let old_src = jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;);\n        let new_src = jsPsych.evaluateTimelineVariable(&quot;new_image_src&quot;);\n        let image_orientation = jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;);\n        let old_location =  jsPsych.evaluateTimelineVariable(&quot;correct_location&quot;);\n\n        let output\n        \n        if(old_location == &quot;left&quot;){\n          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>\n          </div>`\n        } else {\n          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>\n          </div>`\n        }\n\n        return output\n      },\n      prompt: &quot;Which image is an OLD (studied) image?&quot;,\n      choices: [&quot;Left Image&quot;, &quot;Right Image&quot;]\n    }\n  ],\n  timeline_variables: stims,\n  randomize_order: true\n};\n\nlet test_phase = {\n    timeline: [\n      test_instructions,\n      test_trials\n    ]\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);\n    });\n  },\n  data: {\n    phase: &quot;save data trial&quot;\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  welcome,\n  study_phase,\n  test_phase,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-4');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-4" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      
  .base_image {
    max-width: 250px;
    max-height: 250px;
    filter: grayscale(100%);
  }
  
  .up {
    transform: rotate(0deg);
  }
  
  .down {
    transform: rotate(180deg);
  }

    </style>
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Welcome
// ============================================

let welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,
  choices: &quot; &quot;
}

// ============================================
// Select &amp; Assign Images
// ============================================

// the images are numbered 1 to 50 (e.g., faces_34.jpg)
// create a list of numbers 1 to 50
let face_numbers = []
let house_numbers = []
for (let i = 1; i <= 50; i++) {
  face_numbers.push(i);
  house_numbers.push(i)
}

// variable for our timeline_variables array
let stims = []

// Face Images
// 1. Randomize the order
face_numbers = jsPsych.randomization.shuffle(face_numbers)

// 2. Split into four sets
let old_faces_down = face_numbers.slice(0,5)
let old_faces_up = face_numbers.slice(5,10)
let new_faces_down = face_numbers.slice(10,15)
let new_faces_up = face_numbers.slice(15,20)

// 3. Create object with image pair and add to stims
for (let i = 0; i < old_faces_up.length; i++) {
  stims.push(
    {
    old_image_number: old_faces_up[i],
    old_image_src: &quot;images/faces/face_&quot; + old_faces_up[i] + &quot;.jpg&quot;,
    new_image_number:  new_faces_up[i],
    new_image_src: &quot;images/faces/face_&quot; + new_faces_up[i] + &quot;.jpg&quot;,
    image_type: &quot;face&quot;,
    image_orientation: &quot;up&quot;,
    correct_location: jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
    }
  );
}

for (let i = 0; i < old_faces_down.length; i++) {
  stims.push({
    old_image_number: old_faces_down[i],
    old_image_src: &quot;images/faces/face_&quot; + old_faces_down[i] + &quot;.jpg&quot;,
    new_image_number:  new_faces_down[i],
    new_image_src: &quot;images/faces/face_&quot; + new_faces_down[i] + &quot;.jpg&quot;,
    image_type: &quot;face&quot;,
    image_orientation: &quot;down&quot;,
    correct_location: jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
  });
}

// ============================================
// Study Phase
// ============================================

let study_instructions = {
  type: jsPsychInstructions,
  pages: [
    &quot;Welcome to the study phase.&quot;,
    &quot;You will see a series of faces and houses.&quot;,
    &quot;Please pay attention to each image and try to memorize them.&quot;,
    &quot;Press Next to begin.&quot;
  ],
  show_clickable_nav: true,
  key_forward: &quot; &quot;
};

let study_trials = {
  timeline: [
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 500
      },
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: function(){
            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`
        },
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 1000
      }
  ],
  timeline_variables: stims,
  randomize_order: true
}

let study_phase = {
    timeline: [
      study_instructions,
      study_trials
    ]
}

// ============================================
// Test Phase
// ============================================

let test_instructions = {
    type: jsPsychInstructions,
    pages: [
      &quot;That completes the study phase. You will now complete the memory test phase&quot;,
      &quot;You will see two images side-by-side.&quot;,
      &quot;One image is from the study phase (OLD) and one is new (NEW).&quot;,
      &quot;Your task is to identify the OLD image by clicking either the Left Image or Right Image button.&quot;,
      &quot;Press NEXT to begin.&quot;
    ],
    show_clickable_nav: true
  };

let test_trials =  {
  timeline: [
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,
      choices: &quot;NO_KEYS&quot;,
      trial_duration: 500
    },
    {
      type: jsPsychHtmlButtonResponse,
      stimulus: function() {
        let old_src = jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;);
        let new_src = jsPsych.evaluateTimelineVariable(&quot;new_image_src&quot;);
        let image_orientation = jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;);
        let old_location =  jsPsych.evaluateTimelineVariable(&quot;correct_location&quot;);

        let output
        
        if(old_location == &quot;left&quot;){
          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>
          </div>`
        } else {
          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>
          </div>`
        }

        return output
      },
      prompt: &quot;Which image is an OLD (studied) image?&quot;,
      choices: [&quot;Left Image&quot;, &quot;Right Image&quot;]
    }
  ],
  timeline_variables: stims,
  randomize_order: true
};

let test_phase = {
    timeline: [
      test_instructions,
      test_trials
    ]
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);
    });
  },
  data: {
    phase: &quot;save data trial&quot;
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  welcome,
  study_phase,
  test_phase,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-4&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-4&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;âœ“ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="repeat-the-randomization-for-house-images" class="level3" data-number="24.2.5">
<h3 data-number="24.2.5" class="anchored" data-anchor-id="repeat-the-randomization-for-house-images"><span class="header-section-number">24.2.5</span> Repeat the randomization for house images</h3>
<p>We can copy-paste our face code to repeat it for the house images. In fact, everything stays exactly the same we just replace â€˜faceâ€™ with â€˜houseâ€™! And since the code adds objects to our <code>stims</code> array, it will just add the list of randomized house images to the list of face images.</p>
<div class="cell">
<style type="text/css">
/* CB20 */

/* CB21 */
[id^="cb21-"]:nth-child(n+71):nth-child(-n+108) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}


/* CB22 */

</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb20-1"><a href="#cb20-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 11: Face Perception<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb20-8"><a href="#cb20-8"></a>    </span>
<span id="cb20-9"><a href="#cb20-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-11"><a href="#cb20-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-12"><a href="#cb20-12"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-13"><a href="#cb20-13"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-button-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-14"><a href="#cb20-14"></a></span>
<span id="cb20-15"><a href="#cb20-15"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb20-16"><a href="#cb20-16"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb20-17"><a href="#cb20-17"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb20-18"><a href="#cb20-18"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb20-19"><a href="#cb20-19"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb20-20"><a href="#cb20-20"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-21"><a href="#cb20-21"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb20-22"><a href="#cb20-22"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb20-23"><a href="#cb20-23"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1"></a> </span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="co">// ============================================</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="co">// ============================================</span></span>
<span id="cb21-5"><a href="#cb21-5"></a></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb21-7"><a href="#cb21-7"></a></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="co">// ============================================</span></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="co">// Welcome</span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="co">// ============================================</span></span>
<span id="cb21-11"><a href="#cb21-11"></a></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="kw">let</span> welcome <span class="op">=</span> {</span>
<span id="cb21-13"><a href="#cb21-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb21-14"><a href="#cb21-14"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"Welcome to the experiment! Press the space bar to begin."</span><span class="op">,</span></span>
<span id="cb21-15"><a href="#cb21-15"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb21-16"><a href="#cb21-16"></a>}</span>
<span id="cb21-17"><a href="#cb21-17"></a></span>
<span id="cb21-18"><a href="#cb21-18"></a><span class="co">// ============================================</span></span>
<span id="cb21-19"><a href="#cb21-19"></a><span class="co">// Select &amp; Assign Images</span></span>
<span id="cb21-20"><a href="#cb21-20"></a><span class="co">// ============================================</span></span>
<span id="cb21-21"><a href="#cb21-21"></a></span>
<span id="cb21-22"><a href="#cb21-22"></a><span class="co">// the images are numbered 1 to 50 (e.g., faces_34.jpg)</span></span>
<span id="cb21-23"><a href="#cb21-23"></a><span class="co">// create a list of numbers 1 to 50</span></span>
<span id="cb21-24"><a href="#cb21-24"></a><span class="kw">let</span> face_numbers <span class="op">=</span> []</span>
<span id="cb21-25"><a href="#cb21-25"></a><span class="kw">let</span> house_numbers <span class="op">=</span> []</span>
<span id="cb21-26"><a href="#cb21-26"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb21-27"><a href="#cb21-27"></a>  face_numbers<span class="op">.</span><span class="fu">push</span>(i)<span class="op">;</span></span>
<span id="cb21-28"><a href="#cb21-28"></a>  house_numbers<span class="op">.</span><span class="fu">push</span>(i)</span>
<span id="cb21-29"><a href="#cb21-29"></a>}</span>
<span id="cb21-30"><a href="#cb21-30"></a></span>
<span id="cb21-31"><a href="#cb21-31"></a><span class="co">// variable for our timeline_variables array</span></span>
<span id="cb21-32"><a href="#cb21-32"></a><span class="kw">let</span> stims <span class="op">=</span> []</span>
<span id="cb21-33"><a href="#cb21-33"></a></span>
<span id="cb21-34"><a href="#cb21-34"></a><span class="co">// Face Images</span></span>
<span id="cb21-35"><a href="#cb21-35"></a><span class="co">// 1. Randomize the order</span></span>
<span id="cb21-36"><a href="#cb21-36"></a>face_numbers <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(face_numbers)</span>
<span id="cb21-37"><a href="#cb21-37"></a></span>
<span id="cb21-38"><a href="#cb21-38"></a><span class="co">// 2. Split into four sets</span></span>
<span id="cb21-39"><a href="#cb21-39"></a><span class="kw">let</span> old_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">5</span>)</span>
<span id="cb21-40"><a href="#cb21-40"></a><span class="kw">let</span> old_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">10</span>)</span>
<span id="cb21-41"><a href="#cb21-41"></a><span class="kw">let</span> new_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">15</span>)</span>
<span id="cb21-42"><a href="#cb21-42"></a><span class="kw">let</span> new_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">15</span><span class="op">,</span><span class="dv">20</span>)</span>
<span id="cb21-43"><a href="#cb21-43"></a></span>
<span id="cb21-44"><a href="#cb21-44"></a><span class="co">// 3. Create object with image pair and add to stims</span></span>
<span id="cb21-45"><a href="#cb21-45"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_up<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb21-46"><a href="#cb21-46"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb21-47"><a href="#cb21-47"></a>    {</span>
<span id="cb21-48"><a href="#cb21-48"></a>    <span class="dt">old_image_number</span><span class="op">:</span> old_faces_up[i]<span class="op">,</span></span>
<span id="cb21-49"><a href="#cb21-49"></a>    <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb21-50"><a href="#cb21-50"></a>    <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_up[i]<span class="op">,</span></span>
<span id="cb21-51"><a href="#cb21-51"></a>    <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb21-52"><a href="#cb21-52"></a>    <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb21-53"><a href="#cb21-53"></a>    <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span><span class="op">,</span></span>
<span id="cb21-54"><a href="#cb21-54"></a>    <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb21-55"><a href="#cb21-55"></a>    }</span>
<span id="cb21-56"><a href="#cb21-56"></a>  )<span class="op">;</span></span>
<span id="cb21-57"><a href="#cb21-57"></a>}</span>
<span id="cb21-58"><a href="#cb21-58"></a></span>
<span id="cb21-59"><a href="#cb21-59"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_down<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb21-60"><a href="#cb21-60"></a>  stims<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb21-61"><a href="#cb21-61"></a>    <span class="dt">old_image_number</span><span class="op">:</span> old_faces_down[i]<span class="op">,</span></span>
<span id="cb21-62"><a href="#cb21-62"></a>    <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb21-63"><a href="#cb21-63"></a>    <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_down[i]<span class="op">,</span></span>
<span id="cb21-64"><a href="#cb21-64"></a>    <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb21-65"><a href="#cb21-65"></a>    <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb21-66"><a href="#cb21-66"></a>    <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span><span class="op">,</span></span>
<span id="cb21-67"><a href="#cb21-67"></a>    <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb21-68"><a href="#cb21-68"></a>  })<span class="op">;</span></span>
<span id="cb21-69"><a href="#cb21-69"></a>}</span>
<span id="cb21-70"><a href="#cb21-70"></a></span>
<span id="cb21-71"><a href="#cb21-71"></a><span class="co">// House Images</span></span>
<span id="cb21-72"><a href="#cb21-72"></a><span class="co">// 1. randomize number order</span></span>
<span id="cb21-73"><a href="#cb21-73"></a>house_numbers <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(house_numbers)</span>
<span id="cb21-74"><a href="#cb21-74"></a></span>
<span id="cb21-75"><a href="#cb21-75"></a><span class="co">// 2. split into four sets</span></span>
<span id="cb21-76"><a href="#cb21-76"></a><span class="kw">let</span> old_houses_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">5</span>)</span>
<span id="cb21-77"><a href="#cb21-77"></a><span class="kw">let</span> old_houses_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">10</span>)</span>
<span id="cb21-78"><a href="#cb21-78"></a><span class="kw">let</span> new_houses_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">15</span>)</span>
<span id="cb21-79"><a href="#cb21-79"></a><span class="kw">let</span> new_houses_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">15</span><span class="op">,</span><span class="dv">20</span>)</span>
<span id="cb21-80"><a href="#cb21-80"></a></span>
<span id="cb21-81"><a href="#cb21-81"></a><span class="co">// 3. Create object with image pair and add to stims</span></span>
<span id="cb21-82"><a href="#cb21-82"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_houses_up<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb21-83"><a href="#cb21-83"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb21-84"><a href="#cb21-84"></a>    {</span>
<span id="cb21-85"><a href="#cb21-85"></a>      <span class="dt">old_image_number</span><span class="op">:</span> old_houses_up[i]<span class="op">,</span></span>
<span id="cb21-86"><a href="#cb21-86"></a>      <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_"</span> <span class="op">+</span> old_houses_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb21-87"><a href="#cb21-87"></a>      <span class="dt">new_image_number</span><span class="op">:</span>  new_houses_up[i]<span class="op">,</span></span>
<span id="cb21-88"><a href="#cb21-88"></a>      <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_"</span> <span class="op">+</span> new_houses_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb21-89"><a href="#cb21-89"></a>      <span class="dt">image_type</span><span class="op">:</span> <span class="st">"house"</span><span class="op">,</span></span>
<span id="cb21-90"><a href="#cb21-90"></a>      <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span><span class="op">,</span></span>
<span id="cb21-91"><a href="#cb21-91"></a>      <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb21-92"><a href="#cb21-92"></a>    }</span>
<span id="cb21-93"><a href="#cb21-93"></a>  )<span class="op">;</span></span>
<span id="cb21-94"><a href="#cb21-94"></a>}</span>
<span id="cb21-95"><a href="#cb21-95"></a></span>
<span id="cb21-96"><a href="#cb21-96"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_houses_up<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb21-97"><a href="#cb21-97"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb21-98"><a href="#cb21-98"></a>    {</span>
<span id="cb21-99"><a href="#cb21-99"></a>      <span class="dt">old_image_number</span><span class="op">:</span> old_houses_up[i]<span class="op">,</span></span>
<span id="cb21-100"><a href="#cb21-100"></a>      <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_"</span> <span class="op">+</span> old_houses_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb21-101"><a href="#cb21-101"></a>      <span class="dt">new_image_number</span><span class="op">:</span>  new_houses_up[i]<span class="op">,</span></span>
<span id="cb21-102"><a href="#cb21-102"></a>      <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_"</span> <span class="op">+</span> new_houses_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb21-103"><a href="#cb21-103"></a>      <span class="dt">image_type</span><span class="op">:</span> <span class="st">"house"</span><span class="op">,</span></span>
<span id="cb21-104"><a href="#cb21-104"></a>      <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span><span class="op">,</span></span>
<span id="cb21-105"><a href="#cb21-105"></a>      <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb21-106"><a href="#cb21-106"></a>    }</span>
<span id="cb21-107"><a href="#cb21-107"></a>  )<span class="op">;</span></span>
<span id="cb21-108"><a href="#cb21-108"></a>}</span>
<span id="cb21-109"><a href="#cb21-109"></a></span>
<span id="cb21-110"><a href="#cb21-110"></a><span class="co">// ============================================</span></span>
<span id="cb21-111"><a href="#cb21-111"></a><span class="co">// Study Phase</span></span>
<span id="cb21-112"><a href="#cb21-112"></a><span class="co">// ============================================</span></span>
<span id="cb21-113"><a href="#cb21-113"></a></span>
<span id="cb21-114"><a href="#cb21-114"></a><span class="kw">let</span> study_instructions <span class="op">=</span> {</span>
<span id="cb21-115"><a href="#cb21-115"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb21-116"><a href="#cb21-116"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb21-117"><a href="#cb21-117"></a>    <span class="st">"Welcome to the study phase."</span><span class="op">,</span></span>
<span id="cb21-118"><a href="#cb21-118"></a>    <span class="st">"You will see a series of faces and houses."</span><span class="op">,</span></span>
<span id="cb21-119"><a href="#cb21-119"></a>    <span class="st">"Please pay attention to each image and try to memorize them."</span><span class="op">,</span></span>
<span id="cb21-120"><a href="#cb21-120"></a>    <span class="st">"Press Next to begin."</span></span>
<span id="cb21-121"><a href="#cb21-121"></a>  ]<span class="op">,</span></span>
<span id="cb21-122"><a href="#cb21-122"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb21-123"><a href="#cb21-123"></a>  <span class="dt">key_forward</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb21-124"><a href="#cb21-124"></a>}<span class="op">;</span></span>
<span id="cb21-125"><a href="#cb21-125"></a></span>
<span id="cb21-126"><a href="#cb21-126"></a><span class="kw">let</span> study_trials <span class="op">=</span> {</span>
<span id="cb21-127"><a href="#cb21-127"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb21-128"><a href="#cb21-128"></a>      {</span>
<span id="cb21-129"><a href="#cb21-129"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb21-130"><a href="#cb21-130"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 60px;"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb21-131"><a href="#cb21-131"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb21-132"><a href="#cb21-132"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb21-133"><a href="#cb21-133"></a>      }<span class="op">,</span></span>
<span id="cb21-134"><a href="#cb21-134"></a>      {</span>
<span id="cb21-135"><a href="#cb21-135"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb21-136"><a href="#cb21-136"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb21-137"><a href="#cb21-137"></a>            <span class="cf">return</span> <span class="vs">`&lt;img class="base_image </span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"image_orientation"</span>)<span class="sc">}</span><span class="vs">"   src=</span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"old_image_src"</span>)<span class="sc">}</span><span class="vs"> &gt;`</span></span>
<span id="cb21-138"><a href="#cb21-138"></a>        }<span class="op">,</span></span>
<span id="cb21-139"><a href="#cb21-139"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb21-140"><a href="#cb21-140"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb21-141"><a href="#cb21-141"></a>      }</span>
<span id="cb21-142"><a href="#cb21-142"></a>  ]<span class="op">,</span></span>
<span id="cb21-143"><a href="#cb21-143"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> stims<span class="op">,</span></span>
<span id="cb21-144"><a href="#cb21-144"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb21-145"><a href="#cb21-145"></a>}</span>
<span id="cb21-146"><a href="#cb21-146"></a></span>
<span id="cb21-147"><a href="#cb21-147"></a><span class="kw">let</span> study_phase <span class="op">=</span> {</span>
<span id="cb21-148"><a href="#cb21-148"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb21-149"><a href="#cb21-149"></a>      study_instructions<span class="op">,</span></span>
<span id="cb21-150"><a href="#cb21-150"></a>      study_trials</span>
<span id="cb21-151"><a href="#cb21-151"></a>    ]</span>
<span id="cb21-152"><a href="#cb21-152"></a>}</span>
<span id="cb21-153"><a href="#cb21-153"></a></span>
<span id="cb21-154"><a href="#cb21-154"></a><span class="co">// ============================================</span></span>
<span id="cb21-155"><a href="#cb21-155"></a><span class="co">// Test Phase</span></span>
<span id="cb21-156"><a href="#cb21-156"></a><span class="co">// ============================================</span></span>
<span id="cb21-157"><a href="#cb21-157"></a></span>
<span id="cb21-158"><a href="#cb21-158"></a><span class="kw">let</span> test_instructions <span class="op">=</span> {</span>
<span id="cb21-159"><a href="#cb21-159"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb21-160"><a href="#cb21-160"></a>    <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb21-161"><a href="#cb21-161"></a>      <span class="st">"That completes the study phase. You will now complete the memory test phase"</span><span class="op">,</span></span>
<span id="cb21-162"><a href="#cb21-162"></a>      <span class="st">"You will see two images side-by-side."</span><span class="op">,</span></span>
<span id="cb21-163"><a href="#cb21-163"></a>      <span class="st">"One image is from the study phase (OLD) and one is new (NEW)."</span><span class="op">,</span></span>
<span id="cb21-164"><a href="#cb21-164"></a>      <span class="st">"Your task is to identify the OLD image by clicking either the Left Image or Right Image button."</span><span class="op">,</span></span>
<span id="cb21-165"><a href="#cb21-165"></a>      <span class="st">"Press NEXT to begin."</span></span>
<span id="cb21-166"><a href="#cb21-166"></a>    ]<span class="op">,</span></span>
<span id="cb21-167"><a href="#cb21-167"></a>    <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb21-168"><a href="#cb21-168"></a>  }<span class="op">;</span></span>
<span id="cb21-169"><a href="#cb21-169"></a></span>
<span id="cb21-170"><a href="#cb21-170"></a><span class="kw">let</span> test_trials <span class="op">=</span>  {</span>
<span id="cb21-171"><a href="#cb21-171"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb21-172"><a href="#cb21-172"></a>    {</span>
<span id="cb21-173"><a href="#cb21-173"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb21-174"><a href="#cb21-174"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 60px;"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb21-175"><a href="#cb21-175"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb21-176"><a href="#cb21-176"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb21-177"><a href="#cb21-177"></a>    }<span class="op">,</span></span>
<span id="cb21-178"><a href="#cb21-178"></a>    {</span>
<span id="cb21-179"><a href="#cb21-179"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlButtonResponse<span class="op">,</span></span>
<span id="cb21-180"><a href="#cb21-180"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb21-181"><a href="#cb21-181"></a>        <span class="kw">let</span> old_src <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"old_image_src"</span>)<span class="op">;</span></span>
<span id="cb21-182"><a href="#cb21-182"></a>        <span class="kw">let</span> new_src <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"new_image_src"</span>)<span class="op">;</span></span>
<span id="cb21-183"><a href="#cb21-183"></a>        <span class="kw">let</span> image_orientation <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"image_orientation"</span>)<span class="op">;</span></span>
<span id="cb21-184"><a href="#cb21-184"></a>        <span class="kw">let</span> old_location <span class="op">=</span>  jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"correct_location"</span>)<span class="op">;</span></span>
<span id="cb21-185"><a href="#cb21-185"></a></span>
<span id="cb21-186"><a href="#cb21-186"></a>        <span class="kw">let</span> output</span>
<span id="cb21-187"><a href="#cb21-187"></a>        </span>
<span id="cb21-188"><a href="#cb21-188"></a>        <span class="cf">if</span>(old_location <span class="op">==</span> <span class="st">"left"</span>){</span>
<span id="cb21-189"><a href="#cb21-189"></a>          output <span class="op">=</span> <span class="vs">`&lt;div style="display: flex; justify-content: center; gap: 50px;"&gt;</span></span>
<span id="cb21-190"><a href="#cb21-190"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>old_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb21-191"><a href="#cb21-191"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>new_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb21-192"><a href="#cb21-192"></a><span class="vs">          &lt;/div&gt;`</span></span>
<span id="cb21-193"><a href="#cb21-193"></a>        } <span class="cf">else</span> {</span>
<span id="cb21-194"><a href="#cb21-194"></a>          output <span class="op">=</span> <span class="vs">`&lt;div style="display: flex; justify-content: center; gap: 50px;"&gt;</span></span>
<span id="cb21-195"><a href="#cb21-195"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>new_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb21-196"><a href="#cb21-196"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>old_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb21-197"><a href="#cb21-197"></a><span class="vs">          &lt;/div&gt;`</span></span>
<span id="cb21-198"><a href="#cb21-198"></a>        }</span>
<span id="cb21-199"><a href="#cb21-199"></a></span>
<span id="cb21-200"><a href="#cb21-200"></a>        <span class="cf">return</span> output</span>
<span id="cb21-201"><a href="#cb21-201"></a>      }<span class="op">,</span></span>
<span id="cb21-202"><a href="#cb21-202"></a>      <span class="dt">prompt</span><span class="op">:</span> <span class="st">"Which image is an OLD (studied) image?"</span><span class="op">,</span></span>
<span id="cb21-203"><a href="#cb21-203"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">"Left Image"</span><span class="op">,</span> <span class="st">"Right Image"</span>]</span>
<span id="cb21-204"><a href="#cb21-204"></a>    }</span>
<span id="cb21-205"><a href="#cb21-205"></a>  ]<span class="op">,</span></span>
<span id="cb21-206"><a href="#cb21-206"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> stims<span class="op">,</span></span>
<span id="cb21-207"><a href="#cb21-207"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb21-208"><a href="#cb21-208"></a>}<span class="op">;</span></span>
<span id="cb21-209"><a href="#cb21-209"></a></span>
<span id="cb21-210"><a href="#cb21-210"></a><span class="kw">let</span> test_phase <span class="op">=</span> {</span>
<span id="cb21-211"><a href="#cb21-211"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb21-212"><a href="#cb21-212"></a>      test_instructions<span class="op">,</span></span>
<span id="cb21-213"><a href="#cb21-213"></a>      test_trials</span>
<span id="cb21-214"><a href="#cb21-214"></a>    ]</span>
<span id="cb21-215"><a href="#cb21-215"></a>}</span>
<span id="cb21-216"><a href="#cb21-216"></a></span>
<span id="cb21-217"><a href="#cb21-217"></a><span class="co">// ============================================</span></span>
<span id="cb21-218"><a href="#cb21-218"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb21-219"><a href="#cb21-219"></a><span class="co">// ============================================</span></span>
<span id="cb21-220"><a href="#cb21-220"></a></span>
<span id="cb21-221"><a href="#cb21-221"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb21-222"><a href="#cb21-222"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb21-223"><a href="#cb21-223"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb21-224"><a href="#cb21-224"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb21-225"><a href="#cb21-225"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb21-226"><a href="#cb21-226"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb21-227"><a href="#cb21-227"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb21-228"><a href="#cb21-228"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb21-229"><a href="#cb21-229"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb21-230"><a href="#cb21-230"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb21-231"><a href="#cb21-231"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb21-232"><a href="#cb21-232"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb21-233"><a href="#cb21-233"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb21-234"><a href="#cb21-234"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb21-235"><a href="#cb21-235"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb21-236"><a href="#cb21-236"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"faceInversion_data.csv"</span>)<span class="op">;</span></span>
<span id="cb21-237"><a href="#cb21-237"></a>    })<span class="op">;</span></span>
<span id="cb21-238"><a href="#cb21-238"></a>  }<span class="op">,</span></span>
<span id="cb21-239"><a href="#cb21-239"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb21-240"><a href="#cb21-240"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"save data trial"</span></span>
<span id="cb21-241"><a href="#cb21-241"></a>  }</span>
<span id="cb21-242"><a href="#cb21-242"></a>}<span class="op">;</span></span>
<span id="cb21-243"><a href="#cb21-243"></a></span>
<span id="cb21-244"><a href="#cb21-244"></a><span class="co">// ============================================</span></span>
<span id="cb21-245"><a href="#cb21-245"></a><span class="co">// Run jsPsych </span></span>
<span id="cb21-246"><a href="#cb21-246"></a><span class="co">// ============================================</span></span>
<span id="cb21-247"><a href="#cb21-247"></a></span>
<span id="cb21-248"><a href="#cb21-248"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb21-249"><a href="#cb21-249"></a>  welcome<span class="op">,</span></span>
<span id="cb21-250"><a href="#cb21-250"></a>  study_phase<span class="op">,</span></span>
<span id="cb21-251"><a href="#cb21-251"></a>  test_phase<span class="op">,</span></span>
<span id="cb21-252"><a href="#cb21-252"></a>  saveData</span>
<span id="cb21-253"><a href="#cb21-253"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb22-1"><a href="#cb22-1"></a> </span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">.base_image</span> {</span>
<span id="cb22-3"><a href="#cb22-3"></a>    <span class="kw">max-width</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>    <span class="kw">max-height</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb22-5"><a href="#cb22-5"></a>    <span class="kw">filter</span><span class="ch">:</span> <span class="fu">grayscale(</span><span class="dv">100</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>  }</span>
<span id="cb22-7"><a href="#cb22-7"></a>  </span>
<span id="cb22-8"><a href="#cb22-8"></a>  <span class="fu">.up</span> {</span>
<span id="cb22-9"><a href="#cb22-9"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">0</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb22-10"><a href="#cb22-10"></a>  }</span>
<span id="cb22-11"><a href="#cb22-11"></a>  </span>
<span id="cb22-12"><a href="#cb22-12"></a>  <span class="fu">.down</span> {</span>
<span id="cb22-13"><a href="#cb22-13"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">180</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb22-14"><a href="#cb22-14"></a>  }</span>
<span id="cb22-15"><a href="#cb22-15"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<div id="demo-container-5" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-5" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    \n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      \n  .base_image {\n    max-width: 250px;\n    max-height: 250px;\n    filter: grayscale(100%);\n  }\n  \n  .up {\n    transform: rotate(0deg);\n  }\n  \n  .down {\n    transform: rotate(180deg);\n  }\n\n    </style>\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Welcome\n// ============================================\n\nlet welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,\n  choices: &quot; &quot;\n}\n\n// ============================================\n// Select &amp; Assign Images\n// ============================================\n\n// the images are numbered 1 to 50 (e.g., faces_34.jpg)\n// create a list of numbers 1 to 50\nlet face_numbers = []\nlet house_numbers = []\nfor (let i = 1; i <= 50; i++) {\n  face_numbers.push(i);\n  house_numbers.push(i)\n}\n\n// variable for our timeline_variables array\nlet stims = []\n\n// Face Images\n// 1. Randomize the order\nface_numbers = jsPsych.randomization.shuffle(face_numbers)\n\n// 2. Split into four sets\nlet old_faces_down = face_numbers.slice(0,5)\nlet old_faces_up = face_numbers.slice(5,10)\nlet new_faces_down = face_numbers.slice(10,15)\nlet new_faces_up = face_numbers.slice(15,20)\n\n// 3. Create object with image pair and add to stims\nfor (let i = 0; i < old_faces_up.length; i++) {\n  stims.push(\n    {\n    old_image_number: old_faces_up[i],\n    old_image_src: &quot;images/faces/face_&quot; + old_faces_up[i] + &quot;.jpg&quot;,\n    new_image_number:  new_faces_up[i],\n    new_image_src: &quot;images/faces/face_&quot; + new_faces_up[i] + &quot;.jpg&quot;,\n    image_type: &quot;face&quot;,\n    image_orientation: &quot;up&quot;,\n    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n    }\n  );\n}\n\nfor (let i = 0; i < old_faces_down.length; i++) {\n  stims.push({\n    old_image_number: old_faces_down[i],\n    old_image_src: &quot;images/faces/face_&quot; + old_faces_down[i] + &quot;.jpg&quot;,\n    new_image_number:  new_faces_down[i],\n    new_image_src: &quot;images/faces/face_&quot; + new_faces_down[i] + &quot;.jpg&quot;,\n    image_type: &quot;face&quot;,\n    image_orientation: &quot;down&quot;,\n    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n  });\n}\n\n// House Images\n// 1. randomize number order\nhouse_numbers = jsPsych.randomization.shuffle(house_numbers)\n\n// 2. split into four sets\nlet old_houses_down = face_numbers.slice(0,5)\nlet old_houses_up = face_numbers.slice(5,10)\nlet new_houses_down = face_numbers.slice(10,15)\nlet new_houses_up = face_numbers.slice(15,20)\n\n// 3. Create object with image pair and add to stims\nfor (let i = 0; i < old_houses_up.length; i++) {\n  stims.push(\n    {\n      old_image_number: old_houses_up[i],\n      old_image_src: &quot;images/houses/house_&quot; + old_houses_up[i] + &quot;.jpg&quot;,\n      new_image_number:  new_houses_up[i],\n      new_image_src: &quot;images/houses/house_&quot; + new_houses_up[i] + &quot;.jpg&quot;,\n      image_type: &quot;house&quot;,\n      image_orientation: &quot;up&quot;,\n      correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n    }\n  );\n}\n\nfor (let i = 0; i < old_houses_up.length; i++) {\n  stims.push(\n    {\n      old_image_number: old_houses_up[i],\n      old_image_src: &quot;images/houses/house_&quot; + old_houses_up[i] + &quot;.jpg&quot;,\n      new_image_number:  new_houses_up[i],\n      new_image_src: &quot;images/houses/house_&quot; + new_houses_up[i] + &quot;.jpg&quot;,\n      image_type: &quot;house&quot;,\n      image_orientation: &quot;down&quot;,\n      correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n    }\n  );\n}\n\n// ============================================\n// Study Phase\n// ============================================\n\nlet study_instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    &quot;Welcome to the study phase.&quot;,\n    &quot;You will see a series of faces and houses.&quot;,\n    &quot;Please pay attention to each image and try to memorize them.&quot;,\n    &quot;Press Next to begin.&quot;\n  ],\n  show_clickable_nav: true,\n  key_forward: &quot; &quot;\n};\n\nlet study_trials = {\n  timeline: [\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 500\n      },\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: function(){\n            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`\n        },\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 1000\n      }\n  ],\n  timeline_variables: stims,\n  randomize_order: true\n}\n\nlet study_phase = {\n    timeline: [\n      study_instructions,\n      study_trials\n    ]\n}\n\n// ============================================\n// Test Phase\n// ============================================\n\nlet test_instructions = {\n    type: jsPsychInstructions,\n    pages: [\n      &quot;That completes the study phase. You will now complete the memory test phase&quot;,\n      &quot;You will see two images side-by-side.&quot;,\n      &quot;One image is from the study phase (OLD) and one is new (NEW).&quot;,\n      &quot;Your task is to identify the OLD image by clicking either the Left Image or Right Image button.&quot;,\n      &quot;Press NEXT to begin.&quot;\n    ],\n    show_clickable_nav: true\n  };\n\nlet test_trials =  {\n  timeline: [\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,\n      choices: &quot;NO_KEYS&quot;,\n      trial_duration: 500\n    },\n    {\n      type: jsPsychHtmlButtonResponse,\n      stimulus: function() {\n        let old_src = jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;);\n        let new_src = jsPsych.evaluateTimelineVariable(&quot;new_image_src&quot;);\n        let image_orientation = jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;);\n        let old_location =  jsPsych.evaluateTimelineVariable(&quot;correct_location&quot;);\n\n        let output\n        \n        if(old_location == &quot;left&quot;){\n          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>\n          </div>`\n        } else {\n          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>\n          </div>`\n        }\n\n        return output\n      },\n      prompt: &quot;Which image is an OLD (studied) image?&quot;,\n      choices: [&quot;Left Image&quot;, &quot;Right Image&quot;]\n    }\n  ],\n  timeline_variables: stims,\n  randomize_order: true\n};\n\nlet test_phase = {\n    timeline: [\n      test_instructions,\n      test_trials\n    ]\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);\n    });\n  },\n  data: {\n    phase: &quot;save data trial&quot;\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  welcome,\n  study_phase,\n  test_phase,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-5');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-5" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      
  .base_image {
    max-width: 250px;
    max-height: 250px;
    filter: grayscale(100%);
  }
  
  .up {
    transform: rotate(0deg);
  }
  
  .down {
    transform: rotate(180deg);
  }

    </style>
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Welcome
// ============================================

let welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,
  choices: &quot; &quot;
}

// ============================================
// Select &amp; Assign Images
// ============================================

// the images are numbered 1 to 50 (e.g., faces_34.jpg)
// create a list of numbers 1 to 50
let face_numbers = []
let house_numbers = []
for (let i = 1; i <= 50; i++) {
  face_numbers.push(i);
  house_numbers.push(i)
}

// variable for our timeline_variables array
let stims = []

// Face Images
// 1. Randomize the order
face_numbers = jsPsych.randomization.shuffle(face_numbers)

// 2. Split into four sets
let old_faces_down = face_numbers.slice(0,5)
let old_faces_up = face_numbers.slice(5,10)
let new_faces_down = face_numbers.slice(10,15)
let new_faces_up = face_numbers.slice(15,20)

// 3. Create object with image pair and add to stims
for (let i = 0; i < old_faces_up.length; i++) {
  stims.push(
    {
    old_image_number: old_faces_up[i],
    old_image_src: &quot;images/faces/face_&quot; + old_faces_up[i] + &quot;.jpg&quot;,
    new_image_number:  new_faces_up[i],
    new_image_src: &quot;images/faces/face_&quot; + new_faces_up[i] + &quot;.jpg&quot;,
    image_type: &quot;face&quot;,
    image_orientation: &quot;up&quot;,
    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
    }
  );
}

for (let i = 0; i < old_faces_down.length; i++) {
  stims.push({
    old_image_number: old_faces_down[i],
    old_image_src: &quot;images/faces/face_&quot; + old_faces_down[i] + &quot;.jpg&quot;,
    new_image_number:  new_faces_down[i],
    new_image_src: &quot;images/faces/face_&quot; + new_faces_down[i] + &quot;.jpg&quot;,
    image_type: &quot;face&quot;,
    image_orientation: &quot;down&quot;,
    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
  });
}

// House Images
// 1. randomize number order
house_numbers = jsPsych.randomization.shuffle(house_numbers)

// 2. split into four sets
let old_houses_down = face_numbers.slice(0,5)
let old_houses_up = face_numbers.slice(5,10)
let new_houses_down = face_numbers.slice(10,15)
let new_houses_up = face_numbers.slice(15,20)

// 3. Create object with image pair and add to stims
for (let i = 0; i < old_houses_up.length; i++) {
  stims.push(
    {
      old_image_number: old_houses_up[i],
      old_image_src: &quot;images/houses/house_&quot; + old_houses_up[i] + &quot;.jpg&quot;,
      new_image_number:  new_houses_up[i],
      new_image_src: &quot;images/houses/house_&quot; + new_houses_up[i] + &quot;.jpg&quot;,
      image_type: &quot;house&quot;,
      image_orientation: &quot;up&quot;,
      correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
    }
  );
}

for (let i = 0; i < old_houses_up.length; i++) {
  stims.push(
    {
      old_image_number: old_houses_up[i],
      old_image_src: &quot;images/houses/house_&quot; + old_houses_up[i] + &quot;.jpg&quot;,
      new_image_number:  new_houses_up[i],
      new_image_src: &quot;images/houses/house_&quot; + new_houses_up[i] + &quot;.jpg&quot;,
      image_type: &quot;house&quot;,
      image_orientation: &quot;down&quot;,
      correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
    }
  );
}

// ============================================
// Study Phase
// ============================================

let study_instructions = {
  type: jsPsychInstructions,
  pages: [
    &quot;Welcome to the study phase.&quot;,
    &quot;You will see a series of faces and houses.&quot;,
    &quot;Please pay attention to each image and try to memorize them.&quot;,
    &quot;Press Next to begin.&quot;
  ],
  show_clickable_nav: true,
  key_forward: &quot; &quot;
};

let study_trials = {
  timeline: [
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 500
      },
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: function(){
            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`
        },
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 1000
      }
  ],
  timeline_variables: stims,
  randomize_order: true
}

let study_phase = {
    timeline: [
      study_instructions,
      study_trials
    ]
}

// ============================================
// Test Phase
// ============================================

let test_instructions = {
    type: jsPsychInstructions,
    pages: [
      &quot;That completes the study phase. You will now complete the memory test phase&quot;,
      &quot;You will see two images side-by-side.&quot;,
      &quot;One image is from the study phase (OLD) and one is new (NEW).&quot;,
      &quot;Your task is to identify the OLD image by clicking either the Left Image or Right Image button.&quot;,
      &quot;Press NEXT to begin.&quot;
    ],
    show_clickable_nav: true
  };

let test_trials =  {
  timeline: [
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,
      choices: &quot;NO_KEYS&quot;,
      trial_duration: 500
    },
    {
      type: jsPsychHtmlButtonResponse,
      stimulus: function() {
        let old_src = jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;);
        let new_src = jsPsych.evaluateTimelineVariable(&quot;new_image_src&quot;);
        let image_orientation = jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;);
        let old_location =  jsPsych.evaluateTimelineVariable(&quot;correct_location&quot;);

        let output
        
        if(old_location == &quot;left&quot;){
          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>
          </div>`
        } else {
          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>
          </div>`
        }

        return output
      },
      prompt: &quot;Which image is an OLD (studied) image?&quot;,
      choices: [&quot;Left Image&quot;, &quot;Right Image&quot;]
    }
  ],
  timeline_variables: stims,
  randomize_order: true
};

let test_phase = {
    timeline: [
      test_instructions,
      test_trials
    ]
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);
    });
  },
  data: {
    phase: &quot;save data trial&quot;
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  welcome,
  study_phase,
  test_phase,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-5&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-5&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;âœ“ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="add-preload" class="level3" data-number="24.2.6">
<h3 data-number="24.2.6" class="anchored" data-anchor-id="add-preload"><span class="header-section-number">24.2.6</span> Add Preload</h3>
<p>Finally, weâ€™ll need to preload our images. Weâ€™ll also do this in a programmatic way, looping through our <code>stims</code> array and copying the image locations to a new array. That way weâ€™re only preloading the images weâ€™re using and not any of the other 50 images.</p>
<div class="cell">
<style type="text/css">
/* CB23 */

/* CB24 */
[id^="cb24-"]:nth-child(n+110):nth-child(-n+128),
[id^="cb24-"]:nth-child(n+273):nth-child(-n+273) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}


/* CB24 */

</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb23-1"><a href="#cb23-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 11: Face Perception<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb23-7"><a href="#cb23-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb23-8"><a href="#cb23-8"></a>    </span>
<span id="cb23-9"><a href="#cb23-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb23-10"><a href="#cb23-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb23-11"><a href="#cb23-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb23-12"><a href="#cb23-12"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb23-13"><a href="#cb23-13"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-button-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb23-14"><a href="#cb23-14"></a></span>
<span id="cb23-15"><a href="#cb23-15"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb23-16"><a href="#cb23-16"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb23-17"><a href="#cb23-17"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb23-18"><a href="#cb23-18"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb23-19"><a href="#cb23-19"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb23-20"><a href="#cb23-20"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb23-21"><a href="#cb23-21"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb23-22"><a href="#cb23-22"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb23-23"><a href="#cb23-23"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb24-1"><a href="#cb24-1"></a> </span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="co">// ============================================</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="co">// ============================================</span></span>
<span id="cb24-5"><a href="#cb24-5"></a></span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb24-7"><a href="#cb24-7"></a></span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="co">// ============================================</span></span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="co">// Welcome</span></span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="co">// ============================================</span></span>
<span id="cb24-11"><a href="#cb24-11"></a></span>
<span id="cb24-12"><a href="#cb24-12"></a><span class="kw">let</span> welcome <span class="op">=</span> {</span>
<span id="cb24-13"><a href="#cb24-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb24-14"><a href="#cb24-14"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"Welcome to the experiment! Press the space bar to begin."</span><span class="op">,</span></span>
<span id="cb24-15"><a href="#cb24-15"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb24-16"><a href="#cb24-16"></a>}</span>
<span id="cb24-17"><a href="#cb24-17"></a></span>
<span id="cb24-18"><a href="#cb24-18"></a><span class="co">// ============================================</span></span>
<span id="cb24-19"><a href="#cb24-19"></a><span class="co">// Select &amp; Assign Images</span></span>
<span id="cb24-20"><a href="#cb24-20"></a><span class="co">// ============================================</span></span>
<span id="cb24-21"><a href="#cb24-21"></a></span>
<span id="cb24-22"><a href="#cb24-22"></a><span class="co">// the images are numbered 1 to 50 (e.g., faces_34.jpg)</span></span>
<span id="cb24-23"><a href="#cb24-23"></a><span class="co">// create a list of numbers 1 to 50</span></span>
<span id="cb24-24"><a href="#cb24-24"></a><span class="kw">let</span> face_numbers <span class="op">=</span> []</span>
<span id="cb24-25"><a href="#cb24-25"></a><span class="kw">let</span> house_numbers <span class="op">=</span> []</span>
<span id="cb24-26"><a href="#cb24-26"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb24-27"><a href="#cb24-27"></a>  face_numbers<span class="op">.</span><span class="fu">push</span>(i)<span class="op">;</span></span>
<span id="cb24-28"><a href="#cb24-28"></a>  house_numbers<span class="op">.</span><span class="fu">push</span>(i)</span>
<span id="cb24-29"><a href="#cb24-29"></a>}</span>
<span id="cb24-30"><a href="#cb24-30"></a></span>
<span id="cb24-31"><a href="#cb24-31"></a><span class="co">// variable for our timeline_variables array</span></span>
<span id="cb24-32"><a href="#cb24-32"></a><span class="kw">let</span> stims <span class="op">=</span> []</span>
<span id="cb24-33"><a href="#cb24-33"></a></span>
<span id="cb24-34"><a href="#cb24-34"></a><span class="co">// Face Images</span></span>
<span id="cb24-35"><a href="#cb24-35"></a><span class="co">// 1. Randomize the order</span></span>
<span id="cb24-36"><a href="#cb24-36"></a>face_numbers <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(face_numbers)</span>
<span id="cb24-37"><a href="#cb24-37"></a></span>
<span id="cb24-38"><a href="#cb24-38"></a><span class="co">// 2. Split into four sets</span></span>
<span id="cb24-39"><a href="#cb24-39"></a><span class="kw">let</span> old_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">5</span>)</span>
<span id="cb24-40"><a href="#cb24-40"></a><span class="kw">let</span> old_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">10</span>)</span>
<span id="cb24-41"><a href="#cb24-41"></a><span class="kw">let</span> new_faces_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">15</span>)</span>
<span id="cb24-42"><a href="#cb24-42"></a><span class="kw">let</span> new_faces_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">15</span><span class="op">,</span><span class="dv">20</span>)</span>
<span id="cb24-43"><a href="#cb24-43"></a></span>
<span id="cb24-44"><a href="#cb24-44"></a><span class="co">// 3. Create object with image pair and add to stims</span></span>
<span id="cb24-45"><a href="#cb24-45"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_up<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb24-46"><a href="#cb24-46"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb24-47"><a href="#cb24-47"></a>    {</span>
<span id="cb24-48"><a href="#cb24-48"></a>    <span class="dt">old_image_number</span><span class="op">:</span> old_faces_up[i]<span class="op">,</span></span>
<span id="cb24-49"><a href="#cb24-49"></a>    <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb24-50"><a href="#cb24-50"></a>    <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_up[i]<span class="op">,</span></span>
<span id="cb24-51"><a href="#cb24-51"></a>    <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb24-52"><a href="#cb24-52"></a>    <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb24-53"><a href="#cb24-53"></a>    <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span><span class="op">,</span></span>
<span id="cb24-54"><a href="#cb24-54"></a>    <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb24-55"><a href="#cb24-55"></a>    }</span>
<span id="cb24-56"><a href="#cb24-56"></a>  )<span class="op">;</span></span>
<span id="cb24-57"><a href="#cb24-57"></a>}</span>
<span id="cb24-58"><a href="#cb24-58"></a></span>
<span id="cb24-59"><a href="#cb24-59"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_faces_down<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb24-60"><a href="#cb24-60"></a>  stims<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb24-61"><a href="#cb24-61"></a>    <span class="dt">old_image_number</span><span class="op">:</span> old_faces_down[i]<span class="op">,</span></span>
<span id="cb24-62"><a href="#cb24-62"></a>    <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> old_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb24-63"><a href="#cb24-63"></a>    <span class="dt">new_image_number</span><span class="op">:</span>  new_faces_down[i]<span class="op">,</span></span>
<span id="cb24-64"><a href="#cb24-64"></a>    <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/faces/face_"</span> <span class="op">+</span> new_faces_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb24-65"><a href="#cb24-65"></a>    <span class="dt">image_type</span><span class="op">:</span> <span class="st">"face"</span><span class="op">,</span></span>
<span id="cb24-66"><a href="#cb24-66"></a>    <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span><span class="op">,</span></span>
<span id="cb24-67"><a href="#cb24-67"></a>    <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb24-68"><a href="#cb24-68"></a>  })<span class="op">;</span></span>
<span id="cb24-69"><a href="#cb24-69"></a>}</span>
<span id="cb24-70"><a href="#cb24-70"></a></span>
<span id="cb24-71"><a href="#cb24-71"></a><span class="co">// House Images</span></span>
<span id="cb24-72"><a href="#cb24-72"></a><span class="co">// 1. randomize number order</span></span>
<span id="cb24-73"><a href="#cb24-73"></a>house_numbers <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(house_numbers)</span>
<span id="cb24-74"><a href="#cb24-74"></a></span>
<span id="cb24-75"><a href="#cb24-75"></a><span class="co">// 2. split into four sets</span></span>
<span id="cb24-76"><a href="#cb24-76"></a><span class="kw">let</span> old_houses_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">5</span>)</span>
<span id="cb24-77"><a href="#cb24-77"></a><span class="kw">let</span> old_houses_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">10</span>)</span>
<span id="cb24-78"><a href="#cb24-78"></a><span class="kw">let</span> new_houses_down <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">15</span>)</span>
<span id="cb24-79"><a href="#cb24-79"></a><span class="kw">let</span> new_houses_up <span class="op">=</span> face_numbers<span class="op">.</span><span class="fu">slice</span>(<span class="dv">15</span><span class="op">,</span><span class="dv">20</span>)</span>
<span id="cb24-80"><a href="#cb24-80"></a></span>
<span id="cb24-81"><a href="#cb24-81"></a><span class="co">// 3. Create object with image pair and add to stims</span></span>
<span id="cb24-82"><a href="#cb24-82"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_houses_up<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb24-83"><a href="#cb24-83"></a>  stims<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb24-84"><a href="#cb24-84"></a>    {</span>
<span id="cb24-85"><a href="#cb24-85"></a>      <span class="dt">old_image_number</span><span class="op">:</span> old_houses_up[i]<span class="op">,</span></span>
<span id="cb24-86"><a href="#cb24-86"></a>      <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_"</span> <span class="op">+</span> old_houses_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb24-87"><a href="#cb24-87"></a>      <span class="dt">new_image_number</span><span class="op">:</span>  new_houses_up[i]<span class="op">,</span></span>
<span id="cb24-88"><a href="#cb24-88"></a>      <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_"</span> <span class="op">+</span> new_houses_up[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb24-89"><a href="#cb24-89"></a>      <span class="dt">image_type</span><span class="op">:</span> <span class="st">"house"</span><span class="op">,</span></span>
<span id="cb24-90"><a href="#cb24-90"></a>      <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"up"</span><span class="op">,</span></span>
<span id="cb24-91"><a href="#cb24-91"></a>      <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb24-92"><a href="#cb24-92"></a>    }</span>
<span id="cb24-93"><a href="#cb24-93"></a>  )<span class="op">;</span></span>
<span id="cb24-94"><a href="#cb24-94"></a>}</span>
<span id="cb24-95"><a href="#cb24-95"></a></span>
<span id="cb24-96"><a href="#cb24-96"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> old_houses_down<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb24-97"><a href="#cb24-97"></a>  stims<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb24-98"><a href="#cb24-98"></a>    <span class="dt">old_image_number</span><span class="op">:</span> old_houses_down[i]<span class="op">,</span></span>
<span id="cb24-99"><a href="#cb24-99"></a>    <span class="dt">old_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_"</span> <span class="op">+</span> old_houses_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb24-100"><a href="#cb24-100"></a>    <span class="dt">new_image_number</span><span class="op">:</span>  new_houses_down[i]<span class="op">,</span></span>
<span id="cb24-101"><a href="#cb24-101"></a>    <span class="dt">new_image_src</span><span class="op">:</span> <span class="st">"images/houses/house_"</span> <span class="op">+</span> new_houses_down[i] <span class="op">+</span> <span class="st">".jpg"</span><span class="op">,</span></span>
<span id="cb24-102"><a href="#cb24-102"></a>    <span class="dt">image_type</span><span class="op">:</span> <span class="st">"house"</span><span class="op">,</span></span>
<span id="cb24-103"><a href="#cb24-103"></a>    <span class="dt">image_orientation</span><span class="op">:</span> <span class="st">"down"</span><span class="op">,</span></span>
<span id="cb24-104"><a href="#cb24-104"></a>    <span class="dt">correct_location</span><span class="op">:</span>    jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">sampleWithoutReplacement</span>([<span class="st">"left"</span><span class="op">,</span> <span class="st">"right"</span>]<span class="op">,</span> <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb24-105"><a href="#cb24-105"></a>  })<span class="op">;</span></span>
<span id="cb24-106"><a href="#cb24-106"></a>}</span>
<span id="cb24-107"><a href="#cb24-107"></a></span>
<span id="cb24-108"><a href="#cb24-108"></a><span class="co">// ============================================</span></span>
<span id="cb24-109"><a href="#cb24-109"></a><span class="co">// Preload</span></span>
<span id="cb24-110"><a href="#cb24-110"></a><span class="co">// ============================================</span></span>
<span id="cb24-111"><a href="#cb24-111"></a></span>
<span id="cb24-112"><a href="#cb24-112"></a><span class="co">// variable for list of images to preload</span></span>
<span id="cb24-113"><a href="#cb24-113"></a><span class="kw">let</span> image_list <span class="op">=</span> []</span>
<span id="cb24-114"><a href="#cb24-114"></a></span>
<span id="cb24-115"><a href="#cb24-115"></a><span class="co">// add only the images we are using from stims</span></span>
<span id="cb24-116"><a href="#cb24-116"></a><span class="cf">for</span>(<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> stims<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>){</span>
<span id="cb24-117"><a href="#cb24-117"></a>  image_list<span class="op">.</span><span class="fu">push</span>(stims[i]<span class="op">.</span><span class="at">old_image_src</span>)</span>
<span id="cb24-118"><a href="#cb24-118"></a>  image_list<span class="op">.</span><span class="fu">push</span>(stims[i]<span class="op">.</span><span class="at">new_image_src</span>)</span>
<span id="cb24-119"><a href="#cb24-119"></a>}</span>
<span id="cb24-120"><a href="#cb24-120"></a></span>
<span id="cb24-121"><a href="#cb24-121"></a><span class="kw">let</span> preload <span class="op">=</span> {</span>
<span id="cb24-122"><a href="#cb24-122"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb24-123"><a href="#cb24-123"></a>  <span class="dt">images</span><span class="op">:</span> image_list<span class="op">,</span></span>
<span id="cb24-124"><a href="#cb24-124"></a>  <span class="dt">show_progress_bar</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb24-125"><a href="#cb24-125"></a>  <span class="dt">continue_after_error</span><span class="op">:</span> <span class="kw">false</span></span>
<span id="cb24-126"><a href="#cb24-126"></a>}</span>
<span id="cb24-127"><a href="#cb24-127"></a></span>
<span id="cb24-128"><a href="#cb24-128"></a><span class="co">// ============================================</span></span>
<span id="cb24-129"><a href="#cb24-129"></a><span class="co">// Study Phase</span></span>
<span id="cb24-130"><a href="#cb24-130"></a><span class="co">// ============================================</span></span>
<span id="cb24-131"><a href="#cb24-131"></a></span>
<span id="cb24-132"><a href="#cb24-132"></a><span class="kw">let</span> study_instructions <span class="op">=</span> {</span>
<span id="cb24-133"><a href="#cb24-133"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb24-134"><a href="#cb24-134"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb24-135"><a href="#cb24-135"></a>    <span class="st">"Welcome to the study phase."</span><span class="op">,</span></span>
<span id="cb24-136"><a href="#cb24-136"></a>    <span class="st">"You will see a series of faces and houses."</span><span class="op">,</span></span>
<span id="cb24-137"><a href="#cb24-137"></a>    <span class="st">"Please pay attention to each image and try to memorize them."</span><span class="op">,</span></span>
<span id="cb24-138"><a href="#cb24-138"></a>    <span class="st">"Press Next to begin."</span></span>
<span id="cb24-139"><a href="#cb24-139"></a>  ]<span class="op">,</span></span>
<span id="cb24-140"><a href="#cb24-140"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb24-141"><a href="#cb24-141"></a>  <span class="dt">key_forward</span><span class="op">:</span> <span class="st">" "</span></span>
<span id="cb24-142"><a href="#cb24-142"></a>}<span class="op">;</span></span>
<span id="cb24-143"><a href="#cb24-143"></a></span>
<span id="cb24-144"><a href="#cb24-144"></a></span>
<span id="cb24-145"><a href="#cb24-145"></a><span class="kw">let</span> study_trials <span class="op">=</span> {</span>
<span id="cb24-146"><a href="#cb24-146"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb24-147"><a href="#cb24-147"></a>      {</span>
<span id="cb24-148"><a href="#cb24-148"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb24-149"><a href="#cb24-149"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 60px;"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb24-150"><a href="#cb24-150"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb24-151"><a href="#cb24-151"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb24-152"><a href="#cb24-152"></a>      }<span class="op">,</span></span>
<span id="cb24-153"><a href="#cb24-153"></a>      {</span>
<span id="cb24-154"><a href="#cb24-154"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb24-155"><a href="#cb24-155"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb24-156"><a href="#cb24-156"></a>            <span class="cf">return</span> <span class="vs">`&lt;img class="base_image </span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"image_orientation"</span>)<span class="sc">}</span><span class="vs">"   src=</span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"old_image_src"</span>)<span class="sc">}</span><span class="vs"> &gt;`</span></span>
<span id="cb24-157"><a href="#cb24-157"></a>        }<span class="op">,</span></span>
<span id="cb24-158"><a href="#cb24-158"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb24-159"><a href="#cb24-159"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb24-160"><a href="#cb24-160"></a>      }</span>
<span id="cb24-161"><a href="#cb24-161"></a>  ]<span class="op">,</span></span>
<span id="cb24-162"><a href="#cb24-162"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> stims<span class="op">,</span></span>
<span id="cb24-163"><a href="#cb24-163"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb24-164"><a href="#cb24-164"></a>}</span>
<span id="cb24-165"><a href="#cb24-165"></a></span>
<span id="cb24-166"><a href="#cb24-166"></a><span class="kw">let</span> study_phase <span class="op">=</span> {</span>
<span id="cb24-167"><a href="#cb24-167"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb24-168"><a href="#cb24-168"></a>      study_instructions<span class="op">,</span></span>
<span id="cb24-169"><a href="#cb24-169"></a>      study_trials</span>
<span id="cb24-170"><a href="#cb24-170"></a>    ]</span>
<span id="cb24-171"><a href="#cb24-171"></a>}</span>
<span id="cb24-172"><a href="#cb24-172"></a></span>
<span id="cb24-173"><a href="#cb24-173"></a><span class="co">// ============================================</span></span>
<span id="cb24-174"><a href="#cb24-174"></a><span class="co">// Test Phase</span></span>
<span id="cb24-175"><a href="#cb24-175"></a><span class="co">// ============================================</span></span>
<span id="cb24-176"><a href="#cb24-176"></a></span>
<span id="cb24-177"><a href="#cb24-177"></a><span class="kw">let</span> test_instructions <span class="op">=</span> {</span>
<span id="cb24-178"><a href="#cb24-178"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb24-179"><a href="#cb24-179"></a>    <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb24-180"><a href="#cb24-180"></a>      <span class="st">"That completes the study phase. You will now complete the memory test phase"</span><span class="op">,</span></span>
<span id="cb24-181"><a href="#cb24-181"></a>      <span class="st">"You will see two images side-by-side."</span><span class="op">,</span></span>
<span id="cb24-182"><a href="#cb24-182"></a>      <span class="st">"One image is from the study phase (OLD) and one is new (NEW)."</span><span class="op">,</span></span>
<span id="cb24-183"><a href="#cb24-183"></a>      <span class="st">"Your task is to identify the OLD image by clicking either the Left Image or Right Image button."</span><span class="op">,</span></span>
<span id="cb24-184"><a href="#cb24-184"></a>      <span class="st">"Press NEXT to begin."</span></span>
<span id="cb24-185"><a href="#cb24-185"></a>    ]<span class="op">,</span></span>
<span id="cb24-186"><a href="#cb24-186"></a>    <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb24-187"><a href="#cb24-187"></a>  }<span class="op">;</span></span>
<span id="cb24-188"><a href="#cb24-188"></a></span>
<span id="cb24-189"><a href="#cb24-189"></a></span>
<span id="cb24-190"><a href="#cb24-190"></a><span class="kw">let</span> test_trials <span class="op">=</span>  {</span>
<span id="cb24-191"><a href="#cb24-191"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb24-192"><a href="#cb24-192"></a>    {</span>
<span id="cb24-193"><a href="#cb24-193"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb24-194"><a href="#cb24-194"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 60px;"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb24-195"><a href="#cb24-195"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb24-196"><a href="#cb24-196"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb24-197"><a href="#cb24-197"></a>    }<span class="op">,</span></span>
<span id="cb24-198"><a href="#cb24-198"></a>    {</span>
<span id="cb24-199"><a href="#cb24-199"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlButtonResponse<span class="op">,</span></span>
<span id="cb24-200"><a href="#cb24-200"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb24-201"><a href="#cb24-201"></a>        <span class="kw">let</span> old_src <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"old_image_src"</span>)<span class="op">;</span></span>
<span id="cb24-202"><a href="#cb24-202"></a>        <span class="kw">let</span> new_src <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"new_image_src"</span>)<span class="op">;</span></span>
<span id="cb24-203"><a href="#cb24-203"></a>        <span class="kw">let</span> image_orientation <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"image_orientation"</span>)<span class="op">;</span></span>
<span id="cb24-204"><a href="#cb24-204"></a>        <span class="kw">let</span> old_location <span class="op">=</span>  jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"correct_location"</span>)<span class="op">;</span></span>
<span id="cb24-205"><a href="#cb24-205"></a></span>
<span id="cb24-206"><a href="#cb24-206"></a>        <span class="kw">let</span> output</span>
<span id="cb24-207"><a href="#cb24-207"></a>        </span>
<span id="cb24-208"><a href="#cb24-208"></a>        <span class="cf">if</span>(old_location <span class="op">==</span> <span class="st">"left"</span>){</span>
<span id="cb24-209"><a href="#cb24-209"></a>          output <span class="op">=</span> <span class="vs">`&lt;div style="display: flex; justify-content: center; gap: 50px;"&gt;</span></span>
<span id="cb24-210"><a href="#cb24-210"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>old_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb24-211"><a href="#cb24-211"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>new_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb24-212"><a href="#cb24-212"></a><span class="vs">          &lt;/div&gt;`</span></span>
<span id="cb24-213"><a href="#cb24-213"></a>        } <span class="cf">else</span> {</span>
<span id="cb24-214"><a href="#cb24-214"></a>          output <span class="op">=</span> <span class="vs">`&lt;div style="display: flex; justify-content: center; gap: 50px;"&gt;</span></span>
<span id="cb24-215"><a href="#cb24-215"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>new_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb24-216"><a href="#cb24-216"></a><span class="vs">           &lt;img class="base_image </span><span class="sc">${</span>image_orientation<span class="sc">}</span><span class="vs">" src="</span><span class="sc">${</span>old_src<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb24-217"><a href="#cb24-217"></a><span class="vs">          &lt;/div&gt;`</span></span>
<span id="cb24-218"><a href="#cb24-218"></a>        }</span>
<span id="cb24-219"><a href="#cb24-219"></a></span>
<span id="cb24-220"><a href="#cb24-220"></a>        <span class="cf">return</span> output</span>
<span id="cb24-221"><a href="#cb24-221"></a>      }<span class="op">,</span></span>
<span id="cb24-222"><a href="#cb24-222"></a>      <span class="dt">prompt</span><span class="op">:</span> <span class="st">"Which image is an OLD (studied) image?"</span><span class="op">,</span></span>
<span id="cb24-223"><a href="#cb24-223"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">"Left Image"</span><span class="op">,</span> <span class="st">"Right Image"</span>]</span>
<span id="cb24-224"><a href="#cb24-224"></a>    }</span>
<span id="cb24-225"><a href="#cb24-225"></a>  ]<span class="op">,</span></span>
<span id="cb24-226"><a href="#cb24-226"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> stims<span class="op">,</span></span>
<span id="cb24-227"><a href="#cb24-227"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb24-228"><a href="#cb24-228"></a>}<span class="op">;</span></span>
<span id="cb24-229"><a href="#cb24-229"></a></span>
<span id="cb24-230"><a href="#cb24-230"></a></span>
<span id="cb24-231"><a href="#cb24-231"></a><span class="kw">let</span> test_phase <span class="op">=</span> {</span>
<span id="cb24-232"><a href="#cb24-232"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb24-233"><a href="#cb24-233"></a>      test_instructions<span class="op">,</span></span>
<span id="cb24-234"><a href="#cb24-234"></a>      test_trials</span>
<span id="cb24-235"><a href="#cb24-235"></a>    ]</span>
<span id="cb24-236"><a href="#cb24-236"></a>}</span>
<span id="cb24-237"><a href="#cb24-237"></a></span>
<span id="cb24-238"><a href="#cb24-238"></a><span class="co">// ============================================</span></span>
<span id="cb24-239"><a href="#cb24-239"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb24-240"><a href="#cb24-240"></a><span class="co">// ============================================</span></span>
<span id="cb24-241"><a href="#cb24-241"></a></span>
<span id="cb24-242"><a href="#cb24-242"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb24-243"><a href="#cb24-243"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb24-244"><a href="#cb24-244"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb24-245"><a href="#cb24-245"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb24-246"><a href="#cb24-246"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb24-247"><a href="#cb24-247"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb24-248"><a href="#cb24-248"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb24-249"><a href="#cb24-249"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb24-250"><a href="#cb24-250"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb24-251"><a href="#cb24-251"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb24-252"><a href="#cb24-252"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb24-253"><a href="#cb24-253"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb24-254"><a href="#cb24-254"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb24-255"><a href="#cb24-255"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb24-256"><a href="#cb24-256"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb24-257"><a href="#cb24-257"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"faceInversion_data.csv"</span>)<span class="op">;</span></span>
<span id="cb24-258"><a href="#cb24-258"></a>    })<span class="op">;</span></span>
<span id="cb24-259"><a href="#cb24-259"></a>  }<span class="op">,</span></span>
<span id="cb24-260"><a href="#cb24-260"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb24-261"><a href="#cb24-261"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"save data trial"</span></span>
<span id="cb24-262"><a href="#cb24-262"></a>  }</span>
<span id="cb24-263"><a href="#cb24-263"></a>}<span class="op">;</span></span>
<span id="cb24-264"><a href="#cb24-264"></a></span>
<span id="cb24-265"><a href="#cb24-265"></a><span class="co">// ============================================</span></span>
<span id="cb24-266"><a href="#cb24-266"></a><span class="co">// Run jsPsych </span></span>
<span id="cb24-267"><a href="#cb24-267"></a><span class="co">// ============================================</span></span>
<span id="cb24-268"><a href="#cb24-268"></a></span>
<span id="cb24-269"><a href="#cb24-269"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb24-270"><a href="#cb24-270"></a>  welcome<span class="op">,</span></span>
<span id="cb24-271"><a href="#cb24-271"></a>  preload<span class="op">,</span></span>
<span id="cb24-272"><a href="#cb24-272"></a>  study_phase<span class="op">,</span></span>
<span id="cb24-273"><a href="#cb24-273"></a>  test_phase<span class="op">,</span></span>
<span id="cb24-274"><a href="#cb24-274"></a>  saveData</span>
<span id="cb24-275"><a href="#cb24-275"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb25-1"><a href="#cb25-1"></a> </span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="fu">.base_image</span> {</span>
<span id="cb25-3"><a href="#cb25-3"></a>    <span class="kw">max-width</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>    <span class="kw">max-height</span><span class="ch">:</span> <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb25-5"><a href="#cb25-5"></a>    <span class="kw">filter</span><span class="ch">:</span> <span class="fu">grayscale(</span><span class="dv">100</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb25-6"><a href="#cb25-6"></a>  }</span>
<span id="cb25-7"><a href="#cb25-7"></a>  </span>
<span id="cb25-8"><a href="#cb25-8"></a>  <span class="fu">.up</span> {</span>
<span id="cb25-9"><a href="#cb25-9"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">0</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb25-10"><a href="#cb25-10"></a>  }</span>
<span id="cb25-11"><a href="#cb25-11"></a>  </span>
<span id="cb25-12"><a href="#cb25-12"></a>  <span class="fu">.down</span> {</span>
<span id="cb25-13"><a href="#cb25-13"></a>    <span class="kw">transform</span><span class="ch">:</span> <span class="fu">rotate(</span><span class="dv">180</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb25-14"><a href="#cb25-14"></a>  }</span>
<span id="cb25-15"><a href="#cb25-15"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<div id="demo-container-final" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-final" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    \n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      \n  .base_image {\n    max-width: 250px;\n    max-height: 250px;\n    filter: grayscale(100%);\n  }\n  \n  .up {\n    transform: rotate(0deg);\n  }\n  \n  .down {\n    transform: rotate(180deg);\n  }\n\n    </style>\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Welcome\n// ============================================\n\nlet welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,\n  choices: &quot; &quot;\n}\n\n// ============================================\n// Select &amp; Assign Images\n// ============================================\n\n// the images are numbered 1 to 50 (e.g., faces_34.jpg)\n// create a list of numbers 1 to 50\nlet face_numbers = []\nlet house_numbers = []\nfor (let i = 1; i <= 50; i++) {\n  face_numbers.push(i);\n  house_numbers.push(i)\n}\n\n// variable for our timeline_variables array\nlet stims = []\n\n// Face Images\n// 1. Randomize the order\nface_numbers = jsPsych.randomization.shuffle(face_numbers)\n\n// 2. Split into four sets\nlet old_faces_down = face_numbers.slice(0,5)\nlet old_faces_up = face_numbers.slice(5,10)\nlet new_faces_down = face_numbers.slice(10,15)\nlet new_faces_up = face_numbers.slice(15,20)\n\n// 3. Create object with image pair and add to stims\nfor (let i = 0; i < old_faces_up.length; i++) {\n  stims.push(\n    {\n    old_image_number: old_faces_up[i],\n    old_image_src: &quot;images/faces/face_&quot; + old_faces_up[i] + &quot;.jpg&quot;,\n    new_image_number:  new_faces_up[i],\n    new_image_src: &quot;images/faces/face_&quot; + new_faces_up[i] + &quot;.jpg&quot;,\n    image_type: &quot;face&quot;,\n    image_orientation: &quot;up&quot;,\n    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n    }\n  );\n}\n\nfor (let i = 0; i < old_faces_down.length; i++) {\n  stims.push({\n    old_image_number: old_faces_down[i],\n    old_image_src: &quot;images/faces/face_&quot; + old_faces_down[i] + &quot;.jpg&quot;,\n    new_image_number:  new_faces_down[i],\n    new_image_src: &quot;images/faces/face_&quot; + new_faces_down[i] + &quot;.jpg&quot;,\n    image_type: &quot;face&quot;,\n    image_orientation: &quot;down&quot;,\n    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n  });\n}\n\n// House Images\n// 1. randomize number order\nhouse_numbers = jsPsych.randomization.shuffle(house_numbers)\n\n// 2. split into four sets\nlet old_houses_down = face_numbers.slice(0,5)\nlet old_houses_up = face_numbers.slice(5,10)\nlet new_houses_down = face_numbers.slice(10,15)\nlet new_houses_up = face_numbers.slice(15,20)\n\n// 3. Create object with image pair and add to stims\nfor (let i = 0; i < old_houses_up.length; i++) {\n  stims.push(\n    {\n      old_image_number: old_houses_up[i],\n      old_image_src: &quot;images/houses/house_&quot; + old_houses_up[i] + &quot;.jpg&quot;,\n      new_image_number:  new_houses_up[i],\n      new_image_src: &quot;images/houses/house_&quot; + new_houses_up[i] + &quot;.jpg&quot;,\n      image_type: &quot;house&quot;,\n      image_orientation: &quot;up&quot;,\n      correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n    }\n  );\n}\n\nfor (let i = 0; i < old_houses_down.length; i++) {\n  stims.push({\n    old_image_number: old_houses_down[i],\n    old_image_src: &quot;images/houses/house_&quot; + old_houses_down[i] + &quot;.jpg&quot;,\n    new_image_number:  new_houses_down[i],\n    new_image_src: &quot;images/houses/house_&quot; + new_houses_down[i] + &quot;.jpg&quot;,\n    image_type: &quot;house&quot;,\n    image_orientation: &quot;down&quot;,\n    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]\n  });\n}\n\n// ============================================\n// Preload\n// ============================================\n\n// variable for list of images to preload\nlet image_list = []\n\n// add only the images we are using from stims\nfor(let i = 0; i < stims.length; i++){\n  image_list.push(stims[i].old_image_src)\n  image_list.push(stims[i].new_image_src)\n}\n\nlet preload = {\n  type: jsPsychPreload,\n  images: image_list,\n  show_progress_bar: true,\n  continue_after_error: false\n}\n\n// ============================================\n// Study Phase\n// ============================================\n\nlet study_instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    &quot;Welcome to the study phase.&quot;,\n    &quot;You will see a series of faces and houses.&quot;,\n    &quot;Please pay attention to each image and try to memorize them.&quot;,\n    &quot;Press Next to begin.&quot;\n  ],\n  show_clickable_nav: true,\n  key_forward: &quot; &quot;\n};\n\n\nlet study_trials = {\n  timeline: [\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 500\n      },\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: function(){\n            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`\n        },\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 1000\n      }\n  ],\n  timeline_variables: stims,\n  randomize_order: true\n}\n\nlet study_phase = {\n    timeline: [\n      study_instructions,\n      study_trials\n    ]\n}\n\n// ============================================\n// Test Phase\n// ============================================\n\nlet test_instructions = {\n    type: jsPsychInstructions,\n    pages: [\n      &quot;That completes the study phase. You will now complete the memory test phase&quot;,\n      &quot;You will see two images side-by-side.&quot;,\n      &quot;One image is from the study phase (OLD) and one is new (NEW).&quot;,\n      &quot;Your task is to identify the OLD image by clicking either the Left Image or Right Image button.&quot;,\n      &quot;Press NEXT to begin.&quot;\n    ],\n    show_clickable_nav: true\n  };\n\n\nlet test_trials =  {\n  timeline: [\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,\n      choices: &quot;NO_KEYS&quot;,\n      trial_duration: 500\n    },\n    {\n      type: jsPsychHtmlButtonResponse,\n      stimulus: function() {\n        let old_src = jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;);\n        let new_src = jsPsych.evaluateTimelineVariable(&quot;new_image_src&quot;);\n        let image_orientation = jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;);\n        let old_location =  jsPsych.evaluateTimelineVariable(&quot;correct_location&quot;);\n\n        let output\n        \n        if(old_location == &quot;left&quot;){\n          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>\n          </div>`\n        } else {\n          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>\n           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>\n          </div>`\n        }\n\n        return output\n      },\n      prompt: &quot;Which image is an OLD (studied) image?&quot;,\n      choices: [&quot;Left Image&quot;, &quot;Right Image&quot;]\n    }\n  ],\n  timeline_variables: stims,\n  randomize_order: true\n};\n\n\nlet test_phase = {\n    timeline: [\n      test_instructions,\n      test_trials\n    ]\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);\n    });\n  },\n  data: {\n    phase: &quot;save data trial&quot;\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  welcome,\n  preload,\n  study_phase,\n  test_phase,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-final');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-final" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      
  .base_image {
    max-width: 250px;
    max-height: 250px;
    filter: grayscale(100%);
  }
  
  .up {
    transform: rotate(0deg);
  }
  
  .down {
    transform: rotate(180deg);
  }

    </style>
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Welcome
// ============================================

let welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: &quot;Welcome to the experiment! Press the space bar to begin.&quot;,
  choices: &quot; &quot;
}

// ============================================
// Select &amp; Assign Images
// ============================================

// the images are numbered 1 to 50 (e.g., faces_34.jpg)
// create a list of numbers 1 to 50
let face_numbers = []
let house_numbers = []
for (let i = 1; i <= 50; i++) {
  face_numbers.push(i);
  house_numbers.push(i)
}

// variable for our timeline_variables array
let stims = []

// Face Images
// 1. Randomize the order
face_numbers = jsPsych.randomization.shuffle(face_numbers)

// 2. Split into four sets
let old_faces_down = face_numbers.slice(0,5)
let old_faces_up = face_numbers.slice(5,10)
let new_faces_down = face_numbers.slice(10,15)
let new_faces_up = face_numbers.slice(15,20)

// 3. Create object with image pair and add to stims
for (let i = 0; i < old_faces_up.length; i++) {
  stims.push(
    {
    old_image_number: old_faces_up[i],
    old_image_src: &quot;images/faces/face_&quot; + old_faces_up[i] + &quot;.jpg&quot;,
    new_image_number:  new_faces_up[i],
    new_image_src: &quot;images/faces/face_&quot; + new_faces_up[i] + &quot;.jpg&quot;,
    image_type: &quot;face&quot;,
    image_orientation: &quot;up&quot;,
    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
    }
  );
}

for (let i = 0; i < old_faces_down.length; i++) {
  stims.push({
    old_image_number: old_faces_down[i],
    old_image_src: &quot;images/faces/face_&quot; + old_faces_down[i] + &quot;.jpg&quot;,
    new_image_number:  new_faces_down[i],
    new_image_src: &quot;images/faces/face_&quot; + new_faces_down[i] + &quot;.jpg&quot;,
    image_type: &quot;face&quot;,
    image_orientation: &quot;down&quot;,
    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
  });
}

// House Images
// 1. randomize number order
house_numbers = jsPsych.randomization.shuffle(house_numbers)

// 2. split into four sets
let old_houses_down = face_numbers.slice(0,5)
let old_houses_up = face_numbers.slice(5,10)
let new_houses_down = face_numbers.slice(10,15)
let new_houses_up = face_numbers.slice(15,20)

// 3. Create object with image pair and add to stims
for (let i = 0; i < old_houses_up.length; i++) {
  stims.push(
    {
      old_image_number: old_houses_up[i],
      old_image_src: &quot;images/houses/house_&quot; + old_houses_up[i] + &quot;.jpg&quot;,
      new_image_number:  new_houses_up[i],
      new_image_src: &quot;images/houses/house_&quot; + new_houses_up[i] + &quot;.jpg&quot;,
      image_type: &quot;house&quot;,
      image_orientation: &quot;up&quot;,
      correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
    }
  );
}

for (let i = 0; i < old_houses_down.length; i++) {
  stims.push({
    old_image_number: old_houses_down[i],
    old_image_src: &quot;images/houses/house_&quot; + old_houses_down[i] + &quot;.jpg&quot;,
    new_image_number:  new_houses_down[i],
    new_image_src: &quot;images/houses/house_&quot; + new_houses_down[i] + &quot;.jpg&quot;,
    image_type: &quot;house&quot;,
    image_orientation: &quot;down&quot;,
    correct_location:    jsPsych.randomization.sampleWithoutReplacement([&quot;left&quot;, &quot;right&quot;], 1)[0]
  });
}

// ============================================
// Preload
// ============================================

// variable for list of images to preload
let image_list = []

// add only the images we are using from stims
for(let i = 0; i < stims.length; i++){
  image_list.push(stims[i].old_image_src)
  image_list.push(stims[i].new_image_src)
}

let preload = {
  type: jsPsychPreload,
  images: image_list,
  show_progress_bar: true,
  continue_after_error: false
}

// ============================================
// Study Phase
// ============================================

let study_instructions = {
  type: jsPsychInstructions,
  pages: [
    &quot;Welcome to the study phase.&quot;,
    &quot;You will see a series of faces and houses.&quot;,
    &quot;Please pay attention to each image and try to memorize them.&quot;,
    &quot;Press Next to begin.&quot;
  ],
  show_clickable_nav: true,
  key_forward: &quot; &quot;
};


let study_trials = {
  timeline: [
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 500
      },
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: function(){
            return `<img class=&quot;base_image ${jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;)}&quot;   src=${jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;)} >`
        },
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 1000
      }
  ],
  timeline_variables: stims,
  randomize_order: true
}

let study_phase = {
    timeline: [
      study_instructions,
      study_trials
    ]
}

// ============================================
// Test Phase
// ============================================

let test_instructions = {
    type: jsPsychInstructions,
    pages: [
      &quot;That completes the study phase. You will now complete the memory test phase&quot;,
      &quot;You will see two images side-by-side.&quot;,
      &quot;One image is from the study phase (OLD) and one is new (NEW).&quot;,
      &quot;Your task is to identify the OLD image by clicking either the Left Image or Right Image button.&quot;,
      &quot;Press NEXT to begin.&quot;
    ],
    show_clickable_nav: true
  };


let test_trials =  {
  timeline: [
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `<p style=&quot;font-size: 60px;&quot;>+</p>`,
      choices: &quot;NO_KEYS&quot;,
      trial_duration: 500
    },
    {
      type: jsPsychHtmlButtonResponse,
      stimulus: function() {
        let old_src = jsPsych.evaluateTimelineVariable(&quot;old_image_src&quot;);
        let new_src = jsPsych.evaluateTimelineVariable(&quot;new_image_src&quot;);
        let image_orientation = jsPsych.evaluateTimelineVariable(&quot;image_orientation&quot;);
        let old_location =  jsPsych.evaluateTimelineVariable(&quot;correct_location&quot;);

        let output
        
        if(old_location == &quot;left&quot;){
          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>
          </div>`
        } else {
          output = `<div style=&quot;display: flex; justify-content: center; gap: 50px;&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${new_src}&quot;>
           <img class=&quot;base_image ${image_orientation}&quot; src=&quot;${old_src}&quot;>
          </div>`
        }

        return output
      },
      prompt: &quot;Which image is an OLD (studied) image?&quot;,
      choices: [&quot;Left Image&quot;, &quot;Right Image&quot;]
    }
  ],
  timeline_variables: stims,
  randomize_order: true
};


let test_phase = {
    timeline: [
      test_instructions,
      test_trials
    ]
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;faceInversion_data.csv&quot;);
    });
  },
  data: {
    phase: &quot;save data trial&quot;
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  welcome,
  preload,
  study_phase,
  test_phase,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-final&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-final&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;âœ“ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="stretch-goals" class="level2" data-number="24.3">
<h2 data-number="24.3" class="anchored" data-anchor-id="stretch-goals"><span class="header-section-number">24.3</span> Stretch Goals</h2>
<section id="add-data-labels" class="level3" data-number="24.3.1">
<h3 data-number="24.3.1" class="anchored" data-anchor-id="add-data-labels"><span class="header-section-number">24.3.1</span> Add data labels</h3>
<p>Our experiment is missing proper data labels. Letâ€™s make sure weâ€™ve added:</p>
<ol type="1">
<li>all of our timeline_variables</li>
<li>phase: instructions/study/test/save_data</li>
<li>trial_part: fixation/image</li>
</ol>
</section>
<section id="add-cat-faces" class="level3" data-number="24.3.2">
<h3 data-number="24.3.2" class="anchored" data-anchor-id="add-cat-faces"><span class="header-section-number">24.3.2</span> Add cat faces</h3>
<p>Letâ€™s add another condition to our experiment: cat faces! Add another list of cat faces, randomly selected and paired together just like the face and house images. The cat faces are in a folder called <code>images/cats/</code> and follow the same numbering scheme.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./23-L10.html" class="pagination-link" aria-label="Lab 10: Judgment &amp; Decision-Making">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Lab 10: Judgment &amp; Decision-Making</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./25-gamification.html" class="pagination-link" aria-label="Gamification in Behavioural Research">
        <span class="nav-page-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Gamification in Behavioural Research</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/24-L11.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>