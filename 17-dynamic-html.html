<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="An open source textbook for psychology students learning programming and online research methods.Primary Author: Nicholaus P. Brosowsky Co-Authors: Liam Yeo, Jackie Spear">

<title>17&nbsp; Dynamic Parameters – Online Behavioural Research Methods: Programming with jsPsych</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./18-L07.html" rel="next">
<link href="./16-L06.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e9b5551c1c55c86b42a831a3c09ea90c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-f4f6c4c33169695420a9dce568207992.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>
.tabset-fullscreen-btn {
  position: absolute;
  top: 5px;
  right: 10px;
  z-index: 1000;
  padding: 5px 10px;
  background-color: none;
  color: #6c757d;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}
.tabset-fullscreen-btn:hover {
  background-color: #e9ecef;
  color: #495057;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.panel-tabset').forEach(function(tabset) {
    const btn = document.createElement('button');
    btn.innerHTML = '⛶ Open Code in New Tab';
    btn.className = 'tabset-fullscreen-btn';

    tabset.style.position = 'relative';
    tabset.insertBefore(btn, tabset.firstChild);

    btn.addEventListener('click', function() {
      const clone = tabset.cloneNode(true);
      const cloneBtn = clone.querySelector('.tabset-fullscreen-btn');
      if (cloneBtn) cloneBtn.remove();

      // Get all stylesheets from current page
      const stylesheets = Array.from(document.styleSheets)
        .map(sheet => {
          try {
            if (sheet.href) {
              return `<link rel="stylesheet" href="${sheet.href}">`;
            } else if (sheet.ownerNode) {
              return `<style>${Array.from(sheet.cssRules).map(rule => rule.cssText).join('\n')}</style>`;
            }
          } catch (e) {
            if (sheet.href) return `<link rel="stylesheet" href="${sheet.href}">`;
          }
          return '';
        })
        .join('\n');

      const newWindow = window.open('', '_blank');
      newWindow.document.write(`
        <html>
          <head>
            <title>Tab Panel View</title>
            ${stylesheets}
            <style>
              body { 
                margin: 20px auto; 
                padding: 20px; 
                max-width: 1200px;
              }
            </style>
          </head>
          <body>
            ${clone.outerHTML}
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"><\/script>
          </body>
        </html>
      `);
      newWindow.document.close();
    });
  });
});
</script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./17-dynamic-html.html">Unit 7: Dynamic Parameters</a></li><li class="breadcrumb-item"><a href="./17-dynamic-html.html"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dynamic Parameters</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Online Behavioural Research Methods: Programming with jsPsych</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/icoglab/online-behavioural-research-methods" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 1: Fundamentals (I)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">HTML</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">CSS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-L01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lab 1: About Me</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 2: Fundamentals (II)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Javascript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-debugging-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Debugging JavaScript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-L02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lab 2: JS Exercises</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 3: Intro to JsPsych</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-jspsych.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">jsPsych</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-L03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 3: Language &amp; Thought</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 4: Timelines</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-timelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Timelines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-plugins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">More Plugins</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-L04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lab 4: Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 5: Multimedia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-multimedia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multimedia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-L05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Lab 5: Mental Imagery</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 6: Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Saving and Labeling Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-data-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Accessing and Summarizing Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-L06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Lab 6: Creativity</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 7: Dynamic Parameters</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-dynamic-html.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dynamic Parameters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-L07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Lab 7: Spatial Attention</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 8: Controlling the Flow</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-dynamic-flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Controlling the Flow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-L08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Lab 8: Cognitive Control</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 9: Skills Checkpoint</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-L09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Lab 9: Working Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 10: Randomization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-randomization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Randomization in Experimental Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-L10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Lab 10: Judgment &amp; Decision-Making</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-L11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Lab 11: Face Perception</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Unit 11: Gamification</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A01_JS_Builtins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">JavaScript Built-in Functions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p>© 2024. This work is openly licensed via <a href="https://creativecommons.org/licenses/by-nc/4.0">CC BY NC 4.0</a>.</p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">17.1</span> Introduction</a></li>
  <li><a href="#reviewing-jspsych.timelinevariablevariable" id="toc-reviewing-jspsych.timelinevariablevariable" class="nav-link" data-scroll-target="#reviewing-jspsych.timelinevariablevariable"><span class="header-section-number">17.2</span> Reviewing <code>jsPsych.timelineVariable("variable")</code></a>
  <ul class="collapse">
  <li><a href="#varying-stimulus" id="toc-varying-stimulus" class="nav-link" data-scroll-target="#varying-stimulus"><span class="header-section-number">17.2.1</span> Varying Stimulus</a></li>
  <li><a href="#varying-multiple-parameters" id="toc-varying-multiple-parameters" class="nav-link" data-scroll-target="#varying-multiple-parameters"><span class="header-section-number">17.2.2</span> Varying Multiple Parameters</a></li>
  <li><a href="#varying-data-labels" id="toc-varying-data-labels" class="nav-link" data-scroll-target="#varying-data-labels"><span class="header-section-number">17.2.3</span> Varying Data Labels</a></li>
  <li><a href="#what-timeline-variables-cant-do" id="toc-what-timeline-variables-cant-do" class="nav-link" data-scroll-target="#what-timeline-variables-cant-do"><span class="header-section-number">17.2.4</span> What Timeline Variables Can’t Do</a></li>
  </ul></li>
  <li><a href="#functions-as-parameters-the-basic-idea" id="toc-functions-as-parameters-the-basic-idea" class="nav-link" data-scroll-target="#functions-as-parameters-the-basic-idea"><span class="header-section-number">17.3</span> Functions as Parameters: The Basic Idea</a></li>
  <li><a href="#two-critical-rules-for-dynamic-parameters" id="toc-two-critical-rules-for-dynamic-parameters" class="nav-link" data-scroll-target="#two-critical-rules-for-dynamic-parameters"><span class="header-section-number">17.4</span> Two Critical Rules for Dynamic Parameters</a>
  <ul class="collapse">
  <li><a href="#timeline-variable-syntax-changes" id="toc-timeline-variable-syntax-changes" class="nav-link" data-scroll-target="#timeline-variable-syntax-changes"><span class="header-section-number">17.4.1</span> 1. Timeline Variable Syntax Changes</a></li>
  <li><a href="#save-dynamic-parameters" id="toc-save-dynamic-parameters" class="nav-link" data-scroll-target="#save-dynamic-parameters"><span class="header-section-number">17.4.2</span> 2. Save Dynamic Parameters</a></li>
  </ul></li>
  <li><a href="#dynamic-stimulus" id="toc-dynamic-stimulus" class="nav-link" data-scroll-target="#dynamic-stimulus"><span class="header-section-number">17.5</span> Dynamic <code>stimulus</code></a>
  <ul class="collapse">
  <li><a href="#a-basic-example" id="toc-a-basic-example" class="nav-link" data-scroll-target="#a-basic-example"><span class="header-section-number">17.5.1</span> A Basic Example</a></li>
  <li><a href="#adding-logic-changing-the-difficulty" id="toc-adding-logic-changing-the-difficulty" class="nav-link" data-scroll-target="#adding-logic-changing-the-difficulty"><span class="header-section-number">17.5.2</span> Adding Logic: Changing the Difficulty</a></li>
  <li><a href="#adding-logic-changing-the-location" id="toc-adding-logic-changing-the-location" class="nav-link" data-scroll-target="#adding-logic-changing-the-location"><span class="header-section-number">17.5.3</span> Adding Logic: Changing the Location</a></li>
  <li><a href="#adding-logic-presenting-feedback" id="toc-adding-logic-presenting-feedback" class="nav-link" data-scroll-target="#adding-logic-presenting-feedback"><span class="header-section-number">17.5.4</span> Adding Logic: Presenting Feedback</a></li>
  </ul></li>
  <li><a href="#other-parameters" id="toc-other-parameters" class="nav-link" data-scroll-target="#other-parameters"><span class="header-section-number">17.6</span> Other Parameters</a>
  <ul class="collapse">
  <li><a href="#trial-duration" id="toc-trial-duration" class="nav-link" data-scroll-target="#trial-duration"><span class="header-section-number">17.6.1</span> Trial Duration</a></li>
  <li><a href="#choices" id="toc-choices" class="nav-link" data-scroll-target="#choices"><span class="header-section-number">17.6.2</span> Choices</a></li>
  </ul></li>
  <li><a href="#prompt" id="toc-prompt" class="nav-link" data-scroll-target="#prompt"><span class="header-section-number">17.7</span> Prompt</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">17.8</span> Summary</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/17-dynamic-html.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./17-dynamic-html.html">Unit 7: Dynamic Parameters</a></li><li class="breadcrumb-item"><a href="./17-dynamic-html.html"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dynamic Parameters</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dynamic Parameters</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled" title="learning goals">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
learning goals
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ol type="1">
<li>Replace static parameters with dynamic functions that execute at trial runtime</li>
<li>Access previous trial data to create adaptive feedback and conditional logic</li>
<li>Build complex HTML displays using timeline variables within functions</li>
<li>Apply dynamic parameters to multiple trial components (stimulus, duration, choices, prompts)</li>
<li>Save dynamically generated parameters for complete data collection</li>
</ol>
</div>
</div>
</div>
<section id="introduction" class="level2" data-number="17.1">
<h2 data-number="17.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">17.1</span> Introduction</h2>
<p>So far, we’ve learned how to use jsPsych.timelineVariable() to systematically vary parameters across trials. This approach works well when you know all the values you want to use ahead of time and can list them in your timeline variables.</p>
<p>However, sometimes you need parameters to change based on what happens during the experiment. For example:</p>
<ul>
<li>Showing “Correct!” or “Incorrect!” feedback (you don’t know which until the participant responds)</li>
<li>Adjusting difficulty based on performance</li>
<li>Changing stimulus location based on experimental conditions</li>
</ul>
<p>Dynamic parameters allow values to change based on events that occur during the experiment. The key insight is simple: replace any static parameter with a function that calculates the appropriate value right before each trial runs.</p>
</section>
<section id="reviewing-jspsych.timelinevariablevariable" class="level2" data-number="17.2">
<h2 data-number="17.2" class="anchored" data-anchor-id="reviewing-jspsych.timelinevariablevariable"><span class="header-section-number">17.2</span> Reviewing <code>jsPsych.timelineVariable("variable")</code></h2>
<p>Before exploring dynamic parameters, let’s review timeline variables. Timeline variables allow you to systematically vary parameters by pre-defining all values, which jsPsych can then randomize and insert as needed. This works perfectly for switching stimuli across trials.</p>
<p>You can use <code>jsPsych.timelineVariable()</code> to replace most trial parameters. Here are common examples:</p>
<section id="varying-stimulus" class="level3" data-number="17.2.1">
<h3 data-number="17.2.1" class="anchored" data-anchor-id="varying-stimulus"><span class="header-section-number">17.2.1</span> Varying Stimulus</h3>
<p>This example should look familiar. Here, we are changing the stimulus HTML on the basis of what’s in the timeline variables. Using <code>jsPsych.timelineVariable('word')</code> will take what is in the <code>word</code> variable on any give trial and insert that into the<code>stimulus</code> parameter.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">let</span> word_trials <span class="op">=</span> {</span>
<span id="cb1-2"><a href="#cb1-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'word'</span>)<span class="op">,</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb1-6"><a href="#cb1-6"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'&lt;p&gt;CAT&lt;/p&gt;'</span>}<span class="op">,</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'&lt;p&gt;DOG&lt;/p&gt;'</span>}<span class="op">,</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'&lt;p&gt;BIRD&lt;/p&gt;'</span>}</span>
<span id="cb1-9"><a href="#cb1-9"></a>  ]</span>
<span id="cb1-10"><a href="#cb1-10"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="varying-multiple-parameters" class="level3" data-number="17.2.2">
<h3 data-number="17.2.2" class="anchored" data-anchor-id="varying-multiple-parameters"><span class="header-section-number">17.2.2</span> Varying Multiple Parameters</h3>
<p>You can extend this logic to substitute any parameter. The key requirement is providing the parameter in the correct format.</p>
<p>In this example, we’re changing the choices parameter to allow only the correct key on each trial. Notice that we still provide an array ([‘r’]) in our timeline variables. We’re also changing the trial_duration parameter to vary response time limits. Since this parameter expects a number, we provide numbers in our timeline variables.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'stimulus'</span>)<span class="op">,</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="dt">choices</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'valid_keys'</span>)<span class="op">,</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="dt">trial_duration</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'time_limit'</span>)<span class="op">,</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb2-7"><a href="#cb2-7"></a>    {</span>
<span id="cb2-8"><a href="#cb2-8"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p style="color: red;"&gt;RED&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>      <span class="dt">valid_keys</span><span class="op">:</span> [<span class="st">'r'</span>]<span class="op">,</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>      <span class="dt">time_limit</span><span class="op">:</span> <span class="dv">2000</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>    }<span class="op">,</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>    {</span>
<span id="cb2-13"><a href="#cb2-13"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p style="color: blue;"&gt;BLUE&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>      <span class="dt">valid_keys</span><span class="op">:</span> [<span class="st">'b'</span>]<span class="op">,</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>      <span class="dt">time_limit</span><span class="op">:</span> <span class="dv">1500</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>    }</span>
<span id="cb2-17"><a href="#cb2-17"></a>  ]</span>
<span id="cb2-18"><a href="#cb2-18"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, we’re changing the <code>choices</code> parameter on each trial to only allow the correct key. Notice how we still provide an array inside our timeline variables (<code>['r']</code>).</p>
<p>We are also changing our <code>time_duration</code> parameter on each trial to change how long they have to respond. This parameter expects a number, so we provide a number in our timeline variables.</p>
</section>
<section id="varying-data-labels" class="level3" data-number="17.2.3">
<h3 data-number="17.2.3" class="anchored" data-anchor-id="varying-data-labels"><span class="header-section-number">17.2.3</span> Varying Data Labels</h3>
<p>In the previous data chapter, we also used timeline variables to update our data values. This is the same principle:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">let</span> categorization_trials <span class="op">=</span> {</span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychImageKeyboardResponse<span class="op">,</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'image'</span>)<span class="op">,</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb3-6"><a href="#cb3-6"></a>    <span class="dt">category</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'category'</span>)<span class="op">,</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>    <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'correct_key'</span>)</span>
<span id="cb3-8"><a href="#cb3-8"></a>  }<span class="op">,</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb3-10"><a href="#cb3-10"></a>    {<span class="dt">image</span><span class="op">:</span> <span class="st">'cat.jpg'</span><span class="op">,</span> <span class="dt">category</span><span class="op">:</span> <span class="st">'animal'</span><span class="op">,</span> <span class="dt">correct_key</span><span class="op">:</span> <span class="st">'f'</span>}<span class="op">,</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>    {<span class="dt">image</span><span class="op">:</span> <span class="st">'car.jpg'</span><span class="op">,</span> <span class="dt">category</span><span class="op">:</span> <span class="st">'vehicle'</span><span class="op">,</span> <span class="dt">correct_key</span><span class="op">:</span> <span class="st">'j'</span>}<span class="op">,</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>    {<span class="dt">image</span><span class="op">:</span> <span class="st">'dog.jpg'</span><span class="op">,</span> <span class="dt">category</span><span class="op">:</span> <span class="st">'animal'</span><span class="op">,</span> <span class="dt">correct_key</span><span class="op">:</span> <span class="st">'f'</span>}</span>
<span id="cb3-13"><a href="#cb3-13"></a>  ]</span>
<span id="cb3-14"><a href="#cb3-14"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="what-timeline-variables-cant-do" class="level3" data-number="17.2.4">
<h3 data-number="17.2.4" class="anchored" data-anchor-id="what-timeline-variables-cant-do"><span class="header-section-number">17.2.4</span> What Timeline Variables Can’t Do</h3>
<p>Timeline variables have an important limitation: all values must be determined before the experiment begins. This means you cannot:</p>
<ul>
<li>Use conditional logic (“show this stimulus IF something happened”)</li>
<li>Use data from previous trials to change displays</li>
<li>Provide real-time feedback like “Correct!” vs “Incorrect!”</li>
<li>Make real-time calculations (“make the next trial easier IF they performed poorly”)</li>
</ul>
<p>This is where dynamic parameters (functions) become important!</p>
</section>
</section>
<section id="functions-as-parameters-the-basic-idea" class="level2" data-number="17.3">
<h2 data-number="17.3" class="anchored" data-anchor-id="functions-as-parameters-the-basic-idea"><span class="header-section-number">17.3</span> Functions as Parameters: The Basic Idea</h2>
<p>A function is code that runs when called. In jsPsych, when you use a function as a parameter, jsPsych automatically calls that function right before the trial starts and uses the returned value as the parameter.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">let</span> trial <span class="op">=</span> {</span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="co">// This code runs right before the trial starts</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>    <span class="kw">let</span> output <span class="op">=</span> <span class="st">'&lt;p&gt;Hello!&lt;/p&gt;'</span><span class="op">;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>    <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>  }</span>
<span id="cb4-8"><a href="#cb4-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This might seem unnecessary now, but the power comes from running code inside the function to decide what to return.</p>
<p>When declaring a function, follow this syntax:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">let</span> myFunction <span class="op">=</span> <span class="kw">function</span>(){</span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="co">// function code goes inside here</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The function runs when ‘called’ (e.g., <code>myFunction()</code>). To save results, use return to send a value back. We typically create a variable called output and return its contents. This becomes our trial parameter.</p>
<p>When using functions as jsPsych parameters, don’t call the function yourself. We provide the function to jsPsych, and it will call the function when needed:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a>stimulus<span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="kw">let</span> output <span class="op">=</span> <span class="st">'&lt;p&gt;Hello!&lt;/p&gt;'</span><span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice there are no parentheses after function() at the end. We’re giving jsPsych the function itself, not calling it. jsPsych will call it for us when it’s time to run the trial.</p>
<p>You can make almost any trial parameter dynamic. We’ll focus mostly on the <code>stimulus</code> parameter using <code>jsPsychHtmlKeyboardResponse</code> since this creates the most useful complex displays. The same principles apply to other parameters like <code>trial_duration</code> and <code>choices</code>.</p>
<p>An important requirement, however, is that your function must return the format jsPsych expects: - <code>stimulus</code>: return a string (HTML text) - <code>trial_duration</code>: return a number (milliseconds) - <code>choices</code>: return an array of strings (like [‘f’, ‘j’])</p>
<p>Understanding what format each parameter expects will help you avoid common errors.</p>
</section>
<section id="two-critical-rules-for-dynamic-parameters" class="level2" data-number="17.4">
<h2 data-number="17.4" class="anchored" data-anchor-id="two-critical-rules-for-dynamic-parameters"><span class="header-section-number">17.4</span> Two Critical Rules for Dynamic Parameters</h2>
<p>There are two important principles we need to remember if we want to use dynamic parameters.</p>
<section id="timeline-variable-syntax-changes" class="level3" data-number="17.4.1">
<h3 data-number="17.4.1" class="anchored" data-anchor-id="timeline-variable-syntax-changes"><span class="header-section-number">17.4.1</span> 1. Timeline Variable Syntax Changes</h3>
<p>When using timeline variables inside functions, the syntax changes:</p>
<ul>
<li>Inside functions, use: <code>jsPsych.evaluateTimelineVariable('variableName')</code></li>
<li>Outside functions, use: <code>jsPsych.timelineVariable('variableName')</code></li>
</ul>
<p>Use <code>.evaluateTimelineVariable()</code> to immediately get the value, while <code>.timelineVariable()</code> creates a placeholder for later evaluation.</p>
</section>
<section id="save-dynamic-parameters" class="level3" data-number="17.4.2">
<h3 data-number="17.4.2" class="anchored" data-anchor-id="save-dynamic-parameters"><span class="header-section-number">17.4.2</span> 2. Save Dynamic Parameters</h3>
<p>Dynamic parameters aren’t automatically saved to your data. Use <code>save_trial_parameters</code> to specify which ones to save:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">let</span> trial <span class="op">=</span> {</span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychKeyboardResponse<span class="op">,</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">"r"</span>]<span class="op">,</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="dt">save_trial_parameters</span><span class="op">:</span> {</span>
<span id="cb7-7"><a href="#cb7-7"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>  }</span>
<span id="cb7-10"><a href="#cb7-10"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="dynamic-stimulus" class="level2" data-number="17.5">
<h2 data-number="17.5" class="anchored" data-anchor-id="dynamic-stimulus"><span class="header-section-number">17.5</span> Dynamic <code>stimulus</code></h2>
<section id="a-basic-example" class="level3" data-number="17.5.1">
<h3 data-number="17.5.1" class="anchored" data-anchor-id="a-basic-example"><span class="header-section-number">17.5.1</span> A Basic Example</h3>
<p>Let’s start with something familiar. Remember how we used timeline variables to create Stroop stimuli? We might have done something like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb8-4"><a href="#cb8-4"></a>    {</span>
<span id="cb8-5"><a href="#cb8-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'stimulus'</span>)</span>
<span id="cb8-6"><a href="#cb8-6"></a>    }</span>
<span id="cb8-7"><a href="#cb8-7"></a>  ]<span class="op">,</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb8-9"><a href="#cb8-9"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p style="color: red;"&gt;RED&lt;/p&gt;'</span>}<span class="op">,</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p style="color: blue;"&gt;BLUE&lt;/p&gt;'</span>}<span class="op">,</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;p style="color: green;"&gt;GREEN&lt;/p&gt;'</span>}</span>
<span id="cb8-12"><a href="#cb8-12"></a>  ]</span>
<span id="cb8-13"><a href="#cb8-13"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But what if we wanted more control over how the HTML is built? We can use a function to access timeline variables and construct HTML with more control:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb9-2"><a href="#cb9-2"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb9-4"><a href="#cb9-4"></a>        {</span>
<span id="cb9-5"><a href="#cb9-5"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb9-6"><a href="#cb9-6"></a>                <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>                <span class="co">// For convenience, we'll store them inside variables called 'word' and 'color'</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>                <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'word'</span>)<span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>                <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'color'</span>)<span class="op">;</span></span>
<span id="cb9-10"><a href="#cb9-10"></a></span>
<span id="cb9-11"><a href="#cb9-11"></a>                <span class="co">// Build the HTML using these variables</span></span>
<span id="cb9-12"><a href="#cb9-12"></a>                <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`&lt;p style='color: </span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 48px;'&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb9-13"><a href="#cb9-13"></a>                </span>
<span id="cb9-14"><a href="#cb9-14"></a>                <span class="co">// Important: We must return the output variable</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>                <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>            }</span>
<span id="cb9-17"><a href="#cb9-17"></a>        }</span>
<span id="cb9-18"><a href="#cb9-18"></a>    ]<span class="op">,</span></span>
<span id="cb9-19"><a href="#cb9-19"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb9-20"><a href="#cb9-20"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span>}<span class="op">,</span></span>
<span id="cb9-21"><a href="#cb9-21"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span>}<span class="op">,</span></span>
<span id="cb9-22"><a href="#cb9-22"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'GREEN'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'green'</span>}<span class="op">,</span></span>
<span id="cb9-23"><a href="#cb9-23"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span>}<span class="op">,</span>  <span class="co">// Incongruent</span></span>
<span id="cb9-24"><a href="#cb9-24"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'green'</span>}<span class="op">,</span> <span class="co">// Incongruent</span></span>
<span id="cb9-25"><a href="#cb9-25"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'GREEN'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span>} <span class="co">// Incongruent</span></span>
<span id="cb9-26"><a href="#cb9-26"></a>    ]</span>
<span id="cb9-27"><a href="#cb9-27"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We’ve replaced our <code>stimulus</code> with a function that constructs HTML and returns it via the output variable.</p>
<p>Notice we’re using template literals (backticks) and <code>${variable}</code> syntax to insert variables into HTML strings. This is cleaner than concatenating with <code>+</code>.</p>
<p>We can expand on this example and change other aspects of the HTML display using the same logic. For instance, we can also update the font size on every trial:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb10-4"><a href="#cb10-4"></a>    {</span>
<span id="cb10-5"><a href="#cb10-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb10-6"><a href="#cb10-6"></a>        <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>        <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'word'</span>)<span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>        <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'color'</span>)<span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>        <span class="kw">let</span> fontSize <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'fontSize'</span>)<span class="op">;</span></span>
<span id="cb10-10"><a href="#cb10-10"></a></span>
<span id="cb10-11"><a href="#cb10-11"></a>         <span class="co">// Build the HTML using these variables</span></span>
<span id="cb10-12"><a href="#cb10-12"></a>         <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`&lt;p style='color: </span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: </span><span class="sc">${</span>fontSize<span class="sc">}</span><span class="vs">px;'&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>         <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>      }</span>
<span id="cb10-15"><a href="#cb10-15"></a>    }</span>
<span id="cb10-16"><a href="#cb10-16"></a>  ]<span class="op">,</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb10-18"><a href="#cb10-18"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="st">'24'</span>}<span class="op">,</span></span>
<span id="cb10-19"><a href="#cb10-19"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="st">'36'</span>}<span class="op">,</span></span>
<span id="cb10-20"><a href="#cb10-20"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'GREEN'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'green'</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="st">'48'</span>}<span class="op">,</span></span>
<span id="cb10-21"><a href="#cb10-21"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="st">'24'</span>}<span class="op">,</span>  <span class="co">// Incongruent</span></span>
<span id="cb10-22"><a href="#cb10-22"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'green'</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="st">'36'</span>}<span class="op">,</span> <span class="co">// Incongruent</span></span>
<span id="cb10-23"><a href="#cb10-23"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'GREEN'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="st">'48'</span>} <span class="co">// Incongruent</span></span>
<span id="cb10-24"><a href="#cb10-24"></a>  ]</span>
<span id="cb10-25"><a href="#cb10-25"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="adding-logic-changing-the-difficulty" class="level3" data-number="17.5.2">
<h3 data-number="17.5.2" class="anchored" data-anchor-id="adding-logic-changing-the-difficulty"><span class="header-section-number">17.5.2</span> Adding Logic: Changing the Difficulty</h3>
<p>So far, we haven’t done anything we couldn’t do without the function. Though, in my opinion this formatting is much cleaner: We can clearly see the variables that we’re changing on each trial and our <code>timeline_variables</code> are not cluttered with extra HTML.</p>
<p>The real advantage of functions is introducing complex logic. Let’s make some trials harder by repeating the Stroop stimulus with distractors.</p>
<p>Let’s try something new with our Stroop stimuli. What if we wanted to make the task harder on some trials? Maybe by repeating the Stroop stimulus multiple times with additional distractors?</p>
<p>We need if-else logic: IF a trial is “hard” THEN display the word three times. IF “easy” THEN display once.</p>
<p>Let’s see how we can accomplish that:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb11-4"><a href="#cb11-4"></a>    {</span>
<span id="cb11-5"><a href="#cb11-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb11-6"><a href="#cb11-6"></a>        <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>        <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'word'</span>)<span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>        <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'color'</span>)<span class="op">;</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>        <span class="kw">let</span> difficulty <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'difficulty'</span>)<span class="op">;</span></span>
<span id="cb11-10"><a href="#cb11-10"></a>        </span>
<span id="cb11-11"><a href="#cb11-11"></a>        <span class="co">// set an empty variable for our output</span></span>
<span id="cb11-12"><a href="#cb11-12"></a>        <span class="kw">let</span> output </span>
<span id="cb11-13"><a href="#cb11-13"></a>        </span>
<span id="cb11-14"><a href="#cb11-14"></a>        <span class="co">// change our output HTML depending on what 'difficulty' is</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>        <span class="cf">if</span>(difficulty <span class="op">===</span> <span class="st">"hard"</span>){</span>
<span id="cb11-16"><a href="#cb11-16"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="color:black; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="vs">                    &lt;p style="color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb11-18"><a href="#cb11-18"></a><span class="vs">                    &lt;p style="color:black; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb11-19"><a href="#cb11-19"></a><span class="vs">                    `</span><span class="op">;</span></span>
<span id="cb11-20"><a href="#cb11-20"></a>        </span>
<span id="cb11-21"><a href="#cb11-21"></a>        } <span class="cf">else</span> <span class="cf">if</span>(difficulty <span class="op">===</span> <span class="st">"easy"</span>){</span>
<span id="cb11-22"><a href="#cb11-22"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb11-23"><a href="#cb11-23"></a><span class="vs">                    `</span><span class="op">;</span></span>
<span id="cb11-24"><a href="#cb11-24"></a>        </span>
<span id="cb11-25"><a href="#cb11-25"></a>        }</span>
<span id="cb11-26"><a href="#cb11-26"></a></span>
<span id="cb11-27"><a href="#cb11-27"></a>        <span class="co">// we'll return what is in output</span></span>
<span id="cb11-28"><a href="#cb11-28"></a>        <span class="cf">return</span> output</span>
<span id="cb11-29"><a href="#cb11-29"></a>      }</span>
<span id="cb11-30"><a href="#cb11-30"></a>    }</span>
<span id="cb11-31"><a href="#cb11-31"></a>  ]<span class="op">,</span></span>
<span id="cb11-32"><a href="#cb11-32"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb11-33"><a href="#cb11-33"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'hard'</span>}<span class="op">,</span></span>
<span id="cb11-34"><a href="#cb11-34"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'hard'</span>}<span class="op">,</span></span>
<span id="cb11-35"><a href="#cb11-35"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'hard'</span>}<span class="op">,</span></span>
<span id="cb11-36"><a href="#cb11-36"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'hard'</span>}<span class="op">,</span>  </span>
<span id="cb11-37"><a href="#cb11-37"></a>    </span>
<span id="cb11-38"><a href="#cb11-38"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'easy'</span>}<span class="op">,</span></span>
<span id="cb11-39"><a href="#cb11-39"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'easy'</span>}<span class="op">,</span></span>
<span id="cb11-40"><a href="#cb11-40"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'easy'</span>}<span class="op">,</span></span>
<span id="cb11-41"><a href="#cb11-41"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'easy'</span>}  </span>
<span id="cb11-42"><a href="#cb11-42"></a>  ]<span class="op">,</span></span>
<span id="cb11-43"><a href="#cb11-43"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb11-44"><a href="#cb11-44"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the function I’ve added some if-else logic to define what the HTML is going to be. Now I’m not inserting the <code>difficulty</code> timeline variable. Instead, I’m checking what it is, and changing the display depending on whether it is set to ‘hard’ or ‘easy’.</p>
<p>We can add more conditions if we wanted to this logic. For example, we can make this even more complex by adding a different kind of ‘neutral’ trial that presents “XXXX” in place of the flanking distractors.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb12-4"><a href="#cb12-4"></a>    {</span>
<span id="cb12-5"><a href="#cb12-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb12-6"><a href="#cb12-6"></a>        <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>        <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'word'</span>)<span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>        <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'color'</span>)<span class="op">;</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>        <span class="kw">let</span> difficulty <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'difficulty'</span>)<span class="op">;</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>        </span>
<span id="cb12-11"><a href="#cb12-11"></a>        <span class="co">// set an empty variable for our output</span></span>
<span id="cb12-12"><a href="#cb12-12"></a>        <span class="kw">let</span> output </span>
<span id="cb12-13"><a href="#cb12-13"></a>        </span>
<span id="cb12-14"><a href="#cb12-14"></a>        <span class="co">// change our output HTML depending on what 'difficulty' is</span></span>
<span id="cb12-15"><a href="#cb12-15"></a>        <span class="cf">if</span>(difficulty <span class="op">===</span> <span class="st">"hard"</span>){</span>
<span id="cb12-16"><a href="#cb12-16"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="color:black; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="vs">                    &lt;p style="color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="vs">                    &lt;p style="color:black; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="vs">                    `</span><span class="op">;</span></span>
<span id="cb12-20"><a href="#cb12-20"></a>        </span>
<span id="cb12-21"><a href="#cb12-21"></a>        } <span class="cf">else</span> <span class="cf">if</span>(difficulty <span class="op">===</span> <span class="st">"easy"</span>){</span>
<span id="cb12-22"><a href="#cb12-22"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb12-23"><a href="#cb12-23"></a><span class="vs">                    `</span><span class="op">;</span></span>
<span id="cb12-24"><a href="#cb12-24"></a>        </span>
<span id="cb12-25"><a href="#cb12-25"></a>        } <span class="cf">else</span> <span class="cf">if</span>(difficulty <span class="op">===</span> <span class="st">"neutral"</span>){</span>
<span id="cb12-26"><a href="#cb12-26"></a>           output <span class="op">=</span> <span class="vs">`&lt;p style="color:black; font-size: 36pt"&gt;XXXX&lt;/p&gt;</span></span>
<span id="cb12-27"><a href="#cb12-27"></a><span class="vs">                    &lt;p style="color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb12-28"><a href="#cb12-28"></a><span class="vs">                    &lt;p style="color:black; font-size: 36pt"&gt;XXXX&lt;/p&gt;</span></span>
<span id="cb12-29"><a href="#cb12-29"></a><span class="vs">                    `</span><span class="op">;</span></span>
<span id="cb12-30"><a href="#cb12-30"></a>        </span>
<span id="cb12-31"><a href="#cb12-31"></a>        }</span>
<span id="cb12-32"><a href="#cb12-32"></a></span>
<span id="cb12-33"><a href="#cb12-33"></a>        <span class="co">// we'll return what is in output</span></span>
<span id="cb12-34"><a href="#cb12-34"></a>        <span class="cf">return</span> output</span>
<span id="cb12-35"><a href="#cb12-35"></a>      }</span>
<span id="cb12-36"><a href="#cb12-36"></a>    }</span>
<span id="cb12-37"><a href="#cb12-37"></a>  ]<span class="op">,</span></span>
<span id="cb12-38"><a href="#cb12-38"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb12-39"><a href="#cb12-39"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'hard'</span>}<span class="op">,</span></span>
<span id="cb12-40"><a href="#cb12-40"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'hard'</span>}<span class="op">,</span></span>
<span id="cb12-41"><a href="#cb12-41"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'hard'</span>}<span class="op">,</span></span>
<span id="cb12-42"><a href="#cb12-42"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'hard'</span>}<span class="op">,</span>  </span>
<span id="cb12-43"><a href="#cb12-43"></a>    </span>
<span id="cb12-44"><a href="#cb12-44"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'easy'</span>}<span class="op">,</span></span>
<span id="cb12-45"><a href="#cb12-45"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'easy'</span>}<span class="op">,</span></span>
<span id="cb12-46"><a href="#cb12-46"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'easy'</span>}<span class="op">,</span></span>
<span id="cb12-47"><a href="#cb12-47"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'easy'</span>}<span class="op">,</span>  </span>
<span id="cb12-48"><a href="#cb12-48"></a>    </span>
<span id="cb12-49"><a href="#cb12-49"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'neutral'</span>}<span class="op">,</span></span>
<span id="cb12-50"><a href="#cb12-50"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'neutral'</span>}<span class="op">,</span></span>
<span id="cb12-51"><a href="#cb12-51"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'neutral'</span>}<span class="op">,</span></span>
<span id="cb12-52"><a href="#cb12-52"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">'neutral'</span>} </span>
<span id="cb12-53"><a href="#cb12-53"></a>  ]<span class="op">,</span></span>
<span id="cb12-54"><a href="#cb12-54"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb12-55"><a href="#cb12-55"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And let’s see a full example using that code:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb13-1"><a href="#cb13-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Recognition DRM<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>    </span>
<span id="cb13-9"><a href="#cb13-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb13-10"><a href="#cb13-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb13-11"><a href="#cb13-11"></a></span>
<span id="cb13-12"><a href="#cb13-12"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>     <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb13-16"><a href="#cb13-16"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb13-17"><a href="#cb13-17"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb13-18"><a href="#cb13-18"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb13-19"><a href="#cb13-19"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb13-20"><a href="#cb13-20"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1"></a> <span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a> </span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`Welcome to the Experiment! Press any key to begin.`</span><span class="op">,</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb14-10"><a href="#cb14-10"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>}</span>
<span id="cb14-12"><a href="#cb14-12"></a></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb14-14"><a href="#cb14-14"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb14-16"><a href="#cb14-16"></a>    {</span>
<span id="cb14-17"><a href="#cb14-17"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 48pt"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb14-18"><a href="#cb14-18"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb14-19"><a href="#cb14-19"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">750</span><span class="op">,</span></span>
<span id="cb14-20"><a href="#cb14-20"></a>      <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb14-21"><a href="#cb14-21"></a>    }<span class="op">,</span></span>
<span id="cb14-22"><a href="#cb14-22"></a>    {</span>
<span id="cb14-23"><a href="#cb14-23"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb14-24"><a href="#cb14-24"></a>        <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb14-25"><a href="#cb14-25"></a>        <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"word"</span>)<span class="op">;</span></span>
<span id="cb14-26"><a href="#cb14-26"></a>        <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"color"</span>)<span class="op">;</span></span>
<span id="cb14-27"><a href="#cb14-27"></a>        <span class="kw">let</span> difficulty <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"difficulty"</span>)<span class="op">;</span></span>
<span id="cb14-28"><a href="#cb14-28"></a>        </span>
<span id="cb14-29"><a href="#cb14-29"></a>        <span class="co">// set an empty variable for our output</span></span>
<span id="cb14-30"><a href="#cb14-30"></a>        <span class="kw">let</span> output </span>
<span id="cb14-31"><a href="#cb14-31"></a>        </span>
<span id="cb14-32"><a href="#cb14-32"></a>        <span class="co">// change our output HTML depending on what "difficulty" is</span></span>
<span id="cb14-33"><a href="#cb14-33"></a>        <span class="cf">if</span>(difficulty <span class="op">===</span> <span class="st">"hard"</span>){</span>
<span id="cb14-34"><a href="#cb14-34"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="color:black;; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb14-35"><a href="#cb14-35"></a><span class="vs">                    &lt;p style="color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb14-36"><a href="#cb14-36"></a><span class="vs">                    &lt;p style="color:black;; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb14-37"><a href="#cb14-37"></a><span class="vs">                    `</span><span class="op">;</span></span>
<span id="cb14-38"><a href="#cb14-38"></a>        </span>
<span id="cb14-39"><a href="#cb14-39"></a>        } <span class="cf">else</span> <span class="cf">if</span>(difficulty <span class="op">===</span> <span class="st">"easy"</span>){</span>
<span id="cb14-40"><a href="#cb14-40"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb14-41"><a href="#cb14-41"></a><span class="vs">                    `</span><span class="op">;</span></span>
<span id="cb14-42"><a href="#cb14-42"></a>        </span>
<span id="cb14-43"><a href="#cb14-43"></a>        } <span class="cf">else</span> <span class="cf">if</span>(difficulty <span class="op">===</span> <span class="st">"neutral"</span>){</span>
<span id="cb14-44"><a href="#cb14-44"></a>           output <span class="op">=</span> <span class="vs">`&lt;p style="color:black; font-size: 36pt"&gt;XXXX&lt;/p&gt;</span></span>
<span id="cb14-45"><a href="#cb14-45"></a><span class="vs">                    &lt;p style="color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 36pt"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb14-46"><a href="#cb14-46"></a><span class="vs">                    &lt;p style="color:black; font-size: 36pt"&gt;XXXX&lt;/p&gt;</span></span>
<span id="cb14-47"><a href="#cb14-47"></a><span class="vs">                    `</span><span class="op">;</span></span>
<span id="cb14-48"><a href="#cb14-48"></a>        </span>
<span id="cb14-49"><a href="#cb14-49"></a>        }</span>
<span id="cb14-50"><a href="#cb14-50"></a></span>
<span id="cb14-51"><a href="#cb14-51"></a>        <span class="co">// we"ll return what is in output</span></span>
<span id="cb14-52"><a href="#cb14-52"></a>        <span class="cf">return</span> output</span>
<span id="cb14-53"><a href="#cb14-53"></a>      }</span>
<span id="cb14-54"><a href="#cb14-54"></a>    }</span>
<span id="cb14-55"><a href="#cb14-55"></a>  ]<span class="op">,</span></span>
<span id="cb14-56"><a href="#cb14-56"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb14-57"><a href="#cb14-57"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"hard"</span>}<span class="op">,</span></span>
<span id="cb14-58"><a href="#cb14-58"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"hard"</span>}<span class="op">,</span></span>
<span id="cb14-59"><a href="#cb14-59"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"hard"</span>}<span class="op">,</span></span>
<span id="cb14-60"><a href="#cb14-60"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"hard"</span>}<span class="op">,</span>  </span>
<span id="cb14-61"><a href="#cb14-61"></a>    </span>
<span id="cb14-62"><a href="#cb14-62"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"easy"</span>}<span class="op">,</span></span>
<span id="cb14-63"><a href="#cb14-63"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"easy"</span>}<span class="op">,</span></span>
<span id="cb14-64"><a href="#cb14-64"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"easy"</span>}<span class="op">,</span></span>
<span id="cb14-65"><a href="#cb14-65"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"easy"</span>}<span class="op">,</span>  </span>
<span id="cb14-66"><a href="#cb14-66"></a>    </span>
<span id="cb14-67"><a href="#cb14-67"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"neutral"</span>}<span class="op">,</span></span>
<span id="cb14-68"><a href="#cb14-68"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"neutral"</span>}<span class="op">,</span></span>
<span id="cb14-69"><a href="#cb14-69"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"neutral"</span>}<span class="op">,</span></span>
<span id="cb14-70"><a href="#cb14-70"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span>  <span class="dt">difficulty</span><span class="op">:</span> <span class="st">"neutral"</span>} </span>
<span id="cb14-71"><a href="#cb14-71"></a>  ]<span class="op">,</span></span>
<span id="cb14-72"><a href="#cb14-72"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">"b"</span><span class="op">,</span><span class="st">"r"</span>]<span class="op">,</span></span>
<span id="cb14-73"><a href="#cb14-73"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb14-74"><a href="#cb14-74"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb14-75"><a href="#cb14-75"></a>}</span>
<span id="cb14-76"><a href="#cb14-76"></a></span>
<span id="cb14-77"><a href="#cb14-77"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb14-78"><a href="#cb14-78"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb14-79"><a href="#cb14-79"></a>  welcome<span class="op">,</span></span>
<span id="cb14-80"><a href="#cb14-80"></a>  stroop</span>
<span id="cb14-81"><a href="#cb14-81"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb15-1"><a href="#cb15-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div id="demo-container-1" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-1" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n// 2. Define our trials\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `Welcome to the Experiment! Press any key to begin.`,\n  choices: &quot;ALL_KEYS&quot;, \n  post_trial_gap: 250\n}\n\nlet stroop = {\n  type: jsPsychHtmlKeyboardResponse,\n  timeline: [\n    {\n      stimulus: `<p style=&quot;font-size: 48pt&quot;>+</p>`,\n      choices: &quot;NO_KEYS&quot;,\n      trial_duration: 750,\n      post_trial_gap: 250\n    },\n    {\n      stimulus: function() {\n        // Get the timeline variables for this trial\n        let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);\n        let color = jsPsych.evaluateTimelineVariable(&quot;color&quot;);\n        let difficulty = jsPsych.evaluateTimelineVariable(&quot;difficulty&quot;);\n        \n        // set an empty variable for our output\n        let output \n        \n        // change our output HTML depending on what &quot;difficulty&quot; is\n        if(difficulty === &quot;hard&quot;){\n          output = `<p style=&quot;color:black;; font-size: 36pt&quot;>${word}</p>\n                    <p style=&quot;color:${color}; font-size: 36pt&quot;>${word}</p>\n                    <p style=&quot;color:black;; font-size: 36pt&quot;>${word}</p>\n                    `;\n        \n        } else if(difficulty === &quot;easy&quot;){\n          output = `<p style=&quot;color:${color}; font-size: 36pt&quot;>${word}</p>\n                    `;\n        \n        } else if(difficulty === &quot;neutral&quot;){\n           output = `<p style=&quot;color:black; font-size: 36pt&quot;>XXXX</p>\n                    <p style=&quot;color:${color}; font-size: 36pt&quot;>${word}</p>\n                    <p style=&quot;color:black; font-size: 36pt&quot;>XXXX</p>\n                    `;\n        \n        }\n\n        // we&quot;ll return what is in output\n        return output\n      }\n    }\n  ],\n  timeline_variables: [\n    {word: &quot;RED&quot;, color: &quot;red&quot;, difficulty: &quot;hard&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;blue&quot;, difficulty: &quot;hard&quot;},\n    {word: &quot;RED&quot;, color: &quot;blue&quot;,  difficulty: &quot;hard&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;red&quot;,  difficulty: &quot;hard&quot;},  \n    \n    {word: &quot;RED&quot;, color: &quot;red&quot;, difficulty: &quot;easy&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;blue&quot;, difficulty: &quot;easy&quot;},\n    {word: &quot;RED&quot;, color: &quot;blue&quot;,  difficulty: &quot;easy&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;red&quot;,  difficulty: &quot;easy&quot;},  \n    \n    {word: &quot;RED&quot;, color: &quot;red&quot;, difficulty: &quot;neutral&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;blue&quot;, difficulty: &quot;neutral&quot;},\n    {word: &quot;RED&quot;, color: &quot;blue&quot;,  difficulty: &quot;neutral&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;red&quot;,  difficulty: &quot;neutral&quot;} \n  ],\n  choices: [&quot;b&quot;,&quot;r&quot;],\n  randomize_order: true,\n  post_trial_gap: 250\n}\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n  welcome,\n  stroop\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-1');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-1" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});


// 2. Define our trials
const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `Welcome to the Experiment! Press any key to begin.`,
  choices: &quot;ALL_KEYS&quot;, 
  post_trial_gap: 250
}

let stroop = {
  type: jsPsychHtmlKeyboardResponse,
  timeline: [
    {
      stimulus: `<p style=&quot;font-size: 48pt&quot;>+</p>`,
      choices: &quot;NO_KEYS&quot;,
      trial_duration: 750,
      post_trial_gap: 250
    },
    {
      stimulus: function() {
        // Get the timeline variables for this trial
        let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);
        let color = jsPsych.evaluateTimelineVariable(&quot;color&quot;);
        let difficulty = jsPsych.evaluateTimelineVariable(&quot;difficulty&quot;);
        
        // set an empty variable for our output
        let output 
        
        // change our output HTML depending on what &quot;difficulty&quot; is
        if(difficulty === &quot;hard&quot;){
          output = `<p style=&quot;color:black;; font-size: 36pt&quot;>${word}</p>
                    <p style=&quot;color:${color}; font-size: 36pt&quot;>${word}</p>
                    <p style=&quot;color:black;; font-size: 36pt&quot;>${word}</p>
                    `;
        
        } else if(difficulty === &quot;easy&quot;){
          output = `<p style=&quot;color:${color}; font-size: 36pt&quot;>${word}</p>
                    `;
        
        } else if(difficulty === &quot;neutral&quot;){
           output = `<p style=&quot;color:black; font-size: 36pt&quot;>XXXX</p>
                    <p style=&quot;color:${color}; font-size: 36pt&quot;>${word}</p>
                    <p style=&quot;color:black; font-size: 36pt&quot;>XXXX</p>
                    `;
        
        }

        // we&quot;ll return what is in output
        return output
      }
    }
  ],
  timeline_variables: [
    {word: &quot;RED&quot;, color: &quot;red&quot;, difficulty: &quot;hard&quot;},
    {word: &quot;BLUE&quot;, color: &quot;blue&quot;, difficulty: &quot;hard&quot;},
    {word: &quot;RED&quot;, color: &quot;blue&quot;,  difficulty: &quot;hard&quot;},
    {word: &quot;BLUE&quot;, color: &quot;red&quot;,  difficulty: &quot;hard&quot;},  
    
    {word: &quot;RED&quot;, color: &quot;red&quot;, difficulty: &quot;easy&quot;},
    {word: &quot;BLUE&quot;, color: &quot;blue&quot;, difficulty: &quot;easy&quot;},
    {word: &quot;RED&quot;, color: &quot;blue&quot;,  difficulty: &quot;easy&quot;},
    {word: &quot;BLUE&quot;, color: &quot;red&quot;,  difficulty: &quot;easy&quot;},  
    
    {word: &quot;RED&quot;, color: &quot;red&quot;, difficulty: &quot;neutral&quot;},
    {word: &quot;BLUE&quot;, color: &quot;blue&quot;, difficulty: &quot;neutral&quot;},
    {word: &quot;RED&quot;, color: &quot;blue&quot;,  difficulty: &quot;neutral&quot;},
    {word: &quot;BLUE&quot;, color: &quot;red&quot;,  difficulty: &quot;neutral&quot;} 
  ],
  choices: [&quot;b&quot;,&quot;r&quot;],
  randomize_order: true,
  post_trial_gap: 250
}

// 3. Run jsPsych with our trials
jsPsych.run([
  welcome,
  stroop
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-1&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-1&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="adding-logic-changing-the-location" class="level3" data-number="17.5.3">
<h3 data-number="17.5.3" class="anchored" data-anchor-id="adding-logic-changing-the-location"><span class="header-section-number">17.5.3</span> Adding Logic: Changing the Location</h3>
<p>I’m hoping you can see how this opens up unlimited possibilities!</p>
<p>Let’s change stimulus location using more complex HTML. I’m using ‘flexbox’ positioning, which provides convenient ways to control alignment in rows, columns, and centering.</p>
<p>Let’s look at how we can accomplish a stimulus display that positions the stimulus on the left versus right side of the display:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">let</span> simon <span class="op">=</span> {</span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb16-4"><a href="#cb16-4"></a>    {</span>
<span id="cb16-5"><a href="#cb16-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb16-6"><a href="#cb16-6"></a>        <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb16-7"><a href="#cb16-7"></a>        <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'word'</span>)<span class="op">;</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>        <span class="kw">let</span> location <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'location'</span>)<span class="op">;</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>        </span>
<span id="cb16-10"><a href="#cb16-10"></a>        <span class="co">// set an empty variable for our output</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>        <span class="kw">let</span> output </span>
<span id="cb16-12"><a href="#cb16-12"></a>        </span>
<span id="cb16-13"><a href="#cb16-13"></a>        <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"left"</span>) {</span>
<span id="cb16-14"><a href="#cb16-14"></a>        </span>
<span id="cb16-15"><a href="#cb16-15"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="vs">              &lt;div style="display: flex; width: 600px; height: 200px; align-items: center;"&gt;</span></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="vs">                  &lt;div style="flex: 1; text-align: center; font-size: 36px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="vs">                  &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb16-19"><a href="#cb16-19"></a><span class="vs">              &lt;/div&gt;</span></span>
<span id="cb16-20"><a href="#cb16-20"></a><span class="vs">          `</span><span class="op">;</span></span>
<span id="cb16-21"><a href="#cb16-21"></a>        } <span class="cf">else</span> <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"right"</span>) {</span>
<span id="cb16-22"><a href="#cb16-22"></a>        </span>
<span id="cb16-23"><a href="#cb16-23"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb16-24"><a href="#cb16-24"></a><span class="vs">                &lt;div style="display: flex; width: 600px; height: 200px; align-items: center;"&gt;</span></span>
<span id="cb16-25"><a href="#cb16-25"></a><span class="vs">                    &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb16-26"><a href="#cb16-26"></a><span class="vs">                    &lt;div style="flex: 1; text-align: center; font-size: 36px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb16-27"><a href="#cb16-27"></a><span class="vs">                &lt;/div&gt;</span></span>
<span id="cb16-28"><a href="#cb16-28"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb16-29"><a href="#cb16-29"></a>        }</span>
<span id="cb16-30"><a href="#cb16-30"></a></span>
<span id="cb16-31"><a href="#cb16-31"></a>        <span class="co">// we'll return what is in output</span></span>
<span id="cb16-32"><a href="#cb16-32"></a>        <span class="cf">return</span> output</span>
<span id="cb16-33"><a href="#cb16-33"></a>      }</span>
<span id="cb16-34"><a href="#cb16-34"></a>    }</span>
<span id="cb16-35"><a href="#cb16-35"></a>  ]<span class="op">,</span></span>
<span id="cb16-36"><a href="#cb16-36"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb16-37"><a href="#cb16-37"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'LEFT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"left"</span>}<span class="op">,</span></span>
<span id="cb16-38"><a href="#cb16-38"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RIGHT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"left"</span>}<span class="op">,</span></span>
<span id="cb16-39"><a href="#cb16-39"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'LEFT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"right"</span>}<span class="op">,</span></span>
<span id="cb16-40"><a href="#cb16-40"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RIGHT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"right"</span>}</span>
<span id="cb16-41"><a href="#cb16-41"></a>  ]<span class="op">,</span></span>
<span id="cb16-42"><a href="#cb16-42"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb16-43"><a href="#cb16-43"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And again, just for kicks, let’s expand that to include a third, center, location. Maybe this would be considered a ‘neutral’ location for this kind of experiment.</p>
<p>Because I used the flexbox method, this is pretty easy to just add a third location.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">let</span> simon <span class="op">=</span> {</span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb17-4"><a href="#cb17-4"></a>    {</span>
<span id="cb17-5"><a href="#cb17-5"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb17-6"><a href="#cb17-6"></a>        <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>        <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'word'</span>)<span class="op">;</span></span>
<span id="cb17-8"><a href="#cb17-8"></a>        <span class="kw">let</span> location <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'location'</span>)<span class="op">;</span></span>
<span id="cb17-9"><a href="#cb17-9"></a>        </span>
<span id="cb17-10"><a href="#cb17-10"></a>        <span class="co">// set an empty variable for our output</span></span>
<span id="cb17-11"><a href="#cb17-11"></a>        <span class="kw">let</span> output </span>
<span id="cb17-12"><a href="#cb17-12"></a>        </span>
<span id="cb17-13"><a href="#cb17-13"></a>        <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"left"</span>) {</span>
<span id="cb17-14"><a href="#cb17-14"></a>        </span>
<span id="cb17-15"><a href="#cb17-15"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="vs">              &lt;div style="display: flex; width: 600px; height: 200px; align-items: center;"&gt;</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="vs">                  &lt;div style="flex: 1; text-align: center; font-size: 36px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="vs">                  &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb17-19"><a href="#cb17-19"></a><span class="vs">                  &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb17-20"><a href="#cb17-20"></a><span class="vs">              &lt;/div&gt;</span></span>
<span id="cb17-21"><a href="#cb17-21"></a><span class="vs">          `</span><span class="op">;</span></span>
<span id="cb17-22"><a href="#cb17-22"></a>        } <span class="cf">else</span> <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"right"</span>) {</span>
<span id="cb17-23"><a href="#cb17-23"></a>        </span>
<span id="cb17-24"><a href="#cb17-24"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb17-25"><a href="#cb17-25"></a><span class="vs">                &lt;div style="display: flex; width: 600px; height: 200px; align-items: center;"&gt;</span></span>
<span id="cb17-26"><a href="#cb17-26"></a><span class="vs">                    &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb17-27"><a href="#cb17-27"></a><span class="vs">                    &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb17-28"><a href="#cb17-28"></a><span class="vs">                    &lt;div style="flex: 1; text-align: center; font-size: 36px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb17-29"><a href="#cb17-29"></a><span class="vs">                &lt;/div&gt;</span></span>
<span id="cb17-30"><a href="#cb17-30"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb17-31"><a href="#cb17-31"></a>        } <span class="cf">else</span> <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"center"</span>) {</span>
<span id="cb17-32"><a href="#cb17-32"></a>        </span>
<span id="cb17-33"><a href="#cb17-33"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb17-34"><a href="#cb17-34"></a><span class="vs">                &lt;div style="display: flex; width: 600px; height: 200px; align-items: center;"&gt;</span></span>
<span id="cb17-35"><a href="#cb17-35"></a><span class="vs">                    &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb17-36"><a href="#cb17-36"></a><span class="vs">                    &lt;div style="flex: 1; text-align: center; font-size: 36px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb17-37"><a href="#cb17-37"></a><span class="vs">                    &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb17-38"><a href="#cb17-38"></a><span class="vs">                &lt;/div&gt;</span></span>
<span id="cb17-39"><a href="#cb17-39"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb17-40"><a href="#cb17-40"></a>        }</span>
<span id="cb17-41"><a href="#cb17-41"></a></span>
<span id="cb17-42"><a href="#cb17-42"></a>        <span class="co">// we'll return what is in output</span></span>
<span id="cb17-43"><a href="#cb17-43"></a>        <span class="cf">return</span> output</span>
<span id="cb17-44"><a href="#cb17-44"></a>      }</span>
<span id="cb17-45"><a href="#cb17-45"></a>    }</span>
<span id="cb17-46"><a href="#cb17-46"></a>  ]<span class="op">,</span></span>
<span id="cb17-47"><a href="#cb17-47"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb17-48"><a href="#cb17-48"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'LEFT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"left"</span>}<span class="op">,</span></span>
<span id="cb17-49"><a href="#cb17-49"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RIGHT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"left"</span>}<span class="op">,</span></span>
<span id="cb17-50"><a href="#cb17-50"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'LEFT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"right"</span>}<span class="op">,</span></span>
<span id="cb17-51"><a href="#cb17-51"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RIGHT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"right"</span>}<span class="op">,</span></span>
<span id="cb17-52"><a href="#cb17-52"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'LEFT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"center"</span>}<span class="op">,</span></span>
<span id="cb17-53"><a href="#cb17-53"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">'RIGHT'</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"center"</span>}<span class="op">,</span></span>
<span id="cb17-54"><a href="#cb17-54"></a>  ]<span class="op">,</span></span>
<span id="cb17-55"><a href="#cb17-55"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb17-56"><a href="#cb17-56"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here’s a full example using that code:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb18-1"><a href="#cb18-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Simon Task<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>    </span>
<span id="cb18-9"><a href="#cb18-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-11"><a href="#cb18-11"></a></span>
<span id="cb18-12"><a href="#cb18-12"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb18-13"><a href="#cb18-13"></a>     <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb18-14"><a href="#cb18-14"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb18-15"><a href="#cb18-15"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb18-17"><a href="#cb18-17"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-18"><a href="#cb18-18"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb18-19"><a href="#cb18-19"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb18-20"><a href="#cb18-20"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1"></a> <span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb19-3"><a href="#cb19-3"></a></span>
<span id="cb19-4"><a href="#cb19-4"></a> </span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb19-7"><a href="#cb19-7"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`Welcome to the Experiment! Press "Z" if the word says "LEFT" or "M" if the word says "RIGHT". Press any key to begin.`</span><span class="op">,</span></span>
<span id="cb19-9"><a href="#cb19-9"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb19-10"><a href="#cb19-10"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb19-11"><a href="#cb19-11"></a>}</span>
<span id="cb19-12"><a href="#cb19-12"></a></span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="kw">let</span> simon <span class="op">=</span> {</span>
<span id="cb19-14"><a href="#cb19-14"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-15"><a href="#cb19-15"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb19-16"><a href="#cb19-16"></a>    {</span>
<span id="cb19-17"><a href="#cb19-17"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size: 48pt"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb19-18"><a href="#cb19-18"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb19-19"><a href="#cb19-19"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">750</span><span class="op">,</span></span>
<span id="cb19-20"><a href="#cb19-20"></a>      <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb19-21"><a href="#cb19-21"></a>    }<span class="op">,</span></span>
<span id="cb19-22"><a href="#cb19-22"></a>    {</span>
<span id="cb19-23"><a href="#cb19-23"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb19-24"><a href="#cb19-24"></a>        <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb19-25"><a href="#cb19-25"></a>        <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"word"</span>)<span class="op">;</span></span>
<span id="cb19-26"><a href="#cb19-26"></a>        <span class="kw">let</span> location <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"location"</span>)<span class="op">;</span></span>
<span id="cb19-27"><a href="#cb19-27"></a>        </span>
<span id="cb19-28"><a href="#cb19-28"></a>        <span class="co">// set an empty variable for our output</span></span>
<span id="cb19-29"><a href="#cb19-29"></a>        <span class="kw">let</span> output </span>
<span id="cb19-30"><a href="#cb19-30"></a>        </span>
<span id="cb19-31"><a href="#cb19-31"></a>        <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"left"</span>) {</span>
<span id="cb19-32"><a href="#cb19-32"></a>        </span>
<span id="cb19-33"><a href="#cb19-33"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb19-34"><a href="#cb19-34"></a><span class="vs">              &lt;div style="display: flex; width: 600px; height: 200px; align-items: center;"&gt;</span></span>
<span id="cb19-35"><a href="#cb19-35"></a><span class="vs">                  &lt;div style="flex: 1; text-align: center; font-size: 36px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb19-36"><a href="#cb19-36"></a><span class="vs">                  &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb19-37"><a href="#cb19-37"></a><span class="vs">                  &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb19-38"><a href="#cb19-38"></a><span class="vs">              &lt;/div&gt;</span></span>
<span id="cb19-39"><a href="#cb19-39"></a><span class="vs">          `</span><span class="op">;</span></span>
<span id="cb19-40"><a href="#cb19-40"></a>        } <span class="cf">else</span> <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"right"</span>) {</span>
<span id="cb19-41"><a href="#cb19-41"></a>        </span>
<span id="cb19-42"><a href="#cb19-42"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb19-43"><a href="#cb19-43"></a><span class="vs">                &lt;div style="display: flex; width: 600px; height: 200px; align-items: center;"&gt;</span></span>
<span id="cb19-44"><a href="#cb19-44"></a><span class="vs">                    &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb19-45"><a href="#cb19-45"></a><span class="vs">                    &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb19-46"><a href="#cb19-46"></a><span class="vs">                    &lt;div style="flex: 1; text-align: center; font-size: 36px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb19-47"><a href="#cb19-47"></a><span class="vs">                &lt;/div&gt;</span></span>
<span id="cb19-48"><a href="#cb19-48"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb19-49"><a href="#cb19-49"></a>        } <span class="cf">else</span> <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"center"</span>) {</span>
<span id="cb19-50"><a href="#cb19-50"></a>        </span>
<span id="cb19-51"><a href="#cb19-51"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb19-52"><a href="#cb19-52"></a><span class="vs">                &lt;div style="display: flex; width: 600px; height: 200px; align-items: center;"&gt;</span></span>
<span id="cb19-53"><a href="#cb19-53"></a><span class="vs">                    &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb19-54"><a href="#cb19-54"></a><span class="vs">                    &lt;div style="flex: 1; text-align: center; font-size: 36px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb19-55"><a href="#cb19-55"></a><span class="vs">                    &lt;div style="flex: 1;"&gt;&lt;/div&gt;</span></span>
<span id="cb19-56"><a href="#cb19-56"></a><span class="vs">                &lt;/div&gt;</span></span>
<span id="cb19-57"><a href="#cb19-57"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb19-58"><a href="#cb19-58"></a>        }</span>
<span id="cb19-59"><a href="#cb19-59"></a></span>
<span id="cb19-60"><a href="#cb19-60"></a>        <span class="co">// we"ll return what is in output</span></span>
<span id="cb19-61"><a href="#cb19-61"></a>        <span class="cf">return</span> output</span>
<span id="cb19-62"><a href="#cb19-62"></a>      }<span class="op">,</span></span>
<span id="cb19-63"><a href="#cb19-63"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">"z"</span><span class="op">,</span><span class="st">"m"</span>]<span class="op">,</span></span>
<span id="cb19-64"><a href="#cb19-64"></a>      <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb19-65"><a href="#cb19-65"></a>    }</span>
<span id="cb19-66"><a href="#cb19-66"></a>  ]<span class="op">,</span></span>
<span id="cb19-67"><a href="#cb19-67"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb19-68"><a href="#cb19-68"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"LEFT"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"left"</span>}<span class="op">,</span></span>
<span id="cb19-69"><a href="#cb19-69"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RIGHT"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"left"</span>}<span class="op">,</span></span>
<span id="cb19-70"><a href="#cb19-70"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"LEFT"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"right"</span>}<span class="op">,</span></span>
<span id="cb19-71"><a href="#cb19-71"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RIGHT"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"right"</span>}<span class="op">,</span></span>
<span id="cb19-72"><a href="#cb19-72"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"LEFT"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"center"</span>}<span class="op">,</span></span>
<span id="cb19-73"><a href="#cb19-73"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RIGHT"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"center"</span>}</span>
<span id="cb19-74"><a href="#cb19-74"></a>  ]<span class="op">,</span></span>
<span id="cb19-75"><a href="#cb19-75"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb19-76"><a href="#cb19-76"></a>}</span>
<span id="cb19-77"><a href="#cb19-77"></a></span>
<span id="cb19-78"><a href="#cb19-78"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb19-79"><a href="#cb19-79"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb19-80"><a href="#cb19-80"></a>  welcome<span class="op">,</span></span>
<span id="cb19-81"><a href="#cb19-81"></a>  simon</span>
<span id="cb19-82"><a href="#cb19-82"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb20-1"><a href="#cb20-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div id="demo-container-2" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-2" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n// 2. Define our trials\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `Welcome to the Experiment! Press &quot;Z&quot; if the word says &quot;LEFT&quot; or &quot;M&quot; if the word says &quot;RIGHT&quot;. Press any key to begin.`,\n  choices: &quot;ALL_KEYS&quot;, \n  post_trial_gap: 250\n}\n\nlet simon = {\n  type: jsPsychHtmlKeyboardResponse,\n  timeline: [\n    {\n      stimulus: `<p style=&quot;font-size: 48pt&quot;>+</p>`,\n      choices: &quot;NO_KEYS&quot;,\n      trial_duration: 750,\n      post_trial_gap: 250\n    },\n    {\n      stimulus: function() {\n        // Get the timeline variables for this trial\n        let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);\n        let location = jsPsych.evaluateTimelineVariable(&quot;location&quot;);\n        \n        // set an empty variable for our output\n        let output \n        \n        if (location === &quot;left&quot;) {\n        \n            output = `\n              <div style=&quot;display: flex; width: 600px; height: 200px; align-items: center;&quot;>\n                  <div style=&quot;flex: 1; text-align: center; font-size: 36px;&quot;>${word}</div>\n                  <div style=&quot;flex: 1;&quot;></div>\n                  <div style=&quot;flex: 1;&quot;></div>\n              </div>\n          `;\n        } else if (location === &quot;right&quot;) {\n        \n            output = `\n                <div style=&quot;display: flex; width: 600px; height: 200px; align-items: center;&quot;>\n                    <div style=&quot;flex: 1;&quot;></div>\n                    <div style=&quot;flex: 1;&quot;></div>\n                    <div style=&quot;flex: 1; text-align: center; font-size: 36px;&quot;>${word}</div>\n                </div>\n            `;\n        } else if (location === &quot;center&quot;) {\n        \n            output = `\n                <div style=&quot;display: flex; width: 600px; height: 200px; align-items: center;&quot;>\n                    <div style=&quot;flex: 1;&quot;></div>\n                    <div style=&quot;flex: 1; text-align: center; font-size: 36px;&quot;>${word}</div>\n                    <div style=&quot;flex: 1;&quot;></div>\n                </div>\n            `;\n        }\n\n        // we&quot;ll return what is in output\n        return output\n      },\n      choices: [&quot;z&quot;,&quot;m&quot;],\n      post_trial_gap: 250\n    }\n  ],\n  timeline_variables: [\n    {word: &quot;LEFT&quot;, location: &quot;left&quot;},\n    {word: &quot;RIGHT&quot;, location: &quot;left&quot;},\n    {word: &quot;LEFT&quot;, location: &quot;right&quot;},\n    {word: &quot;RIGHT&quot;, location: &quot;right&quot;},\n    {word: &quot;LEFT&quot;, location: &quot;center&quot;},\n    {word: &quot;RIGHT&quot;, location: &quot;center&quot;}\n  ],\n  randomize_order: true\n}\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n  welcome,\n  simon\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-2');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-2" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});


// 2. Define our trials
const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `Welcome to the Experiment! Press &quot;Z&quot; if the word says &quot;LEFT&quot; or &quot;M&quot; if the word says &quot;RIGHT&quot;. Press any key to begin.`,
  choices: &quot;ALL_KEYS&quot;, 
  post_trial_gap: 250
}

let simon = {
  type: jsPsychHtmlKeyboardResponse,
  timeline: [
    {
      stimulus: `<p style=&quot;font-size: 48pt&quot;>+</p>`,
      choices: &quot;NO_KEYS&quot;,
      trial_duration: 750,
      post_trial_gap: 250
    },
    {
      stimulus: function() {
        // Get the timeline variables for this trial
        let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);
        let location = jsPsych.evaluateTimelineVariable(&quot;location&quot;);
        
        // set an empty variable for our output
        let output 
        
        if (location === &quot;left&quot;) {
        
            output = `
              <div style=&quot;display: flex; width: 600px; height: 200px; align-items: center;&quot;>
                  <div style=&quot;flex: 1; text-align: center; font-size: 36px;&quot;>${word}</div>
                  <div style=&quot;flex: 1;&quot;></div>
                  <div style=&quot;flex: 1;&quot;></div>
              </div>
          `;
        } else if (location === &quot;right&quot;) {
        
            output = `
                <div style=&quot;display: flex; width: 600px; height: 200px; align-items: center;&quot;>
                    <div style=&quot;flex: 1;&quot;></div>
                    <div style=&quot;flex: 1;&quot;></div>
                    <div style=&quot;flex: 1; text-align: center; font-size: 36px;&quot;>${word}</div>
                </div>
            `;
        } else if (location === &quot;center&quot;) {
        
            output = `
                <div style=&quot;display: flex; width: 600px; height: 200px; align-items: center;&quot;>
                    <div style=&quot;flex: 1;&quot;></div>
                    <div style=&quot;flex: 1; text-align: center; font-size: 36px;&quot;>${word}</div>
                    <div style=&quot;flex: 1;&quot;></div>
                </div>
            `;
        }

        // we&quot;ll return what is in output
        return output
      },
      choices: [&quot;z&quot;,&quot;m&quot;],
      post_trial_gap: 250
    }
  ],
  timeline_variables: [
    {word: &quot;LEFT&quot;, location: &quot;left&quot;},
    {word: &quot;RIGHT&quot;, location: &quot;left&quot;},
    {word: &quot;LEFT&quot;, location: &quot;right&quot;},
    {word: &quot;RIGHT&quot;, location: &quot;right&quot;},
    {word: &quot;LEFT&quot;, location: &quot;center&quot;},
    {word: &quot;RIGHT&quot;, location: &quot;center&quot;}
  ],
  randomize_order: true
}

// 3. Run jsPsych with our trials
jsPsych.run([
  welcome,
  simon
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-2&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-2&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>I want to point out that creating these displays with HTML and CSS takes some trial-and-error. It’s unlikely that you’ll write it exactly correct the first time. Often I will add styling with only a rough idea about how it will look, then fine tune it until I’m happy with it.</p>
<p>One strategy for speeding up the trial-and-error is opening the experiment, going to a trial, then inspecting it in the browser. From there, you can click on an element and see the CSS being applied to that element. You can also modify it right in the browser! That means, I could click on one of the divs and add properties like <code>border: solid</code>. This will update how it looks right now in the browser, but won’t change anything permanently in your experiment. You can try different CSS styling until you’re happy with what you see, then go update your experiment code with the styling you want.</p>
<p>In fact, that’s what I did while coding this demo. I went through some trial-and-error changing how wide the display was, how tall, adding (then removing) a border around the boxes, etc. This is part of the process.</p>
<p>How about one more example?</p>
<p>For this one, I’ll use the grid method for creating the display to create different spatial locations for arrows to be placed. I had to do some creative problem-solving for this one because adding <code>post_tria_gap: 250</code> causes the squares to disappear, when I’d like them to be present the whole time. So I had to make my own “blank” screens with just the grid and nothing placed in them to create a similar effect.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb21-1"><a href="#cb21-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Simon Task<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>    </span>
<span id="cb21-9"><a href="#cb21-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb21-11"><a href="#cb21-11"></a></span>
<span id="cb21-12"><a href="#cb21-12"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb21-13"><a href="#cb21-13"></a>     <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb21-14"><a href="#cb21-14"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb21-16"><a href="#cb21-16"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb21-17"><a href="#cb21-17"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb21-18"><a href="#cb21-18"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb21-19"><a href="#cb21-19"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb21-20"><a href="#cb21-20"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1"></a> <span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb22-3"><a href="#cb22-3"></a></span>
<span id="cb22-4"><a href="#cb22-4"></a> </span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb22-7"><a href="#cb22-7"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-8"><a href="#cb22-8"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Welcome to the Arrow Experiment!&lt;/p&gt;</span></span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="vs">              &lt;p&gt;Press the key that matches the arrow's location: Q (top-left), E (top-right), Z (bottom-left), or C (bottom-right).&lt;/p&gt;</span></span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="vs">              &lt;p&gt;Press any key to begin.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb22-11"><a href="#cb22-11"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb22-12"><a href="#cb22-12"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb22-13"><a href="#cb22-13"></a>}</span>
<span id="cb22-14"><a href="#cb22-14"></a></span>
<span id="cb22-15"><a href="#cb22-15"></a><span class="kw">let</span> simon <span class="op">=</span> {</span>
<span id="cb22-16"><a href="#cb22-16"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-17"><a href="#cb22-17"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb22-18"><a href="#cb22-18"></a>    <span class="co">// this display is the fixation</span></span>
<span id="cb22-19"><a href="#cb22-19"></a>    {</span>
<span id="cb22-20"><a href="#cb22-20"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">` &lt;div style="display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;"&gt;</span></span>
<span id="cb22-21"><a href="#cb22-21"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-22"><a href="#cb22-22"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-23"><a href="#cb22-23"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-24"><a href="#cb22-24"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-25"><a href="#cb22-25"></a><span class="vs">                  &lt;div style="display: flex; align-items: center; justify-content: center; font-size: 48px;"&gt;+&lt;/div&gt;</span></span>
<span id="cb22-26"><a href="#cb22-26"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-27"><a href="#cb22-27"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-28"><a href="#cb22-28"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-29"><a href="#cb22-29"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-30"><a href="#cb22-30"></a><span class="vs">              &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb22-31"><a href="#cb22-31"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb22-32"><a href="#cb22-32"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">750</span></span>
<span id="cb22-33"><a href="#cb22-33"></a>    }<span class="op">,</span></span>
<span id="cb22-34"><a href="#cb22-34"></a></span>
<span id="cb22-35"><a href="#cb22-35"></a>    <span class="co">// this display is blank 250 ms</span></span>
<span id="cb22-36"><a href="#cb22-36"></a>   {</span>
<span id="cb22-37"><a href="#cb22-37"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">` &lt;div style="display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;"&gt;</span></span>
<span id="cb22-38"><a href="#cb22-38"></a><span class="vs">                    &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-39"><a href="#cb22-39"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-40"><a href="#cb22-40"></a><span class="vs">                    &lt;div style="display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-41"><a href="#cb22-41"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-42"><a href="#cb22-42"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-43"><a href="#cb22-43"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-44"><a href="#cb22-44"></a><span class="vs">                    &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-45"><a href="#cb22-45"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-46"><a href="#cb22-46"></a><span class="vs">                    &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-47"><a href="#cb22-47"></a><span class="vs">                &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb22-48"><a href="#cb22-48"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb22-49"><a href="#cb22-49"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb22-50"><a href="#cb22-50"></a>      }<span class="op">,</span></span>
<span id="cb22-51"><a href="#cb22-51"></a></span>
<span id="cb22-52"><a href="#cb22-52"></a>     <span class="co">// target display until response</span></span>
<span id="cb22-53"><a href="#cb22-53"></a>    {</span>
<span id="cb22-54"><a href="#cb22-54"></a>      <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb22-55"><a href="#cb22-55"></a>        <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb22-56"><a href="#cb22-56"></a>        <span class="kw">let</span> arrow <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"arrow"</span>)<span class="op">;</span></span>
<span id="cb22-57"><a href="#cb22-57"></a>        <span class="kw">let</span> location <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"location"</span>)<span class="op">;</span></span>
<span id="cb22-58"><a href="#cb22-58"></a>        </span>
<span id="cb22-59"><a href="#cb22-59"></a>        <span class="co">// set an empty variable for our output</span></span>
<span id="cb22-60"><a href="#cb22-60"></a>        <span class="kw">let</span> output </span>
<span id="cb22-61"><a href="#cb22-61"></a>        </span>
<span id="cb22-62"><a href="#cb22-62"></a>        <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"top-left"</span>) {</span>
<span id="cb22-63"><a href="#cb22-63"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb22-64"><a href="#cb22-64"></a><span class="vs">              &lt;div style="display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;"&gt;</span></span>
<span id="cb22-65"><a href="#cb22-65"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-66"><a href="#cb22-66"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-67"><a href="#cb22-67"></a><span class="vs">                  &lt;div style="display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;"&gt;</span><span class="sc">${</span>arrow<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb22-68"><a href="#cb22-68"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-69"><a href="#cb22-69"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-70"><a href="#cb22-70"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-71"><a href="#cb22-71"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-72"><a href="#cb22-72"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-73"><a href="#cb22-73"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-74"><a href="#cb22-74"></a><span class="vs">              &lt;/div&gt;</span></span>
<span id="cb22-75"><a href="#cb22-75"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb22-76"><a href="#cb22-76"></a>        } <span class="cf">else</span> <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"top-right"</span>) {</span>
<span id="cb22-77"><a href="#cb22-77"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb22-78"><a href="#cb22-78"></a><span class="vs">              &lt;div style="display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;"&gt;</span></span>
<span id="cb22-79"><a href="#cb22-79"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-80"><a href="#cb22-80"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-81"><a href="#cb22-81"></a><span class="vs">                  &lt;div style="display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;"&gt;</span><span class="sc">${</span>arrow<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb22-82"><a href="#cb22-82"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-83"><a href="#cb22-83"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-84"><a href="#cb22-84"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-85"><a href="#cb22-85"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-86"><a href="#cb22-86"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-87"><a href="#cb22-87"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-88"><a href="#cb22-88"></a><span class="vs">              &lt;/div&gt;</span></span>
<span id="cb22-89"><a href="#cb22-89"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb22-90"><a href="#cb22-90"></a>        } <span class="cf">else</span> <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"bottom-left"</span>) {</span>
<span id="cb22-91"><a href="#cb22-91"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb22-92"><a href="#cb22-92"></a><span class="vs">              &lt;div style="display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;"&gt;</span></span>
<span id="cb22-93"><a href="#cb22-93"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-94"><a href="#cb22-94"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-95"><a href="#cb22-95"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-96"><a href="#cb22-96"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-97"><a href="#cb22-97"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-98"><a href="#cb22-98"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-99"><a href="#cb22-99"></a><span class="vs">                  &lt;div style="display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;"&gt;</span><span class="sc">${</span>arrow<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb22-100"><a href="#cb22-100"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-101"><a href="#cb22-101"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-102"><a href="#cb22-102"></a><span class="vs">              &lt;/div&gt;</span></span>
<span id="cb22-103"><a href="#cb22-103"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb22-104"><a href="#cb22-104"></a>        } <span class="cf">else</span> <span class="cf">if</span> (location <span class="op">===</span> <span class="st">"bottom-right"</span>) {</span>
<span id="cb22-105"><a href="#cb22-105"></a>            output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb22-106"><a href="#cb22-106"></a><span class="vs">              &lt;div style="display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;"&gt;</span></span>
<span id="cb22-107"><a href="#cb22-107"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-108"><a href="#cb22-108"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-109"><a href="#cb22-109"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-110"><a href="#cb22-110"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-111"><a href="#cb22-111"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-112"><a href="#cb22-112"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-113"><a href="#cb22-113"></a><span class="vs">                  &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-114"><a href="#cb22-114"></a><span class="vs">                  &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-115"><a href="#cb22-115"></a><span class="vs">                  &lt;div style="display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;"&gt;</span><span class="sc">${</span>arrow<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb22-116"><a href="#cb22-116"></a><span class="vs">              &lt;/div&gt;</span></span>
<span id="cb22-117"><a href="#cb22-117"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb22-118"><a href="#cb22-118"></a>        }</span>
<span id="cb22-119"><a href="#cb22-119"></a></span>
<span id="cb22-120"><a href="#cb22-120"></a>        <span class="co">// we"ll return what is in output</span></span>
<span id="cb22-121"><a href="#cb22-121"></a>        <span class="cf">return</span> output</span>
<span id="cb22-122"><a href="#cb22-122"></a>      }<span class="op">,</span></span>
<span id="cb22-123"><a href="#cb22-123"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">"q"</span><span class="op">,</span><span class="st">"e"</span><span class="op">,</span> <span class="st">"z"</span><span class="op">,</span> <span class="st">"c"</span>]</span>
<span id="cb22-124"><a href="#cb22-124"></a>    }<span class="op">,</span></span>
<span id="cb22-125"><a href="#cb22-125"></a></span>
<span id="cb22-126"><a href="#cb22-126"></a>    <span class="co">// this display is blank 250 ms</span></span>
<span id="cb22-127"><a href="#cb22-127"></a>   {</span>
<span id="cb22-128"><a href="#cb22-128"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">` &lt;div style="display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;"&gt;</span></span>
<span id="cb22-129"><a href="#cb22-129"></a><span class="vs">                    &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-130"><a href="#cb22-130"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-131"><a href="#cb22-131"></a><span class="vs">                    &lt;div style="display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-132"><a href="#cb22-132"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-133"><a href="#cb22-133"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-134"><a href="#cb22-134"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-135"><a href="#cb22-135"></a><span class="vs">                    &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-136"><a href="#cb22-136"></a><span class="vs">                    &lt;div&gt;&lt;/div&gt;</span></span>
<span id="cb22-137"><a href="#cb22-137"></a><span class="vs">                    &lt;div style="border: 2px solid black;"&gt;&lt;/div&gt;</span></span>
<span id="cb22-138"><a href="#cb22-138"></a><span class="vs">                &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb22-139"><a href="#cb22-139"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb22-140"><a href="#cb22-140"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb22-141"><a href="#cb22-141"></a>      }</span>
<span id="cb22-142"><a href="#cb22-142"></a>  ]<span class="op">,</span></span>
<span id="cb22-143"><a href="#cb22-143"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb22-144"><a href="#cb22-144"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↖"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"top-left"</span>}<span class="op">,</span></span>
<span id="cb22-145"><a href="#cb22-145"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↗"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"top-left"</span>}<span class="op">,</span></span>
<span id="cb22-146"><a href="#cb22-146"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↙"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"top-left"</span>}<span class="op">,</span></span>
<span id="cb22-147"><a href="#cb22-147"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↘"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"top-left"</span>}<span class="op">,</span></span>
<span id="cb22-148"><a href="#cb22-148"></a></span>
<span id="cb22-149"><a href="#cb22-149"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↖"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"top-right"</span>}<span class="op">,</span></span>
<span id="cb22-150"><a href="#cb22-150"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↗"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"top-right"</span>}<span class="op">,</span></span>
<span id="cb22-151"><a href="#cb22-151"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↙"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"top-right"</span>}<span class="op">,</span></span>
<span id="cb22-152"><a href="#cb22-152"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↘"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"top-right"</span>}<span class="op">,</span></span>
<span id="cb22-153"><a href="#cb22-153"></a></span>
<span id="cb22-154"><a href="#cb22-154"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↖"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"bottom-left"</span>}<span class="op">,</span></span>
<span id="cb22-155"><a href="#cb22-155"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↗"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"bottom-left"</span>}<span class="op">,</span></span>
<span id="cb22-156"><a href="#cb22-156"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↙"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"bottom-left"</span>}<span class="op">,</span></span>
<span id="cb22-157"><a href="#cb22-157"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↘"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"bottom-left"</span>}<span class="op">,</span></span>
<span id="cb22-158"><a href="#cb22-158"></a></span>
<span id="cb22-159"><a href="#cb22-159"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↖"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"bottom-right"</span>}<span class="op">,</span></span>
<span id="cb22-160"><a href="#cb22-160"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↗"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"bottom-right"</span>}<span class="op">,</span></span>
<span id="cb22-161"><a href="#cb22-161"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↙"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"bottom-right"</span>}<span class="op">,</span></span>
<span id="cb22-162"><a href="#cb22-162"></a>    {<span class="dt">arrow</span><span class="op">:</span> <span class="st">"↘"</span><span class="op">,</span> <span class="dt">location</span><span class="op">:</span> <span class="st">"bottom-right"</span>}</span>
<span id="cb22-163"><a href="#cb22-163"></a>  ]<span class="op">,</span></span>
<span id="cb22-164"><a href="#cb22-164"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb22-165"><a href="#cb22-165"></a>}</span>
<span id="cb22-166"><a href="#cb22-166"></a></span>
<span id="cb22-167"><a href="#cb22-167"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb22-168"><a href="#cb22-168"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb22-169"><a href="#cb22-169"></a>  welcome<span class="op">,</span></span>
<span id="cb22-170"><a href="#cb22-170"></a>  simon</span>
<span id="cb22-171"><a href="#cb22-171"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb23-1"><a href="#cb23-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div id="demo-container-3" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-3" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n// 2. Define our trials\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `<p>Welcome to the Arrow Experiment!</p>\n              <p>Press the key that matches the arrow\'s location: Q (top-left), E (top-right), Z (bottom-left), or C (bottom-right).</p>\n              <p>Press any key to begin.</p>`,\n  choices: &quot;ALL_KEYS&quot;, \n  post_trial_gap: 250\n}\n\nlet simon = {\n  type: jsPsychHtmlKeyboardResponse,\n  timeline: [\n    // this display is the fixation\n    {\n      stimulus: ` <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px;&quot;>+</div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n              </div>`,\n      choices: &quot;NO_KEYS&quot;,\n      trial_duration: 750\n    },\n\n    // this display is blank 250 ms\n   {\n        stimulus: ` <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>\n                    <div style=&quot;border: 2px solid black;&quot;></div>\n                    <div></div>\n                    <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div style=&quot;border: 2px solid black;&quot;></div>\n                    <div></div>\n                    <div style=&quot;border: 2px solid black;&quot;></div>\n                </div>`,\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 250\n      },\n\n     // target display until response\n    {\n      stimulus: function() {\n        // Get the timeline variables for this trial\n        let arrow = jsPsych.evaluateTimelineVariable(&quot;arrow&quot;);\n        let location = jsPsych.evaluateTimelineVariable(&quot;location&quot;);\n        \n        // set an empty variable for our output\n        let output \n        \n        if (location === &quot;top-left&quot;) {\n            output = `\n              <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;>${arrow}</div>\n                  <div></div>\n                  <div></div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n              </div>\n            `;\n        } else if (location === &quot;top-right&quot;) {\n            output = `\n              <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;>${arrow}</div>\n                  <div></div>\n                  <div></div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n              </div>\n            `;\n        } else if (location === &quot;bottom-left&quot;) {\n            output = `\n              <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div></div>\n                  <div></div>\n                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;>${arrow}</div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n              </div>\n            `;\n        } else if (location === &quot;bottom-right&quot;) {\n            output = `\n              <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div></div>\n                  <div></div>\n                  <div style=&quot;border: 2px solid black;&quot;></div>\n                  <div></div>\n                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;>${arrow}</div>\n              </div>\n            `;\n        }\n\n\n        // we&quot;ll return what is in output\n        return output\n      },\n      choices: [&quot;q&quot;,&quot;e&quot;, &quot;z&quot;, &quot;c&quot;]\n    },\n\n    // this display is blank 250 ms\n   {\n        stimulus: ` <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>\n                    <div style=&quot;border: 2px solid black;&quot;></div>\n                    <div></div>\n                    <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div style=&quot;border: 2px solid black;&quot;></div>\n                    <div></div>\n                    <div style=&quot;border: 2px solid black;&quot;></div>\n                </div>`,\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 250\n      }\n  ],\n  timeline_variables: [\n    {arrow: &quot;↖&quot;, location: &quot;top-left&quot;},\n    {arrow: &quot;↗&quot;, location: &quot;top-left&quot;},\n    {arrow: &quot;↙&quot;, location: &quot;top-left&quot;},\n    {arrow: &quot;↘&quot;, location: &quot;top-left&quot;},\n\n    {arrow: &quot;↖&quot;, location: &quot;top-right&quot;},\n    {arrow: &quot;↗&quot;, location: &quot;top-right&quot;},\n    {arrow: &quot;↙&quot;, location: &quot;top-right&quot;},\n    {arrow: &quot;↘&quot;, location: &quot;top-right&quot;},\n\n    {arrow: &quot;↖&quot;, location: &quot;bottom-left&quot;},\n    {arrow: &quot;↗&quot;, location: &quot;bottom-left&quot;},\n    {arrow: &quot;↙&quot;, location: &quot;bottom-left&quot;},\n    {arrow: &quot;↘&quot;, location: &quot;bottom-left&quot;},\n\n    {arrow: &quot;↖&quot;, location: &quot;bottom-right&quot;},\n    {arrow: &quot;↗&quot;, location: &quot;bottom-right&quot;},\n    {arrow: &quot;↙&quot;, location: &quot;bottom-right&quot;},\n    {arrow: &quot;↘&quot;, location: &quot;bottom-right&quot;}\n  ],\n  randomize_order: true\n}\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n  welcome,\n  simon\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-3');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-3" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});


// 2. Define our trials
const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `<p>Welcome to the Arrow Experiment!</p>
              <p>Press the key that matches the arrow's location: Q (top-left), E (top-right), Z (bottom-left), or C (bottom-right).</p>
              <p>Press any key to begin.</p>`,
  choices: &quot;ALL_KEYS&quot;, 
  post_trial_gap: 250
}

let simon = {
  type: jsPsychHtmlKeyboardResponse,
  timeline: [
    // this display is the fixation
    {
      stimulus: ` <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px;&quot;>+</div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
              </div>`,
      choices: &quot;NO_KEYS&quot;,
      trial_duration: 750
    },

    // this display is blank 250 ms
   {
        stimulus: ` <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>
                    <div style=&quot;border: 2px solid black;&quot;></div>
                    <div></div>
                    <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div style=&quot;border: 2px solid black;&quot;></div>
                    <div></div>
                    <div style=&quot;border: 2px solid black;&quot;></div>
                </div>`,
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 250
      },

     // target display until response
    {
      stimulus: function() {
        // Get the timeline variables for this trial
        let arrow = jsPsych.evaluateTimelineVariable(&quot;arrow&quot;);
        let location = jsPsych.evaluateTimelineVariable(&quot;location&quot;);
        
        // set an empty variable for our output
        let output 
        
        if (location === &quot;top-left&quot;) {
            output = `
              <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;>${arrow}</div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
              </div>
            `;
        } else if (location === &quot;top-right&quot;) {
            output = `
              <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;>${arrow}</div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
              </div>
            `;
        } else if (location === &quot;bottom-left&quot;) {
            output = `
              <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;>${arrow}</div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
              </div>
            `;
        } else if (location === &quot;bottom-right&quot;) {
            output = `
              <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div style=&quot;border: 2px solid black;&quot;></div>
                  <div></div>
                  <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;>${arrow}</div>
              </div>
            `;
        }


        // we&quot;ll return what is in output
        return output
      },
      choices: [&quot;q&quot;,&quot;e&quot;, &quot;z&quot;, &quot;c&quot;]
    },

    // this display is blank 250 ms
   {
        stimulus: ` <div style=&quot;display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; width: 300px; height: 300px; gap: 10px;&quot;>
                    <div style=&quot;border: 2px solid black;&quot;></div>
                    <div></div>
                    <div style=&quot;display: flex; align-items: center; justify-content: center; font-size: 48px; border: 2px solid black;&quot;></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div style=&quot;border: 2px solid black;&quot;></div>
                    <div></div>
                    <div style=&quot;border: 2px solid black;&quot;></div>
                </div>`,
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 250
      }
  ],
  timeline_variables: [
    {arrow: &quot;↖&quot;, location: &quot;top-left&quot;},
    {arrow: &quot;↗&quot;, location: &quot;top-left&quot;},
    {arrow: &quot;↙&quot;, location: &quot;top-left&quot;},
    {arrow: &quot;↘&quot;, location: &quot;top-left&quot;},

    {arrow: &quot;↖&quot;, location: &quot;top-right&quot;},
    {arrow: &quot;↗&quot;, location: &quot;top-right&quot;},
    {arrow: &quot;↙&quot;, location: &quot;top-right&quot;},
    {arrow: &quot;↘&quot;, location: &quot;top-right&quot;},

    {arrow: &quot;↖&quot;, location: &quot;bottom-left&quot;},
    {arrow: &quot;↗&quot;, location: &quot;bottom-left&quot;},
    {arrow: &quot;↙&quot;, location: &quot;bottom-left&quot;},
    {arrow: &quot;↘&quot;, location: &quot;bottom-left&quot;},

    {arrow: &quot;↖&quot;, location: &quot;bottom-right&quot;},
    {arrow: &quot;↗&quot;, location: &quot;bottom-right&quot;},
    {arrow: &quot;↙&quot;, location: &quot;bottom-right&quot;},
    {arrow: &quot;↘&quot;, location: &quot;bottom-right&quot;}
  ],
  randomize_order: true
}

// 3. Run jsPsych with our trials
jsPsych.run([
  welcome,
  simon
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-3&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-3&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="adding-logic-presenting-feedback" class="level3" data-number="17.5.4">
<h3 data-number="17.5.4" class="anchored" data-anchor-id="adding-logic-presenting-feedback"><span class="header-section-number">17.5.4</span> Adding Logic: Presenting Feedback</h3>
<p>Returning to the idea that functions make our stimulus dynamic: this means we can change things on-the-fly based on what happened in previous trials.</p>
<p>This flexibility is useful in many ways, but the most common use case is adaptive feedback where we tell participants how they performed on the previous trial.</p>
<p>We already covered how to access data from previous trials in the last chapter. Now we’ll combine that knowledge with dynamic stimulus functions to create different kinds of performance feedback like accuracy messages and response time alerts.</p>
<section id="simple-accuracy" class="level4" data-number="17.5.4.1">
<h4 data-number="17.5.4.1" class="anchored" data-anchor-id="simple-accuracy"><span class="header-section-number">17.5.4.1</span> Simple Accuracy</h4>
<p>Let’s start with the simplest kind of accuracy feedback, which simply tells participants whether they were correct or incorrect.</p>
<p>I’ll do this in a couple of steps to make it clear what is happening. First, to make it easy to find, we’ll first store the accuracy in our data using the <code>on_finish</code> parameter (we learned about this in the previous chapter).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb24-2"><a href="#cb24-2"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb24-4"><a href="#cb24-4"></a>        {</span>
<span id="cb24-5"><a href="#cb24-5"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb24-6"><a href="#cb24-6"></a>                <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb24-7"><a href="#cb24-7"></a>                <span class="co">// For convenience, we'll store them inside variables called 'word' and 'color'</span></span>
<span id="cb24-8"><a href="#cb24-8"></a>                <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'word'</span>)<span class="op">;</span></span>
<span id="cb24-9"><a href="#cb24-9"></a>                <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">'color'</span>)<span class="op">;</span></span>
<span id="cb24-10"><a href="#cb24-10"></a></span>
<span id="cb24-11"><a href="#cb24-11"></a>                <span class="co">// Build the HTML using these variables</span></span>
<span id="cb24-12"><a href="#cb24-12"></a>                <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`&lt;p style='color: </span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 48px;'&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb24-13"><a href="#cb24-13"></a>                </span>
<span id="cb24-14"><a href="#cb24-14"></a>                <span class="co">// Important: We must return the output variable</span></span>
<span id="cb24-15"><a href="#cb24-15"></a>                <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb24-16"><a href="#cb24-16"></a>            }<span class="op">,</span></span>
<span id="cb24-17"><a href="#cb24-17"></a>            <span class="dt">choices</span><span class="op">:</span> [<span class="st">"r"</span><span class="op">,</span> <span class="st">"b"</span>]<span class="op">,</span></span>
<span id="cb24-18"><a href="#cb24-18"></a>            <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb24-19"><a href="#cb24-19"></a>                <span class="co">// First, determine accuracy for this trial</span></span>
<span id="cb24-20"><a href="#cb24-20"></a>                data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)<span class="op">;</span></span>
<span id="cb24-21"><a href="#cb24-21"></a>            }</span>
<span id="cb24-22"><a href="#cb24-22"></a>        }</span>
<span id="cb24-23"><a href="#cb24-23"></a>    ]<span class="op">,</span></span>
<span id="cb24-24"><a href="#cb24-24"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb24-25"><a href="#cb24-25"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb24-26"><a href="#cb24-26"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb24-27"><a href="#cb24-27"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'RED'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb24-28"><a href="#cb24-28"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">'BLUE'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb24-29"><a href="#cb24-29"></a>    ]</span>
<span id="cb24-30"><a href="#cb24-30"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now at the end of each trial there will be a data parameter called <code>correct</code> with a value of <code>true</code> or <code>false</code>.</p>
<p>To add feedback, we add another trial component like we always do. BUT now we have to check what the accuracy was on the previous trial. Remember: jsPsych treats every event that happens as a ‘trial’ and stores a row of data for it. That means on the feedback trial, we need to look back one trial to see the accuracy and change the feedback depending on accuracy.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb25-2"><a href="#cb25-2"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb25-4"><a href="#cb25-4"></a>        {</span>
<span id="cb25-5"><a href="#cb25-5"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb25-6"><a href="#cb25-6"></a>                <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>                <span class="co">// For convenience, we will store them inside variables called "word" and "color"</span></span>
<span id="cb25-8"><a href="#cb25-8"></a>                <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"word"</span>)<span class="op">;</span></span>
<span id="cb25-9"><a href="#cb25-9"></a>                <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"color"</span>)<span class="op">;</span></span>
<span id="cb25-10"><a href="#cb25-10"></a></span>
<span id="cb25-11"><a href="#cb25-11"></a>                <span class="co">// Build the HTML using these variables</span></span>
<span id="cb25-12"><a href="#cb25-12"></a>                <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`&lt;p style="color: </span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 48px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb25-13"><a href="#cb25-13"></a>                </span>
<span id="cb25-14"><a href="#cb25-14"></a>                <span class="co">// Important: We must return the output variable</span></span>
<span id="cb25-15"><a href="#cb25-15"></a>                <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb25-16"><a href="#cb25-16"></a>            }<span class="op">,</span></span>
<span id="cb25-17"><a href="#cb25-17"></a>            <span class="dt">choices</span><span class="op">:</span> [<span class="st">"r"</span><span class="op">,</span> <span class="st">"b"</span>]<span class="op">,</span></span>
<span id="cb25-18"><a href="#cb25-18"></a>            <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb25-19"><a href="#cb25-19"></a>                <span class="co">// First, determine accuracy for this trial</span></span>
<span id="cb25-20"><a href="#cb25-20"></a>                data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)<span class="op">;</span></span>
<span id="cb25-21"><a href="#cb25-21"></a>            }</span>
<span id="cb25-22"><a href="#cb25-22"></a>        }<span class="op">,</span></span>
<span id="cb25-23"><a href="#cb25-23"></a>        <span class="co">// This is our feedback trial</span></span>
<span id="cb25-24"><a href="#cb25-24"></a>        {</span>
<span id="cb25-25"><a href="#cb25-25"></a>          <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb25-26"><a href="#cb25-26"></a>              <span class="kw">let</span> output</span>
<span id="cb25-27"><a href="#cb25-27"></a>          </span>
<span id="cb25-28"><a href="#cb25-28"></a>              <span class="co">// get all previous data</span></span>
<span id="cb25-29"><a href="#cb25-29"></a>              <span class="kw">let</span> all_data <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">;</span></span>
<span id="cb25-30"><a href="#cb25-30"></a>              </span>
<span id="cb25-31"><a href="#cb25-31"></a>              <span class="co">// filter it to get the last trial</span></span>
<span id="cb25-32"><a href="#cb25-32"></a>              <span class="kw">let</span> last_trial <span class="op">=</span> all_data<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="at">trials</span></span>
<span id="cb25-33"><a href="#cb25-33"></a></span>
<span id="cb25-34"><a href="#cb25-34"></a>              <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(last_trial)</span>
<span id="cb25-35"><a href="#cb25-35"></a>              </span>
<span id="cb25-36"><a href="#cb25-36"></a>              <span class="co">// look at the `correct` parameter to get accuracy</span></span>
<span id="cb25-37"><a href="#cb25-37"></a>              <span class="co">// note: filtering ALWAYS returns an array, even if it just has one thing in it</span></span>
<span id="cb25-38"><a href="#cb25-38"></a>              <span class="kw">let</span> accuracy <span class="op">=</span> last_trial[<span class="dv">0</span>]<span class="op">.</span><span class="at">correct</span></span>
<span id="cb25-39"><a href="#cb25-39"></a>              </span>
<span id="cb25-40"><a href="#cb25-40"></a>              <span class="co">// check accuracy</span></span>
<span id="cb25-41"><a href="#cb25-41"></a>              <span class="cf">if</span>(accuracy <span class="op">===</span> <span class="kw">true</span>){</span>
<span id="cb25-42"><a href="#cb25-42"></a>                  output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:36px; color:MediumSeaGreen"&gt;CORRECT!&lt;/p&gt;`</span></span>
<span id="cb25-43"><a href="#cb25-43"></a>              } <span class="cf">else</span> {</span>
<span id="cb25-44"><a href="#cb25-44"></a>                  output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:36px; color:Tomato"&gt;INCORRECT!&lt;/p&gt;`</span></span>
<span id="cb25-45"><a href="#cb25-45"></a>              }</span>
<span id="cb25-46"><a href="#cb25-46"></a>              </span>
<span id="cb25-47"><a href="#cb25-47"></a>              <span class="cf">return</span> output</span>
<span id="cb25-48"><a href="#cb25-48"></a>          }<span class="op">,</span></span>
<span id="cb25-49"><a href="#cb25-49"></a>          <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb25-50"><a href="#cb25-50"></a>          <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb25-51"><a href="#cb25-51"></a>        }</span>
<span id="cb25-52"><a href="#cb25-52"></a>    ]<span class="op">,</span></span>
<span id="cb25-53"><a href="#cb25-53"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb25-54"><a href="#cb25-54"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb25-55"><a href="#cb25-55"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb25-56"><a href="#cb25-56"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb25-57"><a href="#cb25-57"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}</span>
<span id="cb25-58"><a href="#cb25-58"></a>    ]<span class="op">,</span></span>
<span id="cb25-59"><a href="#cb25-59"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-60"><a href="#cb25-60"></a>      <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb25-61"><a href="#cb25-61"></a>      <span class="dt">color</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"color"</span>)<span class="op">,</span></span>
<span id="cb25-62"><a href="#cb25-62"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb25-63"><a href="#cb25-63"></a>    }<span class="op">,</span></span>
<span id="cb25-64"><a href="#cb25-64"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb25-65"><a href="#cb25-65"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Some important little ‘catches’ here that may throw you off. When we filter the data to only get the last trial, it returns an array of trials. In this case, the array only has one thing in it, the last trial, but we still have use the array reference to get the data inside it. That’s why I’ve used <code>last_trial[0]</code> to access the first thing in the array.</p>
<p>The nice thing is that this generalizes. So, if I had called <code>let last_trials = all_data.last(2)</code>, that would get me the last two trials. In which case, I could access the data from two trials ago with <code>last_trials[0]</code> or the last trial with <code>last_trials[1]</code>.</p>
<p>Now, let’s see this example in action:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb26-1"><a href="#cb26-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Simon Task<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb26-6"><a href="#cb26-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb26-7"><a href="#cb26-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb26-8"><a href="#cb26-8"></a>    </span>
<span id="cb26-9"><a href="#cb26-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb26-10"><a href="#cb26-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb26-11"><a href="#cb26-11"></a></span>
<span id="cb26-12"><a href="#cb26-12"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb26-13"><a href="#cb26-13"></a>     <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb26-14"><a href="#cb26-14"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb26-15"><a href="#cb26-15"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb26-16"><a href="#cb26-16"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb26-17"><a href="#cb26-17"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb26-18"><a href="#cb26-18"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb26-19"><a href="#cb26-19"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb26-20"><a href="#cb26-20"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb27-1"><a href="#cb27-1"></a> <span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3"></a></span>
<span id="cb27-4"><a href="#cb27-4"></a> </span>
<span id="cb27-5"><a href="#cb27-5"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb27-7"><a href="#cb27-7"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb27-8"><a href="#cb27-8"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb27-9"><a href="#cb27-9"></a><span class="vs">              &lt;p&gt;Press any key to begin.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb27-10"><a href="#cb27-10"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb27-11"><a href="#cb27-11"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb27-12"><a href="#cb27-12"></a>}</span>
<span id="cb27-13"><a href="#cb27-13"></a></span>
<span id="cb27-14"><a href="#cb27-14"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb27-15"><a href="#cb27-15"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb27-16"><a href="#cb27-16"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb27-17"><a href="#cb27-17"></a>        {</span>
<span id="cb27-18"><a href="#cb27-18"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb27-19"><a href="#cb27-19"></a>                <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb27-20"><a href="#cb27-20"></a>                <span class="co">// For convenience, we will store them inside variables called "word" and "color"</span></span>
<span id="cb27-21"><a href="#cb27-21"></a>                <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"word"</span>)<span class="op">;</span></span>
<span id="cb27-22"><a href="#cb27-22"></a>                <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"color"</span>)<span class="op">;</span></span>
<span id="cb27-23"><a href="#cb27-23"></a></span>
<span id="cb27-24"><a href="#cb27-24"></a>                <span class="co">// Build the HTML using these variables</span></span>
<span id="cb27-25"><a href="#cb27-25"></a>                <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`&lt;p style="color: </span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 48px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb27-26"><a href="#cb27-26"></a>                </span>
<span id="cb27-27"><a href="#cb27-27"></a>                <span class="co">// Important: We must return the output variable</span></span>
<span id="cb27-28"><a href="#cb27-28"></a>                <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb27-29"><a href="#cb27-29"></a>            }<span class="op">,</span></span>
<span id="cb27-30"><a href="#cb27-30"></a>            <span class="dt">choices</span><span class="op">:</span> [<span class="st">"r"</span><span class="op">,</span> <span class="st">"b"</span>]<span class="op">,</span></span>
<span id="cb27-31"><a href="#cb27-31"></a>            <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb27-32"><a href="#cb27-32"></a>                <span class="co">// First, determine accuracy for this trial</span></span>
<span id="cb27-33"><a href="#cb27-33"></a>                data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)<span class="op">;</span></span>
<span id="cb27-34"><a href="#cb27-34"></a>            }</span>
<span id="cb27-35"><a href="#cb27-35"></a>        }<span class="op">,</span></span>
<span id="cb27-36"><a href="#cb27-36"></a>        <span class="co">// This is our feedback trial</span></span>
<span id="cb27-37"><a href="#cb27-37"></a>        {</span>
<span id="cb27-38"><a href="#cb27-38"></a>          <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb27-39"><a href="#cb27-39"></a>              <span class="kw">let</span> output</span>
<span id="cb27-40"><a href="#cb27-40"></a>          </span>
<span id="cb27-41"><a href="#cb27-41"></a>              <span class="co">// get all previous data</span></span>
<span id="cb27-42"><a href="#cb27-42"></a>              <span class="kw">let</span> all_data <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">;</span></span>
<span id="cb27-43"><a href="#cb27-43"></a>              </span>
<span id="cb27-44"><a href="#cb27-44"></a>              <span class="co">// filter it to get the last trial</span></span>
<span id="cb27-45"><a href="#cb27-45"></a>              <span class="kw">let</span> last_trial <span class="op">=</span> all_data<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="at">trials</span></span>
<span id="cb27-46"><a href="#cb27-46"></a></span>
<span id="cb27-47"><a href="#cb27-47"></a>              <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(last_trial)</span>
<span id="cb27-48"><a href="#cb27-48"></a>              </span>
<span id="cb27-49"><a href="#cb27-49"></a>              <span class="co">// look at the `correct` parameter to get accuracy</span></span>
<span id="cb27-50"><a href="#cb27-50"></a>              <span class="co">// note: filtering ALWAYS returns an array, even if it just has one thing in it</span></span>
<span id="cb27-51"><a href="#cb27-51"></a>              <span class="kw">let</span> accuracy <span class="op">=</span> last_trial[<span class="dv">0</span>]<span class="op">.</span><span class="at">correct</span></span>
<span id="cb27-52"><a href="#cb27-52"></a>              </span>
<span id="cb27-53"><a href="#cb27-53"></a>              <span class="co">// check accuracy</span></span>
<span id="cb27-54"><a href="#cb27-54"></a>              <span class="cf">if</span>(accuracy <span class="op">===</span> <span class="kw">true</span>){</span>
<span id="cb27-55"><a href="#cb27-55"></a>                  output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:36px; color:MediumSeaGreen"&gt;CORRECT!&lt;/p&gt;`</span></span>
<span id="cb27-56"><a href="#cb27-56"></a>              } <span class="cf">else</span> {</span>
<span id="cb27-57"><a href="#cb27-57"></a>                  output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:36px; color:Tomato"&gt;INCORRECT!&lt;/p&gt;`</span></span>
<span id="cb27-58"><a href="#cb27-58"></a>              }</span>
<span id="cb27-59"><a href="#cb27-59"></a>              </span>
<span id="cb27-60"><a href="#cb27-60"></a>              <span class="cf">return</span> output</span>
<span id="cb27-61"><a href="#cb27-61"></a>          }<span class="op">,</span></span>
<span id="cb27-62"><a href="#cb27-62"></a>          <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb27-63"><a href="#cb27-63"></a>          <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb27-64"><a href="#cb27-64"></a>        }</span>
<span id="cb27-65"><a href="#cb27-65"></a>    ]<span class="op">,</span></span>
<span id="cb27-66"><a href="#cb27-66"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb27-67"><a href="#cb27-67"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb27-68"><a href="#cb27-68"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb27-69"><a href="#cb27-69"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb27-70"><a href="#cb27-70"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb27-71"><a href="#cb27-71"></a>    ]<span class="op">,</span></span>
<span id="cb27-72"><a href="#cb27-72"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb27-73"><a href="#cb27-73"></a>      <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb27-74"><a href="#cb27-74"></a>      <span class="dt">color</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"color"</span>)<span class="op">,</span></span>
<span id="cb27-75"><a href="#cb27-75"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb27-76"><a href="#cb27-76"></a>    }<span class="op">,</span></span>
<span id="cb27-77"><a href="#cb27-77"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb27-78"><a href="#cb27-78"></a>}</span>
<span id="cb27-79"><a href="#cb27-79"></a></span>
<span id="cb27-80"><a href="#cb27-80"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb27-81"><a href="#cb27-81"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb27-82"><a href="#cb27-82"></a>  welcome<span class="op">,</span></span>
<span id="cb27-83"><a href="#cb27-83"></a>  stroop</span>
<span id="cb27-84"><a href="#cb27-84"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb28-1"><a href="#cb28-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<div id="demo-container-4" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-4" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n// 2. Define our trials\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `<p>Welcome to the Experiment!</p>\n              <p>Press any key to begin.</p>`,\n  choices: &quot;ALL_KEYS&quot;, \n  post_trial_gap: 250\n}\n\nlet stroop = {\n    type: jsPsychHtmlKeyboardResponse,\n    timeline: [\n        {\n            stimulus: function() {\n                // Get the timeline variables for this trial\n                // For convenience, we will store them inside variables called &quot;word&quot; and &quot;color&quot;\n                let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);\n                let color = jsPsych.evaluateTimelineVariable(&quot;color&quot;);\n\n                // Build the HTML using these variables\n                let output = `<p style=&quot;color: ${color}; font-size: 48px;&quot;>${word}</p>`;\n                \n                // Important: We must return the output variable\n                return output;\n            },\n            choices: [&quot;r&quot;, &quot;b&quot;],\n            on_finish: function(data) {\n                // First, determine accuracy for this trial\n                data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response);\n            }\n        },\n        // This is our feedback trial\n        {\n          stimulus: function() {\n              let output\n          \n              // get all previous data\n              let all_data = jsPsych.data.get();\n              \n              // filter it to get the last trial\n              let last_trial = all_data.last(1).trials\n\n              console.log(last_trial)\n              \n              // look at the `correct` parameter to get accuracy\n              // note: filtering ALWAYS returns an array, even if it just has one thing in it\n              let accuracy = last_trial[0].correct\n              \n              // check accuracy\n              if(accuracy === true){\n                  output = `<p style=&quot;font-size:36px; color:MediumSeaGreen&quot;>CORRECT!</p>`\n              } else {\n                  output = `<p style=&quot;font-size:36px; color:Tomato&quot;>INCORRECT!</p>`\n              }\n              \n              return output\n          },\n          choices: &quot;NO_KEYS&quot;,\n          trial_duration: 1000\n        }\n    ],\n    timeline_variables: [\n        {word: &quot;RED&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},\n        {word: &quot;BLUE&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},\n        {word: &quot;RED&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},\n        {word: &quot;BLUE&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},\n    ],\n    data: {\n      word: jsPsych.timelineVariable(&quot;word&quot;),\n      color: jsPsych.timelineVariable(&quot;color&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    },\n    randomize_order: true\n}\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n  welcome,\n  stroop\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-4');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-4" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});


// 2. Define our trials
const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `<p>Welcome to the Experiment!</p>
              <p>Press any key to begin.</p>`,
  choices: &quot;ALL_KEYS&quot;, 
  post_trial_gap: 250
}

let stroop = {
    type: jsPsychHtmlKeyboardResponse,
    timeline: [
        {
            stimulus: function() {
                // Get the timeline variables for this trial
                // For convenience, we will store them inside variables called &quot;word&quot; and &quot;color&quot;
                let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);
                let color = jsPsych.evaluateTimelineVariable(&quot;color&quot;);

                // Build the HTML using these variables
                let output = `<p style=&quot;color: ${color}; font-size: 48px;&quot;>${word}</p>`;
                
                // Important: We must return the output variable
                return output;
            },
            choices: [&quot;r&quot;, &quot;b&quot;],
            on_finish: function(data) {
                // First, determine accuracy for this trial
                data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response);
            }
        },
        // This is our feedback trial
        {
          stimulus: function() {
              let output
          
              // get all previous data
              let all_data = jsPsych.data.get();
              
              // filter it to get the last trial
              let last_trial = all_data.last(1).trials

              console.log(last_trial)
              
              // look at the `correct` parameter to get accuracy
              // note: filtering ALWAYS returns an array, even if it just has one thing in it
              let accuracy = last_trial[0].correct
              
              // check accuracy
              if(accuracy === true){
                  output = `<p style=&quot;font-size:36px; color:MediumSeaGreen&quot;>CORRECT!</p>`
              } else {
                  output = `<p style=&quot;font-size:36px; color:Tomato&quot;>INCORRECT!</p>`
              }
              
              return output
          },
          choices: &quot;NO_KEYS&quot;,
          trial_duration: 1000
        }
    ],
    timeline_variables: [
        {word: &quot;RED&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},
        {word: &quot;BLUE&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},
        {word: &quot;RED&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},
        {word: &quot;BLUE&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},
    ],
    data: {
      word: jsPsych.timelineVariable(&quot;word&quot;),
      color: jsPsych.timelineVariable(&quot;color&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    },
    randomize_order: true
}

// 3. Run jsPsych with our trials
jsPsych.run([
  welcome,
  stroop
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-4&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-4&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="corrective-feedback" class="level4" data-number="17.5.4.2">
<h4 data-number="17.5.4.2" class="anchored" data-anchor-id="corrective-feedback"><span class="header-section-number">17.5.4.2</span> Corrective Feedback</h4>
<p>We can access all parts of <code>data</code> and make our feedback as comprehensive as we’d like. For instance, if we were providing practice trials, we might want to provide corrective feedback to make sure participants understood the instructions:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb29-1"><a href="#cb29-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb29-4"><a href="#cb29-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Simon Task<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb29-7"><a href="#cb29-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>    </span>
<span id="cb29-9"><a href="#cb29-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb29-10"><a href="#cb29-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb29-11"><a href="#cb29-11"></a></span>
<span id="cb29-12"><a href="#cb29-12"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb29-13"><a href="#cb29-13"></a>     <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb29-14"><a href="#cb29-14"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb29-15"><a href="#cb29-15"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb29-16"><a href="#cb29-16"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb29-17"><a href="#cb29-17"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb29-18"><a href="#cb29-18"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb29-19"><a href="#cb29-19"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb29-20"><a href="#cb29-20"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb30-1"><a href="#cb30-1"></a> <span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb30-3"><a href="#cb30-3"></a></span>
<span id="cb30-4"><a href="#cb30-4"></a> </span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb30-6"><a href="#cb30-6"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb30-7"><a href="#cb30-7"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb30-8"><a href="#cb30-8"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb30-9"><a href="#cb30-9"></a><span class="vs">              &lt;p&gt;Press any key to begin.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb30-10"><a href="#cb30-10"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb30-11"><a href="#cb30-11"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb30-12"><a href="#cb30-12"></a>}</span>
<span id="cb30-13"><a href="#cb30-13"></a></span>
<span id="cb30-14"><a href="#cb30-14"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb30-15"><a href="#cb30-15"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb30-16"><a href="#cb30-16"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb30-17"><a href="#cb30-17"></a>        {</span>
<span id="cb30-18"><a href="#cb30-18"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb30-19"><a href="#cb30-19"></a>                <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb30-20"><a href="#cb30-20"></a>                <span class="co">// For convenience, we will store them inside variables called "word" and "color"</span></span>
<span id="cb30-21"><a href="#cb30-21"></a>                <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"word"</span>)<span class="op">;</span></span>
<span id="cb30-22"><a href="#cb30-22"></a>                <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"color"</span>)<span class="op">;</span></span>
<span id="cb30-23"><a href="#cb30-23"></a></span>
<span id="cb30-24"><a href="#cb30-24"></a>                <span class="co">// Build the HTML using these variables</span></span>
<span id="cb30-25"><a href="#cb30-25"></a>                <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`&lt;p style="color: </span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 48px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb30-26"><a href="#cb30-26"></a>                </span>
<span id="cb30-27"><a href="#cb30-27"></a>                <span class="co">// Important: We must return the output variable</span></span>
<span id="cb30-28"><a href="#cb30-28"></a>                <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb30-29"><a href="#cb30-29"></a>            }<span class="op">,</span></span>
<span id="cb30-30"><a href="#cb30-30"></a>            <span class="dt">choices</span><span class="op">:</span> [<span class="st">"r"</span><span class="op">,</span> <span class="st">"b"</span>]<span class="op">,</span></span>
<span id="cb30-31"><a href="#cb30-31"></a>            <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb30-32"><a href="#cb30-32"></a>                <span class="co">// First, determine accuracy for this trial</span></span>
<span id="cb30-33"><a href="#cb30-33"></a>                data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)<span class="op">;</span></span>
<span id="cb30-34"><a href="#cb30-34"></a>            }</span>
<span id="cb30-35"><a href="#cb30-35"></a>        }<span class="op">,</span></span>
<span id="cb30-36"><a href="#cb30-36"></a>        <span class="co">// This is our feedback trial</span></span>
<span id="cb30-37"><a href="#cb30-37"></a>        {</span>
<span id="cb30-38"><a href="#cb30-38"></a>          <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb30-39"><a href="#cb30-39"></a>              <span class="kw">let</span> output</span>
<span id="cb30-40"><a href="#cb30-40"></a>          </span>
<span id="cb30-41"><a href="#cb30-41"></a>              <span class="co">// get all previous data</span></span>
<span id="cb30-42"><a href="#cb30-42"></a>              <span class="kw">let</span> all_data <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">;</span></span>
<span id="cb30-43"><a href="#cb30-43"></a>              </span>
<span id="cb30-44"><a href="#cb30-44"></a>              <span class="co">// filter it to get the last trial</span></span>
<span id="cb30-45"><a href="#cb30-45"></a>              <span class="kw">let</span> last_trial <span class="op">=</span> all_data<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="at">trials</span></span>
<span id="cb30-46"><a href="#cb30-46"></a></span>
<span id="cb30-47"><a href="#cb30-47"></a>              <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(last_trial)</span>
<span id="cb30-48"><a href="#cb30-48"></a>              </span>
<span id="cb30-49"><a href="#cb30-49"></a>              <span class="co">// look at the `correct` parameter to get accuracy</span></span>
<span id="cb30-50"><a href="#cb30-50"></a>              <span class="co">// note: filtering ALWAYS returns an array, even if it just has one thing in it</span></span>
<span id="cb30-51"><a href="#cb30-51"></a>              <span class="kw">let</span> accuracy <span class="op">=</span> last_trial[<span class="dv">0</span>]<span class="op">.</span><span class="at">correct</span></span>
<span id="cb30-52"><a href="#cb30-52"></a>              <span class="kw">let</span> word <span class="op">=</span> last_trial[<span class="dv">0</span>]<span class="op">.</span><span class="at">word</span></span>
<span id="cb30-53"><a href="#cb30-53"></a>              <span class="kw">let</span> color <span class="op">=</span> last_trial[<span class="dv">0</span>]<span class="op">.</span><span class="at">color</span></span>
<span id="cb30-54"><a href="#cb30-54"></a>              <span class="kw">let</span> correct_response <span class="op">=</span> last_trial[<span class="dv">0</span>]<span class="op">.</span><span class="at">correct_response</span></span>
<span id="cb30-55"><a href="#cb30-55"></a></span>
<span id="cb30-56"><a href="#cb30-56"></a>              <span class="co">// check accuracy</span></span>
<span id="cb30-57"><a href="#cb30-57"></a>              <span class="cf">if</span>(accuracy <span class="op">===</span> <span class="kw">true</span>){</span>
<span id="cb30-58"><a href="#cb30-58"></a>                  output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:36px; color:MediumSeaGreen"&gt;CORRECT!&lt;/p&gt;</span></span>
<span id="cb30-59"><a href="#cb30-59"></a><span class="vs">                            &lt;p&gt;Press any key to continue&lt;/p&gt;`</span></span>
<span id="cb30-60"><a href="#cb30-60"></a>              } <span class="cf">else</span> {</span>
<span id="cb30-61"><a href="#cb30-61"></a>                  output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:36px; color:Tomato"&gt;INCORRECT!&lt;/p&gt;</span></span>
<span id="cb30-62"><a href="#cb30-62"></a><span class="vs">                            &lt;p&gt;The correct response for &lt;span style="color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/span&gt; was "</span><span class="sc">${</span>correct_response<span class="sc">}</span><span class="vs">"&lt;/p&gt;</span></span>
<span id="cb30-63"><a href="#cb30-63"></a><span class="vs">                            &lt;p&gt;Remember: respond to the &lt;em&gt;color&lt;/em&gt; and not the word&lt;/p&gt;</span></span>
<span id="cb30-64"><a href="#cb30-64"></a><span class="vs">                            &lt;p&gt;Press any key to continue&lt;/p&gt;`</span></span>
<span id="cb30-65"><a href="#cb30-65"></a>              }</span>
<span id="cb30-66"><a href="#cb30-66"></a>              </span>
<span id="cb30-67"><a href="#cb30-67"></a>              <span class="cf">return</span> output</span>
<span id="cb30-68"><a href="#cb30-68"></a>          }<span class="op">,</span></span>
<span id="cb30-69"><a href="#cb30-69"></a>          <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span></span>
<span id="cb30-70"><a href="#cb30-70"></a>        }</span>
<span id="cb30-71"><a href="#cb30-71"></a>    ]<span class="op">,</span></span>
<span id="cb30-72"><a href="#cb30-72"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb30-73"><a href="#cb30-73"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb30-74"><a href="#cb30-74"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb30-75"><a href="#cb30-75"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb30-76"><a href="#cb30-76"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb30-77"><a href="#cb30-77"></a>    ]<span class="op">,</span></span>
<span id="cb30-78"><a href="#cb30-78"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb30-79"><a href="#cb30-79"></a>      <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb30-80"><a href="#cb30-80"></a>      <span class="dt">color</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"color"</span>)<span class="op">,</span></span>
<span id="cb30-81"><a href="#cb30-81"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb30-82"><a href="#cb30-82"></a>    }<span class="op">,</span></span>
<span id="cb30-83"><a href="#cb30-83"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb30-84"><a href="#cb30-84"></a>}</span>
<span id="cb30-85"><a href="#cb30-85"></a></span>
<span id="cb30-86"><a href="#cb30-86"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb30-87"><a href="#cb30-87"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb30-88"><a href="#cb30-88"></a>  welcome<span class="op">,</span></span>
<span id="cb30-89"><a href="#cb30-89"></a>  stroop</span>
<span id="cb30-90"><a href="#cb30-90"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb31-1"><a href="#cb31-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<div id="demo-container-5" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-5" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n// 2. Define our trials\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `<p>Welcome to the Experiment!</p>\n              <p>Press any key to begin.</p>`,\n  choices: &quot;ALL_KEYS&quot;, \n  post_trial_gap: 250\n}\n\nlet stroop = {\n    type: jsPsychHtmlKeyboardResponse,\n    timeline: [\n        {\n            stimulus: function() {\n                // Get the timeline variables for this trial\n                // For convenience, we will store them inside variables called &quot;word&quot; and &quot;color&quot;\n                let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);\n                let color = jsPsych.evaluateTimelineVariable(&quot;color&quot;);\n\n                // Build the HTML using these variables\n                let output = `<p style=&quot;color: ${color}; font-size: 48px;&quot;>${word}</p>`;\n                \n                // Important: We must return the output variable\n                return output;\n            },\n            choices: [&quot;r&quot;, &quot;b&quot;],\n            on_finish: function(data) {\n                // First, determine accuracy for this trial\n                data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response);\n            }\n        },\n        // This is our feedback trial\n        {\n          stimulus: function() {\n              let output\n          \n              // get all previous data\n              let all_data = jsPsych.data.get();\n              \n              // filter it to get the last trial\n              let last_trial = all_data.last(1).trials\n\n              console.log(last_trial)\n              \n              // look at the `correct` parameter to get accuracy\n              // note: filtering ALWAYS returns an array, even if it just has one thing in it\n              let accuracy = last_trial[0].correct\n              let word = last_trial[0].word\n              let color = last_trial[0].color\n              let correct_response = last_trial[0].correct_response\n\n              // check accuracy\n              if(accuracy === true){\n                  output = `<p style=&quot;font-size:36px; color:MediumSeaGreen&quot;>CORRECT!</p>\n                            <p>Press any key to continue</p>`\n              } else {\n                  output = `<p style=&quot;font-size:36px; color:Tomato&quot;>INCORRECT!</p>\n                            <p>The correct response for <span style=&quot;color:${color}&quot;>${word}</span> was &quot;${correct_response}&quot;</p>\n                            <p>Remember: respond to the <em>color</em> and not the word</p>\n                            <p>Press any key to continue</p>`\n              }\n              \n              return output\n          },\n          choices: &quot;ALL_KEYS&quot;\n        }\n    ],\n    timeline_variables: [\n        {word: &quot;RED&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},\n        {word: &quot;BLUE&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},\n        {word: &quot;RED&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},\n        {word: &quot;BLUE&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},\n    ],\n    data: {\n      word: jsPsych.timelineVariable(&quot;word&quot;),\n      color: jsPsych.timelineVariable(&quot;color&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    },\n    randomize_order: true\n}\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n  welcome,\n  stroop\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-5');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-5" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});


// 2. Define our trials
const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `<p>Welcome to the Experiment!</p>
              <p>Press any key to begin.</p>`,
  choices: &quot;ALL_KEYS&quot;, 
  post_trial_gap: 250
}

let stroop = {
    type: jsPsychHtmlKeyboardResponse,
    timeline: [
        {
            stimulus: function() {
                // Get the timeline variables for this trial
                // For convenience, we will store them inside variables called &quot;word&quot; and &quot;color&quot;
                let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);
                let color = jsPsych.evaluateTimelineVariable(&quot;color&quot;);

                // Build the HTML using these variables
                let output = `<p style=&quot;color: ${color}; font-size: 48px;&quot;>${word}</p>`;
                
                // Important: We must return the output variable
                return output;
            },
            choices: [&quot;r&quot;, &quot;b&quot;],
            on_finish: function(data) {
                // First, determine accuracy for this trial
                data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response);
            }
        },
        // This is our feedback trial
        {
          stimulus: function() {
              let output
          
              // get all previous data
              let all_data = jsPsych.data.get();
              
              // filter it to get the last trial
              let last_trial = all_data.last(1).trials

              console.log(last_trial)
              
              // look at the `correct` parameter to get accuracy
              // note: filtering ALWAYS returns an array, even if it just has one thing in it
              let accuracy = last_trial[0].correct
              let word = last_trial[0].word
              let color = last_trial[0].color
              let correct_response = last_trial[0].correct_response

              // check accuracy
              if(accuracy === true){
                  output = `<p style=&quot;font-size:36px; color:MediumSeaGreen&quot;>CORRECT!</p>
                            <p>Press any key to continue</p>`
              } else {
                  output = `<p style=&quot;font-size:36px; color:Tomato&quot;>INCORRECT!</p>
                            <p>The correct response for <span style=&quot;color:${color}&quot;>${word}</span> was &quot;${correct_response}&quot;</p>
                            <p>Remember: respond to the <em>color</em> and not the word</p>
                            <p>Press any key to continue</p>`
              }
              
              return output
          },
          choices: &quot;ALL_KEYS&quot;
        }
    ],
    timeline_variables: [
        {word: &quot;RED&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},
        {word: &quot;BLUE&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},
        {word: &quot;RED&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},
        {word: &quot;BLUE&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},
    ],
    data: {
      word: jsPsych.timelineVariable(&quot;word&quot;),
      color: jsPsych.timelineVariable(&quot;color&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    },
    randomize_order: true
}

// 3. Run jsPsych with our trials
jsPsych.run([
  welcome,
  stroop
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-5&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-5&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="reaction-time-feedback" class="level4" data-number="17.5.4.3">
<h4 data-number="17.5.4.3" class="anchored" data-anchor-id="reaction-time-feedback"><span class="header-section-number">17.5.4.3</span> Reaction Time Feedback</h4>
<p>We can of course provide any kind of feedback we’d like. If an experiment emphasizes speed and accuracy, you may want to say whether they were too slow. You can do that by accessing the <code>rt</code> data.</p>
<p>We’ll just need some more complicated logic to check both accuracy and speed, then change the display based on both. Here, I’ll first check whether it was too slow, and display that regardless of accuracy. If they weren’t too slow, then I’ll display their accuracy.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="sourceCode" id="cb32"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb32-1"><a href="#cb32-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb32-4"><a href="#cb32-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Simon Task<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb32-5"><a href="#cb32-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb32-6"><a href="#cb32-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb32-8"><a href="#cb32-8"></a>    </span>
<span id="cb32-9"><a href="#cb32-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb32-10"><a href="#cb32-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb32-11"><a href="#cb32-11"></a></span>
<span id="cb32-12"><a href="#cb32-12"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb32-13"><a href="#cb32-13"></a>     <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb32-14"><a href="#cb32-14"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb32-15"><a href="#cb32-15"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb32-16"><a href="#cb32-16"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb32-17"><a href="#cb32-17"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb32-18"><a href="#cb32-18"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb32-19"><a href="#cb32-19"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb32-20"><a href="#cb32-20"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb33-1"><a href="#cb33-1"></a> <span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb33-3"><a href="#cb33-3"></a></span>
<span id="cb33-4"><a href="#cb33-4"></a> </span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb33-6"><a href="#cb33-6"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb33-7"><a href="#cb33-7"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb33-8"><a href="#cb33-8"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="vs">              &lt;p&gt;Press any key to begin.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb33-10"><a href="#cb33-10"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb33-11"><a href="#cb33-11"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb33-12"><a href="#cb33-12"></a>}</span>
<span id="cb33-13"><a href="#cb33-13"></a></span>
<span id="cb33-14"><a href="#cb33-14"></a><span class="kw">let</span> stroop <span class="op">=</span> {</span>
<span id="cb33-15"><a href="#cb33-15"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb33-16"><a href="#cb33-16"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb33-17"><a href="#cb33-17"></a>        {</span>
<span id="cb33-18"><a href="#cb33-18"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb33-19"><a href="#cb33-19"></a>                <span class="co">// Get the timeline variables for this trial</span></span>
<span id="cb33-20"><a href="#cb33-20"></a>                <span class="co">// For convenience, we will store them inside variables called "word" and "color"</span></span>
<span id="cb33-21"><a href="#cb33-21"></a>                <span class="kw">let</span> word <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"word"</span>)<span class="op">;</span></span>
<span id="cb33-22"><a href="#cb33-22"></a>                <span class="kw">let</span> color <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"color"</span>)<span class="op">;</span></span>
<span id="cb33-23"><a href="#cb33-23"></a></span>
<span id="cb33-24"><a href="#cb33-24"></a>                <span class="co">// Build the HTML using these variables</span></span>
<span id="cb33-25"><a href="#cb33-25"></a>                <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`&lt;p style="color: </span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">; font-size: 48px;"&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb33-26"><a href="#cb33-26"></a>                </span>
<span id="cb33-27"><a href="#cb33-27"></a>                <span class="co">// Important: We must return the output variable</span></span>
<span id="cb33-28"><a href="#cb33-28"></a>                <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb33-29"><a href="#cb33-29"></a>            }<span class="op">,</span></span>
<span id="cb33-30"><a href="#cb33-30"></a>            <span class="dt">choices</span><span class="op">:</span> [<span class="st">"r"</span><span class="op">,</span> <span class="st">"b"</span>]<span class="op">,</span></span>
<span id="cb33-31"><a href="#cb33-31"></a>            <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb33-32"><a href="#cb33-32"></a>                <span class="co">// First, determine accuracy for this trial</span></span>
<span id="cb33-33"><a href="#cb33-33"></a>                data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)<span class="op">;</span></span>
<span id="cb33-34"><a href="#cb33-34"></a>            }</span>
<span id="cb33-35"><a href="#cb33-35"></a>        }<span class="op">,</span></span>
<span id="cb33-36"><a href="#cb33-36"></a>        <span class="co">// This is our feedback trial</span></span>
<span id="cb33-37"><a href="#cb33-37"></a>        {</span>
<span id="cb33-38"><a href="#cb33-38"></a>          <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb33-39"><a href="#cb33-39"></a>              <span class="kw">let</span> output</span>
<span id="cb33-40"><a href="#cb33-40"></a>          </span>
<span id="cb33-41"><a href="#cb33-41"></a>              <span class="co">// get all previous data</span></span>
<span id="cb33-42"><a href="#cb33-42"></a>              <span class="kw">let</span> all_data <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">;</span></span>
<span id="cb33-43"><a href="#cb33-43"></a>              </span>
<span id="cb33-44"><a href="#cb33-44"></a>              <span class="co">// filter it to get the last trial</span></span>
<span id="cb33-45"><a href="#cb33-45"></a>              <span class="kw">let</span> last_trial <span class="op">=</span> all_data<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="at">trials</span></span>
<span id="cb33-46"><a href="#cb33-46"></a></span>
<span id="cb33-47"><a href="#cb33-47"></a>              <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(last_trial)</span>
<span id="cb33-48"><a href="#cb33-48"></a>              </span>
<span id="cb33-49"><a href="#cb33-49"></a>              <span class="co">// look at the `correct` parameter to get accuracy</span></span>
<span id="cb33-50"><a href="#cb33-50"></a>              <span class="co">// note: filtering ALWAYS returns an array, even if it just has one thing in it</span></span>
<span id="cb33-51"><a href="#cb33-51"></a>              <span class="kw">let</span> accuracy <span class="op">=</span> last_trial[<span class="dv">0</span>]<span class="op">.</span><span class="at">correct</span></span>
<span id="cb33-52"><a href="#cb33-52"></a>              <span class="kw">let</span> rt <span class="op">=</span> last_trial[<span class="dv">0</span>]<span class="op">.</span><span class="at">rt</span></span>
<span id="cb33-53"><a href="#cb33-53"></a></span>
<span id="cb33-54"><a href="#cb33-54"></a>              <span class="co">// check rt first</span></span>
<span id="cb33-55"><a href="#cb33-55"></a>              <span class="cf">if</span>(rt <span class="op">&gt;</span> <span class="dv">2000</span>){</span>
<span id="cb33-56"><a href="#cb33-56"></a>                  output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:36px; color:MediumOrchid"&gt;Too Slow! Respond faster!&lt;/p&gt;`</span></span>
<span id="cb33-57"><a href="#cb33-57"></a>              } <span class="cf">else</span> <span class="cf">if</span>(accuracy <span class="op">===</span> <span class="kw">true</span>){</span>
<span id="cb33-58"><a href="#cb33-58"></a>                  output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:36px; color:MediumSeaGreen"&gt;CORRECT!&lt;/p&gt;`</span></span>
<span id="cb33-59"><a href="#cb33-59"></a>              } <span class="cf">else</span> {</span>
<span id="cb33-60"><a href="#cb33-60"></a>                  output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:36px; color:Tomato"&gt;INCORRECT!&lt;/p&gt;`</span></span>
<span id="cb33-61"><a href="#cb33-61"></a>              }</span>
<span id="cb33-62"><a href="#cb33-62"></a>              </span>
<span id="cb33-63"><a href="#cb33-63"></a>              <span class="cf">return</span> output</span>
<span id="cb33-64"><a href="#cb33-64"></a>          }<span class="op">,</span></span>
<span id="cb33-65"><a href="#cb33-65"></a>          <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb33-66"><a href="#cb33-66"></a>          <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb33-67"><a href="#cb33-67"></a>        }</span>
<span id="cb33-68"><a href="#cb33-68"></a>    ]<span class="op">,</span></span>
<span id="cb33-69"><a href="#cb33-69"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb33-70"><a href="#cb33-70"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb33-71"><a href="#cb33-71"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"r"</span>}<span class="op">,</span></span>
<span id="cb33-72"><a href="#cb33-72"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb33-73"><a href="#cb33-73"></a>        {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"b"</span>}<span class="op">,</span></span>
<span id="cb33-74"><a href="#cb33-74"></a>    ]<span class="op">,</span></span>
<span id="cb33-75"><a href="#cb33-75"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb33-76"><a href="#cb33-76"></a>      <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb33-77"><a href="#cb33-77"></a>      <span class="dt">color</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"color"</span>)<span class="op">,</span></span>
<span id="cb33-78"><a href="#cb33-78"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb33-79"><a href="#cb33-79"></a>    }<span class="op">,</span></span>
<span id="cb33-80"><a href="#cb33-80"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb33-81"><a href="#cb33-81"></a>}</span>
<span id="cb33-82"><a href="#cb33-82"></a></span>
<span id="cb33-83"><a href="#cb33-83"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb33-84"><a href="#cb33-84"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb33-85"><a href="#cb33-85"></a>  welcome<span class="op">,</span></span>
<span id="cb33-86"><a href="#cb33-86"></a>  stroop</span>
<span id="cb33-87"><a href="#cb33-87"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb34-1"><a href="#cb34-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<div id="demo-container-6" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-6" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n// 2. Define our trials\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `<p>Welcome to the Experiment!</p>\n              <p>Press any key to begin.</p>`,\n  choices: &quot;ALL_KEYS&quot;, \n  post_trial_gap: 250\n}\n\nlet stroop = {\n    type: jsPsychHtmlKeyboardResponse,\n    timeline: [\n        {\n            stimulus: function() {\n                // Get the timeline variables for this trial\n                // For convenience, we will store them inside variables called &quot;word&quot; and &quot;color&quot;\n                let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);\n                let color = jsPsych.evaluateTimelineVariable(&quot;color&quot;);\n\n                // Build the HTML using these variables\n                let output = `<p style=&quot;color: ${color}; font-size: 48px;&quot;>${word}</p>`;\n                \n                // Important: We must return the output variable\n                return output;\n            },\n            choices: [&quot;r&quot;, &quot;b&quot;],\n            on_finish: function(data) {\n                // First, determine accuracy for this trial\n                data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response);\n            }\n        },\n        // This is our feedback trial\n        {\n          stimulus: function() {\n              let output\n          \n              // get all previous data\n              let all_data = jsPsych.data.get();\n              \n              // filter it to get the last trial\n              let last_trial = all_data.last(1).trials\n\n              console.log(last_trial)\n              \n              // look at the `correct` parameter to get accuracy\n              // note: filtering ALWAYS returns an array, even if it just has one thing in it\n              let accuracy = last_trial[0].correct\n              let rt = last_trial[0].rt\n\n              // check rt first\n              if(rt > 2000){\n                  output = `<p style=&quot;font-size:36px; color:MediumOrchid&quot;>Too Slow! Respond faster!</p>`\n              } else if(accuracy === true){\n                  output = `<p style=&quot;font-size:36px; color:MediumSeaGreen&quot;>CORRECT!</p>`\n              } else {\n                  output = `<p style=&quot;font-size:36px; color:Tomato&quot;>INCORRECT!</p>`\n              }\n              \n              return output\n          },\n          choices: &quot;NO_KEYS&quot;,\n          trial_duration: 1000\n        }\n    ],\n    timeline_variables: [\n        {word: &quot;RED&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},\n        {word: &quot;BLUE&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},\n        {word: &quot;RED&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},\n        {word: &quot;BLUE&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},\n    ],\n    data: {\n      word: jsPsych.timelineVariable(&quot;word&quot;),\n      color: jsPsych.timelineVariable(&quot;color&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    },\n    randomize_order: true\n}\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n  welcome,\n  stroop\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-6');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-6" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});


// 2. Define our trials
const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `<p>Welcome to the Experiment!</p>
              <p>Press any key to begin.</p>`,
  choices: &quot;ALL_KEYS&quot;, 
  post_trial_gap: 250
}

let stroop = {
    type: jsPsychHtmlKeyboardResponse,
    timeline: [
        {
            stimulus: function() {
                // Get the timeline variables for this trial
                // For convenience, we will store them inside variables called &quot;word&quot; and &quot;color&quot;
                let word = jsPsych.evaluateTimelineVariable(&quot;word&quot;);
                let color = jsPsych.evaluateTimelineVariable(&quot;color&quot;);

                // Build the HTML using these variables
                let output = `<p style=&quot;color: ${color}; font-size: 48px;&quot;>${word}</p>`;
                
                // Important: We must return the output variable
                return output;
            },
            choices: [&quot;r&quot;, &quot;b&quot;],
            on_finish: function(data) {
                // First, determine accuracy for this trial
                data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response);
            }
        },
        // This is our feedback trial
        {
          stimulus: function() {
              let output
          
              // get all previous data
              let all_data = jsPsych.data.get();
              
              // filter it to get the last trial
              let last_trial = all_data.last(1).trials

              console.log(last_trial)
              
              // look at the `correct` parameter to get accuracy
              // note: filtering ALWAYS returns an array, even if it just has one thing in it
              let accuracy = last_trial[0].correct
              let rt = last_trial[0].rt

              // check rt first
              if(rt > 2000){
                  output = `<p style=&quot;font-size:36px; color:MediumOrchid&quot;>Too Slow! Respond faster!</p>`
              } else if(accuracy === true){
                  output = `<p style=&quot;font-size:36px; color:MediumSeaGreen&quot;>CORRECT!</p>`
              } else {
                  output = `<p style=&quot;font-size:36px; color:Tomato&quot;>INCORRECT!</p>`
              }
              
              return output
          },
          choices: &quot;NO_KEYS&quot;,
          trial_duration: 1000
        }
    ],
    timeline_variables: [
        {word: &quot;RED&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},
        {word: &quot;BLUE&quot;, color: &quot;red&quot;, correct_response: &quot;r&quot;},
        {word: &quot;RED&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},
        {word: &quot;BLUE&quot;, color: &quot;blue&quot;, correct_response: &quot;b&quot;},
    ],
    data: {
      word: jsPsych.timelineVariable(&quot;word&quot;),
      color: jsPsych.timelineVariable(&quot;color&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    },
    randomize_order: true
}

// 3. Run jsPsych with our trials
jsPsych.run([
  welcome,
  stroop
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-6&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-6&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="other-parameters" class="level2" data-number="17.6">
<h2 data-number="17.6" class="anchored" data-anchor-id="other-parameters"><span class="header-section-number">17.6</span> Other Parameters</h2>
<p>The general principals you’ve learned throughout this chapter can be applied to more than just the <code>stimulus</code> parameter. In fact, most parameters can become dynamic by replacing it with a function.</p>
<p>Here are a couple more examples of replacing parameters with functions.</p>
<p><strong>Remember</strong>: We need to save these trial parameters if we’re making them dynamic, otherwise we won’t know what they were on every trial!</p>
<section id="trial-duration" class="level3" data-number="17.6.1">
<h3 data-number="17.6.1" class="anchored" data-anchor-id="trial-duration"><span class="header-section-number">17.6.1</span> Trial Duration</h3>
<p>Sometimes, we want to make our experiment unpredictable in some ways, like randomizing the delay between trials. We could do this by randomizing the <code>trial_duration</code> of the fixation cross. This uses a generic math function that generates a number between X and Y:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb35-1"><a href="#cb35-1"></a><span class="kw">let</span> trial <span class="op">=</span> {</span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychKeyboardResponse<span class="op">,</span></span>
<span id="cb35-3"><a href="#cb35-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px; color:red;"&gt;GREEN&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb35-4"><a href="#cb35-4"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb35-5"><a href="#cb35-5"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> (<span class="dv">2000</span> <span class="op">-</span> <span class="dv">1000</span> <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="dv">1000</span>)<span class="op">;</span></span>
<span id="cb35-6"><a href="#cb35-6"></a>  }<span class="op">,</span></span>
<span id="cb35-7"><a href="#cb35-7"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'r'</span><span class="op">,</span> <span class="st">'b'</span><span class="op">,</span> <span class="st">'g'</span><span class="op">,</span> <span class="st">'y'</span>]<span class="op">,</span></span>
<span id="cb35-8"><a href="#cb35-8"></a>  <span class="dt">save_trial_parameters</span><span class="op">:</span> {</span>
<span id="cb35-9"><a href="#cb35-9"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb35-10"><a href="#cb35-10"></a>  }</span>
<span id="cb35-11"><a href="#cb35-11"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or I could randomly select one from a set:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb36-1"><a href="#cb36-1"></a><span class="kw">let</span> trial <span class="op">=</span> {</span>
<span id="cb36-2"><a href="#cb36-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychKeyboardResponse<span class="op">,</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px; color:red;"&gt;GREEN&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb36-4"><a href="#cb36-4"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb36-5"><a href="#cb36-5"></a>    <span class="co">// set of durations</span></span>
<span id="cb36-6"><a href="#cb36-6"></a>    <span class="kw">let</span> durations <span class="op">=</span> [<span class="dv">500</span><span class="op">,</span><span class="dv">750</span><span class="op">,</span><span class="dv">1000</span><span class="op">,</span><span class="dv">1250</span><span class="op">,</span><span class="dv">1500</span><span class="op">,</span><span class="dv">1750</span><span class="op">,</span><span class="dv">2000</span>]</span>
<span id="cb36-7"><a href="#cb36-7"></a>    </span>
<span id="cb36-8"><a href="#cb36-8"></a>    <span class="co">// randomize the order of the array</span></span>
<span id="cb36-9"><a href="#cb36-9"></a>    durations <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(durations)</span>
<span id="cb36-10"><a href="#cb36-10"></a>    </span>
<span id="cb36-11"><a href="#cb36-11"></a>    <span class="co">// select the first one</span></span>
<span id="cb36-12"><a href="#cb36-12"></a>    <span class="kw">let</span> selected_duration <span class="op">=</span> durations[<span class="dv">0</span>]</span>
<span id="cb36-13"><a href="#cb36-13"></a>  </span>
<span id="cb36-14"><a href="#cb36-14"></a>    <span class="cf">return</span> selected_duration</span>
<span id="cb36-15"><a href="#cb36-15"></a>  }<span class="op">,</span></span>
<span id="cb36-16"><a href="#cb36-16"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'r'</span><span class="op">,</span> <span class="st">'b'</span><span class="op">,</span> <span class="st">'g'</span><span class="op">,</span> <span class="st">'y'</span>]<span class="op">,</span></span>
<span id="cb36-17"><a href="#cb36-17"></a>  <span class="dt">save_trial_parameters</span><span class="op">:</span> {</span>
<span id="cb36-18"><a href="#cb36-18"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb36-19"><a href="#cb36-19"></a>  }</span>
<span id="cb36-20"><a href="#cb36-20"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="choices" class="level3" data-number="17.6.2">
<h3 data-number="17.6.2" class="anchored" data-anchor-id="choices"><span class="header-section-number">17.6.2</span> Choices</h3>
<p>We could also make our choices dynamic. For instance, when we use the button plugin, we might want to randomize the order of choices, so that it differs on every trial. We could do that with a function.</p>
<p>We do need to keep in mind though, that the <code>choice</code> parameter expects an array <code>[ ]</code>, so no matter what we do in the function, we need to make sure an array is returned at the end.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb37-1"><a href="#cb37-1"></a>trial <span class="op">=</span> {</span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlButtonResponse<span class="op">,</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px; color:red;"&gt;GREEN&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb37-4"><a href="#cb37-4"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb37-5"><a href="#cb37-5"></a>    <span class="co">// start with the set of response options</span></span>
<span id="cb37-6"><a href="#cb37-6"></a>    <span class="kw">let</span> options <span class="op">=</span> [<span class="st">'Red'</span><span class="op">,</span> <span class="st">'Green'</span><span class="op">,</span> <span class="st">'Blue'</span><span class="op">,</span> <span class="st">'Yellow'</span>]<span class="op">;</span></span>
<span id="cb37-7"><a href="#cb37-7"></a>    </span>
<span id="cb37-8"><a href="#cb37-8"></a>    <span class="co">// randomize the order of the array</span></span>
<span id="cb37-9"><a href="#cb37-9"></a>    options <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(options)<span class="op">;</span></span>
<span id="cb37-10"><a href="#cb37-10"></a>    </span>
<span id="cb37-11"><a href="#cb37-11"></a>    <span class="co">// return the full array</span></span>
<span id="cb37-12"><a href="#cb37-12"></a>    <span class="cf">return</span> options</span>
<span id="cb37-13"><a href="#cb37-13"></a>  }<span class="op">,</span></span>
<span id="cb37-14"><a href="#cb37-14"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="st">"&lt;p&gt;What color is the ink?&lt;/p&gt;"</span><span class="op">,</span></span>
<span id="cb37-15"><a href="#cb37-15"></a>  <span class="dt">save_trial_parameters</span><span class="op">:</span> {</span>
<span id="cb37-16"><a href="#cb37-16"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb37-17"><a href="#cb37-17"></a>  }</span>
<span id="cb37-18"><a href="#cb37-18"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here’ a full example with randomized button orders:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="sourceCode" id="cb38"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb38-1"><a href="#cb38-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb38-4"><a href="#cb38-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Simon Task<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb38-6"><a href="#cb38-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb38-7"><a href="#cb38-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb38-8"><a href="#cb38-8"></a>    </span>
<span id="cb38-9"><a href="#cb38-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb38-10"><a href="#cb38-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb38-11"><a href="#cb38-11"></a></span>
<span id="cb38-12"><a href="#cb38-12"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb38-13"><a href="#cb38-13"></a>     <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb38-14"><a href="#cb38-14"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb38-15"><a href="#cb38-15"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb38-16"><a href="#cb38-16"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb38-17"><a href="#cb38-17"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb38-18"><a href="#cb38-18"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb38-19"><a href="#cb38-19"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb38-20"><a href="#cb38-20"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb39-1"><a href="#cb39-1"></a> <span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb39-2"><a href="#cb39-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb39-3"><a href="#cb39-3"></a></span>
<span id="cb39-4"><a href="#cb39-4"></a> </span>
<span id="cb39-5"><a href="#cb39-5"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb39-6"><a href="#cb39-6"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb39-7"><a href="#cb39-7"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb39-8"><a href="#cb39-8"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb39-9"><a href="#cb39-9"></a><span class="vs">              &lt;p&gt;Press any key to begin.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb39-10"><a href="#cb39-10"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb39-11"><a href="#cb39-11"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb39-12"><a href="#cb39-12"></a>}</span>
<span id="cb39-13"><a href="#cb39-13"></a></span>
<span id="cb39-14"><a href="#cb39-14"></a><span class="kw">let</span> stroop <span class="op">=</span>{</span>
<span id="cb39-15"><a href="#cb39-15"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb39-16"><a href="#cb39-16"></a>      {</span>
<span id="cb39-17"><a href="#cb39-17"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlButtonResponse<span class="op">,</span></span>
<span id="cb39-18"><a href="#cb39-18"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb39-19"><a href="#cb39-19"></a>            <span class="cf">return</span>  <span class="vs">`&lt;p style="font-size:48px; color:</span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"color"</span>)<span class="sc">}</span><span class="vs">;"&gt;</span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"word"</span>)<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span></span>
<span id="cb39-20"><a href="#cb39-20"></a>        }<span class="op">,</span></span>
<span id="cb39-21"><a href="#cb39-21"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb39-22"><a href="#cb39-22"></a>          <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="kw">this</span><span class="op">.</span><span class="at">data</span>)</span>
<span id="cb39-23"><a href="#cb39-23"></a>          <span class="co">// start with the set of response options</span></span>
<span id="cb39-24"><a href="#cb39-24"></a>          <span class="kw">let</span> options <span class="op">=</span> [<span class="st">"Red"</span><span class="op">,</span> <span class="st">"Green"</span><span class="op">,</span> <span class="st">"Blue"</span><span class="op">,</span> <span class="st">"Yellow"</span>]<span class="op">;</span></span>
<span id="cb39-25"><a href="#cb39-25"></a>          </span>
<span id="cb39-26"><a href="#cb39-26"></a>          <span class="co">// randomize the order of the array</span></span>
<span id="cb39-27"><a href="#cb39-27"></a>          options <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">randomization</span><span class="op">.</span><span class="fu">shuffle</span>(options)<span class="op">;</span></span>
<span id="cb39-28"><a href="#cb39-28"></a>          </span>
<span id="cb39-29"><a href="#cb39-29"></a>          <span class="co">// return the full array</span></span>
<span id="cb39-30"><a href="#cb39-30"></a>          <span class="cf">return</span> options</span>
<span id="cb39-31"><a href="#cb39-31"></a>        }<span class="op">,</span></span>
<span id="cb39-32"><a href="#cb39-32"></a>        <span class="dt">prompt</span><span class="op">:</span> <span class="st">"&lt;p&gt;What color is the ink?&lt;/p&gt;"</span><span class="op">,</span></span>
<span id="cb39-33"><a href="#cb39-33"></a>        <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb39-34"><a href="#cb39-34"></a>      }</span>
<span id="cb39-35"><a href="#cb39-35"></a>  ]<span class="op">,</span></span>
<span id="cb39-36"><a href="#cb39-36"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb39-37"><a href="#cb39-37"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span>}<span class="op">,</span></span>
<span id="cb39-38"><a href="#cb39-38"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span>}<span class="op">,</span></span>
<span id="cb39-39"><a href="#cb39-39"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"GREEN"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"yellow"</span>}<span class="op">,</span></span>
<span id="cb39-40"><a href="#cb39-40"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"green"</span>}</span>
<span id="cb39-41"><a href="#cb39-41"></a>  ]<span class="op">,</span></span>
<span id="cb39-42"><a href="#cb39-42"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb39-43"><a href="#cb39-43"></a>  <span class="dt">save_trial_parameters</span><span class="op">:</span> {</span>
<span id="cb39-44"><a href="#cb39-44"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb39-45"><a href="#cb39-45"></a>  }</span>
<span id="cb39-46"><a href="#cb39-46"></a>}</span>
<span id="cb39-47"><a href="#cb39-47"></a></span>
<span id="cb39-48"><a href="#cb39-48"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb39-49"><a href="#cb39-49"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb39-50"><a href="#cb39-50"></a>  welcome<span class="op">,</span></span>
<span id="cb39-51"><a href="#cb39-51"></a>  stroop</span>
<span id="cb39-52"><a href="#cb39-52"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb40-1"><a href="#cb40-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<div id="demo-container-7" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-7" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n// 2. Define our trials\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `<p>Welcome to the Experiment!</p>\n              <p>Press any key to begin.</p>`,\n  choices: &quot;ALL_KEYS&quot;, \n  post_trial_gap: 250\n}\n\nlet stroop ={\n  timeline: [\n      {\n        type: jsPsychHtmlButtonResponse,\n        stimulus: function(){\n            return  `<p style=&quot;font-size:48px; color:${jsPsych.evaluateTimelineVariable(&quot;color&quot;)};&quot;>${jsPsych.evaluateTimelineVariable(&quot;word&quot;)}</p>`\n        },\n        choices: function(){\n          console.log(this.data)\n          // start with the set of response options\n          let options = [&quot;Red&quot;, &quot;Green&quot;, &quot;Blue&quot;, &quot;Yellow&quot;];\n          \n          // randomize the order of the array\n          options = jsPsych.randomization.shuffle(options);\n          \n          // return the full array\n          return options\n        },\n        prompt: &quot;<p>What color is the ink?</p>&quot;,\n        post_trial_gap: 250\n      }\n  ],\n  timeline_variables: [\n    {word: &quot;RED&quot;, color: &quot;red&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;blue&quot;},\n    {word: &quot;GREEN&quot;, color: &quot;yellow&quot;},\n    {word: &quot;RED&quot;, color: &quot;green&quot;}\n  ],\n  randomize_order: true,\n  save_trial_parameters: {\n    choices: true\n  }\n}\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n  welcome,\n  stroop\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-7');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-7" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});


// 2. Define our trials
const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `<p>Welcome to the Experiment!</p>
              <p>Press any key to begin.</p>`,
  choices: &quot;ALL_KEYS&quot;, 
  post_trial_gap: 250
}

let stroop ={
  timeline: [
      {
        type: jsPsychHtmlButtonResponse,
        stimulus: function(){
            return  `<p style=&quot;font-size:48px; color:${jsPsych.evaluateTimelineVariable(&quot;color&quot;)};&quot;>${jsPsych.evaluateTimelineVariable(&quot;word&quot;)}</p>`
        },
        choices: function(){
          console.log(this.data)
          // start with the set of response options
          let options = [&quot;Red&quot;, &quot;Green&quot;, &quot;Blue&quot;, &quot;Yellow&quot;];
          
          // randomize the order of the array
          options = jsPsych.randomization.shuffle(options);
          
          // return the full array
          return options
        },
        prompt: &quot;<p>What color is the ink?</p>&quot;,
        post_trial_gap: 250
      }
  ],
  timeline_variables: [
    {word: &quot;RED&quot;, color: &quot;red&quot;},
    {word: &quot;BLUE&quot;, color: &quot;blue&quot;},
    {word: &quot;GREEN&quot;, color: &quot;yellow&quot;},
    {word: &quot;RED&quot;, color: &quot;green&quot;}
  ],
  randomize_order: true,
  save_trial_parameters: {
    choices: true
  }
}

// 3. Run jsPsych with our trials
jsPsych.run([
  welcome,
  stroop
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-7&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-7&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>We could also make it dependent on how they responded on a previous trial:</p>
</section>
</section>
<section id="prompt" class="level2" data-number="17.7">
<h2 data-number="17.7" class="anchored" data-anchor-id="prompt"><span class="header-section-number">17.7</span> Prompt</h2>
<p>We can also update the prompt that appears below each stimulus in a dynamic way. Let’s try providing performance feedback below the stimulus, so they know how they’ve been performing on average.</p>
<p>This one is a bit complicated, so first, here’s the prompt function alone. We’re chaining together filter methods to restrict which trials are retrieved and perform some calculations on the RTs and accuracy rates.</p>
<p>Then, I’ll use if-then logic to change what is returned.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb41-1"><a href="#cb41-1"></a>prompt<span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb41-2"><a href="#cb41-2"></a>        <span class="co">// Get the last 5 trials (excluding practice/instruction trials)</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>        <span class="kw">let</span> recentTrials <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()</span>
<span id="cb41-4"><a href="#cb41-4"></a>            <span class="op">.</span><span class="fu">filter</span>({<span class="dt">task</span><span class="op">:</span> <span class="st">'stroop'</span>})</span>
<span id="cb41-5"><a href="#cb41-5"></a>            <span class="op">.</span><span class="fu">last</span>(<span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb41-6"><a href="#cb41-6"></a></span>
<span id="cb41-7"><a href="#cb41-7"></a>        <span class="co">// Wait until there is at least 5 trials before giving feedback</span></span>
<span id="cb41-8"><a href="#cb41-8"></a>        <span class="cf">if</span> (recentTrials<span class="op">.</span><span class="fu">count</span>() <span class="op">&lt;</span> <span class="dv">5</span>) {</span>
<span id="cb41-9"><a href="#cb41-9"></a>            <span class="co">// if you call return early none of the code below will run!</span></span>
<span id="cb41-10"><a href="#cb41-10"></a>            <span class="cf">return</span> <span class="st">"&lt;p&gt;Press R for red, G for green, B for blue, Y for yellow&lt;/p&gt;"</span><span class="op">;</span></span>
<span id="cb41-11"><a href="#cb41-11"></a>        }</span>
<span id="cb41-12"><a href="#cb41-12"></a></span>
<span id="cb41-13"><a href="#cb41-13"></a>        <span class="co">// Calculate average RT and accuracy</span></span>
<span id="cb41-14"><a href="#cb41-14"></a>        <span class="kw">let</span> avgRT <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(recentTrials<span class="op">.</span><span class="fu">select</span>(<span class="st">'rt'</span>)<span class="op">.</span><span class="fu">mean</span>())<span class="op">;</span></span>
<span id="cb41-15"><a href="#cb41-15"></a>        <span class="kw">let</span> accuracy <span class="op">=</span> (recentTrials<span class="op">.</span><span class="fu">filter</span>({<span class="dt">correct</span><span class="op">:</span> <span class="kw">true</span>})<span class="op">.</span><span class="fu">count</span>() <span class="op">/</span> <span class="dv">5</span>) <span class="op">*</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb41-16"><a href="#cb41-16"></a></span>
<span id="cb41-17"><a href="#cb41-17"></a>        <span class="co">// Determine feedback message</span></span>
<span id="cb41-18"><a href="#cb41-18"></a>        <span class="kw">let</span> feedback <span class="op">=</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb41-19"><a href="#cb41-19"></a>        <span class="cf">if</span> (accuracy <span class="op">&lt;</span> <span class="dv">80</span>) {</span>
<span id="cb41-20"><a href="#cb41-20"></a>            feedback <span class="op">=</span> <span class="st">"[Too many errors - focus on accuracy!]"</span><span class="op">;</span></span>
<span id="cb41-21"><a href="#cb41-21"></a>        } <span class="cf">else</span> <span class="cf">if</span> (avgRT <span class="op">&gt;</span> <span class="dv">1000</span>) {</span>
<span id="cb41-22"><a href="#cb41-22"></a>            feedback <span class="op">=</span> <span class="st">"[Too slow - try to respond faster!]"</span><span class="op">;</span></span>
<span id="cb41-23"><a href="#cb41-23"></a>        } <span class="cf">else</span> <span class="cf">if</span> (accuracy <span class="op">&gt;=</span> <span class="dv">90</span> <span class="op">&amp;&amp;</span> avgRT <span class="op">&lt;=</span> <span class="dv">700</span>) {</span>
<span id="cb41-24"><a href="#cb41-24"></a>            feedback <span class="op">=</span> <span class="st">"[Great job - fast and accurate!]"</span><span class="op">;</span></span>
<span id="cb41-25"><a href="#cb41-25"></a>        } <span class="cf">else</span> <span class="cf">if</span> (accuracy <span class="op">&gt;=</span> <span class="dv">85</span>) {</span>
<span id="cb41-26"><a href="#cb41-26"></a>            feedback <span class="op">=</span> <span class="st">"[Good accuracy!]"</span><span class="op">;</span></span>
<span id="cb41-27"><a href="#cb41-27"></a>        } <span class="cf">else</span> {</span>
<span id="cb41-28"><a href="#cb41-28"></a>            feedback <span class="op">=</span> <span class="st">"[Keep it up!]"</span><span class="op">;</span></span>
<span id="cb41-29"><a href="#cb41-29"></a>        }</span>
<span id="cb41-30"><a href="#cb41-30"></a></span>
<span id="cb41-31"><a href="#cb41-31"></a>        <span class="cf">return</span> <span class="vs">`&lt;p&gt;Last 5 trials: </span><span class="sc">${</span>avgRT<span class="sc">}</span><span class="vs">ms average, </span><span class="sc">${</span>accuracy<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>)<span class="sc">}</span><span class="vs">% correct </span><span class="sc">${</span>feedback<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb41-32"><a href="#cb41-32"></a><span class="vs">                &lt;p&gt;Press R for red, G for green, B for blue, Y for yellow&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb41-33"><a href="#cb41-33"></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s see how that looks in a full example:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-4" role="tab" aria-controls="tabset-8-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="sourceCode" id="cb42"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb42-1"><a href="#cb42-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Simon Task<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb42-5"><a href="#cb42-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb42-6"><a href="#cb42-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb42-7"><a href="#cb42-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb42-8"><a href="#cb42-8"></a>    </span>
<span id="cb42-9"><a href="#cb42-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb42-10"><a href="#cb42-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb42-11"><a href="#cb42-11"></a></span>
<span id="cb42-12"><a href="#cb42-12"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb42-13"><a href="#cb42-13"></a>     <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb42-14"><a href="#cb42-14"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb42-15"><a href="#cb42-15"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb42-16"><a href="#cb42-16"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb42-17"><a href="#cb42-17"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb42-18"><a href="#cb42-18"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb42-19"><a href="#cb42-19"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb42-20"><a href="#cb42-20"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb43-1"><a href="#cb43-1"></a> <span class="co">// 1. Initialize jsPsych</span></span>
<span id="cb43-2"><a href="#cb43-2"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb43-3"><a href="#cb43-3"></a></span>
<span id="cb43-4"><a href="#cb43-4"></a> </span>
<span id="cb43-5"><a href="#cb43-5"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb43-6"><a href="#cb43-6"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb43-7"><a href="#cb43-7"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb43-8"><a href="#cb43-8"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb43-9"><a href="#cb43-9"></a><span class="vs">              &lt;p&gt;Press any key to begin.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb43-10"><a href="#cb43-10"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"ALL_KEYS"</span><span class="op">,</span> </span>
<span id="cb43-11"><a href="#cb43-11"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb43-12"><a href="#cb43-12"></a>}</span>
<span id="cb43-13"><a href="#cb43-13"></a></span>
<span id="cb43-14"><a href="#cb43-14"></a><span class="kw">let</span> stroop <span class="op">=</span>{</span>
<span id="cb43-15"><a href="#cb43-15"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb43-16"><a href="#cb43-16"></a>      {</span>
<span id="cb43-17"><a href="#cb43-17"></a>          <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb43-18"><a href="#cb43-18"></a>          <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb43-19"><a href="#cb43-19"></a>                        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`&lt;p style="font-size: 48px; color: </span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"color"</span>)<span class="sc">}</span><span class="vs">;"&gt;</span></span>
<span id="cb43-20"><a href="#cb43-20"></a><span class="vs">                                        </span><span class="sc">${</span>jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"word"</span>)<span class="sc">}</span></span>
<span id="cb43-21"><a href="#cb43-21"></a><span class="vs">                                      &lt;/p&gt;`</span></span>
<span id="cb43-22"><a href="#cb43-22"></a>                        <span class="cf">return</span> output</span>
<span id="cb43-23"><a href="#cb43-23"></a>          }<span class="op">,</span></span>
<span id="cb43-24"><a href="#cb43-24"></a>          <span class="dt">prompt</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb43-25"><a href="#cb43-25"></a>              <span class="co">// Get the last 5 trials (excluding practice/instruction trials)</span></span>
<span id="cb43-26"><a href="#cb43-26"></a>              <span class="kw">let</span> recentTrials <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()</span>
<span id="cb43-27"><a href="#cb43-27"></a>                  <span class="op">.</span><span class="fu">filter</span>({<span class="dt">task</span><span class="op">:</span> <span class="st">"stroop"</span>})</span>
<span id="cb43-28"><a href="#cb43-28"></a>                  <span class="op">.</span><span class="fu">last</span>(<span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb43-29"><a href="#cb43-29"></a>      </span>
<span id="cb43-30"><a href="#cb43-30"></a>              <span class="cf">if</span> (recentTrials<span class="op">.</span><span class="fu">count</span>() <span class="op">&lt;</span> <span class="dv">5</span>) {</span>
<span id="cb43-31"><a href="#cb43-31"></a>                  <span class="cf">return</span> <span class="st">"&lt;p&gt;Press R for red, G for green, B for blue, Y for yellow&lt;/p&gt;"</span><span class="op">;</span></span>
<span id="cb43-32"><a href="#cb43-32"></a>              }</span>
<span id="cb43-33"><a href="#cb43-33"></a>      </span>
<span id="cb43-34"><a href="#cb43-34"></a>              <span class="co">// Calculate average RT and accuracy</span></span>
<span id="cb43-35"><a href="#cb43-35"></a>              <span class="kw">let</span> avgRT <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(recentTrials<span class="op">.</span><span class="fu">select</span>(<span class="st">"rt"</span>)<span class="op">.</span><span class="fu">mean</span>())<span class="op">;</span></span>
<span id="cb43-36"><a href="#cb43-36"></a>              <span class="kw">let</span> accuracy <span class="op">=</span> (recentTrials<span class="op">.</span><span class="fu">filter</span>({<span class="dt">correct</span><span class="op">:</span> <span class="kw">true</span>})<span class="op">.</span><span class="fu">count</span>() <span class="op">/</span> <span class="dv">5</span>) <span class="op">*</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb43-37"><a href="#cb43-37"></a>      </span>
<span id="cb43-38"><a href="#cb43-38"></a>              <span class="co">// Determine feedback message</span></span>
<span id="cb43-39"><a href="#cb43-39"></a>              <span class="kw">let</span> feedback <span class="op">=</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb43-40"><a href="#cb43-40"></a>              <span class="cf">if</span> (accuracy <span class="op">&lt;</span> <span class="dv">80</span>) {</span>
<span id="cb43-41"><a href="#cb43-41"></a>                  feedback <span class="op">=</span> <span class="st">"[Too many errors - focus on accuracy!]"</span><span class="op">;</span></span>
<span id="cb43-42"><a href="#cb43-42"></a>              } <span class="cf">else</span> <span class="cf">if</span> (avgRT <span class="op">&gt;</span> <span class="dv">1000</span>) {</span>
<span id="cb43-43"><a href="#cb43-43"></a>                  feedback <span class="op">=</span> <span class="st">"[Too slow - try to respond faster!]"</span><span class="op">;</span></span>
<span id="cb43-44"><a href="#cb43-44"></a>              } <span class="cf">else</span> <span class="cf">if</span> (accuracy <span class="op">&gt;=</span> <span class="dv">90</span> <span class="op">&amp;&amp;</span> avgRT <span class="op">&lt;=</span> <span class="dv">700</span>) {</span>
<span id="cb43-45"><a href="#cb43-45"></a>                  feedback <span class="op">=</span> <span class="st">"[Great job - fast and accurate!]"</span><span class="op">;</span></span>
<span id="cb43-46"><a href="#cb43-46"></a>              } <span class="cf">else</span> <span class="cf">if</span> (accuracy <span class="op">&gt;=</span> <span class="dv">85</span>) {</span>
<span id="cb43-47"><a href="#cb43-47"></a>                  feedback <span class="op">=</span> <span class="st">"[Good accuracy!]"</span><span class="op">;</span></span>
<span id="cb43-48"><a href="#cb43-48"></a>              } <span class="cf">else</span> {</span>
<span id="cb43-49"><a href="#cb43-49"></a>                  feedback <span class="op">=</span> <span class="st">"[Keep it up!]"</span><span class="op">;</span></span>
<span id="cb43-50"><a href="#cb43-50"></a>              }</span>
<span id="cb43-51"><a href="#cb43-51"></a>      </span>
<span id="cb43-52"><a href="#cb43-52"></a>              <span class="cf">return</span> <span class="vs">`&lt;p&gt;Last 5 trials: </span><span class="sc">${</span>avgRT<span class="sc">}</span><span class="vs">ms average, </span><span class="sc">${</span>accuracy<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>)<span class="sc">}</span><span class="vs">% correct </span><span class="sc">${</span>feedback<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb43-53"><a href="#cb43-53"></a><span class="vs">                      &lt;p&gt;Press R for red, G for green, B for blue, Y for yellow&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb43-54"><a href="#cb43-54"></a>          }<span class="op">,</span></span>
<span id="cb43-55"><a href="#cb43-55"></a>          <span class="dt">choices</span><span class="op">:</span> [<span class="st">"r"</span><span class="op">,</span> <span class="st">"g"</span><span class="op">,</span> <span class="st">"b"</span><span class="op">,</span> <span class="st">"y"</span>]<span class="op">,</span></span>
<span id="cb43-56"><a href="#cb43-56"></a>          <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb43-57"><a href="#cb43-57"></a>          <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb43-58"><a href="#cb43-58"></a>              <span class="dt">task</span><span class="op">:</span> <span class="st">"stroop"</span><span class="op">,</span></span>
<span id="cb43-59"><a href="#cb43-59"></a>              <span class="dt">word</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"word"</span>)<span class="op">,</span></span>
<span id="cb43-60"><a href="#cb43-60"></a>              <span class="dt">color</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"color"</span>)</span>
<span id="cb43-61"><a href="#cb43-61"></a>          }<span class="op">,</span></span>
<span id="cb43-62"><a href="#cb43-62"></a>          <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb43-63"><a href="#cb43-63"></a>              <span class="kw">let</span> colorKeyMap <span class="op">=</span> {</span>
<span id="cb43-64"><a href="#cb43-64"></a>                  <span class="st">"r"</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span></span>
<span id="cb43-65"><a href="#cb43-65"></a>                  <span class="st">"g"</span><span class="op">:</span> <span class="st">"green"</span><span class="op">,</span> </span>
<span id="cb43-66"><a href="#cb43-66"></a>                  <span class="st">"b"</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span></span>
<span id="cb43-67"><a href="#cb43-67"></a>                  <span class="st">"y"</span><span class="op">:</span> <span class="st">"yellow"</span></span>
<span id="cb43-68"><a href="#cb43-68"></a>              }<span class="op">;</span></span>
<span id="cb43-69"><a href="#cb43-69"></a>              data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> colorKeyMap[data<span class="op">.</span><span class="at">response</span>] <span class="op">===</span> data<span class="op">.</span><span class="at">color</span><span class="op">;</span></span>
<span id="cb43-70"><a href="#cb43-70"></a>          }</span>
<span id="cb43-71"><a href="#cb43-71"></a>      }</span>
<span id="cb43-72"><a href="#cb43-72"></a>  ]<span class="op">,</span></span>
<span id="cb43-73"><a href="#cb43-73"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb43-74"><a href="#cb43-74"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span>}<span class="op">,</span></span>
<span id="cb43-75"><a href="#cb43-75"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span>}<span class="op">,</span></span>
<span id="cb43-76"><a href="#cb43-76"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"green"</span>}<span class="op">,</span></span>
<span id="cb43-77"><a href="#cb43-77"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"RED"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"yellow"</span>}<span class="op">,</span></span>
<span id="cb43-78"><a href="#cb43-78"></a></span>
<span id="cb43-79"><a href="#cb43-79"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span>}<span class="op">,</span></span>
<span id="cb43-80"><a href="#cb43-80"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span>}<span class="op">,</span></span>
<span id="cb43-81"><a href="#cb43-81"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"green"</span>}<span class="op">,</span></span>
<span id="cb43-82"><a href="#cb43-82"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"BLUE"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"yellow"</span>}<span class="op">,</span></span>
<span id="cb43-83"><a href="#cb43-83"></a></span>
<span id="cb43-84"><a href="#cb43-84"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"GREEN"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span>}<span class="op">,</span></span>
<span id="cb43-85"><a href="#cb43-85"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"GREEN"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span>}<span class="op">,</span></span>
<span id="cb43-86"><a href="#cb43-86"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"GREEN"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"green"</span>}<span class="op">,</span></span>
<span id="cb43-87"><a href="#cb43-87"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"GREEN"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"yellow"</span>}<span class="op">,</span></span>
<span id="cb43-88"><a href="#cb43-88"></a></span>
<span id="cb43-89"><a href="#cb43-89"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"YELLOW"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span>}<span class="op">,</span></span>
<span id="cb43-90"><a href="#cb43-90"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"YELLOW"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span>}<span class="op">,</span></span>
<span id="cb43-91"><a href="#cb43-91"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"YELLOW"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"green"</span>}<span class="op">,</span></span>
<span id="cb43-92"><a href="#cb43-92"></a>    {<span class="dt">word</span><span class="op">:</span> <span class="st">"YELLOW"</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"yellow"</span>}<span class="op">,</span></span>
<span id="cb43-93"><a href="#cb43-93"></a>  ]<span class="op">,</span></span>
<span id="cb43-94"><a href="#cb43-94"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb43-95"><a href="#cb43-95"></a>  <span class="dt">repetitions</span><span class="op">:</span> <span class="dv">4</span></span>
<span id="cb43-96"><a href="#cb43-96"></a>}</span>
<span id="cb43-97"><a href="#cb43-97"></a></span>
<span id="cb43-98"><a href="#cb43-98"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb43-99"><a href="#cb43-99"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb43-100"><a href="#cb43-100"></a>  welcome<span class="op">,</span></span>
<span id="cb43-101"><a href="#cb43-101"></a>  stroop</span>
<span id="cb43-102"><a href="#cb43-102"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb44-1"><a href="#cb44-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-8-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-4-tab">
<div id="demo-container-8" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-8" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n// 2. Define our trials\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `<p>Welcome to the Experiment!</p>\n              <p>Press any key to begin.</p>`,\n  choices: &quot;ALL_KEYS&quot;, \n  post_trial_gap: 250\n}\n\nlet stroop ={\n  timeline: [\n      {\n          type: jsPsychHtmlKeyboardResponse,\n          stimulus: function(){\n                        let output = `<p style=&quot;font-size: 48px; color: ${jsPsych.evaluateTimelineVariable(&quot;color&quot;)};&quot;>\n                                        ${jsPsych.evaluateTimelineVariable(&quot;word&quot;)}\n                                      </p>`\n                        return output\n          },\n          prompt: function() {\n              // Get the last 5 trials (excluding practice/instruction trials)\n              let recentTrials = jsPsych.data.get()\n                  .filter({task: &quot;stroop&quot;})\n                  .last(5);\n      \n              if (recentTrials.count() < 5) {\n                  return &quot;<p>Press R for red, G for green, B for blue, Y for yellow</p>&quot;;\n              }\n      \n              // Calculate average RT and accuracy\n              let avgRT = Math.round(recentTrials.select(&quot;rt&quot;).mean());\n              let accuracy = (recentTrials.filter({correct: true}).count() / 5) * 100;\n      \n              // Determine feedback message\n              let feedback = &quot;&quot;;\n              if (accuracy < 80) {\n                  feedback = &quot;[Too many errors - focus on accuracy!]&quot;;\n              } else if (avgRT > 1000) {\n                  feedback = &quot;[Too slow - try to respond faster!]&quot;;\n              } else if (accuracy >= 90 &amp;&amp; avgRT <= 700) {\n                  feedback = &quot;[Great job - fast and accurate!]&quot;;\n              } else if (accuracy >= 85) {\n                  feedback = &quot;[Good accuracy!]&quot;;\n              } else {\n                  feedback = &quot;[Keep it up!]&quot;;\n              }\n      \n              return `<p>Last 5 trials: ${avgRT}ms average, ${accuracy.toFixed(0)}% correct ${feedback}</p>\n                      <p>Press R for red, G for green, B for blue, Y for yellow</p>`;\n          },\n          choices: [&quot;r&quot;, &quot;g&quot;, &quot;b&quot;, &quot;y&quot;],\n          post_trial_gap: 500,\n          data: {\n              task: &quot;stroop&quot;,\n              word: jsPsych.timelineVariable(&quot;word&quot;),\n              color: jsPsych.timelineVariable(&quot;color&quot;)\n          },\n          on_finish: function(data) {\n              let colorKeyMap = {\n                  &quot;r&quot;: &quot;red&quot;,\n                  &quot;g&quot;: &quot;green&quot;, \n                  &quot;b&quot;: &quot;blue&quot;,\n                  &quot;y&quot;: &quot;yellow&quot;\n              };\n              data.correct = colorKeyMap[data.response] === data.color;\n          }\n      }\n  ],\n  timeline_variables: [\n    {word: &quot;RED&quot;, color: &quot;red&quot;},\n    {word: &quot;RED&quot;, color: &quot;blue&quot;},\n    {word: &quot;RED&quot;, color: &quot;green&quot;},\n    {word: &quot;RED&quot;, color: &quot;yellow&quot;},\n\n    {word: &quot;BLUE&quot;, color: &quot;red&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;blue&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;green&quot;},\n    {word: &quot;BLUE&quot;, color: &quot;yellow&quot;},\n\n    {word: &quot;GREEN&quot;, color: &quot;red&quot;},\n    {word: &quot;GREEN&quot;, color: &quot;blue&quot;},\n    {word: &quot;GREEN&quot;, color: &quot;green&quot;},\n    {word: &quot;GREEN&quot;, color: &quot;yellow&quot;},\n\n    {word: &quot;YELLOW&quot;, color: &quot;red&quot;},\n    {word: &quot;YELLOW&quot;, color: &quot;blue&quot;},\n    {word: &quot;YELLOW&quot;, color: &quot;green&quot;},\n    {word: &quot;YELLOW&quot;, color: &quot;yellow&quot;},\n  ],\n  randomize_order: true,\n  repetitions: 4\n}\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n  welcome,\n  stroop\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-8');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-8" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});


// 2. Define our trials
const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `<p>Welcome to the Experiment!</p>
              <p>Press any key to begin.</p>`,
  choices: &quot;ALL_KEYS&quot;, 
  post_trial_gap: 250
}

let stroop ={
  timeline: [
      {
          type: jsPsychHtmlKeyboardResponse,
          stimulus: function(){
                        let output = `<p style=&quot;font-size: 48px; color: ${jsPsych.evaluateTimelineVariable(&quot;color&quot;)};&quot;>
                                        ${jsPsych.evaluateTimelineVariable(&quot;word&quot;)}
                                      </p>`
                        return output
          },
          prompt: function() {
              // Get the last 5 trials (excluding practice/instruction trials)
              let recentTrials = jsPsych.data.get()
                  .filter({task: &quot;stroop&quot;})
                  .last(5);
      
              if (recentTrials.count() < 5) {
                  return &quot;<p>Press R for red, G for green, B for blue, Y for yellow</p>&quot;;
              }
      
              // Calculate average RT and accuracy
              let avgRT = Math.round(recentTrials.select(&quot;rt&quot;).mean());
              let accuracy = (recentTrials.filter({correct: true}).count() / 5) * 100;
      
              // Determine feedback message
              let feedback = &quot;&quot;;
              if (accuracy < 80) {
                  feedback = &quot;[Too many errors - focus on accuracy!]&quot;;
              } else if (avgRT > 1000) {
                  feedback = &quot;[Too slow - try to respond faster!]&quot;;
              } else if (accuracy >= 90 &amp;&amp; avgRT <= 700) {
                  feedback = &quot;[Great job - fast and accurate!]&quot;;
              } else if (accuracy >= 85) {
                  feedback = &quot;[Good accuracy!]&quot;;
              } else {
                  feedback = &quot;[Keep it up!]&quot;;
              }
      
              return `<p>Last 5 trials: ${avgRT}ms average, ${accuracy.toFixed(0)}% correct ${feedback}</p>
                      <p>Press R for red, G for green, B for blue, Y for yellow</p>`;
          },
          choices: [&quot;r&quot;, &quot;g&quot;, &quot;b&quot;, &quot;y&quot;],
          post_trial_gap: 500,
          data: {
              task: &quot;stroop&quot;,
              word: jsPsych.timelineVariable(&quot;word&quot;),
              color: jsPsych.timelineVariable(&quot;color&quot;)
          },
          on_finish: function(data) {
              let colorKeyMap = {
                  &quot;r&quot;: &quot;red&quot;,
                  &quot;g&quot;: &quot;green&quot;, 
                  &quot;b&quot;: &quot;blue&quot;,
                  &quot;y&quot;: &quot;yellow&quot;
              };
              data.correct = colorKeyMap[data.response] === data.color;
          }
      }
  ],
  timeline_variables: [
    {word: &quot;RED&quot;, color: &quot;red&quot;},
    {word: &quot;RED&quot;, color: &quot;blue&quot;},
    {word: &quot;RED&quot;, color: &quot;green&quot;},
    {word: &quot;RED&quot;, color: &quot;yellow&quot;},

    {word: &quot;BLUE&quot;, color: &quot;red&quot;},
    {word: &quot;BLUE&quot;, color: &quot;blue&quot;},
    {word: &quot;BLUE&quot;, color: &quot;green&quot;},
    {word: &quot;BLUE&quot;, color: &quot;yellow&quot;},

    {word: &quot;GREEN&quot;, color: &quot;red&quot;},
    {word: &quot;GREEN&quot;, color: &quot;blue&quot;},
    {word: &quot;GREEN&quot;, color: &quot;green&quot;},
    {word: &quot;GREEN&quot;, color: &quot;yellow&quot;},

    {word: &quot;YELLOW&quot;, color: &quot;red&quot;},
    {word: &quot;YELLOW&quot;, color: &quot;blue&quot;},
    {word: &quot;YELLOW&quot;, color: &quot;green&quot;},
    {word: &quot;YELLOW&quot;, color: &quot;yellow&quot;},
  ],
  randomize_order: true,
  repetitions: 4
}

// 3. Run jsPsych with our trials
jsPsych.run([
  welcome,
  stroop
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-8&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-8&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="summary" class="level2" data-number="17.8">
<h2 data-number="17.8" class="anchored" data-anchor-id="summary"><span class="header-section-number">17.8</span> Summary</h2>
<p>Dynamic parameters offer significant advantages over static values. By replacing parameters with functions, you can build adaptive experiments that provide personalized feedback, adjust difficulty based on performance, and create complex HTML displays that update with timeline variables. This would not be possible with pre-defined timeline variables alone.</p>
<p>The key insight is straightforward: any jsPsych parameter can become dynamic by replacing it with a function that returns the appropriate format. This transforms your static experiment into one that responds to individual participant behaviour. Keep three important points in mind if you’re adding dynamic parameters: use <code>jsPsych.evaluateTimelineVariable()</code> within functions, save any dynamic parameters you want to analyze, and ensure your functions return values in the format jsPsych expects.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./16-L06.html" class="pagination-link" aria-label="Lab 6: Creativity">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Lab 6: Creativity</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./18-L07.html" class="pagination-link" aria-label="Lab 7: Spatial Attention">
        <span class="nav-page-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Lab 7: Spatial Attention</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/17-dynamic-html.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>