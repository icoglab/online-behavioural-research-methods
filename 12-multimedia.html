<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="An open source textbook for psychology students learning programming and online research methods.Primary Author: Nicholaus P. Brosowsky Co-Authors: Liam Yeo, Jackie Spear">

<title>12&nbsp; Multimedia â€“ Online Behavioural Research Methods: Programming with jsPsych</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./13-L05.html" rel="next">
<link href="./11-L04.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e9b5551c1c55c86b42a831a3c09ea90c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-3f322787229840320ce81646bc80a682.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./12-multimedia.html">Unit 5: Multimedia</a></li><li class="breadcrumb-item"><a href="./12-multimedia.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multimedia</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Online Behavioural Research Methods: Programming with jsPsych</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/icoglab/online-behavioural-research-methods" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 1: Fundamentals (I)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">HTML</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">CSS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-L01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lab 1: About Me</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 2: Fundamentals (II)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Javascript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-debugging-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Debugging JavaScript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-L02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lab 2: JS Exercises</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 3: Intro to JsPsych</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-jspsych.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">jsPsych</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-L03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 3: Language &amp; Thought</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 4: Timelines</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-timelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Timelines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-plugins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">More Plugins</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-L04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lab 4: Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 5: Multimedia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-multimedia.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multimedia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-L05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Lab 5: Mental Imagery</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A01_JS_Builtins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">JavaScript Built-in Functions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p>Â© 2024. This work is openly licensed via <a href="https://creativecommons.org/licenses/by-nc/4.0">CC BY NC 4.0</a>.</p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction-to-multimedia-in-online-experiments" id="toc-introduction-to-multimedia-in-online-experiments" class="nav-link active" data-scroll-target="#introduction-to-multimedia-in-online-experiments"><span class="header-section-number">12.1</span> Introduction to Multimedia in Online Experiments</a></li>
  <li><a href="#image-plugins" id="toc-image-plugins" class="nav-link" data-scroll-target="#image-plugins"><span class="header-section-number">12.2</span> Image Plugins</a>
  <ul class="collapse">
  <li><a href="#basic-image-presentation" id="toc-basic-image-presentation" class="nav-link" data-scroll-target="#basic-image-presentation"><span class="header-section-number">12.2.1</span> Basic Image Presentation</a></li>
  <li><a href="#other-image-response-types" id="toc-other-image-response-types" class="nav-link" data-scroll-target="#other-image-response-types"><span class="header-section-number">12.2.2</span> Other Image Response Types</a></li>
  </ul></li>
  <li><a href="#audio-plugins" id="toc-audio-plugins" class="nav-link" data-scroll-target="#audio-plugins"><span class="header-section-number">12.3</span> Audio Plugins</a>
  <ul class="collapse">
  <li><a href="#basic-audio-presentation" id="toc-basic-audio-presentation" class="nav-link" data-scroll-target="#basic-audio-presentation"><span class="header-section-number">12.3.1</span> Basic Audio Presentation</a></li>
  <li><a href="#handling-browser-audio-policies" id="toc-handling-browser-audio-policies" class="nav-link" data-scroll-target="#handling-browser-audio-policies"><span class="header-section-number">12.3.2</span> Handling Browser Audio Policies</a></li>
  <li><a href="#audio-format-compatibility" id="toc-audio-format-compatibility" class="nav-link" data-scroll-target="#audio-format-compatibility"><span class="header-section-number">12.3.3</span> Audio Format Compatibility</a></li>
  <li><a href="#other-audio-response-types" id="toc-other-audio-response-types" class="nav-link" data-scroll-target="#other-audio-response-types"><span class="header-section-number">12.3.4</span> Other Audio Response Types</a></li>
  </ul></li>
  <li><a href="#video-plugins" id="toc-video-plugins" class="nav-link" data-scroll-target="#video-plugins"><span class="header-section-number">12.4</span> Video Plugins</a>
  <ul class="collapse">
  <li><a href="#basic-video-presentation" id="toc-basic-video-presentation" class="nav-link" data-scroll-target="#basic-video-presentation"><span class="header-section-number">12.4.1</span> Basic Video Presentation</a></li>
  <li><a href="#advanced-video-control" id="toc-advanced-video-control" class="nav-link" data-scroll-target="#advanced-video-control"><span class="header-section-number">12.4.2</span> Advanced Video Control</a></li>
  <li><a href="#video-optimization" id="toc-video-optimization" class="nav-link" data-scroll-target="#video-optimization"><span class="header-section-number">12.4.3</span> Video Optimization</a></li>
  <li><a href="#other-video-response-types" id="toc-other-video-response-types" class="nav-link" data-scroll-target="#other-video-response-types"><span class="header-section-number">12.4.4</span> Other Video Response Types</a></li>
  </ul></li>
  <li><a href="#the-importance-of-preloading" id="toc-the-importance-of-preloading" class="nav-link" data-scroll-target="#the-importance-of-preloading"><span class="header-section-number">12.5</span> The Importance of Preloading</a>
  <ul class="collapse">
  <li><a href="#what-happens-without-preloading" id="toc-what-happens-without-preloading" class="nav-link" data-scroll-target="#what-happens-without-preloading"><span class="header-section-number">12.5.1</span> What Happens Without Preloading</a></li>
  <li><a href="#how-preloading-solves-the-problem" id="toc-how-preloading-solves-the-problem" class="nav-link" data-scroll-target="#how-preloading-solves-the-problem"><span class="header-section-number">12.5.2</span> How Preloading Solves the Problem</a></li>
  <li><a href="#manual-preloading" id="toc-manual-preloading" class="nav-link" data-scroll-target="#manual-preloading"><span class="header-section-number">12.5.3</span> Manual Preloading</a></li>
  <li><a href="#preloading-options-and-user-experience" id="toc-preloading-options-and-user-experience" class="nav-link" data-scroll-target="#preloading-options-and-user-experience"><span class="header-section-number">12.5.4</span> Preloading Options and User Experience</a></li>
  <li><a href="#batch-loading-for-large-experiments" id="toc-batch-loading-for-large-experiments" class="nav-link" data-scroll-target="#batch-loading-for-large-experiments"><span class="header-section-number">12.5.5</span> Batch Loading for Large Experiments</a></li>
  </ul></li>
  <li><a href="#embedding-multimedia-in-html-instructions" id="toc-embedding-multimedia-in-html-instructions" class="nav-link" data-scroll-target="#embedding-multimedia-in-html-instructions"><span class="header-section-number">12.6</span> Embedding Multimedia in HTML Instructions</a>
  <ul class="collapse">
  <li><a href="#images" id="toc-images" class="nav-link" data-scroll-target="#images"><span class="header-section-number">12.6.1</span> Images</a></li>
  <li><a href="#audio" id="toc-audio" class="nav-link" data-scroll-target="#audio"><span class="header-section-number">12.6.2</span> Audio</a></li>
  <li><a href="#video" id="toc-video" class="nav-link" data-scroll-target="#video"><span class="header-section-number">12.6.3</span> Video</a></li>
  </ul></li>
  <li><a href="#understanding-file-paths" id="toc-understanding-file-paths" class="nav-link" data-scroll-target="#understanding-file-paths"><span class="header-section-number">12.7</span> Understanding File Paths</a>
  <ul class="collapse">
  <li><a href="#files-in-the-same-directory" id="toc-files-in-the-same-directory" class="nav-link" data-scroll-target="#files-in-the-same-directory"><span class="header-section-number">12.7.1</span> Files in the Same Directory</a></li>
  <li><a href="#files-in-subfolders" id="toc-files-in-subfolders" class="nav-link" data-scroll-target="#files-in-subfolders"><span class="header-section-number">12.7.2</span> Files in Subfolders</a></li>
  <li><a href="#files-outside-the-main-directory" id="toc-files-outside-the-main-directory" class="nav-link" data-scroll-target="#files-outside-the-main-directory"><span class="header-section-number">12.7.3</span> Files Outside the Main Directory</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">12.8</span> Summary</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/12-multimedia.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./12-multimedia.html">Unit 5: Multimedia</a></li><li class="breadcrumb-item"><a href="./12-multimedia.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multimedia</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multimedia</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled" title="learning goals">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
learning goals
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ul>
<li>Understand the importance of preloading multimedia assets</li>
<li>Implement image, audio, and video stimuli using appropriate jsPsych plugins</li>
<li>Embed multimedia content in HTML instructions</li>
<li>Troubleshoot common multimedia issues in online experiments</li>
</ul>
</div>
</div>
</div>
<section id="introduction-to-multimedia-in-online-experiments" class="level2" data-number="12.1">
<h2 data-number="12.1" class="anchored" data-anchor-id="introduction-to-multimedia-in-online-experiments"><span class="header-section-number">12.1</span> Introduction to Multimedia in Online Experiments</h2>
<p>Multimedia content (e.g., images, audio, and video) opens up many possibilities for psychological research. But hereâ€™s the thing: presenting multimedia in web-based experiments is fundamentally different from traditional lab software like E-Prime or PsychoPy. When participants access your experiment through a web browser, multimedia files must be downloaded from your server to their device before they can be displayed. This creates potential timing issues, loading delays, and compatibility problems that could seriously compromise your data quality if not handled properly.</p>
<p>Think about a simple reaction time study where participants respond to visual stimuli as quickly as possible. If your image takes 200ms to load on one trial but 500ms on another, your reaction time measurements become meaninglessâ€”the variability from inconsistent loading times would completely swamp any cognitive effects youâ€™re trying to measure. Similarly, if audio files fail to play on certain browsers, youâ€™ll lose data from those participants in ways that might systematically bias your results.</p>
<p>What makes this even worse, in terms of data collection, is that this could happen and we would never know if the image was delayed or by how much. If we wanted to know how fast someone took to respond to an image, our data would become useless because we wouldnâ€™t know when exactly when the image appeared.</p>
<p>The good news is that jsPsych provides excellent tools for managing these challenges. By understanding how to properly preload multimedia assets, choose appropriate plugins, and handle cross-platform compatibility, you can create experiments that maintain the precision required for psychological research while taking advantage of the accessibility and scalability of web-based testing.</p>
</section>
<section id="image-plugins" class="level2" data-number="12.2">
<h2 data-number="12.2" class="anchored" data-anchor-id="image-plugins"><span class="header-section-number">12.2</span> Image Plugins</h2>
<p>Letâ€™s start with the most commonly used multimedia plugin: <code>jsPsychImageKeyboardResponse.</code> This plugin displays an image and waits for a keyboard response, making it perfect for tasks where participants need to make quick categorical judgments.</p>
<section id="basic-image-presentation" class="level3" data-number="12.2.1">
<h3 data-number="12.2.1" class="anchored" data-anchor-id="basic-image-presentation"><span class="header-section-number">12.2.1</span> Basic Image Presentation</h3>
<p>Hereâ€™s a straightforward example of how to present an image and collect a keyboard response:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">const</span> stroop_trial <span class="op">=</span> {</span>
<span id="cb1-2"><a href="#cb1-2"></a> <span class="dt">type</span><span class="op">:</span> jsPsychImageKeyboardResponse<span class="op">,</span></span>
<span id="cb1-3"><a href="#cb1-3"></a> <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'images/stroop_red_word.png'</span><span class="op">,</span></span>
<span id="cb1-4"><a href="#cb1-4"></a> <span class="dt">choices</span><span class="op">:</span> [<span class="st">'r'</span><span class="op">,</span> <span class="st">'g'</span><span class="op">,</span> <span class="st">'b'</span><span class="op">,</span> <span class="st">'y'</span>]<span class="op">,</span></span>
<span id="cb1-5"><a href="#cb1-5"></a> <span class="dt">prompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press the first letter of the &lt;strong&gt;color&lt;/strong&gt; the word is written in.&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb1-6"><a href="#cb1-6"></a> <span class="dt">stimulus_width</span><span class="op">:</span> <span class="dv">400</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The key parameters here are pretty intuitive and similar to those weâ€™ve already discussed. For example, <code>choices</code> defines which keys participants can press, and <code>prompt</code> lets you add instructions below the image.</p>
<p>The <code>stimulus</code> parameter points to the location of your image file. Itâ€™s important to point it to the proper location so the browser can find it and load it. If the <code>stimulus</code> was simply <code>stroop_red_word.png</code> it would look for the file in the same folder as your experiment files. Like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ðŸ“‚ my_experiment</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>-- ðŸ“„ index.html</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>-- ðŸ“„ exp.js</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>-- ðŸ“„ style.css</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>-- ðŸ–¼ stroop_red_word.png</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>-- ðŸ“‚ jspsych</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this case, it is <code>images/stroop_red_word.png</code> which indicates that it is inside a folder called image, so it expects it to be inside an additional folder called <code>images</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ðŸ“‚ my_experiment</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>-- ðŸ“„ index.html</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>-- ðŸ“„ exp.js</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>-- ðŸ“„ style.css</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>-- ðŸ“‚ images</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    -- ðŸ–¼ stroop_red_word.png</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>-- ðŸ“‚ jspsych</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Again, this organization is important, because if it cannot find the image file, it will not load!</p>
<p>There are other parameters available. In the previous example, we also used <code>stimulus_width</code> (<code>stimulus_height</code> is also available). You only need to set one and it will keep the original aspect ratio to automatically adjust the other.</p>
<p>We wonâ€™t review all of the other parameters available, however I suggest reviewing the <a href="https://www.jspsych.org/v8/plugins/image-keyboard-response/">documentation</a> on your own.</p>
</section>
<section id="other-image-response-types" class="level3" data-number="12.2.2">
<h3 data-number="12.2.2" class="anchored" data-anchor-id="other-image-response-types"><span class="header-section-number">12.2.2</span> Other Image Response Types</h3>
<p>While keyboard responses work great for most experiments, sometimes you need different response methods. jsPsych provides two main alternatives:</p>
<p><strong>Button Responses</strong> (<code>jsPsychImageButtonResponse</code>): Perfect for rating scales, multiple choice questions, or when you want a more intuitive interface. Participants click on labeled buttons instead of remembering key mappings.</p>
<p><strong>Slider Responses</strong> (<code>jsPsychImageSliderResponse</code>): Ideal for continuous ratings like attractiveness, confidence, or emotional intensity. Instead of forcing responses into discrete categories, participants can position a slider along a continuum.</p>
<p>Both of these plugins work very similarly to the keyboard version and they just change how responses are collected. You can find detailed examples and parameter lists in the documentation for each: <a href="https://www.jspsych.org/v8/plugins/image-button-response/" class="uri">https://www.jspsych.org/v8/plugins/image-button-response/</a> and <a href="https://www.jspsych.org/v8/plugins/image-slider-response/" class="uri">https://www.jspsych.org/v8/plugins/image-slider-response/</a>.</p>
</section>
</section>
<section id="audio-plugins" class="level2" data-number="12.3">
<h2 data-number="12.3" class="anchored" data-anchor-id="audio-plugins"><span class="header-section-number">12.3</span> Audio Plugins</h2>
<p>Audio stimuli are essential for language research, auditory perception studies, and providing feedback to participants. The <code>jsPsychAudioKeyboardResponse</code> plugin (<a href="https://www.jspsych.org/v8/plugins/audio-keyboard-response/" class="uri">https://www.jspsych.org/v8/plugins/audio-keyboard-response/</a>) handles audio playback while collecting keyboard responses.</p>
<section id="basic-audio-presentation" class="level3" data-number="12.3.1">
<h3 data-number="12.3.1" class="anchored" data-anchor-id="basic-audio-presentation"><span class="header-section-number">12.3.1</span> Basic Audio Presentation</h3>
<p>Hereâ€™s how to present an audio stimulus and collect a response:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb4-1"><a href="#cb4-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4"></a> <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Demo<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a> <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7"></a> <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8"></a> </span>
<span id="cb4-9"><a href="#cb4-9"></a> <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-audio-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb4-12"><a href="#cb4-12"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span> </span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb4-15"><a href="#cb4-15"></a> <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb4-16"><a href="#cb4-16"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="kw">const</span> preload <span class="op">=</span> {</span>
<span id="cb5-4"><a href="#cb5-4"></a> <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb5-5"><a href="#cb5-5"></a> <span class="dt">audio</span><span class="op">:</span> [<span class="st">'media/speech_green.mp3'</span>]</span>
<span id="cb5-6"><a href="#cb5-6"></a>}</span>
<span id="cb5-7"><a href="#cb5-7"></a></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb5-9"><a href="#cb5-9"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>   <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="vs">    &lt;div style='text-align: center;'&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="vs">      &lt;h2&gt;Welcome to the Auditory Study&lt;/h2&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="vs">      &lt;p&gt;This experiment includes audio content.&lt;/p&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="vs">      &lt;p&gt;Please ensure your speakers or headphones are connected.&lt;/p&gt;</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="vs">      &lt;p&gt;&lt;strong&gt;Press the spacebar to begin.&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="vs">    &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>   <span class="dt">choices</span><span class="op">:</span> <span class="st">'ALL_KEYS'</span><span class="op">,</span> </span>
<span id="cb5-18"><a href="#cb5-18"></a>   <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>}</span>
<span id="cb5-20"><a href="#cb5-20"></a></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="kw">const</span> word_recognition_trial <span class="op">=</span> {</span>
<span id="cb5-22"><a href="#cb5-22"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychAudioKeyboardResponse<span class="op">,</span></span>
<span id="cb5-23"><a href="#cb5-23"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'media/speech_green.mp3'</span><span class="op">,</span></span>
<span id="cb5-24"><a href="#cb5-24"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'1'</span><span class="op">,</span> <span class="st">'2'</span><span class="op">,</span> <span class="st">'3'</span><span class="op">,</span> <span class="st">'4'</span>]<span class="op">,</span></span>
<span id="cb5-25"><a href="#cb5-25"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;How many syllables did you hear?&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb5-26"><a href="#cb5-26"></a>  <span class="dt">response_ends_trial</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb5-27"><a href="#cb5-27"></a>  <span class="dt">trial_ends_after_audio</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb5-28"><a href="#cb5-28"></a>  <span class="dt">response_allowed_while_playing</span><span class="op">:</span> <span class="kw">false</span></span>
<span id="cb5-29"><a href="#cb5-29"></a>}<span class="op">;</span></span>
<span id="cb5-30"><a href="#cb5-30"></a></span>
<span id="cb5-31"><a href="#cb5-31"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb5-32"><a href="#cb5-32"></a>   preload<span class="op">,</span></span>
<span id="cb5-33"><a href="#cb5-33"></a>   welcome<span class="op">,</span></span>
<span id="cb5-34"><a href="#cb5-34"></a>   word_recognition_trial</span>
<span id="cb5-35"><a href="#cb5-35"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div id="demo-container-4" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-4" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
   console.log('Full screen button clicked');
   const htmlContent = '<!DOCTYPE html>\n<html>\n <head>\n <title>Live JsPsych Demo</title>\n <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n <style>\n  /* Paused overlay styles */\n  #paused-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: none;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n  font-family: Arial, sans-serif;\n  }\n\n  #paused-message {\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  max-width: 300px;\n  }\n\n  #paused-message h2 {\n  margin-top: 0;\n  color: #dc3545;\n  font-size: 24px;\n  }\n\n  #paused-message p {\n  color: #666;\n  margin-bottom: 0;\n  font-size: 16px;\n  }\n\n  .pulse {\n  animation: pulse 2s infinite;\n  }\n\n  @keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n  }\n </style>\n </head>\n <body>\n <!-- Paused overlay -->\n <div id=\'paused-overlay\'>\n  <div id=\'paused-message\'>\n  <h2>Demo Paused</h2>\n  <p class=\'pulse\'>Click Anywhere to Resume</p>\n  </div>\n </div>\n </body>\n <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n on_interaction_data_update: function(data) {\n const overlay = document.getElementById(\'paused-overlay\');\n\n if (data.event === \'blur\') {\n  // User clicked away - pause experiment and show overlay\n  jsPsych.pauseExperiment();\n  if (overlay) {\n  overlay.style.display = \'flex\';\n  }\n } else if (data.event === \'focus\') {\n  // User returned - resume experiment and hide overlay\n  jsPsych.resumeExperiment();\n  if (overlay) {\n  overlay.style.display = \'none\';\n  }\n }\n }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n const overlay = document.getElementById(\'paused-overlay\');\n if (overlay) {\n overlay.addEventListener(\'click\', function() {\n  // Focus the window and let the interaction handler resume\n  window.focus();\n });\n }\n});\n\n\n\n\nconst preload = {\n type: jsPsychPreload,\n audio: [\'media/speech_green.mp3\']\n}\n\nconst welcome = {\n type: jsPsychHtmlKeyboardResponse,\n stimulus: `\n <div style=\'text-align: center;\'>\n      <h2>Welcome to the Auditory Study</h2>\n      <p>This experiment includes audio content.</p>\n      <p>Please ensure your speakers or headphones are connected.</p>\n      <p><strong>Press the spacebar to begin.</strong></p>\n    </div>\n `,\n choices: \'ALL_KEYS\', \n post_trial_gap: 500\n}\n\nconst word_recognition_trial = {\n  type: jsPsychAudioKeyboardResponse,\n  stimulus: \'media/speech_green.mp3\',\n  choices: [\'1\', \'2\', \'3\', \'4\'],\n  prompt: \'<p>How many syllables did you hear?</p>\',\n  response_ends_trial: true,\n  trial_ends_after_audio: false,\n  response_allowed_while_playing: false\n};\n\njsPsych.run([\n preload,\n welcome,\n word_recognition_trial\n]);\n \n </script>\n</html>';
   const newWindow = window.open('', '_blank');
   if (newWindow) {
    newWindow.document.write(htmlContent);
    newWindow.document.close();
   } else {
    alert('Pop-up blocked! Please allow pop-ups for this site.');
   }
   " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
   const iframe = document.getElementById('demo-iframe-4');
   const srcdoc = iframe.getAttribute('srcdoc');
   iframe.setAttribute('srcdoc', '');
   setTimeout(function() {
    iframe.setAttribute('srcdoc', srcdoc);
   }, 10);
   " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-4" srcdoc="<!DOCTYPE html>
<html>
 <head>
 <title>Live JsPsych Demo</title>
 <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
 <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
 <style>
  /* Paused overlay styles */
  #paused-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-family: Arial, sans-serif;
  }

  #paused-message {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  max-width: 300px;
  }

  #paused-message h2 {
  margin-top: 0;
  color: #dc3545;
  font-size: 24px;
  }

  #paused-message p {
  color: #666;
  margin-bottom: 0;
  font-size: 16px;
  }

  .pulse {
  animation: pulse 2s infinite;
  }

  @keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
  }
 </style>
 </head>
 <body style='max-height: 300px'>
 <!-- Paused overlay -->
 <div id='paused-overlay'>
  <div id='paused-message'>
  <h2>Demo Paused</h2>
  <p class='pulse'>Click Anywhere to Resume</p>
  </div>
 </div>
 </body>
 <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
 on_interaction_data_update: function(data) {
 const overlay = document.getElementById('paused-overlay');

 if (data.event === 'blur') {
  // User clicked away - pause experiment and show overlay
  jsPsych.pauseExperiment();
  if (overlay) {
  overlay.style.display = 'flex';
  }
 } else if (data.event === 'focus') {
  // User returned - resume experiment and hide overlay
  jsPsych.resumeExperiment();
  if (overlay) {
  overlay.style.display = 'none';
  }
 }
 }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
 const overlay = document.getElementById('paused-overlay');
 if (overlay) {
 overlay.addEventListener('click', function() {
  // Focus the window and let the interaction handler resume
  window.focus();
 });
 }
});




const preload = {
 type: jsPsychPreload,
 audio: ['media/speech_green.mp3']
}

const welcome = {
 type: jsPsychHtmlKeyboardResponse,
 stimulus: `
 <div style='text-align: center;'>
      <h2>Welcome to the Auditory Study</h2>
      <p>This experiment includes audio content.</p>
      <p>Please ensure your speakers or headphones are connected.</p>
      <p><strong>Press the spacebar to begin.</strong></p>
    </div>
 `,
 choices: 'ALL_KEYS', 
 post_trial_gap: 500
}

const word_recognition_trial = {
  type: jsPsychAudioKeyboardResponse,
  stimulus: 'media/speech_green.mp3',
  choices: ['1', '2', '3', '4'],
  prompt: '<p>How many syllables did you hear?</p>',
  response_ends_trial: true,
  trial_ends_after_audio: false,
  response_allowed_while_playing: false
};

jsPsych.run([
 preload,
 welcome,
 word_recognition_trial
]);
 
 </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
  const container = document.getElementById(&quot;demo-container-4&quot;);
  const indicator = container.querySelector(&quot;.focus-indicator-4&quot;);

  function showFocus() {
   container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
   if (indicator) {
   indicator.textContent = &quot;âœ“ Demo Active&quot;;
   indicator.style.color = &quot;#28a745&quot;;
   }
  }

  function hideFocus() {
   container.style.boxShadow = &quot;none&quot;;
   if (indicator) {
   indicator.textContent = &quot;Click inside the demo to activate&quot;;
   indicator.style.color = &quot;#6c757d&quot;;
   }
  }

  const iframeWindow = iframe.contentWindow;
  if (iframeWindow) {
   iframeWindow.onfocus = showFocus;
   iframeWindow.onblur = hideFocus;
   iframeWindow.document.addEventListener(&quot;click&quot;, function() {
   iframeWindow.focus();
   showFocus();
   });
   document.addEventListener(&quot;click&quot;, function(e) {
   if (!container.contains(e.target)) {
    iframeWindow.blur();
    hideFocus();
   }
   });
  }
  }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="handling-browser-audio-policies" class="level3" data-number="12.3.2">
<h3 data-number="12.3.2" class="anchored" data-anchor-id="handling-browser-audio-policies"><span class="header-section-number">12.3.2</span> Handling Browser Audio Policies</h3>
<p>Hereâ€™s something that may trip you up: modern browsers wonâ€™t play audio automatically until the user has interacted with the page. This is a security feature to prevent websites from blasting unwanted sounds, but it can disrupt your experiment if not handled properly.</p>
<p>The solution is simple: make sure participants interact with your experiment before any audio trials begin. In the previous example, I had a â€œWelcomeâ€ screen appear first. This required you to interact with the site before the first trial.</p>
<p>This initial interaction satisfies the browserâ€™s requirement while also giving you a chance to remind participants about audio settings.</p>
</section>
<section id="audio-format-compatibility" class="level3" data-number="12.3.3">
<h3 data-number="12.3.3" class="anchored" data-anchor-id="audio-format-compatibility"><span class="header-section-number">12.3.3</span> Audio Format Compatibility</h3>
<p>Different browsers support different audio formats, though MP3 files work almost everywhere. For maximum compatibility, you can provide multiple formats and let the browser pick the first one it supports:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">const</span> cross_platform_audio <span class="op">=</span> {</span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychAudioKeyboardResponse<span class="op">,</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>    <span class="dt">stimulus</span><span class="op">:</span> [</span>
<span id="cb6-4"><a href="#cb6-4"></a>        <span class="st">'audio/word.mp3'</span><span class="op">,</span>  <span class="co">// Primary format</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>        <span class="st">'audio/word.wav'</span>   <span class="co">// Fallback option</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>    ]<span class="op">,</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]</span>
<span id="cb6-8"><a href="#cb6-8"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If, for some reason, the participantâ€™s browser does not support the <code>.mp3</code> format, it will try the next option which is a <code>.wav</code> format. Keep in mind these different files need to be present in your folder in order for this to work!</p>
</section>
<section id="other-audio-response-types" class="level3" data-number="12.3.4">
<h3 data-number="12.3.4" class="anchored" data-anchor-id="other-audio-response-types"><span class="header-section-number">12.3.4</span> Other Audio Response Types</h3>
<p>Like the image plugins, audio also has button and slider response variants (<code>jsPsychAudioButtonResponse</code> and <code>jsPsychAudioSliderResponse</code>) that work the same way but collect different types of responses.</p>
<p>You can read more about those in the documentation: <a href="https://www.jspsych.org/v8/plugins/audio-button-response/" class="uri">https://www.jspsych.org/v8/plugins/audio-button-response/</a> and <a href="https://www.jspsych.org/v8/plugins/canvas-slider-response/" class="uri">https://www.jspsych.org/v8/plugins/canvas-slider-response/</a>.</p>
</section>
</section>
<section id="video-plugins" class="level2" data-number="12.4">
<h2 data-number="12.4" class="anchored" data-anchor-id="video-plugins"><span class="header-section-number">12.4</span> Video Plugins</h2>
<p>The <code>jsPsychVideoKeyboardResponse</code> plugin provides comprehensive video playback control.</p>
<section id="basic-video-presentation" class="level3" data-number="12.4.1">
<h3 data-number="12.4.1" class="anchored" data-anchor-id="basic-video-presentation"><span class="header-section-number">12.4.1</span> Basic Video Presentation</h3>
<p>Hereâ€™s a basic video trial:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb7-1"><a href="#cb7-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a> <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Demo<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a> <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a> <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb7-8"><a href="#cb7-8"></a> </span>
<span id="cb7-9"><a href="#cb7-9"></a> <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb7-10"><a href="#cb7-10"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-video-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb7-11"><a href="#cb7-11"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb7-12"><a href="#cb7-12"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb7-15"><a href="#cb7-15"></a> <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb7-16"><a href="#cb7-16"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="kw">const</span> preload <span class="op">=</span> {</span>
<span id="cb8-4"><a href="#cb8-4"></a> <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb8-5"><a href="#cb8-5"></a> <span class="dt">video</span><span class="op">:</span> [<span class="st">'media/starfield.mp4'</span>]</span>
<span id="cb8-6"><a href="#cb8-6"></a>}</span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="vs">    &lt;div style='text-align: center;'&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="vs">      &lt;h2&gt;Welcome to the Video Study&lt;/h2&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="vs">      &lt;p&gt;This experiment includes video content.&lt;/p&gt;</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="vs">      &lt;p&gt;Please ensure your speakers or headphones are connected.&lt;/p&gt;</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="vs">      &lt;p&gt;&lt;strong&gt;Press the spacebar to begin.&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="vs">    &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">'ALL_KEYS'</span><span class="op">,</span> </span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>}</span>
<span id="cb8-20"><a href="#cb8-20"></a></span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="kw">const</span> video_trial <span class="op">=</span> {</span>
<span id="cb8-22"><a href="#cb8-22"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychVideoKeyboardResponse<span class="op">,</span></span>
<span id="cb8-23"><a href="#cb8-23"></a>  <span class="dt">stimulus</span><span class="op">:</span> [<span class="st">'media/starfield.mp4'</span>]<span class="op">,</span></span>
<span id="cb8-24"><a href="#cb8-24"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'r'</span><span class="op">,</span> <span class="st">'g'</span><span class="op">,</span> <span class="st">'b'</span>]<span class="op">,</span></span>
<span id="cb8-25"><a href="#cb8-25"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;What is the dominant color? (R = red, G = green B = blue).&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb8-26"><a href="#cb8-26"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">320</span><span class="op">,</span></span>
<span id="cb8-27"><a href="#cb8-27"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">240</span><span class="op">,</span></span>
<span id="cb8-28"><a href="#cb8-28"></a>  <span class="dt">autoplay</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb8-29"><a href="#cb8-29"></a>  <span class="dt">controls</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="co">// Hide video controls from participants</span></span>
<span id="cb8-30"><a href="#cb8-30"></a>}<span class="op">;</span></span>
<span id="cb8-31"><a href="#cb8-31"></a></span>
<span id="cb8-32"><a href="#cb8-32"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb8-33"><a href="#cb8-33"></a> preload<span class="op">,</span></span>
<span id="cb8-34"><a href="#cb8-34"></a> welcome<span class="op">,</span></span>
<span id="cb8-35"><a href="#cb8-35"></a> video_trial</span>
<span id="cb8-36"><a href="#cb8-36"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div id="demo-container-6" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-6" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
   console.log('Full screen button clicked');
   const htmlContent = '<!DOCTYPE html>\n<html>\n <head>\n <title>Live JsPsych Demo</title>\n <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n <style>\n  /* Paused overlay styles */\n  #paused-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: none;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n  font-family: Arial, sans-serif;\n  }\n\n  #paused-message {\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  max-width: 300px;\n  }\n\n  #paused-message h2 {\n  margin-top: 0;\n  color: #dc3545;\n  font-size: 24px;\n  }\n\n  #paused-message p {\n  color: #666;\n  margin-bottom: 0;\n  font-size: 16px;\n  }\n\n  .pulse {\n  animation: pulse 2s infinite;\n  }\n\n  @keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n  }\n </style>\n </head>\n <body>\n <!-- Paused overlay -->\n <div id=\'paused-overlay\'>\n  <div id=\'paused-message\'>\n  <h2>Demo Paused</h2>\n  <p class=\'pulse\'>Click Anywhere to Resume</p>\n  </div>\n </div>\n </body>\n <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n on_interaction_data_update: function(data) {\n const overlay = document.getElementById(\'paused-overlay\');\n\n if (data.event === \'blur\') {\n  // User clicked away - pause experiment and show overlay\n  jsPsych.pauseExperiment();\n  if (overlay) {\n  overlay.style.display = \'flex\';\n  }\n } else if (data.event === \'focus\') {\n  // User returned - resume experiment and hide overlay\n  jsPsych.resumeExperiment();\n  if (overlay) {\n  overlay.style.display = \'none\';\n  }\n }\n }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n const overlay = document.getElementById(\'paused-overlay\');\n if (overlay) {\n overlay.addEventListener(\'click\', function() {\n  // Focus the window and let the interaction handler resume\n  window.focus();\n });\n }\n});\n\n\n\n\nconst preload = {\n type: jsPsychPreload,\n video: [\'media/starfield.mp4\']\n}\n\nconst welcome = {\n type: jsPsychHtmlKeyboardResponse,\n stimulus: `\n <div style=\'text-align: center;\'>\n      <h2>Welcome to the Video Study</h2>\n      <p>This experiment includes video content.</p>\n      <p>Please ensure your speakers or headphones are connected.</p>\n      <p><strong>Press the spacebar to begin.</strong></p>\n    </div>\n `,\n choices: \'ALL_KEYS\', \n post_trial_gap: 500\n}\n\nconst video_trial = {\n  type: jsPsychVideoKeyboardResponse,\n  stimulus: [\'media/starfield.mp4\'],\n  choices: [\'r\', \'g\', \'b\'],\n  prompt: `<p>What is the dominant color? (R = red, G = green B = blue).</p>`,\n  width: 320,\n  height: 240,\n  autoplay: true,\n  controls: false, // Hide video controls from participants\n};\n\njsPsych.run([\n preload,\n welcome,\n video_trial\n]);\n \n </script>\n</html>';
   const newWindow = window.open('', '_blank');
   if (newWindow) {
    newWindow.document.write(htmlContent);
    newWindow.document.close();
   } else {
    alert('Pop-up blocked! Please allow pop-ups for this site.');
   }
   " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
   const iframe = document.getElementById('demo-iframe-6');
   const srcdoc = iframe.getAttribute('srcdoc');
   iframe.setAttribute('srcdoc', '');
   setTimeout(function() {
    iframe.setAttribute('srcdoc', srcdoc);
   }, 10);
   " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-6" srcdoc="<!DOCTYPE html>
<html>
 <head>
 <title>Live JsPsych Demo</title>
 <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
 <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
 <style>
  /* Paused overlay styles */
  #paused-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-family: Arial, sans-serif;
  }

  #paused-message {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  max-width: 300px;
  }

  #paused-message h2 {
  margin-top: 0;
  color: #dc3545;
  font-size: 24px;
  }

  #paused-message p {
  color: #666;
  margin-bottom: 0;
  font-size: 16px;
  }

  .pulse {
  animation: pulse 2s infinite;
  }

  @keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
  }
 </style>
 </head>
 <body style='max-height: 300px'>
 <!-- Paused overlay -->
 <div id='paused-overlay'>
  <div id='paused-message'>
  <h2>Demo Paused</h2>
  <p class='pulse'>Click Anywhere to Resume</p>
  </div>
 </div>
 </body>
 <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
 on_interaction_data_update: function(data) {
 const overlay = document.getElementById('paused-overlay');

 if (data.event === 'blur') {
  // User clicked away - pause experiment and show overlay
  jsPsych.pauseExperiment();
  if (overlay) {
  overlay.style.display = 'flex';
  }
 } else if (data.event === 'focus') {
  // User returned - resume experiment and hide overlay
  jsPsych.resumeExperiment();
  if (overlay) {
  overlay.style.display = 'none';
  }
 }
 }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
 const overlay = document.getElementById('paused-overlay');
 if (overlay) {
 overlay.addEventListener('click', function() {
  // Focus the window and let the interaction handler resume
  window.focus();
 });
 }
});




const preload = {
 type: jsPsychPreload,
 video: ['media/starfield.mp4']
}

const welcome = {
 type: jsPsychHtmlKeyboardResponse,
 stimulus: `
 <div style='text-align: center;'>
      <h2>Welcome to the Video Study</h2>
      <p>This experiment includes video content.</p>
      <p>Please ensure your speakers or headphones are connected.</p>
      <p><strong>Press the spacebar to begin.</strong></p>
    </div>
 `,
 choices: 'ALL_KEYS', 
 post_trial_gap: 500
}

const video_trial = {
  type: jsPsychVideoKeyboardResponse,
  stimulus: ['media/starfield.mp4'],
  choices: ['r', 'g', 'b'],
  prompt: `<p>What is the dominant color? (R = red, G = green B = blue).</p>`,
  width: 320,
  height: 240,
  autoplay: true,
  controls: false, // Hide video controls from participants
};

jsPsych.run([
 preload,
 welcome,
 video_trial
]);
 
 </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
  const container = document.getElementById(&quot;demo-container-6&quot;);
  const indicator = container.querySelector(&quot;.focus-indicator-6&quot;);

  function showFocus() {
   container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
   if (indicator) {
   indicator.textContent = &quot;âœ“ Demo Active&quot;;
   indicator.style.color = &quot;#28a745&quot;;
   }
  }

  function hideFocus() {
   container.style.boxShadow = &quot;none&quot;;
   if (indicator) {
   indicator.textContent = &quot;Click inside the demo to activate&quot;;
   indicator.style.color = &quot;#6c757d&quot;;
   }
  }

  const iframeWindow = iframe.contentWindow;
  if (iframeWindow) {
   iframeWindow.onfocus = showFocus;
   iframeWindow.onblur = hideFocus;
   iframeWindow.document.addEventListener(&quot;click&quot;, function() {
   iframeWindow.focus();
   showFocus();
   });
   document.addEventListener(&quot;click&quot;, function(e) {
   if (!container.contains(e.target)) {
    iframeWindow.blur();
    hideFocus();
   }
   });
  }
  }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="advanced-video-control" class="level3" data-number="12.4.2">
<h3 data-number="12.4.2" class="anchored" data-anchor-id="advanced-video-control"><span class="header-section-number">12.4.2</span> Advanced Video Control</h3>
<p>Videos offer more sophisticated timing options than images or audio. You can show specific segments, adjust playback speed, and control exactly when participants can respond:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb9-1"><a href="#cb9-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4"></a> <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Demo<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5"></a> <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7"></a> <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8"></a> </span>
<span id="cb9-9"><a href="#cb9-9"></a> <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-video-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb9-11"><a href="#cb9-11"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb9-12"><a href="#cb9-12"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb9-15"><a href="#cb9-15"></a> <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb9-16"><a href="#cb9-16"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="kw">const</span> preload <span class="op">=</span> {</span>
<span id="cb10-4"><a href="#cb10-4"></a> <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb10-5"><a href="#cb10-5"></a> <span class="dt">video</span><span class="op">:</span> [<span class="st">'media/starfield_long.mp4'</span>]</span>
<span id="cb10-6"><a href="#cb10-6"></a>}</span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb10-9"><a href="#cb10-9"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb10-10"><a href="#cb10-10"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="vs">    &lt;div style='text-align: center;'&gt;</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="vs">      &lt;h2&gt;Welcome to the Video Study&lt;/h2&gt;</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="vs">      &lt;p&gt;This experiment includes video content.&lt;/p&gt;</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="vs">      &lt;p&gt;Please ensure your speakers or headphones are connected.&lt;/p&gt;</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="vs">      &lt;p&gt;&lt;strong&gt;Press the spacebar to begin.&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="vs">    &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">'ALL_KEYS'</span><span class="op">,</span> </span>
<span id="cb10-18"><a href="#cb10-18"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb10-19"><a href="#cb10-19"></a>}</span>
<span id="cb10-20"><a href="#cb10-20"></a></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="kw">const</span> video_trial <span class="op">=</span> {</span>
<span id="cb10-22"><a href="#cb10-22"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychVideoKeyboardResponse<span class="op">,</span></span>
<span id="cb10-23"><a href="#cb10-23"></a>  <span class="dt">stimulus</span><span class="op">:</span> [<span class="st">'media/starfield_long.mp4'</span>]<span class="op">,</span></span>
<span id="cb10-24"><a href="#cb10-24"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'r'</span><span class="op">,</span> <span class="st">'g'</span><span class="op">,</span> <span class="st">'b'</span>]<span class="op">,</span></span>
<span id="cb10-25"><a href="#cb10-25"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;What is the dominant color? (R = red, G = green B = blue).&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb10-26"><a href="#cb10-26"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">320</span><span class="op">,</span></span>
<span id="cb10-27"><a href="#cb10-27"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">240</span><span class="op">,</span></span>
<span id="cb10-28"><a href="#cb10-28"></a>  <span class="dt">autoplay</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb10-29"><a href="#cb10-29"></a>  <span class="dt">controls</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="co">// Hide video controls from participants</span></span>
<span id="cb10-30"><a href="#cb10-30"></a>  </span>
<span id="cb10-31"><a href="#cb10-31"></a>  <span class="dt">start</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="co">// Start 15 seconds into video</span></span>
<span id="cb10-32"><a href="#cb10-32"></a>  <span class="dt">stop</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span>  <span class="co">// Stop at 25 seconds (10-second clip)</span></span>
<span id="cb10-33"><a href="#cb10-33"></a>  <span class="dt">rate</span><span class="op">:</span> <span class="fl">1.2</span><span class="op">,</span> <span class="co">// Play at 1.2x speed</span></span>
<span id="cb10-34"><a href="#cb10-34"></a></span>
<span id="cb10-35"><a href="#cb10-35"></a>  <span class="dt">response_allowed_while_playing</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb10-36"><a href="#cb10-36"></a>  <span class="dt">response_ends_trial</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb10-37"><a href="#cb10-37"></a>}<span class="op">;</span></span>
<span id="cb10-38"><a href="#cb10-38"></a></span>
<span id="cb10-39"><a href="#cb10-39"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb10-40"><a href="#cb10-40"></a> preload<span class="op">,</span></span>
<span id="cb10-41"><a href="#cb10-41"></a> welcome<span class="op">,</span></span>
<span id="cb10-42"><a href="#cb10-42"></a> video_trial</span>
<span id="cb10-43"><a href="#cb10-43"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div id="demo-container-7" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-7" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
   console.log('Full screen button clicked');
   const htmlContent = '<!DOCTYPE html>\n<html>\n <head>\n <title>Live JsPsych Demo</title>\n <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n <style>\n  /* Paused overlay styles */\n  #paused-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: none;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n  font-family: Arial, sans-serif;\n  }\n\n  #paused-message {\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  max-width: 300px;\n  }\n\n  #paused-message h2 {\n  margin-top: 0;\n  color: #dc3545;\n  font-size: 24px;\n  }\n\n  #paused-message p {\n  color: #666;\n  margin-bottom: 0;\n  font-size: 16px;\n  }\n\n  .pulse {\n  animation: pulse 2s infinite;\n  }\n\n  @keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n  }\n </style>\n </head>\n <body>\n <!-- Paused overlay -->\n <div id=\'paused-overlay\'>\n  <div id=\'paused-message\'>\n  <h2>Demo Paused</h2>\n  <p class=\'pulse\'>Click Anywhere to Resume</p>\n  </div>\n </div>\n </body>\n <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n on_interaction_data_update: function(data) {\n const overlay = document.getElementById(\'paused-overlay\');\n\n if (data.event === \'blur\') {\n  // User clicked away - pause experiment and show overlay\n  jsPsych.pauseExperiment();\n  if (overlay) {\n  overlay.style.display = \'flex\';\n  }\n } else if (data.event === \'focus\') {\n  // User returned - resume experiment and hide overlay\n  jsPsych.resumeExperiment();\n  if (overlay) {\n  overlay.style.display = \'none\';\n  }\n }\n }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n const overlay = document.getElementById(\'paused-overlay\');\n if (overlay) {\n overlay.addEventListener(\'click\', function() {\n  // Focus the window and let the interaction handler resume\n  window.focus();\n });\n }\n});\n\n\n\n\nconst preload = {\n type: jsPsychPreload,\n video: [\'media/starfield_long.mp4\']\n}\n\nconst welcome = {\n type: jsPsychHtmlKeyboardResponse,\n stimulus: `\n <div style=\'text-align: center;\'>\n      <h2>Welcome to the Video Study</h2>\n      <p>This experiment includes video content.</p>\n      <p>Please ensure your speakers or headphones are connected.</p>\n      <p><strong>Press the spacebar to begin.</strong></p>\n    </div>\n `,\n choices: \'ALL_KEYS\', \n post_trial_gap: 500\n}\n\nconst video_trial = {\n  type: jsPsychVideoKeyboardResponse,\n  stimulus: [\'media/starfield_long.mp4\'],\n  choices: [\'r\', \'g\', \'b\'],\n  prompt: `<p>What is the dominant color? (R = red, G = green B = blue).</p>`,\n  width: 320,\n  height: 240,\n  autoplay: true,\n  controls: false, // Hide video controls from participants\n  start: 15, // Start 15 seconds into video\n  stop: 25,  // Stop at 25 seconds (10-second clip)\n  rate: 1.2, // Play at 1.2x speed\n};\n\njsPsych.run([\n preload,\n welcome,\n video_trial\n]);\n \n </script>\n</html>';
   const newWindow = window.open('', '_blank');
   if (newWindow) {
    newWindow.document.write(htmlContent);
    newWindow.document.close();
   } else {
    alert('Pop-up blocked! Please allow pop-ups for this site.');
   }
   " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
   const iframe = document.getElementById('demo-iframe-7');
   const srcdoc = iframe.getAttribute('srcdoc');
   iframe.setAttribute('srcdoc', '');
   setTimeout(function() {
    iframe.setAttribute('srcdoc', srcdoc);
   }, 10);
   " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-7" srcdoc="<!DOCTYPE html>
<html>
 <head>
 <title>Live JsPsych Demo</title>
 <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
 <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
 <style>
  /* Paused overlay styles */
  #paused-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-family: Arial, sans-serif;
  }

  #paused-message {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  max-width: 300px;
  }

  #paused-message h2 {
  margin-top: 0;
  color: #dc3545;
  font-size: 24px;
  }

  #paused-message p {
  color: #666;
  margin-bottom: 0;
  font-size: 16px;
  }

  .pulse {
  animation: pulse 2s infinite;
  }

  @keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
  }
 </style>
 </head>
 <body style='max-height: 300px'>
 <!-- Paused overlay -->
 <div id='paused-overlay'>
  <div id='paused-message'>
  <h2>Demo Paused</h2>
  <p class='pulse'>Click Anywhere to Resume</p>
  </div>
 </div>
 </body>
 <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
 on_interaction_data_update: function(data) {
 const overlay = document.getElementById('paused-overlay');

 if (data.event === 'blur') {
  // User clicked away - pause experiment and show overlay
  jsPsych.pauseExperiment();
  if (overlay) {
  overlay.style.display = 'flex';
  }
 } else if (data.event === 'focus') {
  // User returned - resume experiment and hide overlay
  jsPsych.resumeExperiment();
  if (overlay) {
  overlay.style.display = 'none';
  }
 }
 }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
 const overlay = document.getElementById('paused-overlay');
 if (overlay) {
 overlay.addEventListener('click', function() {
  // Focus the window and let the interaction handler resume
  window.focus();
 });
 }
});




const preload = {
 type: jsPsychPreload,
 video: ['media/starfield_long.mp4']
}

const welcome = {
 type: jsPsychHtmlKeyboardResponse,
 stimulus: `
 <div style='text-align: center;'>
      <h2>Welcome to the Video Study</h2>
      <p>This experiment includes video content.</p>
      <p>Please ensure your speakers or headphones are connected.</p>
      <p><strong>Press the spacebar to begin.</strong></p>
    </div>
 `,
 choices: 'ALL_KEYS', 
 post_trial_gap: 500
}

const video_trial = {
  type: jsPsychVideoKeyboardResponse,
  stimulus: ['media/starfield_long.mp4'],
  choices: ['r', 'g', 'b'],
  prompt: `<p>What is the dominant color? (R = red, G = green B = blue).</p>`,
  width: 320,
  height: 240,
  autoplay: true,
  controls: false, // Hide video controls from participants
  start: 15, // Start 15 seconds into video
  stop: 25,  // Stop at 25 seconds (10-second clip)
  rate: 1.2, // Play at 1.2x speed
};

jsPsych.run([
 preload,
 welcome,
 video_trial
]);
 
 </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
  const container = document.getElementById(&quot;demo-container-7&quot;);
  const indicator = container.querySelector(&quot;.focus-indicator-7&quot;);

  function showFocus() {
   container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
   if (indicator) {
   indicator.textContent = &quot;âœ“ Demo Active&quot;;
   indicator.style.color = &quot;#28a745&quot;;
   }
  }

  function hideFocus() {
   container.style.boxShadow = &quot;none&quot;;
   if (indicator) {
   indicator.textContent = &quot;Click inside the demo to activate&quot;;
   indicator.style.color = &quot;#6c757d&quot;;
   }
  }

  const iframeWindow = iframe.contentWindow;
  if (iframeWindow) {
   iframeWindow.onfocus = showFocus;
   iframeWindow.onblur = hideFocus;
   iframeWindow.document.addEventListener(&quot;click&quot;, function() {
   iframeWindow.focus();
   showFocus();
   });
   document.addEventListener(&quot;click&quot;, function(e) {
   if (!container.contains(e.target)) {
    iframeWindow.blur();
    hideFocus();
   }
   });
  }
  }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="video-optimization" class="level3" data-number="12.4.3">
<h3 data-number="12.4.3" class="anchored" data-anchor-id="video-optimization"><span class="header-section-number">12.4.3</span> Video Optimization</h3>
<p>Video files are typically the largest multimedia assets in your experiment. MP4 files with H.264 encoding provide the best browser compatibility, while WebM offers a good open-source alternative. Like with the images plugin, we can provide fallback formats if weâ€™re concerned about browser compatibility:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">const</span> optimized_video_trial <span class="op">=</span> {</span>
<span id="cb11-2"><a href="#cb11-2"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychVideoKeyboardResponse<span class="op">,</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>    <span class="dt">sources</span><span class="op">:</span> [</span>
<span id="cb11-4"><a href="#cb11-4"></a>        <span class="st">'video/interaction.mp4'</span><span class="op">,</span>    <span class="co">// Primary format</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>        <span class="st">'video/interaction.webm'</span>    <span class="co">// Fallback format</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>    ]<span class="op">,</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">'1'</span><span class="op">,</span> <span class="st">'2'</span><span class="op">,</span> <span class="st">'3'</span><span class="op">,</span> <span class="st">'4'</span><span class="op">,</span> <span class="st">'5'</span>]</span>
<span id="cb11-8"><a href="#cb11-8"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="other-video-response-types" class="level3" data-number="12.4.4">
<h3 data-number="12.4.4" class="anchored" data-anchor-id="other-video-response-types"><span class="header-section-number">12.4.4</span> Other Video Response Types</h3>
<p>As with other multimedia plugins, video also has button and slider response variants available in the jsPsych documentation.</p>
<p>You can read more about those in the documentation: <a href="https://www.jspsych.org/v8/plugins/video-button-response/" class="uri">https://www.jspsych.org/v8/plugins/video-button-response/</a> and <a href="https://www.jspsych.org/v8/plugins/video-slider-response/" class="uri">https://www.jspsych.org/v8/plugins/video-slider-response/</a>.</p>
</section>
</section>
<section id="the-importance-of-preloading" class="level2" data-number="12.5">
<h2 data-number="12.5" class="anchored" data-anchor-id="the-importance-of-preloading"><span class="header-section-number">12.5</span> The Importance of Preloading</h2>
<p>Now that you understand how to present multimedia content, letâ€™s talk about why preloading is incredibly important for any experiment using images, audio, or video.</p>
<section id="what-happens-without-preloading" class="level3" data-number="12.5.1">
<h3 data-number="12.5.1" class="anchored" data-anchor-id="what-happens-without-preloading"><span class="header-section-number">12.5.1</span> What Happens Without Preloading</h3>
<p>Imagine this scenario: youâ€™ve created a beautiful reaction time experiment, but you havenâ€™t preloaded all of your images. Take a look at this example below, that simulates what could happen if you preloaded your first trial image, but did NOT preload the second trial image.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb12-1"><a href="#cb12-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4"></a> <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Demo<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5"></a> <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7"></a> <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb12-8"><a href="#cb12-8"></a> </span>
<span id="cb12-9"><a href="#cb12-9"></a> <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb12-10"><a href="#cb12-10"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-audio-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb12-11"><a href="#cb12-11"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb12-12"><a href="#cb12-12"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb12-15"><a href="#cb12-15"></a> <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb12-16"><a href="#cb12-16"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb13-4"><a href="#cb13-4"></a> <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb13-5"><a href="#cb13-5"></a> <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`Press any key to begin the first trial!`</span><span class="op">,</span></span>
<span id="cb13-6"><a href="#cb13-6"></a> <span class="dt">choices</span><span class="op">:</span> <span class="st">'ALL_KEYS'</span><span class="op">,</span> </span>
<span id="cb13-7"><a href="#cb13-7"></a> <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>}</span>
<span id="cb13-9"><a href="#cb13-9"></a></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="kw">const</span> preload <span class="op">=</span> {</span>
<span id="cb13-11"><a href="#cb13-11"></a> <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb13-12"><a href="#cb13-12"></a> <span class="dt">images</span><span class="op">:</span> [<span class="st">'media/noodle_cropped.jpg'</span>]</span>
<span id="cb13-13"><a href="#cb13-13"></a>}</span>
<span id="cb13-14"><a href="#cb13-14"></a></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="kw">const</span> image_1 <span class="op">=</span> {</span>
<span id="cb13-16"><a href="#cb13-16"></a> <span class="dt">type</span><span class="op">:</span> jsPsychImageKeyboardResponse<span class="op">,</span></span>
<span id="cb13-17"><a href="#cb13-17"></a> <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'media/noodle_cropped.jpg'</span><span class="op">,</span></span>
<span id="cb13-18"><a href="#cb13-18"></a> <span class="dt">stimulus_width</span><span class="op">:</span> <span class="dv">150</span><span class="op">,</span></span>
<span id="cb13-19"><a href="#cb13-19"></a> <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Is this cat happy or sad? Press 'e' for happy and 'i' for sad.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb13-20"><a href="#cb13-20"></a> <span class="dt">choices</span><span class="op">:</span> [<span class="st">'e'</span><span class="op">,</span> <span class="st">'i'</span>]<span class="op">,</span></span>
<span id="cb13-21"><a href="#cb13-21"></a> <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb13-22"><a href="#cb13-22"></a>}</span>
<span id="cb13-23"><a href="#cb13-23"></a></span>
<span id="cb13-24"><a href="#cb13-24"></a><span class="kw">const</span> welcome_2 <span class="op">=</span> {</span>
<span id="cb13-25"><a href="#cb13-25"></a> <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb13-26"><a href="#cb13-26"></a> <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`Press any key to begin the second trial!`</span><span class="op">,</span></span>
<span id="cb13-27"><a href="#cb13-27"></a> <span class="dt">choices</span><span class="op">:</span> <span class="st">'ALL_KEYS'</span><span class="op">,</span> </span>
<span id="cb13-28"><a href="#cb13-28"></a> <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb13-29"><a href="#cb13-29"></a>}</span>
<span id="cb13-30"><a href="#cb13-30"></a></span>
<span id="cb13-31"><a href="#cb13-31"></a><span class="kw">const</span> image_2 <span class="op">=</span> {</span>
<span id="cb13-32"><a href="#cb13-32"></a> <span class="dt">type</span><span class="op">:</span> jsPsychImageKeyboardResponse<span class="op">,</span></span>
<span id="cb13-33"><a href="#cb13-33"></a> <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'media/gatsby_cropped.jpg'</span><span class="op">,</span></span>
<span id="cb13-34"><a href="#cb13-34"></a> <span class="dt">stimulus_width</span><span class="op">:</span> <span class="dv">150</span><span class="op">,</span></span>
<span id="cb13-35"><a href="#cb13-35"></a> <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Is this cat happy or sad? Press 'e' for happy and 'i' for sad.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb13-36"><a href="#cb13-36"></a> <span class="dt">choices</span><span class="op">:</span> [<span class="st">'e'</span><span class="op">,</span> <span class="st">'i'</span>]<span class="op">,</span> </span>
<span id="cb13-37"><a href="#cb13-37"></a> <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb13-38"><a href="#cb13-38"></a></span>
<span id="cb13-39"><a href="#cb13-39"></a>}</span>
<span id="cb13-40"><a href="#cb13-40"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb13-41"><a href="#cb13-41"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb13-42"><a href="#cb13-42"></a> preload<span class="op">,</span></span>
<span id="cb13-43"><a href="#cb13-43"></a> welcome<span class="op">,</span></span>
<span id="cb13-44"><a href="#cb13-44"></a> image_1<span class="op">,</span></span>
<span id="cb13-45"><a href="#cb13-45"></a> welcome_2<span class="op">,</span></span>
<span id="cb13-46"><a href="#cb13-46"></a> image_2</span>
<span id="cb13-47"><a href="#cb13-47"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div id="demo-container-355" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-355" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
   console.log('Full screen button clicked');
   const htmlContent = '<!DOCTYPE html>\n<html>\n <head>\n <title>Live JsPsych Demo</title>\n <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n <style>\n  /* Paused overlay styles */\n  #paused-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: none;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n  font-family: Arial, sans-serif;\n  }\n\n  #paused-message {\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  max-width: 300px;\n  }\n\n  #paused-message h2 {\n  margin-top: 0;\n  color: #dc3545;\n  font-size: 24px;\n  }\n\n  #paused-message p {\n  color: #666;\n  margin-bottom: 0;\n  font-size: 16px;\n  }\n\n  .pulse {\n  animation: pulse 2s infinite;\n  }\n\n  @keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n  }\n </style>\n </head>\n <body>\n <!-- Paused overlay -->\n <div id=\'paused-overlay\'>\n  <div id=\'paused-message\'>\n  <h2>Demo Paused</h2>\n  <p class=\'pulse\'>Click Anywhere to Resume</p>\n  </div>\n </div>\n </body>\n <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n on_interaction_data_update: function(data) {\n const overlay = document.getElementById(\'paused-overlay\');\n\n if (data.event === \'blur\') {\n  // User clicked away - pause experiment and show overlay\n  jsPsych.pauseExperiment();\n  if (overlay) {\n  overlay.style.display = \'flex\';\n  }\n } else if (data.event === \'focus\') {\n  // User returned - resume experiment and hide overlay\n  jsPsych.resumeExperiment();\n  if (overlay) {\n  overlay.style.display = \'none\';\n  }\n }\n }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n const overlay = document.getElementById(\'paused-overlay\');\n if (overlay) {\n overlay.addEventListener(\'click\', function() {\n  // Focus the window and let the interaction handler resume\n  window.focus();\n });\n }\n});\n\n\n// 2. Define our trials\nconst welcome = {\n type: jsPsychHtmlKeyboardResponse,\n stimulus: `Press any key to begin the first trial!`,\n choices: \'ALL_KEYS\', \n post_trial_gap: 500\n}\n\nconst preload = {\n type: jsPsychPreload,\n images: [\'media/noodle_cropped.jpg\', \'media/gatsby_cropped.jpg\']\n}\n\nconst image_1 = {\n type: jsPsychImageKeyboardResponse,\n stimulus: \'media/noodle_cropped.jpg\',\n stimulus_width: 150,\n prompt: `<p>Is this cat happy or sad? Press \'e\' for happy and \'i\' for sad.</p>`,\n choices: [\'e\', \'i\'],\n post_trial_gap: 500\n}\n\nconst welcome_2 = {\n type: jsPsychHtmlKeyboardResponse,\n stimulus: `Press any key to begin the second trial!`,\n choices: \'ALL_KEYS\', \n post_trial_gap: 500\n}\n\nconst delay = {\n type: jsPsychHtmlKeyboardResponse,\n stimulus: \'\',\n prompt: `<p>Is this cat happy or sad? Press \'e\' for happy and \'i\' for sad.</p>`,\n trial_duration: function(){return Math.floor(Math.random() * (800 - 300 + 1)) + 300},\n choices: \'NO_KEYS\'\n}\n\nconst image_2 = {\n type: jsPsychImageKeyboardResponse,\n stimulus: \'media/gatsby_cropped.jpg\',\n stimulus_width: 150,\n prompt: `<p>Is this cat happy or sad? Press \'e\' for happy and \'i\' for sad.</p>`,\n choices: [\'e\', \'i\']\n\n}\n// 3. Run jsPsych with our trials\njsPsych.run([\n preload,\n welcome,\n image_1,\n welcome_2,\n delay,\n image_2\n]);\n \n </script>\n</html>';
   const newWindow = window.open('', '_blank');
   if (newWindow) {
    newWindow.document.write(htmlContent);
    newWindow.document.close();
   } else {
    alert('Pop-up blocked! Please allow pop-ups for this site.');
   }
   " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
   const iframe = document.getElementById('demo-iframe-355');
   const srcdoc = iframe.getAttribute('srcdoc');
   iframe.setAttribute('srcdoc', '');
   setTimeout(function() {
    iframe.setAttribute('srcdoc', srcdoc);
   }, 10);
   " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-355" srcdoc="<!DOCTYPE html>
<html>
 <head>
 <title>Live JsPsych Demo</title>
 <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
 <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
 <style>
  /* Paused overlay styles */
  #paused-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-family: Arial, sans-serif;
  }

  #paused-message {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  max-width: 300px;
  }

  #paused-message h2 {
  margin-top: 0;
  color: #dc3545;
  font-size: 24px;
  }

  #paused-message p {
  color: #666;
  margin-bottom: 0;
  font-size: 16px;
  }

  .pulse {
  animation: pulse 2s infinite;
  }

  @keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
  }
 </style>
 </head>
 <body style='max-height: 300px'>
 <!-- Paused overlay -->
 <div id='paused-overlay'>
  <div id='paused-message'>
  <h2>Demo Paused</h2>
  <p class='pulse'>Click Anywhere to Resume</p>
  </div>
 </div>
 </body>
 <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
 on_interaction_data_update: function(data) {
 const overlay = document.getElementById('paused-overlay');

 if (data.event === 'blur') {
  // User clicked away - pause experiment and show overlay
  jsPsych.pauseExperiment();
  if (overlay) {
  overlay.style.display = 'flex';
  }
 } else if (data.event === 'focus') {
  // User returned - resume experiment and hide overlay
  jsPsych.resumeExperiment();
  if (overlay) {
  overlay.style.display = 'none';
  }
 }
 }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
 const overlay = document.getElementById('paused-overlay');
 if (overlay) {
 overlay.addEventListener('click', function() {
  // Focus the window and let the interaction handler resume
  window.focus();
 });
 }
});


// 2. Define our trials
const welcome = {
 type: jsPsychHtmlKeyboardResponse,
 stimulus: `Press any key to begin the first trial!`,
 choices: 'ALL_KEYS', 
 post_trial_gap: 500
}

const preload = {
 type: jsPsychPreload,
 images: ['media/noodle_cropped.jpg', 'media/gatsby_cropped.jpg']
}

const image_1 = {
 type: jsPsychImageKeyboardResponse,
 stimulus: 'media/noodle_cropped.jpg',
 stimulus_width: 150,
 prompt: `<p>Is this cat happy or sad? Press 'e' for happy and 'i' for sad.</p>`,
 choices: ['e', 'i'],
 post_trial_gap: 500
}

const welcome_2 = {
 type: jsPsychHtmlKeyboardResponse,
 stimulus: `Press any key to begin the second trial!`,
 choices: 'ALL_KEYS', 
 post_trial_gap: 500
}

const delay = {
 type: jsPsychHtmlKeyboardResponse,
 stimulus: '',
 prompt: `<p>Is this cat happy or sad? Press 'e' for happy and 'i' for sad.</p>`,
 trial_duration: function(){return Math.floor(Math.random() * (800 - 300 + 1)) + 300},
 choices: 'NO_KEYS'
}

const image_2 = {
 type: jsPsychImageKeyboardResponse,
 stimulus: 'media/gatsby_cropped.jpg',
 stimulus_width: 150,
 prompt: `<p>Is this cat happy or sad? Press 'e' for happy and 'i' for sad.</p>`,
 choices: ['e', 'i']

}
// 3. Run jsPsych with our trials
jsPsych.run([
 preload,
 welcome,
 image_1,
 welcome_2,
 delay,
 image_2
]);
 
 </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
  const container = document.getElementById(&quot;demo-container-355&quot;);
  const indicator = container.querySelector(&quot;.focus-indicator-355&quot;);

  function showFocus() {
   container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
   if (indicator) {
   indicator.textContent = &quot;âœ“ Demo Active&quot;;
   indicator.style.color = &quot;#28a745&quot;;
   }
  }

  function hideFocus() {
   container.style.boxShadow = &quot;none&quot;;
   if (indicator) {
   indicator.textContent = &quot;Click inside the demo to activate&quot;;
   indicator.style.color = &quot;#6c757d&quot;;
   }
  }

  const iframeWindow = iframe.contentWindow;
  if (iframeWindow) {
   iframeWindow.onfocus = showFocus;
   iframeWindow.onblur = hideFocus;
   iframeWindow.document.addEventListener(&quot;click&quot;, function() {
   iframeWindow.focus();
   showFocus();
   });
   document.addEventListener(&quot;click&quot;, function(e) {
   if (!container.contains(e.target)) {
    iframeWindow.blur();
    hideFocus();
   }
   });
  }
  }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>Youâ€™ll notice that in the first trial, the image immediately appeared simultaneously with the prompt below it. But in the second trial, the prompt appeared first, then the image appeared. This is not good! You may have also noticed a â€˜layout shiftâ€™. Because the image wasnâ€™t loaded to take up space, the prompt appeared in a different location and then moved when the image loaded.</p>
<p>When this trial starts, the browser has to download the image from your server. During this download:</p>
<ul>
<li>The trial timing becomes completely unpredictable</li>
<li>Participants might see a broken image icon or blank space</li>
<li>Response timing measurements start before they can actually see the stimulus</li>
<li>The trial might fail entirely if the network is slow</li>
</ul>
<p>This variability would make your reaction time data essentially meaningless. One participant might have 50ms loading delays while another has 300ms delays, and youâ€™d have no way to separate these technical artifacts from the cognitive processes youâ€™re trying to study.</p>
</section>
<section id="how-preloading-solves-the-problem" class="level3" data-number="12.5.2">
<h3 data-number="12.5.2" class="anchored" data-anchor-id="how-preloading-solves-the-problem"><span class="header-section-number">12.5.2</span> How Preloading Solves the Problem</h3>
<p>Preloading downloads all your multimedia files before any experimental trials begin, storing them in the browserâ€™s memory. When trials later reference these files, they display instantly because theyâ€™re already available locally.</p>
<p>The modern way to implement preloading in jsPsych uses the <code>jsPsychPreload</code> plugin with automatic detection. This plugin works just like any other plugin, in that we have to load it in the <code>&lt;head&gt;</code> and place it into our experiment timeline. Wherever we place it is when it will occur.</p>
<p>jsPsych can do some automatic preloading for us. In this first example, Iâ€™ll call the preload trial right at the beginning of the experiment, so that everything loads before the participant sees anything.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">const</span> preload <span class="op">=</span> {</span>
<span id="cb14-2"><a href="#cb14-2"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>    <span class="dt">auto_preload</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>}<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5"></a></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="co">// These files will be automatically detected and preloaded</span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="kw">const</span> image_trial <span class="op">=</span> {</span>
<span id="cb14-8"><a href="#cb14-8"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychImageKeyboardResponse<span class="op">,</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'images/face1.jpg'</span><span class="op">,</span></span>
<span id="cb14-10"><a href="#cb14-10"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">'y'</span><span class="op">,</span> <span class="st">'n'</span>]</span>
<span id="cb14-11"><a href="#cb14-11"></a>}<span class="op">;</span></span>
<span id="cb14-12"><a href="#cb14-12"></a></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="kw">const</span> audio_trial <span class="op">=</span> {</span>
<span id="cb14-14"><a href="#cb14-14"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychAudioKeyboardResponse<span class="op">,</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'audio/word.mp3'</span><span class="op">,</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">'space'</span>]</span>
<span id="cb14-17"><a href="#cb14-17"></a>}<span class="op">;</span></span>
<span id="cb14-18"><a href="#cb14-18"></a></span>
<span id="cb14-19"><a href="#cb14-19"></a><span class="kw">const</span> timeline <span class="op">=</span> [preload<span class="op">,</span> image_trial<span class="op">,</span> audio_trial]<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>auto_preload: true</code> setting tells jsPsych to automatically scan your timeline and preload any multimedia files it finds. This is incredibly convenient and works for most standard use cases.</p>
</section>
<section id="manual-preloading" class="level3" data-number="12.5.3">
<h3 data-number="12.5.3" class="anchored" data-anchor-id="manual-preloading"><span class="header-section-number">12.5.3</span> Manual Preloading</h3>
<p>However, often we need to manually set our files to preload because weâ€™re using timeline variables in our experiment or embedding our stimulus in HTML (weâ€™ll do this later in the book). For this reason, I almost always just use manual preloading because I want to always avoid missing the preload.</p>
<p>For the manual preload, we provide the filepaths for all of our stimuli that need to be preloaded. Different media require different strategies for preloading, so we need to provide separate lists for our images, audio, and video files:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">const</span> manual_preload <span class="op">=</span> {</span>
<span id="cb15-2"><a href="#cb15-2"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="dt">images</span><span class="op">:</span> [<span class="st">'images/instruction_example.jpg'</span><span class="op">,</span> <span class="st">'images/feedback_happy.png'</span>]<span class="op">,</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>    <span class="dt">audio</span><span class="op">:</span> [<span class="st">'audio/instructions.mp3'</span><span class="op">,</span> <span class="st">'audio/beep.wav'</span>]<span class="op">,</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>    <span class="dt">video</span><span class="op">:</span> [<span class="st">'video/demonstration.mp4'</span>]</span>
<span id="cb15-6"><a href="#cb15-6"></a>}<span class="op">;</span></span>
<span id="cb15-7"><a href="#cb15-7"></a></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">// This image is embedded in HTML, so it needs manual preloading</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb15-10"><a href="#cb15-10"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb15-11"><a href="#cb15-11"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="vs">        &lt;h2&gt;Task Instructions&lt;/h2&gt;</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="vs">        &lt;img src="images/instruction_example.jpg" width="200"&gt;</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="vs">        &lt;p&gt;You will see faces like the one above...&lt;/p&gt;</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="vs">    `</span><span class="op">,</span></span>
<span id="cb15-16"><a href="#cb15-16"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">' '</span>]</span>
<span id="cb15-17"><a href="#cb15-17"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="preloading-options-and-user-experience" class="level3" data-number="12.5.4">
<h3 data-number="12.5.4" class="anchored" data-anchor-id="preloading-options-and-user-experience"><span class="header-section-number">12.5.4</span> Preloading Options and User Experience</h3>
<p>Like all other plugins, there other parameters we can set. The preload plugin offers several options to improve the user experience:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">const</span> user_friendly_preload <span class="op">=</span> {</span>
<span id="cb16-2"><a href="#cb16-2"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>    <span class="dt">auto_preload</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb16-4"><a href="#cb16-4"></a></span>
<span id="cb16-5"><a href="#cb16-5"></a>    <span class="dt">show_progress_bar</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb16-6"><a href="#cb16-6"></a>    <span class="dt">message</span><span class="op">:</span> <span class="st">'Loading experiment materials... This may take a moment.'</span><span class="op">,</span></span>
<span id="cb16-7"><a href="#cb16-7"></a></span>
<span id="cb16-8"><a href="#cb16-8"></a>    <span class="dt">max_load_time</span><span class="op">:</span> <span class="dv">60000</span><span class="op">,</span> <span class="co">// 60 seconds timeout</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>    <span class="dt">error_message</span><span class="op">:</span> <span class="st">'The experiment failed to load. Please refresh and try again.'</span><span class="op">,</span></span>
<span id="cb16-10"><a href="#cb16-10"></a></span>
<span id="cb16-11"><a href="#cb16-11"></a>    <span class="dt">continue_after_error</span><span class="op">:</span> <span class="kw">false</span> <span class="co">// Stop if loading fails</span></span>
<span id="cb16-12"><a href="#cb16-12"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The progress bar gives participants feedback about loading progress, the custom message explains whatâ€™s happening, and the timeout prevents indefinite waiting if something goes wrong.</p>
</section>
<section id="batch-loading-for-large-experiments" class="level3" data-number="12.5.5">
<h3 data-number="12.5.5" class="anchored" data-anchor-id="batch-loading-for-large-experiments"><span class="header-section-number">12.5.5</span> Batch Loading for Large Experiments</h3>
<p>For experiments with many files, you might want to load content in smaller batches throughout the experiment rather than everything at once:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">const</span> block_1 <span class="op">=</span> {</span>
<span id="cb17-2"><a href="#cb17-2"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb17-3"><a href="#cb17-3"></a>        {</span>
<span id="cb17-4"><a href="#cb17-4"></a>            <span class="dt">type</span><span class="op">:</span> jsPsychImageKeyboardResponse<span class="op">,</span></span>
<span id="cb17-5"><a href="#cb17-5"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'img/file1.png'</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>        }<span class="op">,</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>        {</span>
<span id="cb17-8"><a href="#cb17-8"></a>            <span class="dt">type</span><span class="op">:</span> jsPsychImageKeyboardResponse<span class="op">,</span></span>
<span id="cb17-9"><a href="#cb17-9"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'img/file2.png'</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>        }</span>
<span id="cb17-11"><a href="#cb17-11"></a>    ]</span>
<span id="cb17-12"><a href="#cb17-12"></a>}</span>
<span id="cb17-13"><a href="#cb17-13"></a></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="kw">const</span> block_2 <span class="op">=</span> {</span>
<span id="cb17-15"><a href="#cb17-15"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb17-16"><a href="#cb17-16"></a>        {</span>
<span id="cb17-17"><a href="#cb17-17"></a>            <span class="dt">type</span><span class="op">:</span> jsPsychImageKeyboardResponse<span class="op">,</span></span>
<span id="cb17-18"><a href="#cb17-18"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'img/file3.png'</span></span>
<span id="cb17-19"><a href="#cb17-19"></a>        }<span class="op">,</span></span>
<span id="cb17-20"><a href="#cb17-20"></a>        {</span>
<span id="cb17-21"><a href="#cb17-21"></a>            <span class="dt">type</span><span class="op">:</span> jsPsychImageKeyboardResponse<span class="op">,</span></span>
<span id="cb17-22"><a href="#cb17-22"></a>            <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'img/file4.png'</span></span>
<span id="cb17-23"><a href="#cb17-23"></a>        }</span>
<span id="cb17-24"><a href="#cb17-24"></a>    ]</span>
<span id="cb17-25"><a href="#cb17-25"></a>}</span>
<span id="cb17-26"><a href="#cb17-26"></a></span>
<span id="cb17-27"><a href="#cb17-27"></a><span class="kw">const</span> preload_1 <span class="op">=</span> {</span>
<span id="cb17-28"><a href="#cb17-28"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb17-29"><a href="#cb17-29"></a>    <span class="dt">images</span><span class="op">:</span> [<span class="st">'img/file1.png'</span><span class="op">,</span> <span class="st">'img/file2.png'</span>] </span>
<span id="cb17-30"><a href="#cb17-30"></a>}</span>
<span id="cb17-31"><a href="#cb17-31"></a></span>
<span id="cb17-32"><a href="#cb17-32"></a><span class="kw">const</span> preload_2 <span class="op">=</span> {</span>
<span id="cb17-33"><a href="#cb17-33"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb17-34"><a href="#cb17-34"></a>    <span class="dt">images</span><span class="op">:</span> [ <span class="st">'img/file3.png'</span><span class="op">,</span> <span class="st">'img/file4.png'</span>] </span>
<span id="cb17-35"><a href="#cb17-35"></a>}</span>
<span id="cb17-36"><a href="#cb17-36"></a></span>
<span id="cb17-37"><a href="#cb17-37"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(</span>
<span id="cb17-38"><a href="#cb17-38"></a>    <span class="co">// add each preload trial onto the timeline before the appropriate trial block</span></span>
<span id="cb17-39"><a href="#cb17-39"></a>    [preload_1<span class="op">,</span> block_1<span class="op">,</span> preload_2<span class="op">,</span> block_2]</span>
<span id="cb17-40"><a href="#cb17-40"></a>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This approach can be helpful for very large experiments or when working with participants who have limited bandwidth.</p>
</section>
</section>
<section id="embedding-multimedia-in-html-instructions" class="level2" data-number="12.6">
<h2 data-number="12.6" class="anchored" data-anchor-id="embedding-multimedia-in-html-instructions"><span class="header-section-number">12.6</span> Embedding Multimedia in HTML Instructions</h2>
<p>Sometimes you need to include multimedia content within instruction screens rather than as the primary stimulus. This is different from using dedicated multimedia plugins because the content is embedded within HTML.</p>
<p>To accomplish this, we rely on the HTML and CSS we learned in the earlier chapters. However, we can still preload the multimedia in the same way to prevent lags in loading.</p>
<section id="images" class="level3" data-number="12.6.1">
<h3 data-number="12.6.1" class="anchored" data-anchor-id="images"><span class="header-section-number">12.6.1</span> Images</h3>
<p>Visual examples can make instructions much clearer. Here is an example of using <code>&lt;img&gt;</code> tag to embed an image in our instructions:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb18-1"><a href="#cb18-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4"></a> <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Demo<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5"></a> <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb18-6"><a href="#cb18-6"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7"></a> <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb18-8"><a href="#cb18-8"></a> </span>
<span id="cb18-9"><a href="#cb18-9"></a> <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb18-10"><a href="#cb18-10"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-11"><a href="#cb18-11"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-12"><a href="#cb18-12"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb18-13"><a href="#cb18-13"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb18-14"><a href="#cb18-14"></a> <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb18-15"><a href="#cb18-15"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-16"><a href="#cb18-16"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb18-17"><a href="#cb18-17"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="co">// 2. Define our trials</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="kw">const</span> preload <span class="op">=</span> {</span>
<span id="cb19-5"><a href="#cb19-5"></a> <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb19-6"><a href="#cb19-6"></a> <span class="dt">images</span><span class="op">:</span> [<span class="st">'media/noodle_cropped.jpg'</span>]</span>
<span id="cb19-7"><a href="#cb19-7"></a>}</span>
<span id="cb19-8"><a href="#cb19-8"></a></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="kw">const</span> task_instructions <span class="op">=</span> {</span>
<span id="cb19-10"><a href="#cb19-10"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-11"><a href="#cb19-11"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="vs">        &lt;div style='max-width: 800px; margin: 0 auto; text-align: center;'&gt;</span></span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="vs">            &lt;h2&gt;Categorization Task&lt;/h2&gt;</span></span>
<span id="cb19-14"><a href="#cb19-14"></a></span>
<span id="cb19-15"><a href="#cb19-15"></a><span class="vs">            &lt;p&gt;You will see cats and categorize them as either happy or sad:&lt;/p&gt;</span></span>
<span id="cb19-16"><a href="#cb19-16"></a></span>
<span id="cb19-17"><a href="#cb19-17"></a><span class="vs">            &lt;div style='display: flex; justify-content: space-around; margin: 20px 0;'&gt;</span></span>
<span id="cb19-18"><a href="#cb19-18"></a><span class="vs">                &lt;div&gt;</span></span>
<span id="cb19-19"><a href="#cb19-19"></a><span class="vs">                    &lt;img src='media/noodle_cropped.jpg' width='100' </span></span>
<span id="cb19-20"><a href="#cb19-20"></a><span class="vs">                         style='border: 2px solid #333; border-radius: 5px;'&gt;</span></span>
<span id="cb19-21"><a href="#cb19-21"></a><span class="vs">                &lt;/div&gt;</span></span>
<span id="cb19-22"><a href="#cb19-22"></a><span class="vs">            &lt;/div&gt;</span></span>
<span id="cb19-23"><a href="#cb19-23"></a></span>
<span id="cb19-24"><a href="#cb19-24"></a><span class="vs">            &lt;p&gt;&lt;strong&gt;Press spacebar when ready to begin.&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb19-25"><a href="#cb19-25"></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb19-26"><a href="#cb19-26"></a><span class="vs">    `</span><span class="op">,</span></span>
<span id="cb19-27"><a href="#cb19-27"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">' '</span>]</span>
<span id="cb19-28"><a href="#cb19-28"></a>}<span class="op">;</span></span>
<span id="cb19-29"><a href="#cb19-29"></a></span>
<span id="cb19-30"><a href="#cb19-30"></a></span>
<span id="cb19-31"><a href="#cb19-31"></a></span>
<span id="cb19-32"><a href="#cb19-32"></a><span class="co">// 3. Run jsPsych with our trials</span></span>
<span id="cb19-33"><a href="#cb19-33"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb19-34"><a href="#cb19-34"></a> preload<span class="op">,</span></span>
<span id="cb19-35"><a href="#cb19-35"></a> task_instructions</span>
<span id="cb19-36"><a href="#cb19-36"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div id="demo-container-8" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-8" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
   console.log('Full screen button clicked');
   const htmlContent = '<!DOCTYPE html>\n<html>\n <head>\n <title>Live JsPsych Demo</title>\n <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n <style>\n  /* Paused overlay styles */\n  #paused-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: none;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n  font-family: Arial, sans-serif;\n  }\n\n  #paused-message {\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  max-width: 300px;\n  }\n\n  #paused-message h2 {\n  margin-top: 0;\n  color: #dc3545;\n  font-size: 24px;\n  }\n\n  #paused-message p {\n  color: #666;\n  margin-bottom: 0;\n  font-size: 16px;\n  }\n\n  .pulse {\n  animation: pulse 2s infinite;\n  }\n\n  @keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n  }\n </style>\n </head>\n <body>\n <!-- Paused overlay -->\n <div id=\'paused-overlay\'>\n  <div id=\'paused-message\'>\n  <h2>Demo Paused</h2>\n  <p class=\'pulse\'>Click Anywhere to Resume</p>\n  </div>\n </div>\n </body>\n <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n on_interaction_data_update: function(data) {\n const overlay = document.getElementById(\'paused-overlay\');\n\n if (data.event === \'blur\') {\n  // User clicked away - pause experiment and show overlay\n  jsPsych.pauseExperiment();\n  if (overlay) {\n  overlay.style.display = \'flex\';\n  }\n } else if (data.event === \'focus\') {\n  // User returned - resume experiment and hide overlay\n  jsPsych.resumeExperiment();\n  if (overlay) {\n  overlay.style.display = \'none\';\n  }\n }\n }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n const overlay = document.getElementById(\'paused-overlay\');\n if (overlay) {\n overlay.addEventListener(\'click\', function() {\n  // Focus the window and let the interaction handler resume\n  window.focus();\n });\n }\n});\n\n\nconst preload = {\n type: jsPsychPreload,\n images: [\'media/noodle_cropped.jpg\']\n}\n\nconst task_instructions = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `\n        <div style=\'max-width: 800px; margin: 0 auto; text-align: center;\'>\n            <h2>Categorization Task</h2>\n\n            <p>You will see cats and categorize them as either happy or sad:</p>\n\n            <div style=\'display: flex; justify-content: space-around; margin: 20px 0;\'>\n                <div>\n                    <img src=\'media/noodle_cropped.jpg\' width=\'100\' \n                         style=\'border: 2px solid #333; border-radius: 5px;\'>\n                </div>\n            </div>\n\n            <p><strong>Press spacebar when ready to begin.</strong></p>\n        </div>\n    `,\n    choices: [\' \']\n};\n\n\n\n// 3. Run jsPsych with our trials\njsPsych.run([\n preload,\n task_instructions\n]);\n \n </script>\n</html>';
   const newWindow = window.open('', '_blank');
   if (newWindow) {
    newWindow.document.write(htmlContent);
    newWindow.document.close();
   } else {
    alert('Pop-up blocked! Please allow pop-ups for this site.');
   }
   " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
   const iframe = document.getElementById('demo-iframe-8');
   const srcdoc = iframe.getAttribute('srcdoc');
   iframe.setAttribute('srcdoc', '');
   setTimeout(function() {
    iframe.setAttribute('srcdoc', srcdoc);
   }, 10);
   " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-8" srcdoc="<!DOCTYPE html>
<html>
 <head>
 <title>Live JsPsych Demo</title>
 <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
 <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
 <style>
  /* Paused overlay styles */
  #paused-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-family: Arial, sans-serif;
  }

  #paused-message {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  max-width: 300px;
  }

  #paused-message h2 {
  margin-top: 0;
  color: #dc3545;
  font-size: 24px;
  }

  #paused-message p {
  color: #666;
  margin-bottom: 0;
  font-size: 16px;
  }

  .pulse {
  animation: pulse 2s infinite;
  }

  @keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
  }
 </style>
 </head>
 <body style='max-height: 300px'>
 <!-- Paused overlay -->
 <div id='paused-overlay'>
  <div id='paused-message'>
  <h2>Demo Paused</h2>
  <p class='pulse'>Click Anywhere to Resume</p>
  </div>
 </div>
 </body>
 <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
 on_interaction_data_update: function(data) {
 const overlay = document.getElementById('paused-overlay');

 if (data.event === 'blur') {
  // User clicked away - pause experiment and show overlay
  jsPsych.pauseExperiment();
  if (overlay) {
  overlay.style.display = 'flex';
  }
 } else if (data.event === 'focus') {
  // User returned - resume experiment and hide overlay
  jsPsych.resumeExperiment();
  if (overlay) {
  overlay.style.display = 'none';
  }
 }
 }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
 const overlay = document.getElementById('paused-overlay');
 if (overlay) {
 overlay.addEventListener('click', function() {
  // Focus the window and let the interaction handler resume
  window.focus();
 });
 }
});


const preload = {
 type: jsPsychPreload,
 images: ['media/noodle_cropped.jpg']
}

const task_instructions = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `
        <div style='max-width: 800px; margin: 0 auto; text-align: center;'>
            <h2>Categorization Task</h2>

            <p>You will see cats and categorize them as either happy or sad:</p>

            <div style='display: flex; justify-content: space-around; margin: 20px 0;'>
                <div>
                    <img src='media/noodle_cropped.jpg' width='100' 
                         style='border: 2px solid #333; border-radius: 5px;'>
                </div>
            </div>

            <p><strong>Press spacebar when ready to begin.</strong></p>
        </div>
    `,
    choices: [' ']
};



// 3. Run jsPsych with our trials
jsPsych.run([
 preload,
 task_instructions
]);
 
 </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
  const container = document.getElementById(&quot;demo-container-8&quot;);
  const indicator = container.querySelector(&quot;.focus-indicator-8&quot;);

  function showFocus() {
   container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
   if (indicator) {
   indicator.textContent = &quot;âœ“ Demo Active&quot;;
   indicator.style.color = &quot;#28a745&quot;;
   }
  }

  function hideFocus() {
   container.style.boxShadow = &quot;none&quot;;
   if (indicator) {
   indicator.textContent = &quot;Click inside the demo to activate&quot;;
   indicator.style.color = &quot;#6c757d&quot;;
   }
  }

  const iframeWindow = iframe.contentWindow;
  if (iframeWindow) {
   iframeWindow.onfocus = showFocus;
   iframeWindow.onblur = hideFocus;
   iframeWindow.document.addEventListener(&quot;click&quot;, function() {
   iframeWindow.focus();
   showFocus();
   });
   document.addEventListener(&quot;click&quot;, function(e) {
   if (!container.contains(e.target)) {
    iframeWindow.blur();
    hideFocus();
   }
   });
  }
  }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="audio" class="level3" data-number="12.6.2">
<h3 data-number="12.6.2" class="anchored" data-anchor-id="audio"><span class="header-section-number">12.6.2</span> Audio</h3>
<p>You can also embed audio in the HTML using the <code>&lt;audio&gt;</code> tag (<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/audio" target="_blank">see here for info</a>). This can be useful if you need the participant to test their audio before beginning the experiment or providing examples.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb20-1"><a href="#cb20-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4"></a> <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Demo<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5"></a> <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb20-6"><a href="#cb20-6"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-7"><a href="#cb20-7"></a> <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb20-8"><a href="#cb20-8"></a> </span>
<span id="cb20-9"><a href="#cb20-9"></a> <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb20-10"><a href="#cb20-10"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-audio-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-11"><a href="#cb20-11"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-12"><a href="#cb20-12"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span> </span>
<span id="cb20-13"><a href="#cb20-13"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb20-14"><a href="#cb20-14"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb20-15"><a href="#cb20-15"></a> <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb20-16"><a href="#cb20-16"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb20-17"><a href="#cb20-17"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb20-18"><a href="#cb20-18"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="kw">const</span> preload <span class="op">=</span> {</span>
<span id="cb21-4"><a href="#cb21-4"></a> <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb21-5"><a href="#cb21-5"></a> <span class="dt">audio</span><span class="op">:</span> [<span class="st">'media/speech_green.mp3'</span>]</span>
<span id="cb21-6"><a href="#cb21-6"></a>}</span>
<span id="cb21-7"><a href="#cb21-7"></a></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb21-9"><a href="#cb21-9"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>   <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="vs">    &lt;div style='text-align: center;'&gt;</span></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="vs">      &lt;h2&gt;Welcome to the Auditory Study&lt;/h2&gt;</span></span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="vs">      &lt;p&gt;This experiment includes audio content.&lt;/p&gt;</span></span>
<span id="cb21-14"><a href="#cb21-14"></a><span class="vs">      &lt;p&gt;Please ensure your speakers or headphones are connected.&lt;/p&gt;</span></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="vs">      &lt;p&gt;&lt;strong&gt;Press the spacebar to begin.&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="vs">    &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb21-17"><a href="#cb21-17"></a>   <span class="dt">choices</span><span class="op">:</span> <span class="st">'ALL_KEYS'</span><span class="op">,</span> </span>
<span id="cb21-18"><a href="#cb21-18"></a>   <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb21-19"><a href="#cb21-19"></a>}</span>
<span id="cb21-20"><a href="#cb21-20"></a></span>
<span id="cb21-21"><a href="#cb21-21"></a><span class="kw">const</span> audio_instructions <span class="op">=</span> {</span>
<span id="cb21-22"><a href="#cb21-22"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb21-23"><a href="#cb21-23"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb21-24"><a href="#cb21-24"></a><span class="vs">         &lt;div style='max-width: 600px; text-align: left'&gt;</span></span>
<span id="cb21-25"><a href="#cb21-25"></a><span class="vs">            &lt;h3&gt;Instructions&lt;/h3&gt;</span></span>
<span id="cb21-26"><a href="#cb21-26"></a><span class="vs">                &lt;p&gt;Listen to each word carefully. Press 'R' for real words, 'N' for nonsense words. Respond as quickly as possible&lt;/p&gt;</span></span>
<span id="cb21-27"><a href="#cb21-27"></a><span class="vs">            &lt;div&gt;</span></span>
<span id="cb21-28"><a href="#cb21-28"></a><span class="vs">                &lt;p&gt;&lt;strong&gt;Listen to an example:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb21-29"><a href="#cb21-29"></a><span class="vs">                &lt;audio controls style='width: 100%;'&gt;</span></span>
<span id="cb21-30"><a href="#cb21-30"></a><span class="vs">                    &lt;source src='media/speech_green.mp3' type='audio/mpeg'&gt;</span></span>
<span id="cb21-31"><a href="#cb21-31"></a><span class="vs">                    Your browser does not support audio.</span></span>
<span id="cb21-32"><a href="#cb21-32"></a><span class="vs">                &lt;/audio&gt;</span></span>
<span id="cb21-33"><a href="#cb21-33"></a><span class="vs">            &lt;/div&gt;</span></span>
<span id="cb21-34"><a href="#cb21-34"></a><span class="vs">            &lt;p&gt;&lt;strong&gt;Press spacebar when ready.&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb21-35"><a href="#cb21-35"></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb21-36"><a href="#cb21-36"></a><span class="vs">    `</span><span class="op">,</span></span>
<span id="cb21-37"><a href="#cb21-37"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">' '</span>]</span>
<span id="cb21-38"><a href="#cb21-38"></a>}<span class="op">;</span></span>
<span id="cb21-39"><a href="#cb21-39"></a></span>
<span id="cb21-40"><a href="#cb21-40"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb21-41"><a href="#cb21-41"></a>   preload<span class="op">,</span></span>
<span id="cb21-42"><a href="#cb21-42"></a>   welcome<span class="op">,</span></span>
<span id="cb21-43"><a href="#cb21-43"></a>   audio_instructions</span>
<span id="cb21-44"><a href="#cb21-44"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div id="demo-container-12" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-12" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
   console.log('Full screen button clicked');
   const htmlContent = '<!DOCTYPE html>\n<html>\n <head>\n <title>Live JsPsych Demo</title>\n <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n <style>\n  /* Paused overlay styles */\n  #paused-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: none;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n  font-family: Arial, sans-serif;\n  }\n\n  #paused-message {\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  max-width: 300px;\n  }\n\n  #paused-message h2 {\n  margin-top: 0;\n  color: #dc3545;\n  font-size: 24px;\n  }\n\n  #paused-message p {\n  color: #666;\n  margin-bottom: 0;\n  font-size: 16px;\n  }\n\n  .pulse {\n  animation: pulse 2s infinite;\n  }\n\n  @keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n  }\n </style>\n </head>\n <body>\n <!-- Paused overlay -->\n <div id=\'paused-overlay\'>\n  <div id=\'paused-message\'>\n  <h2>Demo Paused</h2>\n  <p class=\'pulse\'>Click Anywhere to Resume</p>\n  </div>\n </div>\n </body>\n <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n on_interaction_data_update: function(data) {\n const overlay = document.getElementById(\'paused-overlay\');\n\n if (data.event === \'blur\') {\n  // User clicked away - pause experiment and show overlay\n  jsPsych.pauseExperiment();\n  if (overlay) {\n  overlay.style.display = \'flex\';\n  }\n } else if (data.event === \'focus\') {\n  // User returned - resume experiment and hide overlay\n  jsPsych.resumeExperiment();\n  if (overlay) {\n  overlay.style.display = \'none\';\n  }\n }\n }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n const overlay = document.getElementById(\'paused-overlay\');\n if (overlay) {\n overlay.addEventListener(\'click\', function() {\n  // Focus the window and let the interaction handler resume\n  window.focus();\n });\n }\n});\n\n\n\n\nconst preload = {\n type: jsPsychPreload,\n audio: [\'media/speech_green.mp3\']\n}\n\nconst welcome = {\n type: jsPsychHtmlKeyboardResponse,\n stimulus: `\n <div style=\'text-align: center;\'>\n      <h2>Welcome to the Auditory Study</h2>\n      <p>This experiment includes audio content.</p>\n      <p>Please ensure your speakers or headphones are connected.</p>\n      <p><strong>Press the spacebar to begin.</strong></p>\n    </div>\n `,\n choices: \'ALL_KEYS\', \n post_trial_gap: 500\n}\n\nconst audio_instructions = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `\n         <div style=\'max-width: 600px; text-align: left\'>\n            <h3>Instructions</h3>\n                <p>Listen to each word carefully. Press \'R\' for real words, \'N\' for nonsense words. Respond as quickly as possible</p>\n            <div>\n                <p><strong>Listen to an example:</strong></p>\n                <audio controls style=\'width: 100%;\'>\n                    <source src=\'media/speech_green.mp3\' type=\'audio/mpeg\'>\n                    Your browser does not support audio.\n                </audio>\n            </div>\n            <p><strong>Press spacebar when ready.</strong></p>\n        </div>\n    `,\n    choices: [\' \']\n};\n\njsPsych.run([\n   preload,\n   welcome,\n   audio_instructions\n]);\n \n </script>\n</html>';
   const newWindow = window.open('', '_blank');
   if (newWindow) {
    newWindow.document.write(htmlContent);
    newWindow.document.close();
   } else {
    alert('Pop-up blocked! Please allow pop-ups for this site.');
   }
   " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
   const iframe = document.getElementById('demo-iframe-12');
   const srcdoc = iframe.getAttribute('srcdoc');
   iframe.setAttribute('srcdoc', '');
   setTimeout(function() {
    iframe.setAttribute('srcdoc', srcdoc);
   }, 10);
   " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-12" srcdoc="<!DOCTYPE html>
<html>
 <head>
 <title>Live JsPsych Demo</title>
 <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
 <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
 <style>
  /* Paused overlay styles */
  #paused-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-family: Arial, sans-serif;
  }

  #paused-message {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  max-width: 300px;
  }

  #paused-message h2 {
  margin-top: 0;
  color: #dc3545;
  font-size: 24px;
  }

  #paused-message p {
  color: #666;
  margin-bottom: 0;
  font-size: 16px;
  }

  .pulse {
  animation: pulse 2s infinite;
  }

  @keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
  }
 </style>
 </head>
 <body style='max-height: 300px'>
 <!-- Paused overlay -->
 <div id='paused-overlay'>
  <div id='paused-message'>
  <h2>Demo Paused</h2>
  <p class='pulse'>Click Anywhere to Resume</p>
  </div>
 </div>
 </body>
 <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
 on_interaction_data_update: function(data) {
 const overlay = document.getElementById('paused-overlay');

 if (data.event === 'blur') {
  // User clicked away - pause experiment and show overlay
  jsPsych.pauseExperiment();
  if (overlay) {
  overlay.style.display = 'flex';
  }
 } else if (data.event === 'focus') {
  // User returned - resume experiment and hide overlay
  jsPsych.resumeExperiment();
  if (overlay) {
  overlay.style.display = 'none';
  }
 }
 }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
 const overlay = document.getElementById('paused-overlay');
 if (overlay) {
 overlay.addEventListener('click', function() {
  // Focus the window and let the interaction handler resume
  window.focus();
 });
 }
});




const preload = {
 type: jsPsychPreload,
 audio: ['media/speech_green.mp3']
}

const welcome = {
 type: jsPsychHtmlKeyboardResponse,
 stimulus: `
 <div style='text-align: center;'>
      <h2>Welcome to the Auditory Study</h2>
      <p>This experiment includes audio content.</p>
      <p>Please ensure your speakers or headphones are connected.</p>
      <p><strong>Press the spacebar to begin.</strong></p>
    </div>
 `,
 choices: 'ALL_KEYS', 
 post_trial_gap: 500
}

const audio_instructions = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `
         <div style='max-width: 600px; text-align: left'>
            <h3>Instructions</h3>
                <p>Listen to each word carefully. Press 'R' for real words, 'N' for nonsense words. Respond as quickly as possible</p>
            <div>
                <p><strong>Listen to an example:</strong></p>
                <audio controls style='width: 100%;'>
                    <source src='media/speech_green.mp3' type='audio/mpeg'>
                    Your browser does not support audio.
                </audio>
            </div>
            <p><strong>Press spacebar when ready.</strong></p>
        </div>
    `,
    choices: [' ']
};

jsPsych.run([
   preload,
   welcome,
   audio_instructions
]);
 
 </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
  const container = document.getElementById(&quot;demo-container-12&quot;);
  const indicator = container.querySelector(&quot;.focus-indicator-12&quot;);

  function showFocus() {
   container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
   if (indicator) {
   indicator.textContent = &quot;âœ“ Demo Active&quot;;
   indicator.style.color = &quot;#28a745&quot;;
   }
  }

  function hideFocus() {
   container.style.boxShadow = &quot;none&quot;;
   if (indicator) {
   indicator.textContent = &quot;Click inside the demo to activate&quot;;
   indicator.style.color = &quot;#6c757d&quot;;
   }
  }

  const iframeWindow = iframe.contentWindow;
  if (iframeWindow) {
   iframeWindow.onfocus = showFocus;
   iframeWindow.onblur = hideFocus;
   iframeWindow.document.addEventListener(&quot;click&quot;, function() {
   iframeWindow.focus();
   showFocus();
   });
   document.addEventListener(&quot;click&quot;, function(e) {
   if (!container.contains(e.target)) {
    iframeWindow.blur();
    hideFocus();
   }
   });
  }
  }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="video" class="level3" data-number="12.6.3">
<h3 data-number="12.6.3" class="anchored" data-anchor-id="video"><span class="header-section-number">12.6.3</span> Video</h3>
<p>Video demonstrations are great for showing complex procedures or providing examples;</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb22-1"><a href="#cb22-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb22-4"><a href="#cb22-4"></a> <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Demo<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb22-5"><a href="#cb22-5"></a> <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb22-6"><a href="#cb22-6"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb22-7"><a href="#cb22-7"></a> <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb22-8"><a href="#cb22-8"></a> </span>
<span id="cb22-9"><a href="#cb22-9"></a> <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb22-10"><a href="#cb22-10"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-video-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb22-11"><a href="#cb22-11"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb22-12"><a href="#cb22-12"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-preload.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb22-13"><a href="#cb22-13"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb22-14"><a href="#cb22-14"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb22-15"><a href="#cb22-15"></a> <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb22-16"><a href="#cb22-16"></a> <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb22-17"><a href="#cb22-17"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb22-18"><a href="#cb22-18"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb23-2"><a href="#cb23-2"></a></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="kw">const</span> preload <span class="op">=</span> {</span>
<span id="cb23-4"><a href="#cb23-4"></a> <span class="dt">type</span><span class="op">:</span> jsPsychPreload<span class="op">,</span></span>
<span id="cb23-5"><a href="#cb23-5"></a> <span class="dt">video</span><span class="op">:</span> [<span class="st">'media/starfield.mp4'</span>]</span>
<span id="cb23-6"><a href="#cb23-6"></a>}</span>
<span id="cb23-7"><a href="#cb23-7"></a></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="kw">const</span> welcome <span class="op">=</span> {</span>
<span id="cb23-9"><a href="#cb23-9"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb23-10"><a href="#cb23-10"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="vs">    &lt;div style='text-align: center;'&gt;</span></span>
<span id="cb23-12"><a href="#cb23-12"></a><span class="vs">      &lt;h2&gt;Welcome to the Video Study&lt;/h2&gt;</span></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="vs">      &lt;p&gt;This experiment includes video content.&lt;/p&gt;</span></span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="vs">      &lt;p&gt;Please ensure your speakers or headphones are connected.&lt;/p&gt;</span></span>
<span id="cb23-15"><a href="#cb23-15"></a><span class="vs">      &lt;p&gt;&lt;strong&gt;Press the spacebar to begin.&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb23-16"><a href="#cb23-16"></a><span class="vs">    &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb23-17"><a href="#cb23-17"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">'ALL_KEYS'</span><span class="op">,</span> </span>
<span id="cb23-18"><a href="#cb23-18"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb23-19"><a href="#cb23-19"></a>}</span>
<span id="cb23-20"><a href="#cb23-20"></a></span>
<span id="cb23-21"><a href="#cb23-21"></a><span class="kw">const</span> video_instructions <span class="op">=</span> {</span>
<span id="cb23-22"><a href="#cb23-22"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb23-23"><a href="#cb23-23"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb23-24"><a href="#cb23-24"></a><span class="vs">        &lt;div style="max-width: 800px;"&gt;</span></span>
<span id="cb23-25"><a href="#cb23-25"></a><span class="vs">            &lt;h2&gt;How to Complete the Task&lt;/h2&gt;</span></span>
<span id="cb23-26"><a href="#cb23-26"></a></span>
<span id="cb23-27"><a href="#cb23-27"></a><span class="vs">            &lt;p&gt;Watch this example:&lt;/p&gt;</span></span>
<span id="cb23-28"><a href="#cb23-28"></a></span>
<span id="cb23-29"><a href="#cb23-29"></a><span class="vs">            &lt;video width="300"controls&gt;</span></span>
<span id="cb23-30"><a href="#cb23-30"></a><span class="vs">                &lt;source src="media/starfield.mp4" type="video/mp4"&gt;</span></span>
<span id="cb23-31"><a href="#cb23-31"></a><span class="vs">                Your browser does not support video.</span></span>
<span id="cb23-32"><a href="#cb23-32"></a><span class="vs">            &lt;/video&gt;</span></span>
<span id="cb23-33"><a href="#cb23-33"></a><span class="vs">            &lt;p&gt;&lt;strong&gt;Press spacebar to continue.&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb23-34"><a href="#cb23-34"></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb23-35"><a href="#cb23-35"></a><span class="vs">    `</span><span class="op">,</span></span>
<span id="cb23-36"><a href="#cb23-36"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">' '</span>]</span>
<span id="cb23-37"><a href="#cb23-37"></a>}<span class="op">;</span></span>
<span id="cb23-38"><a href="#cb23-38"></a></span>
<span id="cb23-39"><a href="#cb23-39"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb23-40"><a href="#cb23-40"></a> preload<span class="op">,</span></span>
<span id="cb23-41"><a href="#cb23-41"></a> welcome<span class="op">,</span></span>
<span id="cb23-42"><a href="#cb23-42"></a> video_instructions</span>
<span id="cb23-43"><a href="#cb23-43"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div id="demo-container-10" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-10" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
   console.log('Full screen button clicked');
   const htmlContent = '<!DOCTYPE html>\n<html>\n <head>\n <title>Live JsPsych Demo</title>\n <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n <style>\n  /* Paused overlay styles */\n  #paused-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: none;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n  font-family: Arial, sans-serif;\n  }\n\n  #paused-message {\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  max-width: 300px;\n  }\n\n  #paused-message h2 {\n  margin-top: 0;\n  color: #dc3545;\n  font-size: 24px;\n  }\n\n  #paused-message p {\n  color: #666;\n  margin-bottom: 0;\n  font-size: 16px;\n  }\n\n  .pulse {\n  animation: pulse 2s infinite;\n  }\n\n  @keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n  }\n </style>\n </head>\n <body>\n <!-- Paused overlay -->\n <div id=\'paused-overlay\'>\n  <div id=\'paused-message\'>\n  <h2>Demo Paused</h2>\n  <p class=\'pulse\'>Click Anywhere to Resume</p>\n  </div>\n </div>\n </body>\n <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n on_interaction_data_update: function(data) {\n const overlay = document.getElementById(\'paused-overlay\');\n\n if (data.event === \'blur\') {\n  // User clicked away - pause experiment and show overlay\n  jsPsych.pauseExperiment();\n  if (overlay) {\n  overlay.style.display = \'flex\';\n  }\n } else if (data.event === \'focus\') {\n  // User returned - resume experiment and hide overlay\n  jsPsych.resumeExperiment();\n  if (overlay) {\n  overlay.style.display = \'none\';\n  }\n }\n }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n const overlay = document.getElementById(\'paused-overlay\');\n if (overlay) {\n overlay.addEventListener(\'click\', function() {\n  // Focus the window and let the interaction handler resume\n  window.focus();\n });\n }\n});\n\n\n\n\nconst preload = {\n type: jsPsychPreload,\n video: [\'media/starfield.mp4\']\n}\n\nconst welcome = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=\'text-align: center;\'>\n      <h2>Welcome to the Video Study</h2>\n      <p>This experiment includes video content.</p>\n      <p>Please ensure your speakers or headphones are connected.</p>\n      <p><strong>Press the spacebar to begin.</strong></p>\n    </div>`,\n  choices: \'ALL_KEYS\', \n  post_trial_gap: 500\n}\n\nconst video_instructions = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `\n        <div style=\'max-width: 800px;\'>\n            <h2>How to Complete the Task</h2>\n\n            <p>Watch this example:</p>\n\n            <video width=\'300\'controls>\n                <source src=\'media/starfield.mp4\' type=\'video/mp4\'>\n                Your browser does not support video.\n            </video>\n\n            <p><strong>Press spacebar to begin.</strong></p>\n        </div>\n    `,\n    choices: [\' \']\n};\n\njsPsych.run([\n preload,\n welcome,\n video_instructions\n]);\n \n </script>\n</html>';
   const newWindow = window.open('', '_blank');
   if (newWindow) {
    newWindow.document.write(htmlContent);
    newWindow.document.close();
   } else {
    alert('Pop-up blocked! Please allow pop-ups for this site.');
   }
   " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
   const iframe = document.getElementById('demo-iframe-10');
   const srcdoc = iframe.getAttribute('srcdoc');
   iframe.setAttribute('srcdoc', '');
   setTimeout(function() {
    iframe.setAttribute('srcdoc', srcdoc);
   }, 10);
   " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-10" srcdoc="<!DOCTYPE html>
<html>
 <head>
 <title>Live JsPsych Demo</title>
 <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-video-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
 <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
 <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
 <style>
  /* Paused overlay styles */
  #paused-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-family: Arial, sans-serif;
  }

  #paused-message {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  max-width: 300px;
  }

  #paused-message h2 {
  margin-top: 0;
  color: #dc3545;
  font-size: 24px;
  }

  #paused-message p {
  color: #666;
  margin-bottom: 0;
  font-size: 16px;
  }

  .pulse {
  animation: pulse 2s infinite;
  }

  @keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
  }
 </style>
 </head>
 <body style='max-height: 300px'>
 <!-- Paused overlay -->
 <div id='paused-overlay'>
  <div id='paused-message'>
  <h2>Demo Paused</h2>
  <p class='pulse'>Click Anywhere to Resume</p>
  </div>
 </div>
 </body>
 <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
 on_interaction_data_update: function(data) {
 const overlay = document.getElementById('paused-overlay');

 if (data.event === 'blur') {
  // User clicked away - pause experiment and show overlay
  jsPsych.pauseExperiment();
  if (overlay) {
  overlay.style.display = 'flex';
  }
 } else if (data.event === 'focus') {
  // User returned - resume experiment and hide overlay
  jsPsych.resumeExperiment();
  if (overlay) {
  overlay.style.display = 'none';
  }
 }
 }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
 const overlay = document.getElementById('paused-overlay');
 if (overlay) {
 overlay.addEventListener('click', function() {
  // Focus the window and let the interaction handler resume
  window.focus();
 });
 }
});




const preload = {
 type: jsPsychPreload,
 video: ['media/starfield.mp4']
}

const welcome = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style='text-align: center;'>
      <h2>Welcome to the Video Study</h2>
      <p>This experiment includes video content.</p>
      <p>Please ensure your speakers or headphones are connected.</p>
      <p><strong>Press the spacebar to begin.</strong></p>
    </div>`,
  choices: 'ALL_KEYS', 
  post_trial_gap: 500
}

const video_instructions = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `
        <div style='max-width: 800px;'>
            <h2>How to Complete the Task</h2>

            <p>Watch this example:</p>

            <video width='300'controls>
                <source src='media/starfield.mp4' type='video/mp4'>
                Your browser does not support video.
            </video>

            <p><strong>Press spacebar to begin.</strong></p>
        </div>
    `,
    choices: [' ']
};

jsPsych.run([
 preload,
 welcome,
 video_instructions
]);
 
 </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
  const container = document.getElementById(&quot;demo-container-10&quot;);
  const indicator = container.querySelector(&quot;.focus-indicator-10&quot;);

  function showFocus() {
   container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
   if (indicator) {
   indicator.textContent = &quot;âœ“ Demo Active&quot;;
   indicator.style.color = &quot;#28a745&quot;;
   }
  }

  function hideFocus() {
   container.style.boxShadow = &quot;none&quot;;
   if (indicator) {
   indicator.textContent = &quot;Click inside the demo to activate&quot;;
   indicator.style.color = &quot;#6c757d&quot;;
   }
  }

  const iframeWindow = iframe.contentWindow;
  if (iframeWindow) {
   iframeWindow.onfocus = showFocus;
   iframeWindow.onblur = hideFocus;
   iframeWindow.document.addEventListener(&quot;click&quot;, function() {
   iframeWindow.focus();
   showFocus();
   });
   document.addEventListener(&quot;click&quot;, function(e) {
   if (!container.contains(e.target)) {
    iframeWindow.blur();
    hideFocus();
   }
   });
  }
  }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="understanding-file-paths" class="level2" data-number="12.7">
<h2 data-number="12.7" class="anchored" data-anchor-id="understanding-file-paths"><span class="header-section-number">12.7</span> Understanding File Paths</h2>
<p>Getting the file paths right is obviously important for our experiments; if we donâ€™t point the browser to the right location, the file will not load. Letâ€™s review how to reference files from different locations using a typical experiment structure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>ðŸ“‚ my_experiment  â† Reference point (where index.html lives)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“„ index.html  â† This file loads your experiment</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“„ exp.js      â† This file contains your jsPsych code</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“„ style.css</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ–¼ï¸ stroop_red_word.png</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“‚ jspsych</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>â”‚   â””â”€â”€ ðŸ“„ jspsych.js</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“‚ images</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>â”‚   â”œâ”€â”€ ðŸ–¼ï¸ happy_face.jpg</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>â”‚   â””â”€â”€ ðŸ–¼ï¸ sad_face.jpg</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>â””â”€â”€ ðŸ“‚ audio</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    â””â”€â”€ ðŸ”Š beep.wav</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When your JavaScript code tries to load a file, it looks for that file relative to the location of the HTML file thatâ€™s running the experiment (typically <code>index.html</code>). This location serves as your reference point for all file paths.</p>
<section id="files-in-the-same-directory" class="level3" data-number="12.7.1">
<h3 data-number="12.7.1" class="anchored" data-anchor-id="files-in-the-same-directory"><span class="header-section-number">12.7.1</span> Files in the Same Directory</h3>
<p>When files are in the same folder as your <code>index.html</code> file, just use the filename. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>ðŸ“‚ my_experiment</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“„ index.html</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“„ exp.js</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“„ style.css</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ–¼ï¸ stroop_red_word.png</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ–¼ï¸ stroop_blue_word.png</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>â””â”€â”€ ðŸ“‚ jspsych</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we wanted to load these image files, weâ€™d simply refer to it by their file name. The browser will assume it is in the same folder as the <code>index.html</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb26-1"><a href="#cb26-1"></a><span class="co">// File in the same directory</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="kw">const</span> trial <span class="op">=</span> {</span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychKeyboardResponsePlugin<span class="op">,</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'stroop_red_word.png'</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="files-in-subfolders" class="level3" data-number="12.7.2">
<h3 data-number="12.7.2" class="anchored" data-anchor-id="files-in-subfolders"><span class="header-section-number">12.7.2</span> Files in Subfolders</h3>
<p>The most common approach is to organize your files into subdirectories (sometimes with complex nested structures). In these cases, we need to provide the folder structure relative to the <code>index.html</code> file. In this example, I have some images in a subdirectory called <code>images</code>, but inside that directory, Iâ€™ve organized my face images into <code>angry</code>, <code>sad</code>, and <code>happy</code> directories.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>ðŸ“‚ my_experiment  </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“„ index.html  </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“„ exp.js     </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“„ style.css</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“‚ jspsych</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>â”‚   â””â”€â”€ ðŸ“„ jspsych.js</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>â””â”€â”€ ðŸ“‚ images</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    â”œâ”€â”€ ðŸ–¼ï¸ example_1.jpg</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    â”œâ”€â”€ ðŸ–¼ï¸ example_1.jpg</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    â””â”€â”€ ðŸ“‚ faces </span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>        â”œâ”€â”€ ðŸ“‚ angry</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>        â”‚   â”œâ”€â”€ ðŸ–¼ï¸angry_face_1.jpg</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>        â”‚   â””â”€â”€ ðŸ–¼ï¸angry_face_2.jpg</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>        â”œâ”€â”€ ðŸ“‚ sad</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>        â”‚   â”œâ”€â”€ ðŸ–¼ï¸sad_face_1.jpg</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>        â”‚   â””â”€â”€ ðŸ–¼ï¸sad_face_2.jpg</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>        â””â”€â”€ ðŸ“‚ happy</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>            â”œâ”€â”€ ðŸ–¼ï¸happy_face_1.jpg</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>            â””â”€â”€ ðŸ–¼ï¸happy_face_2.jpg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To load these files in my jsPsych experiment, I need to provide the subdirectory names along with the file name to show the full file path relative to my <code>index.html</code> file:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource javscript number-lines code-with-copy"><code class="sourceCode"><span id="cb28-1"><a href="#cb28-1"></a>// in the images subdirectory</span>
<span id="cb28-2"><a href="#cb28-2"></a>stimulus: "images/example_1.jpg"</span>
<span id="cb28-3"><a href="#cb28-3"></a></span>
<span id="cb28-4"><a href="#cb28-4"></a>// in the faces subdirectories</span>
<span id="cb28-5"><a href="#cb28-5"></a>stimulus: "images/faces/angry/angry_face_1.jpg"</span>
<span id="cb28-6"><a href="#cb28-6"></a>stimulus: "images/faces/sad/sad_face_1.jpg"</span>
<span id="cb28-7"><a href="#cb28-7"></a>stimulus: "images/faces/happy/happy_face_1.jpg"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="files-outside-the-main-directory" class="level3" data-number="12.7.3">
<h3 data-number="12.7.3" class="anchored" data-anchor-id="files-outside-the-main-directory"><span class="header-section-number">12.7.3</span> Files Outside the Main Directory</h3>
<p>Sometimes files might be located outside your experiment folder. This is uncommon, but it is possible to load files that are stored outside the directory that contains the <code>index.html</code> file. For example, maybe you have multiple experiments that share the same files:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>ðŸ“‚ research_project</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ–¼ï¸ shared_logo.png</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ ðŸ“‚ shared_stimuli</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>â”‚   â””â”€â”€ ðŸ–¼ï¸ standard_face.jpg</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>â””â”€â”€ ðŸ“‚ experiment_1  â† Your index.html is here</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    â”œâ”€â”€ ðŸ“„ index.html</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    â”œâ”€â”€ ðŸ“„ exp.js</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    â””â”€â”€ ðŸ“‚ images</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        â””â”€â”€ ðŸ–¼ï¸ local_image.jpg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this case, we need to use the <code>../</code> notation to indicate that something is one level up from our main directory. Again, remembering that our main directory will be where the <code>index.html</code> file is:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource javscript number-lines code-with-copy"><code class="sourceCode"><span id="cb30-1"><a href="#cb30-1"></a>// Go up one level (..) to access files outside your main directory</span>
<span id="cb30-2"><a href="#cb30-2"></a>stimulus: '../shared_logo.png'</span>
<span id="cb30-3"><a href="#cb30-3"></a>stimulus: '../shared_stimuli/standard_face.jpg'</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Key principles:</p>
<ul>
<li>All paths are relative to where your <code>index.html</code> file is located</li>
<li>No slash at the start = relative to current location</li>
<li><code>../</code> = go up one directory level</li>
<li>Always use forward slashes (<code>/</code>) even on Windows</li>
<li>Keep paths simple and consistent throughout your experiment</li>
</ul>
<p>Best practice: Keep all experimental files within your main experiment directory or its subfolders. This makes your experiment portable and avoids confusing <code>../</code> paths that can break when you move your experiment to different locations or servers.</p>
</section>
</section>
<section id="summary" class="level2" data-number="12.8">
<h2 data-number="12.8" class="anchored" data-anchor-id="summary"><span class="header-section-number">12.8</span> Summary</h2>
<p>Multimedia integration is both powerful and challenging for web-based experiments. The ability to present visual, auditory, and video content opens up new possibilities for creating engaging and ecologically valid experiments. However, success requires careful attention to several key principles.</p>
<p>Preloading is absolutely essential for any experiment using multimedia content. The <code>jsPsychPreload</code> plugin with <code>auto_preload: true</code> handles some cases automatically, but youâ€™ll more often need manual preloading for files embedded in timeline variables or HTML. Always include a progress bar and reasonable timeout limits to manage the user experience.</p>
<p>File format selection significantly impacts both compatibility and performance. Prioritize widely supported formats: JPEG for images, MP3 for audio, and MP4 for video. Provide fallback formats when concerned about compatibility and provide informative error messages to participants. Optimize file sizes to ensure reasonable loading times across different network conditions. To reduce file sizes, resize images/videos to be the size they are being presented. For example, if your image is only being shown at 200x200 pixels, donâ€™t load a 1000x1000px image. Resize it using a photo editor.</p>
<p>Embedding multimedia in HTML instructions can help with participant comprehension and engagement, but remember that these files also need to be preloaded. Combine visual examples, audio narration, and video demonstrations thoughtfully, always providing alternative text descriptions for accessibility.</p>
<p>Troubleshooting multimedia issues: File path problems are the most common issueâ€”use consistent relative paths and check the browserâ€™s developer tools for 404 errors. Format compatibility issues can be avoided by sticking to standard web formats and providing fallbacks when necessary. Performance problems often stem from oversized files or inadequate network conditions, so optimize your content and test across different connection speeds.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./11-L04.html" class="pagination-link" aria-label="Lab 4: Memory">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lab 4: Memory</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./13-L05.html" class="pagination-link" aria-label="Lab 5: Mental Imagery">
        <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Lab 5: Mental Imagery</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/12-multimedia.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>