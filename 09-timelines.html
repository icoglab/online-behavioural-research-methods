<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="An open source textbook for psychology students learning programming and online research methods.Primary Author: Nicholaus P. Brosowsky Co-Authors: Liam Yeo, Jackie Spear">

<title>9&nbsp; Timelines – Online Behavioural Research Methods: Programming with jsPsych</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./10-plugins.html" rel="next">
<link href="./08-L03.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e9b5551c1c55c86b42a831a3c09ea90c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b63434c4eca3d65156f11477424d0b79.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./09-timelines.html">UNIT 4: Timelines</a></li><li class="breadcrumb-item"><a href="./09-timelines.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Timelines</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Online Behavioural Research Methods: Programming with jsPsych</a> 
        <div class="sidebar-tools-main">
    <a href="https://https://github.com/icoglab/online-behavioural-research-methods" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 1: Fundamentals (I)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">HTML</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">CSS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-L01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lab 1: About Me</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 2: Fundamentals (II)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Javascript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-debugging-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Debugging JavaScript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-L02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lab 2: JS Exercises</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 3: Intro to JsPsych</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-jspsych.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">jsPsych</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-L03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 3: Language &amp; Thought</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 4: Timelines</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-timelines.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Timelines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-plugins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">More Plugins</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-L04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lab 4: Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A01_JS_Builtins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">JavaScript Built-in Functions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p>© 2024. This work is openly licensed via <a href="https://creativecommons.org/licenses/by-nc/4.0">CC BY NC 4.0</a>.</p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">9.1</span> Introduction</a></li>
  <li><a href="#why-use-timelines" id="toc-why-use-timelines" class="nav-link" data-scroll-target="#why-use-timelines"><span class="header-section-number">9.2</span> Why Use Timelines?</a>
  <ul class="collapse">
  <li><a href="#the-problem-with-individual-trial-objects" id="toc-the-problem-with-individual-trial-objects" class="nav-link" data-scroll-target="#the-problem-with-individual-trial-objects"><span class="header-section-number">9.2.1</span> The Problem with Individual Trial Objects</a></li>
  <li><a href="#the-timeline-solution" id="toc-the-timeline-solution" class="nav-link" data-scroll-target="#the-timeline-solution"><span class="header-section-number">9.2.2</span> The Timeline Solution</a></li>
  </ul></li>
  <li><a href="#basic-timeline-structure" id="toc-basic-timeline-structure" class="nav-link" data-scroll-target="#basic-timeline-structure"><span class="header-section-number">9.3</span> Basic Timeline Structure</a>
  <ul class="collapse">
  <li><a href="#a-single-trial-timeline" id="toc-a-single-trial-timeline" class="nav-link" data-scroll-target="#a-single-trial-timeline"><span class="header-section-number">9.3.1</span> A Single Trial Timeline</a></li>
  <li><a href="#multiple-trials-timeline" id="toc-multiple-trials-timeline" class="nav-link" data-scroll-target="#multiple-trials-timeline"><span class="header-section-number">9.3.2</span> Multiple Trials Timeline</a></li>
  </ul></li>
  <li><a href="#nested-timelines" id="toc-nested-timelines" class="nav-link" data-scroll-target="#nested-timelines"><span class="header-section-number">9.4</span> Nested Timelines</a>
  <ul class="collapse">
  <li><a href="#basic-nested-timeline" id="toc-basic-nested-timeline" class="nav-link" data-scroll-target="#basic-nested-timeline"><span class="header-section-number">9.4.1</span> Basic Nested Timeline</a></li>
  <li><a href="#overriding-parameters" id="toc-overriding-parameters" class="nav-link" data-scroll-target="#overriding-parameters"><span class="header-section-number">9.4.2</span> Overriding Parameters</a></li>
  </ul></li>
  <li><a href="#timeline-variables" id="toc-timeline-variables" class="nav-link" data-scroll-target="#timeline-variables"><span class="header-section-number">9.5</span> Timeline Variables</a>
  <ul class="collapse">
  <li><a href="#understanding-timeline-variables" id="toc-understanding-timeline-variables" class="nav-link" data-scroll-target="#understanding-timeline-variables"><span class="header-section-number">9.5.1</span> Understanding Timeline Variables</a></li>
  <li><a href="#basic-timeline-variables-examples" id="toc-basic-timeline-variables-examples" class="nav-link" data-scroll-target="#basic-timeline-variables-examples"><span class="header-section-number">9.5.2</span> Basic Timeline Variables Examples</a></li>
  <li><a href="#adding-more-events" id="toc-adding-more-events" class="nav-link" data-scroll-target="#adding-more-events"><span class="header-section-number">9.5.3</span> Adding More Events</a></li>
  </ul></li>
  <li><a href="#quick-randomization-and-repetition" id="toc-quick-randomization-and-repetition" class="nav-link" data-scroll-target="#quick-randomization-and-repetition"><span class="header-section-number">9.6</span> Quick Randomization and Repetition</a></li>
  <li><a href="#best-practices-for-timeline-design" id="toc-best-practices-for-timeline-design" class="nav-link" data-scroll-target="#best-practices-for-timeline-design"><span class="header-section-number">9.7</span> Best Practices for Timeline Design</a>
  <ul class="collapse">
  <li><a href="#plan-your-experimental-structure-first" id="toc-plan-your-experimental-structure-first" class="nav-link" data-scroll-target="#plan-your-experimental-structure-first"><span class="header-section-number">9.7.1</span> Plan Your Experimental Structure First</a></li>
  <li><a href="#use-meaningful-variable-names" id="toc-use-meaningful-variable-names" class="nav-link" data-scroll-target="#use-meaningful-variable-names"><span class="header-section-number">9.7.2</span> Use Meaningful Variable Names</a></li>
  <li><a href="#include-useful-information-in-timeline-variables" id="toc-include-useful-information-in-timeline-variables" class="nav-link" data-scroll-target="#include-useful-information-in-timeline-variables"><span class="header-section-number">9.7.3</span> Include Useful Information in Timeline Variables</a></li>
  <li><a href="#keep-procedures-modular" id="toc-keep-procedures-modular" class="nav-link" data-scroll-target="#keep-procedures-modular"><span class="header-section-number">9.7.4</span> Keep Procedures Modular</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">9.8</span> Summary</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://https://github.com/icoglab/online-behavioural-research-methods/edit/main/09-timelines.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./09-timelines.html">UNIT 4: Timelines</a></li><li class="breadcrumb-item"><a href="./09-timelines.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Timelines</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Timelines</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled" title="learning goals">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
learning goals
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ul>
<li>Understand the limitations of individual trial objects and why timelines are essential for complex experiments</li>
<li>Create nested timelines to define common parameters once and apply them to multiple trials</li>
<li>Use timeline variables to separate experimental procedures from stimulus-specific values</li>
<li>Implement randomization and repetition using timeline parameters</li>
<li>Structure experiments hierarchically with modular timeline components</li>
<li>Apply best practices for timeline design including meaningful variable names and useful metadata</li>
<li>Build efficient, maintainable experiment code that scales from simple to complex designs</li>
</ul>
</div>
</div>
</div>
<section id="introduction" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">9.1</span> Introduction</h2>
<p>In the previous chapter, you learned to create individual trials by defining trial objects with specific parameters. While this approach works well for simple experiments, real psychological studies typically involve many trials that follow similar patterns with slight variations. Imagine having to manually code 100 individual trials for a lexical decision experiment where each trial requires separate lines of code. This approach quickly becomes unwieldy and error-prone. Another problem with manually coding each trial is that they always appear in the same order. We typically want some randomization to control for order effects. We can’t easily do this when we manually code each trial.</p>
<p>This is where <strong>timelines</strong> become essential. A timeline in jsPsych is the backbone of your experiment. It defines the structure and sequence of all trials. Think of it as the experimental protocol that organizes how your study unfolds from start to finish.</p>
</section>
<section id="why-use-timelines" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="why-use-timelines"><span class="header-section-number">9.2</span> Why Use Timelines?</h2>
<section id="the-problem-with-individual-trial-objects" class="level3" data-number="9.2.1">
<h3 data-number="9.2.1" class="anchored" data-anchor-id="the-problem-with-individual-trial-objects"><span class="header-section-number">9.2.1</span> The Problem with Individual Trial Objects</h3>
<p>Consider the lexical decision task from the previous chapter, where participants see a string of letters and decide whether it forms a real word or not. A typical experiment might test 50 words and 50 nonwords. Using the individual trial approach, you would need to create 100 separate trial objects:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">// Word trials</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">const</span> trial_1 <span class="op">=</span> {</span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;div style="font-size: 48px;"&gt;HOUSE&lt;/div&gt;'</span><span class="op">,</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>}<span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="kw">const</span> trial_2 <span class="op">=</span> {</span>
<span id="cb1-10"><a href="#cb1-10"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;div style="font-size: 48px;"&gt;TABLE&lt;/div&gt;'</span><span class="op">,</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>}<span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15"></a></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="co">// Nonword trials</span></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="kw">const</span> trial_3 <span class="op">=</span> {</span>
<span id="cb1-18"><a href="#cb1-18"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb1-19"><a href="#cb1-19"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;div style="font-size: 48px;"&gt;BLAFE&lt;/div&gt;'</span><span class="op">,</span></span>
<span id="cb1-20"><a href="#cb1-20"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb1-21"><a href="#cb1-21"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span></span>
<span id="cb1-22"><a href="#cb1-22"></a>}<span class="op">;</span></span>
<span id="cb1-23"><a href="#cb1-23"></a></span>
<span id="cb1-24"><a href="#cb1-24"></a><span class="kw">const</span> trial_4 <span class="op">=</span> {</span>
<span id="cb1-25"><a href="#cb1-25"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb1-26"><a href="#cb1-26"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'&lt;div style="font-size: 48px;"&gt;GLINT&lt;/div&gt;'</span><span class="op">,</span></span>
<span id="cb1-27"><a href="#cb1-27"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb1-28"><a href="#cb1-28"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span></span>
<span id="cb1-29"><a href="#cb1-29"></a>}<span class="op">;</span></span>
<span id="cb1-30"><a href="#cb1-30"></a></span>
<span id="cb1-31"><a href="#cb1-31"></a></span>
<span id="cb1-32"><a href="#cb1-32"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb1-33"><a href="#cb1-33"></a> trial_1<span class="op">,</span></span>
<span id="cb1-34"><a href="#cb1-34"></a> trial_2<span class="op">,</span></span>
<span id="cb1-35"><a href="#cb1-35"></a> trial_3<span class="op">,</span></span>
<span id="cb1-36"><a href="#cb1-36"></a> trial_4</span>
<span id="cb1-37"><a href="#cb1-37"></a>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This approach creates several problems. First, you’re writing essentially the same code over and over, which is repetitive and time-consuming. Second, it’s error-prone because it’s easy to make typos or forget to change parameters. Third, if you want to modify something like the font size or the response keys, you need to edit 100 different objects. Finally, the order of the trials is hard-coded, which means everyone sees the same order of trials every time.</p>
</section>
<section id="the-timeline-solution" class="level3" data-number="9.2.2">
<h3 data-number="9.2.2" class="anchored" data-anchor-id="the-timeline-solution"><span class="header-section-number">9.2.2</span> The Timeline Solution</h3>
<p>Timelines solve these problems by allowing you to define procedures once and apply them to multiple stimuli, organize trials hierarchically with nested structures, easily modify parameters that apply to multiple trials, and implement randomization efficiently.</p>
</section>
</section>
<section id="basic-timeline-structure" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="basic-timeline-structure"><span class="header-section-number">9.3</span> Basic Timeline Structure</h2>
<section id="a-single-trial-timeline" class="level3" data-number="9.3.1">
<h3 data-number="9.3.1" class="anchored" data-anchor-id="a-single-trial-timeline"><span class="header-section-number">9.3.1</span> A Single Trial Timeline</h3>
<p>Let’s start by reviewing the way we’ve already been programming our experiments, but discuss it in terms of being a timeline. The simplest timeline contains just one trial. Instead of running a trial directly, you embed it in an array. This should look familiar:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">const</span> trial <span class="op">=</span> {</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the experiment.'</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>}<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="kw">const</span> timeline <span class="op">=</span> [trial]<span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="multiple-trials-timeline" class="level3" data-number="9.3.2">
<h3 data-number="9.3.2" class="anchored" data-anchor-id="multiple-trials-timeline"><span class="header-section-number">9.3.2</span> Multiple Trials Timeline</h3>
<p>For multiple trials, simply add more trial objects to the timeline array. Again, this should look fairly familiar:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">const</span> timeline <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw">const</span> welcome_trial <span class="op">=</span> {</span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the lexical decision experiment. Press any key to continue.'</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>}<span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7"></a></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="kw">const</span> instruction_trial <span class="op">=</span> {</span>
<span id="cb3-9"><a href="#cb3-9"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'You will see letter strings. Press F if it is a real word, J if it is not a real word. Press any key to begin.'</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>}<span class="op">;</span></span>
<span id="cb3-12"><a href="#cb3-12"></a></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="kw">const</span> ready_trial <span class="op">=</span> {</span>
<span id="cb3-14"><a href="#cb3-14"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Ready? Press SPACE to start.'</span><span class="op">,</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">' '</span>]</span>
<span id="cb3-17"><a href="#cb3-17"></a>}<span class="op">;</span></span>
<span id="cb3-18"><a href="#cb3-18"></a></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="kw">let</span> timeline <span class="op">=</span> [</span>
<span id="cb3-20"><a href="#cb3-20"></a> welcome_trial<span class="op">,</span></span>
<span id="cb3-21"><a href="#cb3-21"></a> instruction_trial<span class="op">,</span></span>
<span id="cb3-22"><a href="#cb3-22"></a> ready_trial</span>
<span id="cb3-23"><a href="#cb3-23"></a>]</span>
<span id="cb3-24"><a href="#cb3-24"></a></span>
<span id="cb3-25"><a href="#cb3-25"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is a timeline because jsPsych will run this in the order you input them in the array. If I were to change the order of this timeline, it would change the order of the events.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">let</span> timeline <span class="op">=</span> [</span>
<span id="cb4-2"><a href="#cb4-2"></a> ready_trial<span class="op">,</span>   <span class="co">// first</span></span>
<span id="cb4-3"><a href="#cb4-3"></a> welcome_trial   <span class="co">// second</span></span>
<span id="cb4-4"><a href="#cb4-4"></a> instruction_trial <span class="co">// third</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="nested-timelines" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="nested-timelines"><span class="header-section-number">9.4</span> Nested Timelines</h2>
<p>Now, let’s expand on this basic principle to create more complex experimental procedures. One of the most powerful features of timelines is the ability to nest them. This allows you to define common parameters once and apply them to multiple trials. Again, think of our lexical decision task. Everything about each trial is identical other than the word stimulus itself. The nested timeline will allow us to write all of that code once, and indicate that the word should change each time.</p>
<section id="basic-nested-timeline" class="level3" data-number="9.4.1">
<h3 data-number="9.4.1" class="anchored" data-anchor-id="basic-nested-timeline"><span class="header-section-number">9.4.1</span> Basic Nested Timeline</h3>
<p>Instead of creating individual trial objects, we can define the procedure once:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">JavaScript</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="kw">const</span> welcome_trial <span class="op">=</span> {</span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the. Press any key to continue.'</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>}<span class="op">;</span></span>
<span id="cb5-7"><a href="#cb5-7"></a></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="kw">const</span> lexical_decision <span class="op">=</span> {</span>
<span id="cb5-9"><a href="#cb5-9"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb5-13"><a href="#cb5-13"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'HOUSE'</span>}<span class="op">,</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'TABLE'</span>}<span class="op">,</span></span>
<span id="cb5-15"><a href="#cb5-15"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'BLAFE'</span>}<span class="op">,</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'GLINT'</span>}</span>
<span id="cb5-17"><a href="#cb5-17"></a>  ]</span>
<span id="cb5-18"><a href="#cb5-18"></a>}<span class="op">;</span></span>
<span id="cb5-19"><a href="#cb5-19"></a></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="kw">const</span> timeline <span class="op">=</span> [welcome_trial<span class="op">,</span> lexical_decision]</span>
<span id="cb5-21"><a href="#cb5-21"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div id="demo-container-1" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-1" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\nconst welcome_trial = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'Welcome to the. Press any key to continue.\'\n};\n\nconst lexical_decision = {\n  type: jsPsychHtmlKeyboardResponse,\n  choices: [\'f\', \'j\'],\n  prompt: \'<p>Press F for word, J for nonword</p>\',\n  timeline: [\n    {stimulus: \'HOUSE\'},\n    {stimulus: \'TABLE\'},\n    {stimulus: \'BLAFE\'},\n    {stimulus: \'GLINT\'}\n  ]\n};\n\nconst timeline = [welcome_trial, lexical_decision]\njsPsych.run(timeline)\n \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-1');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-1" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



const welcome_trial = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: 'Welcome to the. Press any key to continue.'
};

const lexical_decision = {
  type: jsPsychHtmlKeyboardResponse,
  choices: ['f', 'j'],
  prompt: '<p>Press F for word, J for nonword</p>',
  timeline: [
    {stimulus: 'HOUSE'},
    {stimulus: 'TABLE'},
    {stimulus: 'BLAFE'},
    {stimulus: 'GLINT'}
  ]
};

const timeline = [welcome_trial, lexical_decision]
jsPsych.run(timeline)
 
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-1&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-1&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>This creates four trials that all share the same <code>type</code>, <code>choices</code>, and <code>prompt</code> parameters, but each displays a different letter string. When we write a nested timeline like this we can put parameters in the trial object, which then are applied to all the trials in the timeline. In this example, <code>type</code>, <code>choices</code> and <code>prompt</code> are applied to all four trials in the timeline. We can also put parameters inside each individual trial inside the timeline, which will just apply to that trial. In this case, we’re changing the <code>stimulus</code> on each trial. At the moment, the timeline still runs in the order they’re written: <code>HOUSE</code> –&gt; <code>TABLE</code> –&gt; <code>BLAFE</code> –&gt;<code>GLINT</code> .</p>
</section>
<section id="overriding-parameters" class="level3" data-number="9.4.2">
<h3 data-number="9.4.2" class="anchored" data-anchor-id="overriding-parameters"><span class="header-section-number">9.4.2</span> Overriding Parameters</h3>
<p>You can override shared parameters for specific trials when needed:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">JavaScript</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="kw">const</span> welcome_trial <span class="op">=</span> {</span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the. Press any key to continue.'</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>}<span class="op">;</span></span>
<span id="cb6-7"><a href="#cb6-7"></a></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="kw">const</span> lexical_decision <span class="op">=</span> {</span>
<span id="cb6-9"><a href="#cb6-9"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>  <span class="dt">prompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb6-13"><a href="#cb6-13"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'HOUSE'</span>}<span class="op">,</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'TABLE'</span>}<span class="op">,</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>    {</span>
<span id="cb6-16"><a href="#cb6-16"></a>     <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'BLAFE'</span><span class="op">,</span></span>
<span id="cb6-17"><a href="#cb6-17"></a>     <span class="dt">prompt</span><span class="op">:</span> <span class="st">"&lt;p&gt;This is an attention check: Press F.&lt;/p&gt;"</span></span>
<span id="cb6-18"><a href="#cb6-18"></a>    }<span class="op">,</span></span>
<span id="cb6-19"><a href="#cb6-19"></a>    {<span class="dt">stimulus</span><span class="op">:</span> <span class="st">'GLINT'</span>}</span>
<span id="cb6-20"><a href="#cb6-20"></a>  ]</span>
<span id="cb6-21"><a href="#cb6-21"></a>}<span class="op">;</span></span>
<span id="cb6-22"><a href="#cb6-22"></a></span>
<span id="cb6-23"><a href="#cb6-23"></a><span class="kw">const</span> timeline <span class="op">=</span> [welcome_trial<span class="op">,</span> lexical_decision]</span>
<span id="cb6-24"><a href="#cb6-24"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div id="demo-container-2" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-2" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\nconst welcome_trial = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'Welcome to the. Press any key to continue.\'\n};\n\nconst lexical_decision = {\n  type: jsPsychHtmlKeyboardResponse,\n  choices: [\'f\', \'j\'],\n  prompt: \'<p>Press F for word, J for nonword</p>\',\n  timeline: [\n    {stimulus: \'HOUSE\'},\n    {stimulus: \'TABLE\'},\n    {\n     stimulus: \'BLAFE\', \n     prompt: \'<p>This is an attention check: Press F.</p>\'\n    },\n    {stimulus: \'GLINT\'}\n  ]\n};\n\nconst timeline = [welcome_trial, lexical_decision]\njsPsych.run(timeline)\n\n \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-2');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-2" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



const welcome_trial = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: 'Welcome to the. Press any key to continue.'
};

const lexical_decision = {
  type: jsPsychHtmlKeyboardResponse,
  choices: ['f', 'j'],
  prompt: '<p>Press F for word, J for nonword</p>',
  timeline: [
    {stimulus: 'HOUSE'},
    {stimulus: 'TABLE'},
    {
     stimulus: 'BLAFE', 
     prompt: '<p>This is an attention check: Press F.</p>'
    },
    {stimulus: 'GLINT'}
  ]
};

const timeline = [welcome_trial, lexical_decision]
jsPsych.run(timeline)

 
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-2&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-2&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>The third trial will display the custom prompt instead of the default one.</p>
</section>
</section>
<section id="timeline-variables" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="timeline-variables"><span class="header-section-number">9.5</span> Timeline Variables</h2>
<p>The nested timeline approach we just learned is a good first step, but we’re still not being as efficient as we could be. If we wanted to change the font size or color, we’d need to edit every single stimulus line. If we wanted to add a fixation before each trial, we’d have to write it out each time. More importantly, we have no easy way to randomize the order of these trials or to add additional information about each stimulus that might be useful for our analysis.</p>
<p>Timeline variables solve these problems by separating the experimental procedure from the specific values that change from trial to trial. Instead of hardcoding each variation, we define what varies and let jsPsych handle the repetition for us.</p>
<section id="understanding-timeline-variables" class="level3" data-number="9.5.1">
<h3 data-number="9.5.1" class="anchored" data-anchor-id="understanding-timeline-variables"><span class="header-section-number">9.5.1</span> Understanding Timeline Variables</h3>
<p>Timeline variables work on a simple principle: you define your experimental procedure once, then specify a list of variables and their values for each trial. jsPsych automatically runs through your procedure multiple times, using different variable values each time.</p>
<p>Think of it like a mail merge in a word processor. You write a letter template once (“Dear [NAME], thank you for your [DONATION_AMOUNT] donation”), then provide a list of names and donation amounts. The software creates personalized letters by filling in the variables. Timeline variables work the same way for experiments.</p>
</section>
<section id="basic-timeline-variables-examples" class="level3" data-number="9.5.2">
<h3 data-number="9.5.2" class="anchored" data-anchor-id="basic-timeline-variables-examples"><span class="header-section-number">9.5.2</span> Basic Timeline Variables Examples</h3>
<p>Let’s start by rewriting our lexical decision task using timeline variables. We’ll create the same <code>lexical_decision</code> object with a timeline, except instead of writing each trial inside the timeline, I’ll just write one trial and for the stimulus, I’ll put in a placeholder function called <code>jsPsych.timelineVariable()</code>. Then, I create a new array called <code>timeline_variables</code>. This array contains objects with key-value pairs. These can be anything I want, and in this case, I make the key <code>word</code> and the values will be the words that change on each trial.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">JavaScript</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="kw">const</span> welcome_trial <span class="op">=</span> {</span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the. Press any key to continue.'</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>}<span class="op">;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="kw">const</span> lexical_decision <span class="op">=</span> {</span>
<span id="cb7-9"><a href="#cb7-9"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb7-10"><a href="#cb7-10"></a>    {</span>
<span id="cb7-11"><a href="#cb7-11"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'word'</span>)<span class="op">,</span></span>
<span id="cb7-13"><a href="#cb7-13"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>      <span class="dt">prompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>    }</span>
<span id="cb7-16"><a href="#cb7-16"></a>  ]<span class="op">,</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb7-18"><a href="#cb7-18"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">'HOUSE'</span> }<span class="op">,</span></span>
<span id="cb7-19"><a href="#cb7-19"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">'TABLE'</span> }<span class="op">,</span></span>
<span id="cb7-20"><a href="#cb7-20"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">'BLAFE'</span> }<span class="op">,</span></span>
<span id="cb7-21"><a href="#cb7-21"></a>    { <span class="dt">word</span><span class="op">:</span> <span class="st">'GLINT'</span> }</span>
<span id="cb7-22"><a href="#cb7-22"></a>  ]</span>
<span id="cb7-23"><a href="#cb7-23"></a>}<span class="op">;</span></span>
<span id="cb7-24"><a href="#cb7-24"></a></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="kw">const</span> timeline <span class="op">=</span> [welcome_trial<span class="op">,</span> lexical_decision]</span>
<span id="cb7-26"><a href="#cb7-26"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div id="demo-container-3" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-3" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\nconst welcome_trial = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'Welcome to the. Press any key to continue.\'\n};\n\nconst lexical_decision = {\n  type: jsPsychHtmlKeyboardResponse,\n  choices: [\'f\', \'j\'],\n  prompt: \'<p>Press F for word, J for nonword</p>\',\n  timeline: [\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: jsPsych.timelineVariable(\'word\'),\n      choices: [\'f\', \'j\'],\n      prompt: \'<p>Press F for word, J for nonword</p>\'\n    }\n  ],\n  timeline_variables: [\n    { word: \'HOUSE\' },\n    { word: \'TABLE\' },\n    { word: \'BLAFE\' },\n    { word: \'GLINT\' }\n  ]\n};\n\nconst timeline = [welcome_trial, lexical_decision]\njsPsych.run(timeline)\n\n \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-3');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-3" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



const welcome_trial = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: 'Welcome to the. Press any key to continue.'
};

const lexical_decision = {
  type: jsPsychHtmlKeyboardResponse,
  choices: ['f', 'j'],
  prompt: '<p>Press F for word, J for nonword</p>',
  timeline: [
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: jsPsych.timelineVariable('word'),
      choices: ['f', 'j'],
      prompt: '<p>Press F for word, J for nonword</p>'
    }
  ],
  timeline_variables: [
    { word: 'HOUSE' },
    { word: 'TABLE' },
    { word: 'BLAFE' },
    { word: 'GLINT' }
  ]
};

const timeline = [welcome_trial, lexical_decision]
jsPsych.run(timeline)

 
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-3&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-3&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>This creates a complete procedure that will run four times, once for each item in the <code>timeline_variables</code> array.</p>
<p><code>jsPsych.timelineVariable('word')</code>: Use this to reference timeline variables in trial parameters. It creates a placeholder that jsPsych evaluates at the right time. This placeholder simply tells jsPsych to take whatever is in <code>word</code> and place it in the <code>stimulus</code> on that trial.</p>
<p>You can combine multiple timeline variables and replace any of the trial parameters that we want to change on that trial.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">JavaScript</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="kw">const</span> welcome_trial <span class="op">=</span> {</span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the. Press any key to continue.'</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>}<span class="op">;</span></span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="kw">const</span> lexical_decision <span class="op">=</span> {</span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb8-12"><a href="#cb8-12"></a>    {</span>
<span id="cb8-13"><a href="#cb8-13"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'word'</span>)<span class="op">,</span></span>
<span id="cb8-15"><a href="#cb8-15"></a>      <span class="dt">choices</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'myChoices'</span>)<span class="op">,</span></span>
<span id="cb8-16"><a href="#cb8-16"></a>      <span class="dt">prompt</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'myPrompt'</span>)</span>
<span id="cb8-17"><a href="#cb8-17"></a>    }</span>
<span id="cb8-18"><a href="#cb8-18"></a>  ]<span class="op">,</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb8-20"><a href="#cb8-20"></a>    {</span>
<span id="cb8-21"><a href="#cb8-21"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'HOUSE'</span><span class="op">,</span> </span>
<span id="cb8-22"><a href="#cb8-22"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb8-23"><a href="#cb8-23"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]</span>
<span id="cb8-24"><a href="#cb8-24"></a>    }<span class="op">,</span></span>
<span id="cb8-25"><a href="#cb8-25"></a>    {</span>
<span id="cb8-26"><a href="#cb8-26"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'TABLE'</span><span class="op">,</span> </span>
<span id="cb8-27"><a href="#cb8-27"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb8-28"><a href="#cb8-28"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]</span>
<span id="cb8-29"><a href="#cb8-29"></a>    }<span class="op">,</span></span>
<span id="cb8-30"><a href="#cb8-30"></a>    {</span>
<span id="cb8-31"><a href="#cb8-31"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'BLAFE'</span><span class="op">,</span> </span>
<span id="cb8-32"><a href="#cb8-32"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;This is an attention check: Press X.&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb8-33"><a href="#cb8-33"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span><span class="op">,</span> <span class="st">'x'</span>]</span>
<span id="cb8-34"><a href="#cb8-34"></a>    }<span class="op">,</span></span>
<span id="cb8-35"><a href="#cb8-35"></a>    {</span>
<span id="cb8-36"><a href="#cb8-36"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'GLINT'</span><span class="op">,</span> </span>
<span id="cb8-37"><a href="#cb8-37"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb8-38"><a href="#cb8-38"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]</span>
<span id="cb8-39"><a href="#cb8-39"></a>    }</span>
<span id="cb8-40"><a href="#cb8-40"></a>  ]</span>
<span id="cb8-41"><a href="#cb8-41"></a>}<span class="op">;</span></span>
<span id="cb8-42"><a href="#cb8-42"></a></span>
<span id="cb8-43"><a href="#cb8-43"></a><span class="kw">const</span> timeline <span class="op">=</span> [welcome_trial<span class="op">,</span> lexical_decision]</span>
<span id="cb8-44"><a href="#cb8-44"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div id="demo-container-4" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-4" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\nconst welcome_trial = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'Welcome to the. Press any key to continue.\'\n};\n\nconst lexical_decision = {\n  type: jsPsychHtmlKeyboardResponse,\n  choices: [\'f\', \'j\'],\n  timeline: [\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: jsPsych.timelineVariable(\'word\'),\n      choices: jsPsych.timelineVariable(\'myChoices\'),\n      prompt: jsPsych.timelineVariable(\'myPrompt\')\n    }\n  ],\n  timeline_variables: [\n    {\n     word: \'HOUSE\', \n     myPrompt: \'<p>Press F for word, J for nonword</p>\', \n     myChoices: [\'f\', \'j\']\n    },\n    {\n     word: \'TABLE\', \n     myPrompt: \'<p>Press F for word, J for nonword</p>\', \n     myChoices: [\'f\', \'j\']\n    },\n    {\n     word: \'BLAFE\', \n     myPrompt: \'<p>This is an attention check: Press X.</p>\', \n     myChoices: [\'f\', \'j\', \'x\']\n    },\n    {\n     word: \'GLINT\', \n     myPrompt: \'<p>Press F for word, J for nonword</p>\', \n     myChoices: [\'f\', \'j\']\n    }\n  ]\n};\n\nconst timeline = [welcome_trial, lexical_decision]\njsPsych.run(timeline)\n\n \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-4');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-4" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



const welcome_trial = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: 'Welcome to the. Press any key to continue.'
};

const lexical_decision = {
  type: jsPsychHtmlKeyboardResponse,
  choices: ['f', 'j'],
  timeline: [
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: jsPsych.timelineVariable('word'),
      choices: jsPsych.timelineVariable('myChoices'),
      prompt: jsPsych.timelineVariable('myPrompt')
    }
  ],
  timeline_variables: [
    {
     word: 'HOUSE', 
     myPrompt: '<p>Press F for word, J for nonword</p>', 
     myChoices: ['f', 'j']
    },
    {
     word: 'TABLE', 
     myPrompt: '<p>Press F for word, J for nonword</p>', 
     myChoices: ['f', 'j']
    },
    {
     word: 'BLAFE', 
     myPrompt: '<p>This is an attention check: Press X.</p>', 
     myChoices: ['f', 'j', 'x']
    },
    {
     word: 'GLINT', 
     myPrompt: '<p>Press F for word, J for nonword</p>', 
     myChoices: ['f', 'j']
    }
  ]
};

const timeline = [welcome_trial, lexical_decision]
jsPsych.run(timeline)

 
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-4&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-4&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>Notice how I can replace any of my trial parameters and define it for that particular trial inside my <code>timeline_variables</code>. Also notice that I still have to follow the format required for that parameter: <code>stimulus</code> and <code>prompt</code> take text or HTML and <code>choices</code> requires an array.</p>
</section>
<section id="adding-more-events" class="level3" data-number="9.5.3">
<h3 data-number="9.5.3" class="anchored" data-anchor-id="adding-more-events"><span class="header-section-number">9.5.3</span> Adding More Events</h3>
<p>One of the benefits of defining our timeline this way is that we can add more events to our timeline loop. For instance, we often put a ‘fixation’ cross before our stimulus. The fixation cross shows the participant where they should pay attention and get ready for the trial. To add a fixation to every trial, we just need to insert it into our timline loop:</p>
<div class="cell">
<style type="text/css">
[id^="cb10-"]:nth-child(n+12):nth-child(-n+17) {
 background-color: #e1f5fe;
 box-shadow: inset 5px 0 0 0 #0288d1; 
 padding-right: 1rem;
}
</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">JavaScript</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="kw">const</span> welcome_trial <span class="op">=</span> {</span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the. Press any key to continue.'</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>}<span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="kw">const</span> lexical_decision <span class="op">=</span> {</span>
<span id="cb9-9"><a href="#cb9-9"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb9-12"><a href="#cb9-12"></a>    {</span>
<span id="cb9-13"><a href="#cb9-13"></a>     <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>     <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style="font-size: 48px"&gt; + &lt;/span&gt;`</span><span class="op">,</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>     <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>     <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb9-17"><a href="#cb9-17"></a>    }<span class="op">,</span></span>
<span id="cb9-18"><a href="#cb9-18"></a>    {</span>
<span id="cb9-19"><a href="#cb9-19"></a>     <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-20"><a href="#cb9-20"></a>     <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'word'</span>)<span class="op">,</span></span>
<span id="cb9-21"><a href="#cb9-21"></a>     <span class="dt">choices</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'myChoices'</span>)<span class="op">,</span></span>
<span id="cb9-22"><a href="#cb9-22"></a>     <span class="dt">prompt</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'myPrompt'</span>)</span>
<span id="cb9-23"><a href="#cb9-23"></a>    }</span>
<span id="cb9-24"><a href="#cb9-24"></a>  ]<span class="op">,</span></span>
<span id="cb9-25"><a href="#cb9-25"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb9-26"><a href="#cb9-26"></a>    {</span>
<span id="cb9-27"><a href="#cb9-27"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'HOUSE'</span><span class="op">,</span> </span>
<span id="cb9-28"><a href="#cb9-28"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb9-29"><a href="#cb9-29"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]</span>
<span id="cb9-30"><a href="#cb9-30"></a>    }<span class="op">,</span></span>
<span id="cb9-31"><a href="#cb9-31"></a>    {</span>
<span id="cb9-32"><a href="#cb9-32"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'TABLE'</span><span class="op">,</span> </span>
<span id="cb9-33"><a href="#cb9-33"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb9-34"><a href="#cb9-34"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]</span>
<span id="cb9-35"><a href="#cb9-35"></a>    }<span class="op">,</span></span>
<span id="cb9-36"><a href="#cb9-36"></a>    {</span>
<span id="cb9-37"><a href="#cb9-37"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'BLAFE'</span><span class="op">,</span> </span>
<span id="cb9-38"><a href="#cb9-38"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;This is an attention check: Press X.&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb9-39"><a href="#cb9-39"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span><span class="op">,</span> <span class="st">'x'</span>]</span>
<span id="cb9-40"><a href="#cb9-40"></a>    }<span class="op">,</span></span>
<span id="cb9-41"><a href="#cb9-41"></a>    {</span>
<span id="cb9-42"><a href="#cb9-42"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'GLINT'</span><span class="op">,</span> </span>
<span id="cb9-43"><a href="#cb9-43"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb9-44"><a href="#cb9-44"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]</span>
<span id="cb9-45"><a href="#cb9-45"></a>    }</span>
<span id="cb9-46"><a href="#cb9-46"></a>  ]</span>
<span id="cb9-47"><a href="#cb9-47"></a>}<span class="op">;</span></span>
<span id="cb9-48"><a href="#cb9-48"></a></span>
<span id="cb9-49"><a href="#cb9-49"></a><span class="kw">const</span> timeline <span class="op">=</span> [welcome_trial<span class="op">,</span> lexical_decision]</span>
<span id="cb9-50"><a href="#cb9-50"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div id="demo-container-5" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-5" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\nconst welcome_trial = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'Welcome to the. Press any key to continue.\'\n};\n\nconst lexical_decision = {\n  type: jsPsychHtmlKeyboardResponse,\n  choices: [\'f\', \'j\'],\n  timeline: [\n    {\n     type: jsPsychHtmlKeyboardResponse,\n     stimulus: `<span style=\'font-size: 48px\'> + </span>`,\n     choices: \'NO_KEYS\',\n     trial_duration: 1000\n    },\n    {\n     type: jsPsychHtmlKeyboardResponse,\n     stimulus: jsPsych.timelineVariable(\'word\'),\n     choices: jsPsych.timelineVariable(\'myChoices\'),\n     prompt: jsPsych.timelineVariable(\'myPrompt\')\n    }\n  ],\n  timeline_variables: [\n    {\n     word: \'HOUSE\', \n     myPrompt: \'<p>Press F for word, J for nonword</p>\', \n     myChoices: [\'f\', \'j\']\n    },\n    {\n     word: \'TABLE\', \n     myPrompt: \'<p>Press F for word, J for nonword</p>\', \n     myChoices: [\'f\', \'j\']\n    },\n    {\n     word: \'BLAFE\', \n     myPrompt: \'<p>This is an attention check: Press X.</p>\', \n     myChoices: [\'f\', \'j\', \'x\']\n    },\n    {\n     word: \'GLINT\', \n     myPrompt: \'<p>Press F for word, J for nonword</p>\', \n     myChoices: [\'f\', \'j\']\n    }\n  ]\n};\n\nconst timeline = [welcome_trial, lexical_decision]\njsPsych.run(timeline)\n\n \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-5');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-5" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



const welcome_trial = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: 'Welcome to the. Press any key to continue.'
};

const lexical_decision = {
  type: jsPsychHtmlKeyboardResponse,
  choices: ['f', 'j'],
  timeline: [
    {
     type: jsPsychHtmlKeyboardResponse,
     stimulus: `<span style='font-size: 48px'> + </span>`,
     choices: 'NO_KEYS',
     trial_duration: 1000
    },
    {
     type: jsPsychHtmlKeyboardResponse,
     stimulus: jsPsych.timelineVariable('word'),
     choices: jsPsych.timelineVariable('myChoices'),
     prompt: jsPsych.timelineVariable('myPrompt')
    }
  ],
  timeline_variables: [
    {
     word: 'HOUSE', 
     myPrompt: '<p>Press F for word, J for nonword</p>', 
     myChoices: ['f', 'j']
    },
    {
     word: 'TABLE', 
     myPrompt: '<p>Press F for word, J for nonword</p>', 
     myChoices: ['f', 'j']
    },
    {
     word: 'BLAFE', 
     myPrompt: '<p>This is an attention check: Press X.</p>', 
     myChoices: ['f', 'j', 'x']
    },
    {
     word: 'GLINT', 
     myPrompt: '<p>Press F for word, J for nonword</p>', 
     myChoices: ['f', 'j']
    }
  ]
};

const timeline = [welcome_trial, lexical_decision]
jsPsych.run(timeline)

 
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-5&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-5&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>The timeline always goes in order <code>fixation</code> –&gt; <code>word</code>, then loops and repeats to go through each of our <code>timeline_variables</code>. We can add as many more events as we’d like:</p>
<div class="cell">
<style type="text/css">
[id^="cb11-"]:nth-child(n+25):nth-child(-n+41) {
 background-color: #e1f5fe;
 box-shadow: inset 5px 0 0 0 #0288d1; 
 padding-right: 1rem;
}
</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">JavaScript</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="kw">const</span> welcome_trial <span class="op">=</span> {</span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the. Press any key to continue.'</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>}<span class="op">;</span></span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="kw">const</span> lexical_decision <span class="op">=</span> {</span>
<span id="cb10-9"><a href="#cb10-9"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb10-10"><a href="#cb10-10"></a>  <span class="dt">choices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]<span class="op">,</span></span>
<span id="cb10-11"><a href="#cb10-11"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb10-12"><a href="#cb10-12"></a>    {</span>
<span id="cb10-13"><a href="#cb10-13"></a>     <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>     <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style="font-size: 48px"&gt; + &lt;/span&gt;`</span><span class="op">,</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>     <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span></span>
<span id="cb10-16"><a href="#cb10-16"></a>     <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>    }<span class="op">,</span></span>
<span id="cb10-18"><a href="#cb10-18"></a>    {</span>
<span id="cb10-19"><a href="#cb10-19"></a>     <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb10-20"><a href="#cb10-20"></a>     <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'word'</span>)<span class="op">,</span></span>
<span id="cb10-21"><a href="#cb10-21"></a>     <span class="dt">choices</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'myChoices'</span>)<span class="op">,</span></span>
<span id="cb10-22"><a href="#cb10-22"></a>     <span class="dt">prompt</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'myPrompt'</span>)</span>
<span id="cb10-23"><a href="#cb10-23"></a>    }<span class="op">,</span></span>
<span id="cb10-24"><a href="#cb10-24"></a>    {</span>
<span id="cb10-25"><a href="#cb10-25"></a>     <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb10-26"><a href="#cb10-26"></a>     <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style='font-size: 48px; color: Tomato'&gt; Next Trial in... 3 &lt;/span&gt;`</span><span class="op">,</span></span>
<span id="cb10-27"><a href="#cb10-27"></a>     <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span></span>
<span id="cb10-28"><a href="#cb10-28"></a>     <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb10-29"><a href="#cb10-29"></a>    }<span class="op">,</span></span>
<span id="cb10-30"><a href="#cb10-30"></a>    {</span>
<span id="cb10-31"><a href="#cb10-31"></a>     <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb10-32"><a href="#cb10-32"></a>     <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style='font-size: 48px; color: Gold'&gt; Next Trial in... 2 &lt;/span&gt;`</span><span class="op">,</span></span>
<span id="cb10-33"><a href="#cb10-33"></a>     <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span></span>
<span id="cb10-34"><a href="#cb10-34"></a>     <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb10-35"><a href="#cb10-35"></a>    }<span class="op">,</span></span>
<span id="cb10-36"><a href="#cb10-36"></a>    {</span>
<span id="cb10-37"><a href="#cb10-37"></a>     <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb10-38"><a href="#cb10-38"></a>     <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;span style='font-size: 48px; color: MediumSeaGreen'&gt; Next Trial in... 1 &lt;/span&gt;`</span><span class="op">,</span></span>
<span id="cb10-39"><a href="#cb10-39"></a>     <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span></span>
<span id="cb10-40"><a href="#cb10-40"></a>     <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb10-41"><a href="#cb10-41"></a>    }</span>
<span id="cb10-42"><a href="#cb10-42"></a>  ]<span class="op">,</span></span>
<span id="cb10-43"><a href="#cb10-43"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb10-44"><a href="#cb10-44"></a>    {</span>
<span id="cb10-45"><a href="#cb10-45"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'HOUSE'</span><span class="op">,</span> </span>
<span id="cb10-46"><a href="#cb10-46"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb10-47"><a href="#cb10-47"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]</span>
<span id="cb10-48"><a href="#cb10-48"></a>    }<span class="op">,</span></span>
<span id="cb10-49"><a href="#cb10-49"></a>    {</span>
<span id="cb10-50"><a href="#cb10-50"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'TABLE'</span><span class="op">,</span> </span>
<span id="cb10-51"><a href="#cb10-51"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb10-52"><a href="#cb10-52"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]</span>
<span id="cb10-53"><a href="#cb10-53"></a>    }<span class="op">,</span></span>
<span id="cb10-54"><a href="#cb10-54"></a>    {</span>
<span id="cb10-55"><a href="#cb10-55"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'BLAFE'</span><span class="op">,</span> </span>
<span id="cb10-56"><a href="#cb10-56"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;This is an attention check: Press X.&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb10-57"><a href="#cb10-57"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span><span class="op">,</span> <span class="st">'x'</span>]</span>
<span id="cb10-58"><a href="#cb10-58"></a>    }<span class="op">,</span></span>
<span id="cb10-59"><a href="#cb10-59"></a>    {</span>
<span id="cb10-60"><a href="#cb10-60"></a>     <span class="dt">word</span><span class="op">:</span> <span class="st">'GLINT'</span><span class="op">,</span> </span>
<span id="cb10-61"><a href="#cb10-61"></a>     <span class="dt">myPrompt</span><span class="op">:</span> <span class="st">'&lt;p&gt;Press F for word, J for nonword&lt;/p&gt;'</span><span class="op">,</span> </span>
<span id="cb10-62"><a href="#cb10-62"></a>     <span class="dt">myChoices</span><span class="op">:</span> [<span class="st">'f'</span><span class="op">,</span> <span class="st">'j'</span>]</span>
<span id="cb10-63"><a href="#cb10-63"></a>    }</span>
<span id="cb10-64"><a href="#cb10-64"></a>  ]</span>
<span id="cb10-65"><a href="#cb10-65"></a>}<span class="op">;</span></span>
<span id="cb10-66"><a href="#cb10-66"></a></span>
<span id="cb10-67"><a href="#cb10-67"></a><span class="kw">const</span> timeline <span class="op">=</span> [welcome_trial<span class="op">,</span> lexical_decision]</span>
<span id="cb10-68"><a href="#cb10-68"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div id="demo-container-6" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-6" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\nconst welcome_trial = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'Welcome to the. Press any key to continue.\'\n};\n\nconst lexical_decision = {\n  type: jsPsychHtmlKeyboardResponse,\n  choices: [\'f\', \'j\'],\n  timeline: [\n    {\n     type: jsPsychHtmlKeyboardResponse,\n     stimulus: `<span style=\'font-size: 48px\'> + </span>`,\n     choices: \'NO_KEYS\',\n     trial_duration: 1000\n    },\n    {\n     type: jsPsychHtmlKeyboardResponse,\n     stimulus: jsPsych.timelineVariable(\'word\'),\n     choices: jsPsych.timelineVariable(\'myChoices\'),\n     prompt: jsPsych.timelineVariable(\'myPrompt\')\n    },\n    {\n     type: jsPsychHtmlKeyboardResponse,\n     stimulus: `<span style=\'font-size: 48px; color: Tomato\'> Next Trial in... 3 </span>`,\n     choices: \'NO_KEYS\',\n     trial_duration: 500\n    },\n    {\n     type: jsPsychHtmlKeyboardResponse,\n     stimulus: `<span style=\'font-size: 48px; color: Gold\'> Next Trial in... 2 </span>`,\n     choices: \'NO_KEYS\',\n     trial_duration: 500\n    },\n    {\n     type: jsPsychHtmlKeyboardResponse,\n     stimulus: `<span style=\'font-size: 48px; color: MediumSeaGreen\'> Next Trial in... 1 </span>`,\n     choices: \'NO_KEYS\',\n     trial_duration: 500\n    }\n  ],\n  timeline_variables: [\n    {\n     word: \'HOUSE\', \n     myPrompt: \'<p>Press F for word, J for nonword</p>\', \n     myChoices: [\'f\', \'j\']\n    },\n    {\n     word: \'TABLE\', \n     myPrompt: \'<p>Press F for word, J for nonword</p>\', \n     myChoices: [\'f\', \'j\']\n    },\n    {\n     word: \'BLAFE\', \n     myPrompt: \'<p>This is an attention check: Press X.</p>\', \n     myChoices: [\'f\', \'j\', \'x\']\n    },\n    {\n     word: \'GLINT\', \n     myPrompt: \'<p>Press F for word, J for nonword</p>\', \n     myChoices: [\'f\', \'j\']\n    }\n  ]\n};\n\nconst timeline = [welcome_trial, lexical_decision]\njsPsych.run(timeline)\n\n \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-6');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-6" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



const welcome_trial = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: 'Welcome to the. Press any key to continue.'
};

const lexical_decision = {
  type: jsPsychHtmlKeyboardResponse,
  choices: ['f', 'j'],
  timeline: [
    {
     type: jsPsychHtmlKeyboardResponse,
     stimulus: `<span style='font-size: 48px'> + </span>`,
     choices: 'NO_KEYS',
     trial_duration: 1000
    },
    {
     type: jsPsychHtmlKeyboardResponse,
     stimulus: jsPsych.timelineVariable('word'),
     choices: jsPsych.timelineVariable('myChoices'),
     prompt: jsPsych.timelineVariable('myPrompt')
    },
    {
     type: jsPsychHtmlKeyboardResponse,
     stimulus: `<span style='font-size: 48px; color: Tomato'> Next Trial in... 3 </span>`,
     choices: 'NO_KEYS',
     trial_duration: 500
    },
    {
     type: jsPsychHtmlKeyboardResponse,
     stimulus: `<span style='font-size: 48px; color: Gold'> Next Trial in... 2 </span>`,
     choices: 'NO_KEYS',
     trial_duration: 500
    },
    {
     type: jsPsychHtmlKeyboardResponse,
     stimulus: `<span style='font-size: 48px; color: MediumSeaGreen'> Next Trial in... 1 </span>`,
     choices: 'NO_KEYS',
     trial_duration: 500
    }
  ],
  timeline_variables: [
    {
     word: 'HOUSE', 
     myPrompt: '<p>Press F for word, J for nonword</p>', 
     myChoices: ['f', 'j']
    },
    {
     word: 'TABLE', 
     myPrompt: '<p>Press F for word, J for nonword</p>', 
     myChoices: ['f', 'j']
    },
    {
     word: 'BLAFE', 
     myPrompt: '<p>This is an attention check: Press X.</p>', 
     myChoices: ['f', 'j', 'x']
    },
    {
     word: 'GLINT', 
     myPrompt: '<p>Press F for word, J for nonword</p>', 
     myChoices: ['f', 'j']
    }
  ]
};

const timeline = [welcome_trial, lexical_decision]
jsPsych.run(timeline)

 
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-6&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-6&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>An important note to remember is that each event in our timeline has access to our <code>timeline_variables</code>. This means we can define multiple parts of our experiment and change them on a trial-to-trial basis.</p>
<p>For example, in some experiments we present a ‘cue’ then a target to see what effect the cue might have on performance. Both the cue and the target need to change each trial. We can do that fairly easily using our <code>timeline_variables</code>. In this example, you see an arrow cue (e.g., <code>→</code>) followed by a word <code>LEFT</code> or <code>RIGHT</code>. The task is to ignore the arrow and indicate whether the word is <code>LEFT</code> or <code>RIGHT</code> by pressing “Z” for left and “M” for right.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">JavaScript</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb11-2"><a href="#cb11-2"></a></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="kw">const</span> welcome_trial <span class="op">=</span> {</span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the. Press any key to continue.'</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>}<span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7"></a></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="kw">const</span> attention_task <span class="op">=</span> {</span>
<span id="cb11-9"><a href="#cb11-9"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb11-10"><a href="#cb11-10"></a>    {</span>
<span id="cb11-11"><a href="#cb11-11"></a>     <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb11-12"><a href="#cb11-12"></a>     <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`+`</span><span class="op">,</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>     <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>     <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>     <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb11-16"><a href="#cb11-16"></a>    }<span class="op">,</span></span>
<span id="cb11-17"><a href="#cb11-17"></a>    {</span>
<span id="cb11-18"><a href="#cb11-18"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb11-19"><a href="#cb11-19"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'cue'</span>)<span class="op">,</span></span>
<span id="cb11-20"><a href="#cb11-20"></a>      <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb11-21"><a href="#cb11-21"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb11-22"><a href="#cb11-22"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">200</span></span>
<span id="cb11-23"><a href="#cb11-23"></a>    }<span class="op">,</span></span>
<span id="cb11-24"><a href="#cb11-24"></a>    {</span>
<span id="cb11-25"><a href="#cb11-25"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb11-26"><a href="#cb11-26"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'target'</span>)<span class="op">,</span></span>
<span id="cb11-27"><a href="#cb11-27"></a>      <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb11-28"><a href="#cb11-28"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'z'</span><span class="op">,</span> <span class="st">'m'</span>]</span>
<span id="cb11-29"><a href="#cb11-29"></a>    }</span>
<span id="cb11-30"><a href="#cb11-30"></a>  ]<span class="op">,</span></span>
<span id="cb11-31"><a href="#cb11-31"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb11-32"><a href="#cb11-32"></a>    { <span class="dt">cue</span><span class="op">:</span> <span class="st">'→'</span><span class="op">,</span> <span class="dt">target</span><span class="op">:</span> <span class="st">'LEFT'</span> }<span class="op">,</span></span>
<span id="cb11-33"><a href="#cb11-33"></a>    { <span class="dt">cue</span><span class="op">:</span> <span class="st">'→'</span><span class="op">,</span> <span class="dt">target</span><span class="op">:</span> <span class="st">'RIGHT'</span> }<span class="op">,</span></span>
<span id="cb11-34"><a href="#cb11-34"></a>    { <span class="dt">cue</span><span class="op">:</span> <span class="st">'←'</span><span class="op">,</span> <span class="dt">target</span><span class="op">:</span> <span class="st">'LEFT'</span> }<span class="op">,</span></span>
<span id="cb11-35"><a href="#cb11-35"></a>    { <span class="dt">cue</span><span class="op">:</span> <span class="st">'←'</span><span class="op">,</span> <span class="dt">target</span><span class="op">:</span> <span class="st">'RIGHT'</span> }</span>
<span id="cb11-36"><a href="#cb11-36"></a>  ]</span>
<span id="cb11-37"><a href="#cb11-37"></a>}<span class="op">;</span></span>
<span id="cb11-38"><a href="#cb11-38"></a></span>
<span id="cb11-39"><a href="#cb11-39"></a><span class="kw">const</span> timeline <span class="op">=</span> [welcome_trial<span class="op">,</span> attention_task]</span>
<span id="cb11-40"><a href="#cb11-40"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div id="demo-container-7" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-7" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\nconst welcome_trial = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'Welcome to the. Press any key to continue.\'\n};\n\nconst attention_task = {\n  timeline: [\n    {\n     type: jsPsychHtmlKeyboardResponse,\n     stimulus: `+`,\n     prompt: `<p>Press \'Z\' if the word is LEFT. Press \'M\' if the word is RIGHT</p>`,\n     choices: \'NO_KEYS\',\n     trial_duration: 1000\n    },\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: jsPsych.timelineVariable(\'cue\'),\n      prompt: `<p>Press \'Z\' if the word is LEFT. Press \'M\' if the word is RIGHT</p>`,\n      choices: \'NO_KEYS\',\n      trial_duration: 200\n    },\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: jsPsych.timelineVariable(\'target\'),\n      prompt: `<p>Press \'Z\' if the word is LEFT. Press \'M\' if the word is RIGHT</p>`,\n      choices: [\'z\', \'m\']\n    }\n  ],\n  timeline_variables: [\n    { cue: \'→\', target: \'LEFT\' },\n    { cue: \'→\', target: \'RIGHT\' },\n    { cue: \'←\', target: \'LEFT\' },\n    { cue: \'←\', target: \'RIGHT\' }\n  ]\n};\n\nconst timeline = [welcome_trial, attention_task]\njsPsych.run(timeline)\n\n \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-7');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-7" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



const welcome_trial = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: 'Welcome to the. Press any key to continue.'
};

const attention_task = {
  timeline: [
    {
     type: jsPsychHtmlKeyboardResponse,
     stimulus: `+`,
     prompt: `<p>Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT</p>`,
     choices: 'NO_KEYS',
     trial_duration: 1000
    },
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: jsPsych.timelineVariable('cue'),
      prompt: `<p>Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT</p>`,
      choices: 'NO_KEYS',
      trial_duration: 200
    },
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: jsPsych.timelineVariable('target'),
      prompt: `<p>Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT</p>`,
      choices: ['z', 'm']
    }
  ],
  timeline_variables: [
    { cue: '→', target: 'LEFT' },
    { cue: '→', target: 'RIGHT' },
    { cue: '←', target: 'LEFT' },
    { cue: '←', target: 'RIGHT' }
  ]
};

const timeline = [welcome_trial, attention_task]
jsPsych.run(timeline)

 
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-7&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-7&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="quick-randomization-and-repetition" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="quick-randomization-and-repetition"><span class="header-section-number">9.6</span> Quick Randomization and Repetition</h2>
<p>Another benefit to using a list of <code>timeline_variables</code> is that we can quickly add some randomization to our experiment. One of the parameters available to us is called <code>randomize_order</code>, which we can set to <code>true</code> or <code>false</code>. By setting it to <code>true</code> jsPsych will go through our four trials, but in a random order.</p>
<p>We can also tell jsPsych how many times we want it to go through our <code>timeline_variables</code> by setting <code>repetitions</code>.</p>
<p>Just keep in mind that the randomization occurs within each repetition. That is, if I set it to repeat twice, it will present all four trials in a random order, then repeat.</p>
<div class="cell">
<style type="text/css">
[id^="cb13-"]:nth-child(n+37):nth-child(-n+38) {
 background-color: #e1f5fe;
 box-shadow: inset 5px 0 0 0 #0288d1; 
 padding-right: 1rem;
}
</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">JavaScript</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="kw">const</span> welcome_trial <span class="op">=</span> {</span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'Welcome to the. Press any key to continue.'</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>}<span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7"></a></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="kw">const</span> attention_task <span class="op">=</span> {</span>
<span id="cb12-9"><a href="#cb12-9"></a>  <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb12-10"><a href="#cb12-10"></a>    {</span>
<span id="cb12-11"><a href="#cb12-11"></a>     <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-12"><a href="#cb12-12"></a>     <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`+`</span><span class="op">,</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>     <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>     <span class="dt">choices</span><span class="op">:</span> <span class="st">'NO_KEYS'</span><span class="op">,</span></span>
<span id="cb12-15"><a href="#cb12-15"></a>     <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb12-16"><a href="#cb12-16"></a>    }<span class="op">,</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>    {</span>
<span id="cb12-18"><a href="#cb12-18"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-19"><a href="#cb12-19"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'cue'</span>)<span class="op">,</span></span>
<span id="cb12-20"><a href="#cb12-20"></a>      <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb12-21"><a href="#cb12-21"></a>      <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb12-22"><a href="#cb12-22"></a>      <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">200</span></span>
<span id="cb12-23"><a href="#cb12-23"></a>    }<span class="op">,</span></span>
<span id="cb12-24"><a href="#cb12-24"></a>    {</span>
<span id="cb12-25"><a href="#cb12-25"></a>      <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-26"><a href="#cb12-26"></a>      <span class="dt">stimulus</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">'target'</span>)<span class="op">,</span></span>
<span id="cb12-27"><a href="#cb12-27"></a>      <span class="dt">prompt</span><span class="op">:</span> <span class="vs">`&lt;p&gt;Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb12-28"><a href="#cb12-28"></a>      <span class="dt">choices</span><span class="op">:</span> [<span class="st">'z'</span><span class="op">,</span> <span class="st">'m'</span>]</span>
<span id="cb12-29"><a href="#cb12-29"></a>    }</span>
<span id="cb12-30"><a href="#cb12-30"></a>  ]<span class="op">,</span></span>
<span id="cb12-31"><a href="#cb12-31"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb12-32"><a href="#cb12-32"></a>    { <span class="dt">cue</span><span class="op">:</span> <span class="st">'→'</span><span class="op">,</span> <span class="dt">target</span><span class="op">:</span> <span class="st">'LEFT'</span> }<span class="op">,</span></span>
<span id="cb12-33"><a href="#cb12-33"></a>    { <span class="dt">cue</span><span class="op">:</span> <span class="st">'→'</span><span class="op">,</span> <span class="dt">target</span><span class="op">:</span> <span class="st">'RIGHT'</span> }<span class="op">,</span></span>
<span id="cb12-34"><a href="#cb12-34"></a>    { <span class="dt">cue</span><span class="op">:</span> <span class="st">'←'</span><span class="op">,</span> <span class="dt">target</span><span class="op">:</span> <span class="st">'LEFT'</span> }<span class="op">,</span></span>
<span id="cb12-35"><a href="#cb12-35"></a>    { <span class="dt">cue</span><span class="op">:</span> <span class="st">'←'</span><span class="op">,</span> <span class="dt">target</span><span class="op">:</span> <span class="st">'RIGHT'</span> }</span>
<span id="cb12-36"><a href="#cb12-36"></a>  ]<span class="op">,</span></span>
<span id="cb12-37"><a href="#cb12-37"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb12-38"><a href="#cb12-38"></a>  <span class="dt">repetitions</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb12-39"><a href="#cb12-39"></a>}<span class="op">;</span></span>
<span id="cb12-40"><a href="#cb12-40"></a></span>
<span id="cb12-41"><a href="#cb12-41"></a><span class="kw">const</span> timeline <span class="op">=</span> [welcome_trial<span class="op">,</span> attention_task]</span>
<span id="cb12-42"><a href="#cb12-42"></a>jsPsych<span class="op">.</span><span class="fu">run</span>(timeline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div id="demo-container-8" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-8" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\nconst welcome_trial = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: \'Welcome to the. Press any key to continue.\'\n};\n\nconst attention_task = {\n  timeline: [\n    {\n     type: jsPsychHtmlKeyboardResponse,\n     stimulus: `+`,\n     prompt: `<p>Press \'Z\' if the word is LEFT. Press \'M\' if the word is RIGHT</p>`,\n     choices: \'NO_KEYS\',\n     trial_duration: 1000\n    },\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: jsPsych.timelineVariable(\'cue\'),\n      prompt: `<p>Press \'Z\' if the word is LEFT. Press \'M\' if the word is RIGHT</p>`,\n      choices: \'NO_KEYS\',\n      trial_duration: 200\n    },\n    {\n      type: jsPsychHtmlKeyboardResponse,\n      stimulus: jsPsych.timelineVariable(\'target\'),\n      prompt: `<p>Press \'Z\' if the word is LEFT. Press \'M\' if the word is RIGHT</p>`,\n      choices: [\'z\', \'m\']\n    }\n  ],\n  timeline_variables: [\n    { cue: \'→\', target: \'LEFT\' },\n    { cue: \'→\', target: \'RIGHT\' },\n    { cue: \'←\', target: \'LEFT\' },\n    { cue: \'←\', target: \'RIGHT\' }\n  ],\n  randomize_order: true,\n  repetitions: 2\n};\n\nconst timeline = [welcome_trial, attention_task]\njsPsych.run(timeline)\n\n \n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-8');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-8" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



const welcome_trial = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: 'Welcome to the. Press any key to continue.'
};

const attention_task = {
  timeline: [
    {
     type: jsPsychHtmlKeyboardResponse,
     stimulus: `+`,
     prompt: `<p>Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT</p>`,
     choices: 'NO_KEYS',
     trial_duration: 1000
    },
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: jsPsych.timelineVariable('cue'),
      prompt: `<p>Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT</p>`,
      choices: 'NO_KEYS',
      trial_duration: 200
    },
    {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: jsPsych.timelineVariable('target'),
      prompt: `<p>Press 'Z' if the word is LEFT. Press 'M' if the word is RIGHT</p>`,
      choices: ['z', 'm']
    }
  ],
  timeline_variables: [
    { cue: '→', target: 'LEFT' },
    { cue: '→', target: 'RIGHT' },
    { cue: '←', target: 'LEFT' },
    { cue: '←', target: 'RIGHT' }
  ],
  randomize_order: true,
  repetitions: 2
};

const timeline = [welcome_trial, attention_task]
jsPsych.run(timeline)

 
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-8&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-8&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;✓ Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
<p>In a later Unit we’ll discuss more complex methods for randomization. For now, simply randomizing the order of our stimuli is good enough for most situations.</p>
</section>
<section id="best-practices-for-timeline-design" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="best-practices-for-timeline-design"><span class="header-section-number">9.7</span> Best Practices for Timeline Design</h2>
<section id="plan-your-experimental-structure-first" class="level3" data-number="9.7.1">
<h3 data-number="9.7.1" class="anchored" data-anchor-id="plan-your-experimental-structure-first"><span class="header-section-number">9.7.1</span> Plan Your Experimental Structure First</h3>
<p>Before coding, sketch out your experimental procedure. What is the basic trial structure? What parameters vary between trials? What parameters stay constant? How many repetitions do you need?</p>
</section>
<section id="use-meaningful-variable-names" class="level3" data-number="9.7.2">
<h3 data-number="9.7.2" class="anchored" data-anchor-id="use-meaningful-variable-names"><span class="header-section-number">9.7.2</span> Use Meaningful Variable Names</h3>
<p>Choose descriptive names for your timeline variables:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1"></a><span class="co">// Good</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>timeline_variables<span class="op">:</span> [</span>
<span id="cb13-3"><a href="#cb13-3"></a>  { <span class="dt">target_word</span><span class="op">:</span> <span class="st">'cat'</span><span class="op">,</span> <span class="dt">distractor_word</span><span class="op">:</span> <span class="st">'dog'</span><span class="op">,</span> <span class="dt">condition</span><span class="op">:</span> <span class="st">'related'</span> }<span class="op">,</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>  { <span class="dt">target_word</span><span class="op">:</span> <span class="st">'car'</span><span class="op">,</span> <span class="dt">distractor_word</span><span class="op">:</span> <span class="st">'pen'</span><span class="op">,</span> <span class="dt">condition</span><span class="op">:</span> <span class="st">'unrelated'</span> }</span>
<span id="cb13-5"><a href="#cb13-5"></a>]</span>
<span id="cb13-6"><a href="#cb13-6"></a></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="co">// Less clear</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>timeline_variables<span class="op">:</span> [</span>
<span id="cb13-9"><a href="#cb13-9"></a>  { <span class="dt">stim1</span><span class="op">:</span> <span class="st">'cat'</span><span class="op">,</span> <span class="dt">stim2</span><span class="op">:</span> <span class="st">'dog'</span><span class="op">,</span> <span class="dt">cond</span><span class="op">:</span> <span class="st">'rel'</span> }<span class="op">,</span></span>
<span id="cb13-10"><a href="#cb13-10"></a>  { <span class="dt">stim1</span><span class="op">:</span> <span class="st">'car'</span><span class="op">,</span> <span class="dt">stim2</span><span class="op">:</span> <span class="st">'pen'</span><span class="op">,</span> <span class="dt">cond</span><span class="op">:</span> <span class="st">'unrel'</span> }</span>
<span id="cb13-11"><a href="#cb13-11"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="include-useful-information-in-timeline-variables" class="level3" data-number="9.7.3">
<h3 data-number="9.7.3" class="anchored" data-anchor-id="include-useful-information-in-timeline-variables"><span class="header-section-number">9.7.3</span> Include Useful Information in Timeline Variables</h3>
<p>Add information that will help you understand your experiment structure:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1"></a>timeline_variables<span class="op">:</span> [</span>
<span id="cb14-2"><a href="#cb14-2"></a>  { </span>
<span id="cb14-3"><a href="#cb14-3"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'HOUSE'</span><span class="op">,</span> </span>
<span id="cb14-4"><a href="#cb14-4"></a>    <span class="dt">item_type</span><span class="op">:</span> <span class="st">'word'</span><span class="op">,</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>    <span class="dt">frequency</span><span class="op">:</span> <span class="st">'high'</span><span class="op">,</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>    <span class="dt">length</span><span class="op">:</span> <span class="dv">5</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>  }<span class="op">,</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>  { </span>
<span id="cb14-9"><a href="#cb14-9"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="st">'BLAFE'</span><span class="op">,</span> </span>
<span id="cb14-10"><a href="#cb14-10"></a>    <span class="dt">item_type</span><span class="op">:</span> <span class="st">'nonword'</span><span class="op">,</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>    <span class="dt">frequency</span><span class="op">:</span> <span class="st">'na'</span><span class="op">,</span></span>
<span id="cb14-12"><a href="#cb14-12"></a>    <span class="dt">length</span><span class="op">:</span> <span class="dv">5</span></span>
<span id="cb14-13"><a href="#cb14-13"></a>  }</span>
<span id="cb14-14"><a href="#cb14-14"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="keep-procedures-modular" class="level3" data-number="9.7.4">
<h3 data-number="9.7.4" class="anchored" data-anchor-id="keep-procedures-modular"><span class="header-section-number">9.7.4</span> Keep Procedures Modular</h3>
<p>Break complex experiments into separate timeline procedures:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">const</span> instructions_timeline <span class="op">=</span> [<span class="op">...</span>]<span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="kw">const</span> practice_timeline <span class="op">=</span> [<span class="op">...</span>]<span class="op">;</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="kw">const</span> main_experiment_timeline <span class="op">=</span> [<span class="op">...</span>]<span class="op">;</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="kw">const</span> debriefing_timeline <span class="op">=</span> [<span class="op">...</span>]<span class="op">;</span></span>
<span id="cb15-5"><a href="#cb15-5"></a></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="kw">const</span> full_experiment <span class="op">=</span> [</span>
<span id="cb15-7"><a href="#cb15-7"></a>  instructions_timeline<span class="op">,</span></span>
<span id="cb15-8"><a href="#cb15-8"></a>  practice_timeline<span class="op">,</span> </span>
<span id="cb15-9"><a href="#cb15-9"></a>  main_experiment_timeline<span class="op">,</span></span>
<span id="cb15-10"><a href="#cb15-10"></a>  debriefing_timeline</span>
<span id="cb15-11"><a href="#cb15-11"></a>]<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="summary" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="summary"><span class="header-section-number">9.8</span> Summary</h2>
<p>Timelines are the foundation of well-structured jsPsych experiments. They allow you to organize trials hierarchically using nested timelines, eliminate repetitive code by defining procedures once, create flexible experiments using timeline variables, and maintain clean, readable code that’s easy to modify.</p>
<p>Timeline variables are particularly powerful for psychological research because they match how we typically think about experiments: repeating the same procedure with different stimuli or conditions. Instead of creating dozens of individual trial objects, you define the experimental procedure once and specify the varying parameters in the <code>timeline_variables</code> array.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./08-L03.html" class="pagination-link" aria-label="Lab 3: Language &amp; Thought">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 3: Language &amp; Thought</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./10-plugins.html" class="pagination-link" aria-label="More Plugins">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">More Plugins</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://https://github.com/icoglab/online-behavioural-research-methods/edit/main/09-timelines.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>