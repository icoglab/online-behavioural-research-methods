<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="An open source textbook for psychology students learning programming and online research methods.Primary Author: Nicholaus P. Brosowsky Co-Authors: Liam Yeo, Jackie Spear">

<title>20&nbsp; Lab 8: Cognitive Control ‚Äì Online Behavioural Research Methods: Programming with jsPsych</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./21-L09.html" rel="next">
<link href="./19-dynamic-flow.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e9b5551c1c55c86b42a831a3c09ea90c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-f4f6c4c33169695420a9dce568207992.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>
.tabset-fullscreen-btn {
  position: absolute;
  top: 5px;
  right: 10px;
  z-index: 1000;
  padding: 5px 10px;
  background-color: none;
  color: #6c757d;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}
.tabset-fullscreen-btn:hover {
  background-color: #e9ecef;
  color: #495057;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.panel-tabset').forEach(function(tabset) {
    const btn = document.createElement('button');
    btn.innerHTML = '‚õ∂ Open Code in New Tab';
    btn.className = 'tabset-fullscreen-btn';

    tabset.style.position = 'relative';
    tabset.insertBefore(btn, tabset.firstChild);

    btn.addEventListener('click', function() {
      const clone = tabset.cloneNode(true);
      const cloneBtn = clone.querySelector('.tabset-fullscreen-btn');
      if (cloneBtn) cloneBtn.remove();

      // Get all stylesheets from current page
      const stylesheets = Array.from(document.styleSheets)
        .map(sheet => {
          try {
            if (sheet.href) {
              return `<link rel="stylesheet" href="${sheet.href}">`;
            } else if (sheet.ownerNode) {
              return `<style>${Array.from(sheet.cssRules).map(rule => rule.cssText).join('\n')}</style>`;
            }
          } catch (e) {
            if (sheet.href) return `<link rel="stylesheet" href="${sheet.href}">`;
          }
          return '';
        })
        .join('\n');

      const newWindow = window.open('', '_blank');
      newWindow.document.write(`
        <html>
          <head>
            <title>Tab Panel View</title>
            ${stylesheets}
            <style>
              body { 
                margin: 20px auto; 
                padding: 20px; 
                max-width: 1200px;
              }
            </style>
          </head>
          <body>
            ${clone.outerHTML}
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"><\/script>
          </body>
        </html>
      `);
      newWindow.document.close();
    });
  });
});
</script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./19-dynamic-flow.html">Unit 8: Controlling the Flow</a></li><li class="breadcrumb-item"><a href="./20-L08.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Lab 8: Cognitive Control</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Online Behavioural Research Methods: Programming with jsPsych</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/icoglab/online-behavioural-research-methods" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 1: Fundamentals (I)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">HTML</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">CSS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-L01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lab 1: About Me</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 2: Fundamentals (II)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Javascript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-debugging-javascript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Debugging JavaScript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-L02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lab 2: JS Exercises</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 3: Intro to JsPsych</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-jspsych.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">jsPsych</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-L03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 3: Language &amp; Thought</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 4: Timelines</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-timelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Timelines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-plugins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">More Plugins</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-L04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lab 4: Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 5: Multimedia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-multimedia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multimedia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-L05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Lab 5: Mental Imagery</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 6: Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Saving and Labeling Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-data-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Accessing and Summarizing Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-L06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Lab 6: Creativity</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 7: Dynamic Parameters</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-dynamic-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dynamic Parameters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-L07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Lab 7: Spatial Attention</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 8: Controlling the Flow</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-dynamic-flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Controlling the Flow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-L08.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Lab 8: Cognitive Control</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 9: Skills Checkpoint</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-L09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Lab 9: Working Memory</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit 10: Randomization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-randomization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Randomization in Experimental Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-L10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Lab 10: Judgment &amp; Decision-Making</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-L11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Lab 11: Face Perception</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Unit 11: Gamification</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A01_JS_Builtins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">JavaScript Built-in Functions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p>¬© 2024. This work is openly licensed via <a href="https://creativecommons.org/licenses/by-nc/4.0">CC BY NC 4.0</a>.</p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#research-in-brief-the-flanker-paradigm" id="toc-research-in-brief-the-flanker-paradigm" class="nav-link active" data-scroll-target="#research-in-brief-the-flanker-paradigm"><span class="header-section-number">20.1</span> Research in Brief: The Flanker Paradigm</a>
  <ul class="collapse">
  <li><a href="#the-research-area" id="toc-the-research-area" class="nav-link" data-scroll-target="#the-research-area"><span class="header-section-number">20.1.1</span> The Research Area</a></li>
  <li><a href="#interference-and-conflict-resolution" id="toc-interference-and-conflict-resolution" class="nav-link" data-scroll-target="#interference-and-conflict-resolution"><span class="header-section-number">20.1.2</span> Interference and Conflict Resolution</a></li>
  <li><a href="#the-research-design" id="toc-the-research-design" class="nav-link" data-scroll-target="#the-research-design"><span class="header-section-number">20.1.3</span> The Research Design</a></li>
  <li><a href="#key-findings" id="toc-key-findings" class="nav-link" data-scroll-target="#key-findings"><span class="header-section-number">20.1.4</span> Key Findings</a></li>
  <li><a href="#implications" id="toc-implications" class="nav-link" data-scroll-target="#implications"><span class="header-section-number">20.1.5</span> Implications</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">20.1.6</span> Further Reading</a></li>
  </ul></li>
  <li><a href="#program-a-flanker-task" id="toc-program-a-flanker-task" class="nav-link" data-scroll-target="#program-a-flanker-task"><span class="header-section-number">20.2</span> Program a Flanker Task</a>
  <ul class="collapse">
  <li><a href="#initiate-jspsych" id="toc-initiate-jspsych" class="nav-link" data-scroll-target="#initiate-jspsych"><span class="header-section-number">20.2.1</span> Initiate JsPsych</a></li>
  <li><a href="#create-a-practice-block" id="toc-create-a-practice-block" class="nav-link" data-scroll-target="#create-a-practice-block"><span class="header-section-number">20.2.2</span> Create a Practice Block</a></li>
  <li><a href="#add-feedback" id="toc-add-feedback" class="nav-link" data-scroll-target="#add-feedback"><span class="header-section-number">20.2.3</span> Add Feedback</a></li>
  <li><a href="#add-a-loop-function" id="toc-add-a-loop-function" class="nav-link" data-scroll-target="#add-a-loop-function"><span class="header-section-number">20.2.4</span> Add a Loop Function</a></li>
  <li><a href="#add-a-fallback-for-the-loop" id="toc-add-a-fallback-for-the-loop" class="nav-link" data-scroll-target="#add-a-fallback-for-the-loop"><span class="header-section-number">20.2.5</span> Add a Fallback for the Loop</a></li>
  <li><a href="#creat-experimental-block" id="toc-creat-experimental-block" class="nav-link" data-scroll-target="#creat-experimental-block"><span class="header-section-number">20.2.6</span> Creat Experimental Block</a></li>
  <li><a href="#add-conditional-feedback" id="toc-add-conditional-feedback" class="nav-link" data-scroll-target="#add-conditional-feedback"><span class="header-section-number">20.2.7</span> Add Conditional Feedback</a></li>
  <li><a href="#add-instructions" id="toc-add-instructions" class="nav-link" data-scroll-target="#add-instructions"><span class="header-section-number">20.2.8</span> Add Instructions</a></li>
  </ul></li>
  <li><a href="#test-and-savecheck-data" id="toc-test-and-savecheck-data" class="nav-link" data-scroll-target="#test-and-savecheck-data"><span class="header-section-number">20.3</span> Test and Save/Check Data</a></li>
  <li><a href="#stretch-goals" id="toc-stretch-goals" class="nav-link" data-scroll-target="#stretch-goals"><span class="header-section-number">20.4</span> Stretch Goals</a>
  <ul class="collapse">
  <li><a href="#end-the-experiment-for-participants-who-fail-the-practice" id="toc-end-the-experiment-for-participants-who-fail-the-practice" class="nav-link" data-scroll-target="#end-the-experiment-for-participants-who-fail-the-practice"><span class="header-section-number">20.4.1</span> End the experiment for participants who fail the practice</a></li>
  <li><a href="#add-a-display-that-pauses-the-experiment-if-they-miss-three-responses-in-a-row" id="toc-add-a-display-that-pauses-the-experiment-if-they-miss-three-responses-in-a-row" class="nav-link" data-scroll-target="#add-a-display-that-pauses-the-experiment-if-they-miss-three-responses-in-a-row"><span class="header-section-number">20.4.2</span> Add a display that pauses the experiment if they miss three responses in a row</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/20-L08.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./19-dynamic-flow.html">Unit 8: Controlling the Flow</a></li><li class="breadcrumb-item"><a href="./20-L08.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Lab 8: Cognitive Control</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Lab 8: Cognitive Control</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="research-in-brief-the-flanker-paradigm" class="level2" data-number="20.1">
<h2 data-number="20.1" class="anchored" data-anchor-id="research-in-brief-the-flanker-paradigm"><span class="header-section-number">20.1</span> Research in Brief: The Flanker Paradigm</h2>
<section id="the-research-area" class="level3" data-number="20.1.1">
<h3 data-number="20.1.1" class="anchored" data-anchor-id="the-research-area"><span class="header-section-number">20.1.1</span> The Research Area</h3>
<p>Cognitive control refers to the ability to orchestrate thought and action in accordance with internal goals. This system allows us to plan, decide, select behaviors, and coordinate multiple actions when needed. Because the mind has limited capacity for processing information, cognitive control functions as a resource manager, helping us prioritize competing demands from both our external environment and internal thoughts.</p>
<p>Research on cognitive control addresses questions about how we manage mental resources and regulate behavior. How do we maintain focus on relevant information while ignoring distractions? What mechanisms allow us to detect when we make errors and adjust our performance accordingly? How do we resolve conflicts between automatic responses and goal-directed actions? Understanding these processes has practical implications for performance in demanding tasks, educational outcomes, and clinical conditions affecting behavioral regulation.</p>
<p>Cognitive control operates through two distinct mechanisms: proactive control, where we anticipate challenges in advance, and reactive control, where we respond to challenges as they arise. These mechanisms recruit different brain regions and contribute to individual differences in the ability to guide behavior effectively under varying conditions.</p>
</section>
<section id="interference-and-conflict-resolution" class="level3" data-number="20.1.2">
<h3 data-number="20.1.2" class="anchored" data-anchor-id="interference-and-conflict-resolution"><span class="header-section-number">20.1.2</span> Interference and Conflict Resolution</h3>
<p>Cognitive control becomes necessary when task demands create interference between competing information or response options. Researchers have developed several laboratory tasks to measure different types of interference and cognitive control. In the Stroop task, participants name the ink color of printed words while ignoring the word meanings. When the word meaning conflicts with the ink color (e.g., the word BLUE printed in red ink), response times slow down because word reading is highly automatic. This demonstrates response conflict at the semantic level, where clashing word meanings compete for selection.</p>
<p>The Simon task requires participants to make a lateralized response (such as a left button press) to identify a non-spatial feature of a stimulus (such as its color) while ignoring where the stimulus appears on the screen. When a stimulus appears on the left side of the screen but requires a right-hand response, this spatial incompatibility slows reaction times, demonstrating interference between the target location and the natural inclination to respond with the hand on the same side as the stimulus.</p>
<p>The flanker task presents a central target stimulus surrounded by distractor stimuli that participants must ignore. Unlike the Stroop task, which produces semantic interference, or the Simon task, which produces spatial interference, the flanker task can reveal both perceptual interference (when distractors are difficult to filter out visually) and response interference (when distractors cue conflicting responses). This makes the flanker task particularly useful for studying how interference operates at multiple processing stages.</p>
</section>
<section id="the-research-design" class="level3" data-number="20.1.3">
<h3 data-number="20.1.3" class="anchored" data-anchor-id="the-research-design"><span class="header-section-number">20.1.3</span> The Research Design</h3>
<p>The flanker task developed by Eriksen and Eriksen (1974) uses a within-subjects experimental design to examine how distracting stimuli interfere with target processing and how cognitive control resolves this interference.</p>
<p>Stimulus Presentation: Participants view displays containing a central target stimulus flanked by distractor stimuli on either side. In a typical version, the target might be an arrow or letter that participants must identify, surrounded by additional arrows or letters serving as flankers.</p>
<p>Trial Types: The paradigm manipulates the relationship between target and flankers. On compatible trials, flankers match the target and cue the same response (e.g., &lt; &lt; &lt; &lt; &lt;). On incompatible trials, flankers conflict with the target and cue a different response (e.g., &lt; &lt; &gt; &lt; &lt;). Neutral trials present flankers that do not cue any response (e.g., - - &gt; - -).</p>
<p>Task Requirements: Participants identify the central target as quickly and accurately as possible while ignoring the flanking distractors. They typically respond by pressing designated keys corresponding to the target identity. The task measures both response time and accuracy across different trial types.</p>
<p>The design manipulates spatial proximity between target and flankers to examine perceptual interference, or how physical spacing affects the ability to select the target. When flankers appear close to the target, perceptual selection becomes more difficult. When flankers are spaced farther away, the target becomes easier to isolate visually.</p>
<p>The within-subjects design allows comparison of performance across compatible, incompatible, and neutral trials, as well as across different spacing conditions, within the same participants. This approach controls for individual differences in baseline processing speed while isolating the specific effects of flanker interference and cognitive control.</p>
</section>
<section id="key-findings" class="level3" data-number="20.1.4">
<h3 data-number="20.1.4" class="anchored" data-anchor-id="key-findings"><span class="header-section-number">20.1.4</span> Key Findings</h3>
<p>The flanker task consistently produces a congruency effect: participants respond more slowly and less accurately on incompatible trials compared to compatible trials. This effect demonstrates that flanker information is processed automatically, even though it is task-irrelevant, creating response conflict that must be resolved through cognitive control. The magnitude of this interference typically ranges from 30-60 milliseconds for response times, with error rates increasing by 5-15% on incompatible trials.</p>
<p>Spatial proximity strongly influences the size of the congruency effect. When flankers appear closer to the target, perceptual interference increases because the visual system has more difficulty selecting the target from among nearby distractors. Conversely, when flankers are spaced farther from the target, the congruency effect becomes smaller because perceptual selection of the target becomes easier. This spatial proximity effect demonstrates that interference operates at multiple processing stages, with perceptual selection representing an early stage where cognitive control can filter out distracting information.</p>
<p>The anterior cingulate cortex shows greater activity when distractors are perceptually close to the target than when they are spaced away from it. This increased activity reflects the conflict monitoring system detecting higher levels of perceptual competition. The spatial proximity manipulation reveals how the visual attention system must work harder to focus processing resources on the target location when competing stimuli appear nearby, similar to trying to read a specific sign when surrounded by many other signs in close proximity.</p>
</section>
<section id="implications" class="level3" data-number="20.1.5">
<h3 data-number="20.1.5" class="anchored" data-anchor-id="implications"><span class="header-section-number">20.1.5</span> Implications</h3>
<p>The flanker paradigm demonstrates that cognitive control involves multiple mechanisms operating at different processing stages. The spatial proximity effect shows that control begins with selective attention, or the ability to focus processing on relevant spatial locations while filtering out nearby distractors. When task-irrelevant information appears close to targets, the visual system must work harder to select the relevant stimulus, revealing an early stage of interference that occurs during perceptual processing before response selection.</p>
<p>The spatial proximity findings have important implications for understanding how visual attention operates as a spotlight or zoom lens. When distractors are far from the target, attention can be narrowly focused on the target location, effectively excluding flanker information from processing. However, when distractors encroach on the target location, the attentional focus cannot be narrowed sufficiently to exclude them, resulting in automatic processing of the irrelevant information. This demonstrates fundamental limitations in the spatial resolution of selective attention.</p>
<p>These findings also reveal that interference operates at multiple processing stages. Both perceptual selection and response selection contribute to the overall conflict. Even when flankers are spatially separated from targets, incompatible flankers still produce interference at the response stage because their identity is processed and activates competing responses. This shows that cognitive control must operate at multiple points in the information processing stream to effectively manage interference.</p>
</section>
<section id="further-reading" class="level3" data-number="20.1.6">
<h3 data-number="20.1.6" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">20.1.6</span> Further Reading</h3>
<p>Chun, M. M., &amp; Most, S. B. (2021). Cognitive control and working memory. In <em>Cognition</em>.</p>
<p>Crump, Matthew JC, John V. McDonnell, and Todd M. Gureckis. ‚ÄúEvaluating Amazon‚Äôs Mechanical Turk as a tool for experimental behavioral research.‚Äù PloS one 8.3 (2013): e57410.</p>
<p>Gratton, G., Cooper, P., Fabiani, M., Carter, C. S., &amp; Karayanidis, F. (2018). Dynamics of cognitive control: Theoretical bases, paradigms, and a view for the future. <em>Psychophysiology</em>, <em>55</em>(3), e13016.</p>
<p>Monsell, S. (2003). Task switching. <em>Trends in cognitive sciences</em>, <em>7</em>(3), 134-140.</p>
</section>
</section>
<section id="program-a-flanker-task" class="level2" data-number="20.2">
<h2 data-number="20.2" class="anchored" data-anchor-id="program-a-flanker-task"><span class="header-section-number">20.2</span> Program a Flanker Task</h2>
<p>In this tutorial we‚Äôre going to program the classic flanker task and manipulate the spatial proximity of the distractors.</p>
<p>However, we‚Äôre going to add a practice block that loops until participants reach a performance threshold to ensure they understand the task parameters. We‚Äôll also add conditional feedback throughout the task such that participants receive ‚ÄúIncorrect!‚Äù or a ‚Äútoo slow!‚Äù, but is skipped if they respond correctly.</p>
<p>The initial folder contains the standard jsPsych boilerplate files with no additional components added yet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>üìÇ L08</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>‚îú‚îÄ‚îÄ  üìÑ index.html</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>‚îú‚îÄ‚îÄ  üìÑ exp.js</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>‚îú‚îÄ‚îÄ  üìÑ style.css</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>‚îî‚îÄ‚îÄ  üìÇ jspsych</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="initiate-jspsych" class="level3" data-number="20.2.1">
<h3 data-number="20.2.1" class="anchored" data-anchor-id="initiate-jspsych"><span class="header-section-number">20.2.1</span> Initiate JsPsych</h3>
<p>Let‚Äôs begin by initializing jsPsych with the basic setup we typically need. In the HTML index page, all necessary files have been linked: the jsPsych core files, our exp.js file, our style.css file, and the two plugins required for this experiment (the instructions plugin and the HTML keyboard response plugin).</p>
<p>We will add an instructions trial that can be populated with task instructions later, and conclude the experiment with a save data trial to store participant responses.</p>
<p>Two notes about the code:</p>
<ol type="1">
<li>I‚Äôve added informative comment headers. As our experiments get more complicated, the code is going to become more complex. We‚Äôre going to start trying to keep our code organized and documented to make it easier to read and understand.</li>
<li>I‚Äôve already started adding data labels. These are important. We could wait until the end or add them as we go. Since I know we‚Äôre going to need data labels for feedback and data filtering, I‚Äôm just going to add them as we go.</li>
</ol>
<div class="cell">
<style type="text/css">
/* CB2 */
[id^="cb2-"]:nth-child(n+5):nth-child(-n+7),  
[id^="cb2-"]:nth-child(n+9):nth-child(-n+11),  
[id^="cb2-"]:nth-child(n+13):nth-child(-n+14),  
[id^="cb2-"]:nth-child(n+18):nth-child(-n+18) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB3 */
[id^="cb3-"]:nth-child(n+1):nth-child(-n+6),
[id^="cb3-"]:nth-child(n+8):nth-child(-n+23),
[id^="cb3-"]:nth-child(n+25):nth-child(-n+50),
[id^="cb3-"]:nth-child(n+56):nth-child(-n+59) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB4 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 8: Cognitive Control<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>    </span>
<span id="cb2-9"><a href="#cb2-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-12"><a href="#cb2-12"></a></span>
<span id="cb2-13"><a href="#cb2-13"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a> </span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">// ============================================</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">// ============================================</span></span>
<span id="cb3-5"><a href="#cb3-5"></a></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb3-7"><a href="#cb3-7"></a></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">// ============================================</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">// Instructions</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">// ============================================</span></span>
<span id="cb3-11"><a href="#cb3-11"></a></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb3-13"><a href="#cb3-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb3-15"><a href="#cb3-15"></a>    <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="vs">     &lt;p&gt;Use the buttons below to navigate through the instructions&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>    <span class="vs">`&lt;p&gt;When you are ready to begin the first trial, press "Next"&lt;/p&gt;`</span> </span>
<span id="cb3-18"><a href="#cb3-18"></a>  ]<span class="op">,</span></span>
<span id="cb3-19"><a href="#cb3-19"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb3-20"><a href="#cb3-20"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb3-21"><a href="#cb3-21"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"instructions"</span></span>
<span id="cb3-22"><a href="#cb3-22"></a>  }</span>
<span id="cb3-23"><a href="#cb3-23"></a>}</span>
<span id="cb3-24"><a href="#cb3-24"></a></span>
<span id="cb3-25"><a href="#cb3-25"></a><span class="co">// ============================================</span></span>
<span id="cb3-26"><a href="#cb3-26"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="co">// ============================================</span></span>
<span id="cb3-28"><a href="#cb3-28"></a></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb3-30"><a href="#cb3-30"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb3-31"><a href="#cb3-31"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb3-32"><a href="#cb3-32"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb3-33"><a href="#cb3-33"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb3-34"><a href="#cb3-34"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb3-35"><a href="#cb3-35"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb3-36"><a href="#cb3-36"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb3-37"><a href="#cb3-37"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb3-38"><a href="#cb3-38"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb3-39"><a href="#cb3-39"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb3-40"><a href="#cb3-40"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb3-41"><a href="#cb3-41"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb3-42"><a href="#cb3-42"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb3-43"><a href="#cb3-43"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb3-44"><a href="#cb3-44"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"flanker_data.csv"</span>)<span class="op">;</span></span>
<span id="cb3-45"><a href="#cb3-45"></a>    })<span class="op">;</span></span>
<span id="cb3-46"><a href="#cb3-46"></a>  }<span class="op">,</span></span>
<span id="cb3-47"><a href="#cb3-47"></a>  <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb3-48"><a href="#cb3-48"></a>    <span class="dt">phase</span><span class="op">:</span> <span class="st">"save data trial"</span></span>
<span id="cb3-49"><a href="#cb3-49"></a>  }</span>
<span id="cb3-50"><a href="#cb3-50"></a>}<span class="op">;</span></span>
<span id="cb3-51"><a href="#cb3-51"></a></span>
<span id="cb3-52"><a href="#cb3-52"></a><span class="co">// ============================================</span></span>
<span id="cb3-53"><a href="#cb3-53"></a><span class="co">// Run jsPsych </span></span>
<span id="cb3-54"><a href="#cb3-54"></a><span class="co">// ============================================</span></span>
<span id="cb3-55"><a href="#cb3-55"></a></span>
<span id="cb3-56"><a href="#cb3-56"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb3-57"><a href="#cb3-57"></a>  instructions<span class="op">,</span></span>
<span id="cb3-58"><a href="#cb3-58"></a>  saveData</span>
<span id="cb3-59"><a href="#cb3-59"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb4-1"><a href="#cb4-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div id="demo-container-1" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-1" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Instructions\n// ============================================\n\nconst instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    `<p>Welcome to the Experiment!</p>\n     <p>Use the buttons below to navigate through the instructions</p>`,\n    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` \n  ],\n  show_clickable_nav: true,\n  data: {\n    phase: &quot;instructions&quot;\n  }\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);\n    });\n  },\n  data: {\n    phase: &quot;save data trial&quot;\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  instructions,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-1');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-1" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Instructions
// ============================================

const instructions = {
  type: jsPsychInstructions,
  pages: [
    `<p>Welcome to the Experiment!</p>
     <p>Use the buttons below to navigate through the instructions</p>`,
    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` 
  ],
  show_clickable_nav: true,
  data: {
    phase: &quot;instructions&quot;
  }
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);
    });
  },
  data: {
    phase: &quot;save data trial&quot;
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  instructions,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-1&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-1&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;‚úì Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="create-a-practice-block" class="level3" data-number="20.2.2">
<h3 data-number="20.2.2" class="anchored" data-anchor-id="create-a-practice-block"><span class="header-section-number">20.2.2</span> Create a Practice Block</h3>
<p>Our display really is just five letters in a row (‚Äú&lt;&lt;&lt;&lt;&lt;‚Äù), but we‚Äôll need to be able to adjust the spacing. I‚Äôll use a function to manipulate the HTML display and wrap the target letter in a <code>&lt;span&gt;</code> tag. <a href="https://www.w3schools.com/tags/tag_span.asp" class="external" target="_blank">Span Tags</a> don‚Äôt do anything on their own, but it allows me to adjust the CSS for just the letter inside it.</p>
<p>In this case, I‚Äôll change the margin, using <code>margin: 0 50</code>. The first number is the top and bottom margin and the second number is the left and right margin. I can then insert the timeline variables to change each letter and to change the margin.</p>
<div class="cell">
<style type="text/css">
/* CB5 */


/* CB6 */
[id^="cb6-"]:nth-child(n+22):nth-child(-n+24),
[id^="cb6-"]:nth-child(n+26):nth-child(-n+36),
[id^="cb6-"]:nth-child(n+38):nth-child(-n+60),
[id^="cb6-"]:nth-child(n+62):nth-child(-n+86),
[id^="cb6-"]:nth-child(n+88):nth-child(-n+97),
[id^="cb6-"]:nth-child(n+127):nth-child(-n+129) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB7 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb5-1"><a href="#cb5-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 8: Cognitive Control<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>    </span>
<span id="cb5-9"><a href="#cb5-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12"></a></span>
<span id="cb5-13"><a href="#cb5-13"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb5-18"><a href="#cb5-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb5-21"><a href="#cb5-21"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a> </span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">// ============================================</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">// ============================================</span></span>
<span id="cb6-5"><a href="#cb6-5"></a></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb6-7"><a href="#cb6-7"></a></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">// ============================================</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">// Instructions</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">// ============================================</span></span>
<span id="cb6-11"><a href="#cb6-11"></a></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb6-13"><a href="#cb6-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb6-15"><a href="#cb6-15"></a>    <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="vs">     &lt;p&gt;Use the buttons below to navigate through the instructions&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb6-17"><a href="#cb6-17"></a>    <span class="vs">`&lt;p&gt;When you are ready to begin the first trial, press "Next"&lt;/p&gt;`</span> </span>
<span id="cb6-18"><a href="#cb6-18"></a>  ]<span class="op">,</span></span>
<span id="cb6-19"><a href="#cb6-19"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb6-20"><a href="#cb6-20"></a>}</span>
<span id="cb6-21"><a href="#cb6-21"></a></span>
<span id="cb6-22"><a href="#cb6-22"></a><span class="co">// ============================================</span></span>
<span id="cb6-23"><a href="#cb6-23"></a><span class="co">// Flanker Practice Block</span></span>
<span id="cb6-24"><a href="#cb6-24"></a><span class="co">// ============================================</span></span>
<span id="cb6-25"><a href="#cb6-25"></a></span>
<span id="cb6-26"><a href="#cb6-26"></a><span class="co">// fixation</span></span>
<span id="cb6-27"><a href="#cb6-27"></a><span class="kw">let</span> practice_fixation <span class="op">=</span> {</span>
<span id="cb6-28"><a href="#cb6-28"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-29"><a href="#cb6-29"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb6-30"><a href="#cb6-30"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb6-31"><a href="#cb6-31"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb6-32"><a href="#cb6-32"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb6-33"><a href="#cb6-33"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb6-34"><a href="#cb6-34"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb6-35"><a href="#cb6-35"></a>    }</span>
<span id="cb6-36"><a href="#cb6-36"></a>}</span>
<span id="cb6-37"><a href="#cb6-37"></a></span>
<span id="cb6-38"><a href="#cb6-38"></a><span class="co">// stimulus</span></span>
<span id="cb6-39"><a href="#cb6-39"></a><span class="kw">let</span> practice_stimulus <span class="op">=</span> {</span>
<span id="cb6-40"><a href="#cb6-40"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-41"><a href="#cb6-41"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb6-42"><a href="#cb6-42"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb6-43"><a href="#cb6-43"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb6-44"><a href="#cb6-44"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb6-45"><a href="#cb6-45"></a></span>
<span id="cb6-46"><a href="#cb6-46"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb6-47"><a href="#cb6-47"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb6-48"><a href="#cb6-48"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb6-49"><a href="#cb6-49"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb6-50"><a href="#cb6-50"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb6-51"><a href="#cb6-51"></a></span>
<span id="cb6-52"><a href="#cb6-52"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb6-53"><a href="#cb6-53"></a>    }<span class="op">,</span></span>
<span id="cb6-54"><a href="#cb6-54"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb6-55"><a href="#cb6-55"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb6-56"><a href="#cb6-56"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb6-57"><a href="#cb6-57"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb6-58"><a href="#cb6-58"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb6-59"><a href="#cb6-59"></a>    }</span>
<span id="cb6-60"><a href="#cb6-60"></a>}</span>
<span id="cb6-61"><a href="#cb6-61"></a></span>
<span id="cb6-62"><a href="#cb6-62"></a><span class="co">// practice timeline</span></span>
<span id="cb6-63"><a href="#cb6-63"></a><span class="kw">let</span> practice_flanker <span class="op">=</span> {</span>
<span id="cb6-64"><a href="#cb6-64"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb6-65"><a href="#cb6-65"></a>        practice_fixation<span class="op">,</span></span>
<span id="cb6-66"><a href="#cb6-66"></a>        practice_stimulus</span>
<span id="cb6-67"><a href="#cb6-67"></a>    ]<span class="op">,</span></span>
<span id="cb6-68"><a href="#cb6-68"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb6-69"><a href="#cb6-69"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb6-70"><a href="#cb6-70"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb6-71"><a href="#cb6-71"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb6-72"><a href="#cb6-72"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb6-73"><a href="#cb6-73"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb6-74"><a href="#cb6-74"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb6-75"><a href="#cb6-75"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb6-76"><a href="#cb6-76"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb6-77"><a href="#cb6-77"></a>    ]<span class="op">,</span></span>
<span id="cb6-78"><a href="#cb6-78"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-79"><a href="#cb6-79"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb6-80"><a href="#cb6-80"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker practice"</span><span class="op">,</span></span>
<span id="cb6-81"><a href="#cb6-81"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb6-82"><a href="#cb6-82"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb6-83"><a href="#cb6-83"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb6-84"><a href="#cb6-84"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb6-85"><a href="#cb6-85"></a>    }</span>
<span id="cb6-86"><a href="#cb6-86"></a>}<span class="op">;</span></span>
<span id="cb6-87"><a href="#cb6-87"></a></span>
<span id="cb6-88"><a href="#cb6-88"></a><span class="kw">const</span> end_practice <span class="op">=</span> {</span>
<span id="cb6-89"><a href="#cb6-89"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-90"><a href="#cb6-90"></a>   <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;You have completed the practice trials.&lt;/p&gt;</span></span>
<span id="cb6-91"><a href="#cb6-91"></a><span class="vs">              &lt;p&gt;When you are ready to begin the experimental trials, press the space bar.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb6-92"><a href="#cb6-92"></a>   <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span><span class="op">,</span></span>
<span id="cb6-93"><a href="#cb6-93"></a>   <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb6-94"><a href="#cb6-94"></a>   <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb6-95"><a href="#cb6-95"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"instructions"</span></span>
<span id="cb6-96"><a href="#cb6-96"></a>   }</span>
<span id="cb6-97"><a href="#cb6-97"></a>}</span>
<span id="cb6-98"><a href="#cb6-98"></a></span>
<span id="cb6-99"><a href="#cb6-99"></a><span class="co">// ============================================</span></span>
<span id="cb6-100"><a href="#cb6-100"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb6-101"><a href="#cb6-101"></a><span class="co">// ============================================</span></span>
<span id="cb6-102"><a href="#cb6-102"></a></span>
<span id="cb6-103"><a href="#cb6-103"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb6-104"><a href="#cb6-104"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb6-105"><a href="#cb6-105"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb6-106"><a href="#cb6-106"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb6-107"><a href="#cb6-107"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb6-108"><a href="#cb6-108"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb6-109"><a href="#cb6-109"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb6-110"><a href="#cb6-110"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb6-111"><a href="#cb6-111"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb6-112"><a href="#cb6-112"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb6-113"><a href="#cb6-113"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb6-114"><a href="#cb6-114"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb6-115"><a href="#cb6-115"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb6-116"><a href="#cb6-116"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb6-117"><a href="#cb6-117"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb6-118"><a href="#cb6-118"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"flanker_data.csv"</span>)<span class="op">;</span></span>
<span id="cb6-119"><a href="#cb6-119"></a>    })<span class="op">;</span></span>
<span id="cb6-120"><a href="#cb6-120"></a>  }</span>
<span id="cb6-121"><a href="#cb6-121"></a>}<span class="op">;</span></span>
<span id="cb6-122"><a href="#cb6-122"></a></span>
<span id="cb6-123"><a href="#cb6-123"></a><span class="co">// ============================================</span></span>
<span id="cb6-124"><a href="#cb6-124"></a><span class="co">// Run jsPsych </span></span>
<span id="cb6-125"><a href="#cb6-125"></a><span class="co">// ============================================</span></span>
<span id="cb6-126"><a href="#cb6-126"></a></span>
<span id="cb6-127"><a href="#cb6-127"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb6-128"><a href="#cb6-128"></a>  instructions<span class="op">,</span></span>
<span id="cb6-129"><a href="#cb6-129"></a>  practice_flanker<span class="op">,</span></span>
<span id="cb6-130"><a href="#cb6-130"></a>  end_practice<span class="op">,</span></span>
<span id="cb6-131"><a href="#cb6-131"></a>  saveData</span>
<span id="cb6-132"><a href="#cb6-132"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb7-1"><a href="#cb7-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div id="demo-container-2" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-2" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Instructions\n// ============================================\n\nconst instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    `<p>Welcome to the Experiment!</p>\n     <p>Use the buttons below to navigate through the instructions</p>`,\n    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` \n  ],\n  show_clickable_nav: true\n}\n\n// ============================================\n// Flanker Practice Block\n// ============================================\n\n// fixation\nlet practice_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet practice_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    }\n}\n\n// practice timeline\nlet practice_flanker = {\n    timeline: [\n        practice_fixation,\n        practice_stimulus\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker practice&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    }\n};\n\nconst end_practice = {\n   type: jsPsychHtmlKeyboardResponse,\n   stimulus: `<p>You have completed the practice trials.</p>\n              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,\n   choices: &quot; &quot;,\n   post_trial_gap: 250,\n   data: {\n      phase: &quot;instructions&quot;\n   }\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);\n    });\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  instructions,\n  practice_flanker,\n  end_practice,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-2');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-2" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Instructions
// ============================================

const instructions = {
  type: jsPsychInstructions,
  pages: [
    `<p>Welcome to the Experiment!</p>
     <p>Use the buttons below to navigate through the instructions</p>`,
    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` 
  ],
  show_clickable_nav: true
}

// ============================================
// Flanker Practice Block
// ============================================

// fixation
let practice_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let practice_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    }
}

// practice timeline
let practice_flanker = {
    timeline: [
        practice_fixation,
        practice_stimulus
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker practice&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    }
};

const end_practice = {
   type: jsPsychHtmlKeyboardResponse,
   stimulus: `<p>You have completed the practice trials.</p>
              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,
   choices: &quot; &quot;,
   post_trial_gap: 250,
   data: {
      phase: &quot;instructions&quot;
   }
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);
    });
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  instructions,
  practice_flanker,
  end_practice,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-2&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-2&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;‚úì Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="add-feedback" class="level3" data-number="20.2.3">
<h3 data-number="20.2.3" class="anchored" data-anchor-id="add-feedback"><span class="header-section-number">20.2.3</span> Add Feedback</h3>
<p>For the practice block we‚Äôll add feedback on every trial. We‚Äôll store the accuracy on every trial, then display feedback based on accuracy.</p>
<div class="cell">
<style type="text/css">
/* CB8 */


/* CB9 */
[id^="cb9-"]:nth-child(n+60):nth-child(-n+64),
[id^="cb9-"]:nth-child(n+67):nth-child(-n+95),
[id^="cb9-"]:nth-child(n+101):nth-child(-n+102) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB10 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb8-1"><a href="#cb8-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 8: Cognitive Control<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>    </span>
<span id="cb8-9"><a href="#cb8-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12"></a></span>
<span id="cb8-13"><a href="#cb8-13"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb8-20"><a href="#cb8-20"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb8-21"><a href="#cb8-21"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1"></a> </span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">// ============================================</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">// ============================================</span></span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">// ============================================</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">// Instructions</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">// ============================================</span></span>
<span id="cb9-11"><a href="#cb9-11"></a></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb9-13"><a href="#cb9-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb9-15"><a href="#cb9-15"></a>    <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="vs">     &lt;p&gt;Use the buttons below to navigate through the instructions&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb9-17"><a href="#cb9-17"></a>    <span class="vs">`&lt;p&gt;When you are ready to begin the first trial, press "Next"&lt;/p&gt;`</span> </span>
<span id="cb9-18"><a href="#cb9-18"></a>  ]<span class="op">,</span></span>
<span id="cb9-19"><a href="#cb9-19"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb9-20"><a href="#cb9-20"></a>}</span>
<span id="cb9-21"><a href="#cb9-21"></a></span>
<span id="cb9-22"><a href="#cb9-22"></a></span>
<span id="cb9-23"><a href="#cb9-23"></a><span class="co">// ============================================</span></span>
<span id="cb9-24"><a href="#cb9-24"></a><span class="co">// Flanker Practice Block</span></span>
<span id="cb9-25"><a href="#cb9-25"></a><span class="co">// ============================================</span></span>
<span id="cb9-26"><a href="#cb9-26"></a></span>
<span id="cb9-27"><a href="#cb9-27"></a><span class="co">// fixation</span></span>
<span id="cb9-28"><a href="#cb9-28"></a><span class="kw">let</span> practice_fixation <span class="op">=</span> {</span>
<span id="cb9-29"><a href="#cb9-29"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-30"><a href="#cb9-30"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb9-31"><a href="#cb9-31"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb9-32"><a href="#cb9-32"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb9-33"><a href="#cb9-33"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb9-34"><a href="#cb9-34"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb9-35"><a href="#cb9-35"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb9-36"><a href="#cb9-36"></a>    }</span>
<span id="cb9-37"><a href="#cb9-37"></a>}</span>
<span id="cb9-38"><a href="#cb9-38"></a></span>
<span id="cb9-39"><a href="#cb9-39"></a><span class="co">// stimulus</span></span>
<span id="cb9-40"><a href="#cb9-40"></a><span class="kw">let</span> practice_stimulus <span class="op">=</span> {</span>
<span id="cb9-41"><a href="#cb9-41"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-42"><a href="#cb9-42"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb9-43"><a href="#cb9-43"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb9-44"><a href="#cb9-44"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb9-45"><a href="#cb9-45"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb9-46"><a href="#cb9-46"></a></span>
<span id="cb9-47"><a href="#cb9-47"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb9-48"><a href="#cb9-48"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb9-49"><a href="#cb9-49"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb9-50"><a href="#cb9-50"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb9-51"><a href="#cb9-51"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb9-52"><a href="#cb9-52"></a></span>
<span id="cb9-53"><a href="#cb9-53"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb9-54"><a href="#cb9-54"></a>    }<span class="op">,</span></span>
<span id="cb9-55"><a href="#cb9-55"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb9-56"><a href="#cb9-56"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb9-57"><a href="#cb9-57"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb9-58"><a href="#cb9-58"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb9-59"><a href="#cb9-59"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb9-60"><a href="#cb9-60"></a>    }<span class="op">,</span></span>
<span id="cb9-61"><a href="#cb9-61"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data){</span>
<span id="cb9-62"><a href="#cb9-62"></a>        <span class="co">// store accuracy</span></span>
<span id="cb9-63"><a href="#cb9-63"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)</span>
<span id="cb9-64"><a href="#cb9-64"></a>    }</span>
<span id="cb9-65"><a href="#cb9-65"></a>}</span>
<span id="cb9-66"><a href="#cb9-66"></a></span>
<span id="cb9-67"><a href="#cb9-67"></a><span class="co">// feedback</span></span>
<span id="cb9-68"><a href="#cb9-68"></a><span class="kw">let</span> practice_feedback <span class="op">=</span> {</span>
<span id="cb9-69"><a href="#cb9-69"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-70"><a href="#cb9-70"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb9-71"><a href="#cb9-71"></a>        <span class="co">// get the last response</span></span>
<span id="cb9-72"><a href="#cb9-72"></a>        <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb9-73"><a href="#cb9-73"></a>        <span class="kw">let</span> output  </span>
<span id="cb9-74"><a href="#cb9-74"></a></span>
<span id="cb9-75"><a href="#cb9-75"></a>        <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">response</span> <span class="op">===</span> <span class="kw">null</span>){</span>
<span id="cb9-76"><a href="#cb9-76"></a>          <span class="co">// this will check for non-response first</span></span>
<span id="cb9-77"><a href="#cb9-77"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Too Slow! Respond Faster!&lt;/p&gt;`</span></span>
<span id="cb9-78"><a href="#cb9-78"></a>          </span>
<span id="cb9-79"><a href="#cb9-79"></a>        } <span class="cf">else</span> <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">correct</span>){</span>
<span id="cb9-80"><a href="#cb9-80"></a>          <span class="co">// else if correct</span></span>
<span id="cb9-81"><a href="#cb9-81"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Correct!&lt;/p&gt;`</span></span>
<span id="cb9-82"><a href="#cb9-82"></a>        } <span class="cf">else</span> {</span>
<span id="cb9-83"><a href="#cb9-83"></a>          <span class="co">// else incorrect</span></span>
<span id="cb9-84"><a href="#cb9-84"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Incorrect!&lt;/p&gt;`</span></span>
<span id="cb9-85"><a href="#cb9-85"></a>        }</span>
<span id="cb9-86"><a href="#cb9-86"></a></span>
<span id="cb9-87"><a href="#cb9-87"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb9-88"><a href="#cb9-88"></a>    }<span class="op">,</span></span>
<span id="cb9-89"><a href="#cb9-89"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb9-90"><a href="#cb9-90"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb9-91"><a href="#cb9-91"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb9-92"><a href="#cb9-92"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb9-93"><a href="#cb9-93"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"feedback"</span></span>
<span id="cb9-94"><a href="#cb9-94"></a>    }</span>
<span id="cb9-95"><a href="#cb9-95"></a>}</span>
<span id="cb9-96"><a href="#cb9-96"></a></span>
<span id="cb9-97"><a href="#cb9-97"></a><span class="co">// practice timeline</span></span>
<span id="cb9-98"><a href="#cb9-98"></a><span class="kw">let</span> practice_flanker <span class="op">=</span> {</span>
<span id="cb9-99"><a href="#cb9-99"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb9-100"><a href="#cb9-100"></a>        practice_fixation<span class="op">,</span></span>
<span id="cb9-101"><a href="#cb9-101"></a>        practice_stimulus<span class="op">,</span></span>
<span id="cb9-102"><a href="#cb9-102"></a>        practice_feedback</span>
<span id="cb9-103"><a href="#cb9-103"></a>    ]<span class="op">,</span></span>
<span id="cb9-104"><a href="#cb9-104"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb9-105"><a href="#cb9-105"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb9-106"><a href="#cb9-106"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb9-107"><a href="#cb9-107"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb9-108"><a href="#cb9-108"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb9-109"><a href="#cb9-109"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb9-110"><a href="#cb9-110"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb9-111"><a href="#cb9-111"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb9-112"><a href="#cb9-112"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb9-113"><a href="#cb9-113"></a>    ]<span class="op">,</span></span>
<span id="cb9-114"><a href="#cb9-114"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb9-115"><a href="#cb9-115"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb9-116"><a href="#cb9-116"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker practice"</span><span class="op">,</span></span>
<span id="cb9-117"><a href="#cb9-117"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb9-118"><a href="#cb9-118"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb9-119"><a href="#cb9-119"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb9-120"><a href="#cb9-120"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb9-121"><a href="#cb9-121"></a>    }</span>
<span id="cb9-122"><a href="#cb9-122"></a>}<span class="op">;</span></span>
<span id="cb9-123"><a href="#cb9-123"></a></span>
<span id="cb9-124"><a href="#cb9-124"></a><span class="kw">const</span> end_practice <span class="op">=</span> {</span>
<span id="cb9-125"><a href="#cb9-125"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-126"><a href="#cb9-126"></a>   <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;You have completed the practice trials.&lt;/p&gt;</span></span>
<span id="cb9-127"><a href="#cb9-127"></a><span class="vs">              &lt;p&gt;When you are ready to begin the experimental trials, press the space bar.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb9-128"><a href="#cb9-128"></a>   <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span><span class="op">,</span></span>
<span id="cb9-129"><a href="#cb9-129"></a>   <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb9-130"><a href="#cb9-130"></a>   <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb9-131"><a href="#cb9-131"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"instructions"</span></span>
<span id="cb9-132"><a href="#cb9-132"></a>   }</span>
<span id="cb9-133"><a href="#cb9-133"></a>}</span>
<span id="cb9-134"><a href="#cb9-134"></a></span>
<span id="cb9-135"><a href="#cb9-135"></a><span class="co">// ============================================</span></span>
<span id="cb9-136"><a href="#cb9-136"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb9-137"><a href="#cb9-137"></a><span class="co">// ============================================</span></span>
<span id="cb9-138"><a href="#cb9-138"></a></span>
<span id="cb9-139"><a href="#cb9-139"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb9-140"><a href="#cb9-140"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb9-141"><a href="#cb9-141"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb9-142"><a href="#cb9-142"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb9-143"><a href="#cb9-143"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb9-144"><a href="#cb9-144"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb9-145"><a href="#cb9-145"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb9-146"><a href="#cb9-146"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb9-147"><a href="#cb9-147"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb9-148"><a href="#cb9-148"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb9-149"><a href="#cb9-149"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb9-150"><a href="#cb9-150"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb9-151"><a href="#cb9-151"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb9-152"><a href="#cb9-152"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb9-153"><a href="#cb9-153"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb9-154"><a href="#cb9-154"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"flanker_data.csv"</span>)<span class="op">;</span></span>
<span id="cb9-155"><a href="#cb9-155"></a>    })<span class="op">;</span></span>
<span id="cb9-156"><a href="#cb9-156"></a>  }</span>
<span id="cb9-157"><a href="#cb9-157"></a>}<span class="op">;</span></span>
<span id="cb9-158"><a href="#cb9-158"></a></span>
<span id="cb9-159"><a href="#cb9-159"></a><span class="co">// ============================================</span></span>
<span id="cb9-160"><a href="#cb9-160"></a><span class="co">// Run jsPsych </span></span>
<span id="cb9-161"><a href="#cb9-161"></a><span class="co">// ============================================</span></span>
<span id="cb9-162"><a href="#cb9-162"></a></span>
<span id="cb9-163"><a href="#cb9-163"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb9-164"><a href="#cb9-164"></a>  instructions<span class="op">,</span></span>
<span id="cb9-165"><a href="#cb9-165"></a>  practice_flanker<span class="op">,</span></span>
<span id="cb9-166"><a href="#cb9-166"></a>  end_practice<span class="op">,</span></span>
<span id="cb9-167"><a href="#cb9-167"></a>  saveData</span>
<span id="cb9-168"><a href="#cb9-168"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb10-1"><a href="#cb10-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div id="demo-container-3" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-3" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Instructions\n// ============================================\n\nconst instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    `<p>Welcome to the Experiment!</p>\n     <p>Use the buttons below to navigate through the instructions</p>`,\n    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` \n  ],\n  show_clickable_nav: true\n}\n\n\n// ============================================\n// Flanker Practice Block\n// ============================================\n\n// fixation\nlet practice_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet practice_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    },\n    on_finish: function(data){\n        // store accuracy\n        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)\n    }\n}\n\n// feedback\nlet practice_feedback = {\n   type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        // get the last response\n        let last_trial = jsPsych.data.get().last(1).values()[0]\n        let output  \n\n        if(last_trial.response === null){\n          // this will check for non-response first\n          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`\n          \n        } else if(last_trial.correct){\n          // else if correct\n          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`\n        } else {\n          // else incorrect\n          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`\n        }\n\n        return output;\n    },\n    choices: &quot;NO_KEYS&quot;,\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;feedback&quot;\n    }\n}\n\n// practice timeline\nlet practice_flanker = {\n    timeline: [\n        practice_fixation,\n        practice_stimulus,\n        practice_feedback\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker practice&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    }\n};\n\nconst end_practice = {\n   type: jsPsychHtmlKeyboardResponse,\n   stimulus: `<p>You have completed the practice trials.</p>\n              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,\n   choices: &quot; &quot;,\n   post_trial_gap: 250,\n   data: {\n      phase: &quot;instructions&quot;\n   }\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);\n    });\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  instructions,\n  practice_flanker,\n  end_practice,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-3');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-3" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Instructions
// ============================================

const instructions = {
  type: jsPsychInstructions,
  pages: [
    `<p>Welcome to the Experiment!</p>
     <p>Use the buttons below to navigate through the instructions</p>`,
    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` 
  ],
  show_clickable_nav: true
}


// ============================================
// Flanker Practice Block
// ============================================

// fixation
let practice_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let practice_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    },
    on_finish: function(data){
        // store accuracy
        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)
    }
}

// feedback
let practice_feedback = {
   type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        // get the last response
        let last_trial = jsPsych.data.get().last(1).values()[0]
        let output  

        if(last_trial.response === null){
          // this will check for non-response first
          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`
          
        } else if(last_trial.correct){
          // else if correct
          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`
        } else {
          // else incorrect
          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`
        }

        return output;
    },
    choices: &quot;NO_KEYS&quot;,
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;feedback&quot;
    }
}

// practice timeline
let practice_flanker = {
    timeline: [
        practice_fixation,
        practice_stimulus,
        practice_feedback
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker practice&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    }
};

const end_practice = {
   type: jsPsychHtmlKeyboardResponse,
   stimulus: `<p>You have completed the practice trials.</p>
              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,
   choices: &quot; &quot;,
   post_trial_gap: 250,
   data: {
      phase: &quot;instructions&quot;
   }
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);
    });
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  instructions,
  practice_flanker,
  end_practice,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-3&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-3&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;‚úì Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="add-a-loop-function" class="level3" data-number="20.2.4">
<h3 data-number="20.2.4" class="anchored" data-anchor-id="add-a-loop-function"><span class="header-section-number">20.2.4</span> Add a Loop Function</h3>
<p>Let‚Äôs add a function that will loop the practice until they reach 75% accuracy.</p>
<div class="cell">
<style type="text/css">
/* CB11 */


/* CB12 */
[id^="cb12-"]:nth-child(n+120):nth-child(-n+136), {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB13 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb11-1"><a href="#cb11-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 8: Cognitive Control<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>    </span>
<span id="cb11-9"><a href="#cb11-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb11-12"><a href="#cb11-12"></a></span>
<span id="cb11-13"><a href="#cb11-13"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb11-17"><a href="#cb11-17"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb11-18"><a href="#cb11-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb11-19"><a href="#cb11-19"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb11-21"><a href="#cb11-21"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1"></a> </span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="co">// ============================================</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co">// ============================================</span></span>
<span id="cb12-5"><a href="#cb12-5"></a></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb12-7"><a href="#cb12-7"></a></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co">// ============================================</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">// Instructions</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">// ============================================</span></span>
<span id="cb12-11"><a href="#cb12-11"></a></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb12-13"><a href="#cb12-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb12-15"><a href="#cb12-15"></a>    <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="vs">     &lt;p&gt;Use the buttons below to navigate through the instructions&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>    <span class="vs">`&lt;p&gt;When you are ready to begin the first trial, press "Next"&lt;/p&gt;`</span> </span>
<span id="cb12-18"><a href="#cb12-18"></a>  ]<span class="op">,</span></span>
<span id="cb12-19"><a href="#cb12-19"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb12-20"><a href="#cb12-20"></a>}</span>
<span id="cb12-21"><a href="#cb12-21"></a></span>
<span id="cb12-22"><a href="#cb12-22"></a><span class="co">// ============================================</span></span>
<span id="cb12-23"><a href="#cb12-23"></a><span class="co">// Flanker Practice Block</span></span>
<span id="cb12-24"><a href="#cb12-24"></a><span class="co">// ============================================</span></span>
<span id="cb12-25"><a href="#cb12-25"></a></span>
<span id="cb12-26"><a href="#cb12-26"></a><span class="co">// fixation</span></span>
<span id="cb12-27"><a href="#cb12-27"></a><span class="kw">let</span> practice_fixation <span class="op">=</span> {</span>
<span id="cb12-28"><a href="#cb12-28"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-29"><a href="#cb12-29"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb12-30"><a href="#cb12-30"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb12-31"><a href="#cb12-31"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb12-32"><a href="#cb12-32"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb12-33"><a href="#cb12-33"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb12-34"><a href="#cb12-34"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb12-35"><a href="#cb12-35"></a>    }</span>
<span id="cb12-36"><a href="#cb12-36"></a>}</span>
<span id="cb12-37"><a href="#cb12-37"></a></span>
<span id="cb12-38"><a href="#cb12-38"></a><span class="co">// stimulus</span></span>
<span id="cb12-39"><a href="#cb12-39"></a><span class="kw">let</span> practice_stimulus <span class="op">=</span> {</span>
<span id="cb12-40"><a href="#cb12-40"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-41"><a href="#cb12-41"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb12-42"><a href="#cb12-42"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb12-43"><a href="#cb12-43"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb12-44"><a href="#cb12-44"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb12-45"><a href="#cb12-45"></a></span>
<span id="cb12-46"><a href="#cb12-46"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb12-47"><a href="#cb12-47"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb12-48"><a href="#cb12-48"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb12-49"><a href="#cb12-49"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb12-50"><a href="#cb12-50"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb12-51"><a href="#cb12-51"></a></span>
<span id="cb12-52"><a href="#cb12-52"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb12-53"><a href="#cb12-53"></a>    }<span class="op">,</span></span>
<span id="cb12-54"><a href="#cb12-54"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb12-55"><a href="#cb12-55"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb12-56"><a href="#cb12-56"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb12-57"><a href="#cb12-57"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb12-58"><a href="#cb12-58"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb12-59"><a href="#cb12-59"></a>    }<span class="op">,</span></span>
<span id="cb12-60"><a href="#cb12-60"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data){</span>
<span id="cb12-61"><a href="#cb12-61"></a>        <span class="co">// store accuracy</span></span>
<span id="cb12-62"><a href="#cb12-62"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)</span>
<span id="cb12-63"><a href="#cb12-63"></a>    }</span>
<span id="cb12-64"><a href="#cb12-64"></a>}</span>
<span id="cb12-65"><a href="#cb12-65"></a></span>
<span id="cb12-66"><a href="#cb12-66"></a><span class="co">// feedback</span></span>
<span id="cb12-67"><a href="#cb12-67"></a><span class="kw">let</span> practice_feedback <span class="op">=</span> {</span>
<span id="cb12-68"><a href="#cb12-68"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-69"><a href="#cb12-69"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb12-70"><a href="#cb12-70"></a>        <span class="co">// get the last response</span></span>
<span id="cb12-71"><a href="#cb12-71"></a>        <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb12-72"><a href="#cb12-72"></a>        <span class="kw">let</span> output  </span>
<span id="cb12-73"><a href="#cb12-73"></a></span>
<span id="cb12-74"><a href="#cb12-74"></a>        <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">response</span> <span class="op">===</span> <span class="kw">null</span>){</span>
<span id="cb12-75"><a href="#cb12-75"></a>          <span class="co">// this will check for non-response first</span></span>
<span id="cb12-76"><a href="#cb12-76"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Too Slow! Respond Faster!&lt;/p&gt;`</span></span>
<span id="cb12-77"><a href="#cb12-77"></a>          </span>
<span id="cb12-78"><a href="#cb12-78"></a>        } <span class="cf">else</span> <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">correct</span>){</span>
<span id="cb12-79"><a href="#cb12-79"></a>          <span class="co">// else if correct</span></span>
<span id="cb12-80"><a href="#cb12-80"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Correct!&lt;/p&gt;`</span></span>
<span id="cb12-81"><a href="#cb12-81"></a>        } <span class="cf">else</span> {</span>
<span id="cb12-82"><a href="#cb12-82"></a>          <span class="co">// else incorrect</span></span>
<span id="cb12-83"><a href="#cb12-83"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Incorrect!&lt;/p&gt;`</span></span>
<span id="cb12-84"><a href="#cb12-84"></a>        }</span>
<span id="cb12-85"><a href="#cb12-85"></a></span>
<span id="cb12-86"><a href="#cb12-86"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb12-87"><a href="#cb12-87"></a>    }<span class="op">,</span></span>
<span id="cb12-88"><a href="#cb12-88"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb12-89"><a href="#cb12-89"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb12-90"><a href="#cb12-90"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb12-91"><a href="#cb12-91"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb12-92"><a href="#cb12-92"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"feedback"</span></span>
<span id="cb12-93"><a href="#cb12-93"></a>    }</span>
<span id="cb12-94"><a href="#cb12-94"></a>}</span>
<span id="cb12-95"><a href="#cb12-95"></a></span>
<span id="cb12-96"><a href="#cb12-96"></a><span class="co">// practice timeline</span></span>
<span id="cb12-97"><a href="#cb12-97"></a><span class="kw">let</span> practice_flanker <span class="op">=</span> {</span>
<span id="cb12-98"><a href="#cb12-98"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb12-99"><a href="#cb12-99"></a>        practice_fixation<span class="op">,</span></span>
<span id="cb12-100"><a href="#cb12-100"></a>        practice_stimulus<span class="op">,</span></span>
<span id="cb12-101"><a href="#cb12-101"></a>        practice_feedback</span>
<span id="cb12-102"><a href="#cb12-102"></a>    ]<span class="op">,</span></span>
<span id="cb12-103"><a href="#cb12-103"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb12-104"><a href="#cb12-104"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb12-105"><a href="#cb12-105"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb12-106"><a href="#cb12-106"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb12-107"><a href="#cb12-107"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb12-108"><a href="#cb12-108"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb12-109"><a href="#cb12-109"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb12-110"><a href="#cb12-110"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb12-111"><a href="#cb12-111"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb12-112"><a href="#cb12-112"></a>    ]<span class="op">,</span></span>
<span id="cb12-113"><a href="#cb12-113"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb12-114"><a href="#cb12-114"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb12-115"><a href="#cb12-115"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker practice"</span><span class="op">,</span></span>
<span id="cb12-116"><a href="#cb12-116"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb12-117"><a href="#cb12-117"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb12-118"><a href="#cb12-118"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb12-119"><a href="#cb12-119"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb12-120"><a href="#cb12-120"></a>    }<span class="op">,</span></span>
<span id="cb12-121"><a href="#cb12-121"></a>   <span class="dt">loop_function</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb12-122"><a href="#cb12-122"></a></span>
<span id="cb12-123"><a href="#cb12-123"></a>      <span class="kw">let</span> trials <span class="op">=</span> data<span class="op">.</span><span class="fu">filter</span>({<span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span>})</span>
<span id="cb12-124"><a href="#cb12-124"></a></span>
<span id="cb12-125"><a href="#cb12-125"></a>      <span class="kw">let</span> correct_trials <span class="op">=</span> trials<span class="op">.</span><span class="fu">filter</span>({<span class="dt">correct</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb12-126"><a href="#cb12-126"></a></span>
<span id="cb12-127"><a href="#cb12-127"></a>      <span class="kw">let</span> accuracy <span class="op">=</span> correct_trials<span class="op">.</span><span class="fu">count</span>()<span class="op">/</span>trials<span class="op">.</span><span class="fu">count</span>()<span class="op">;</span></span>
<span id="cb12-128"><a href="#cb12-128"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Practice accuracy: </span><span class="sc">${</span>accuracy<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb12-129"><a href="#cb12-129"></a>  </span>
<span id="cb12-130"><a href="#cb12-130"></a>      <span class="co">// If accuracy is below 75%, repeat the block</span></span>
<span id="cb12-131"><a href="#cb12-131"></a>      <span class="cf">if</span> (accuracy <span class="op">&lt;</span> <span class="fl">0.75</span>) {</span>
<span id="cb12-132"><a href="#cb12-132"></a>           <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span>  <span class="co">// Loop again</span></span>
<span id="cb12-133"><a href="#cb12-133"></a>        } <span class="cf">else</span> {</span>
<span id="cb12-134"><a href="#cb12-134"></a>           <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span> <span class="co">// Move on</span></span>
<span id="cb12-135"><a href="#cb12-135"></a>      }</span>
<span id="cb12-136"><a href="#cb12-136"></a>    }</span>
<span id="cb12-137"><a href="#cb12-137"></a>}<span class="op">;</span></span>
<span id="cb12-138"><a href="#cb12-138"></a></span>
<span id="cb12-139"><a href="#cb12-139"></a></span>
<span id="cb12-140"><a href="#cb12-140"></a><span class="kw">const</span> end_practice <span class="op">=</span> {</span>
<span id="cb12-141"><a href="#cb12-141"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-142"><a href="#cb12-142"></a>   <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;You have completed the practice trials.&lt;/p&gt;</span></span>
<span id="cb12-143"><a href="#cb12-143"></a><span class="vs">              &lt;p&gt;When you are ready to begin the experimental trials, press the space bar.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb12-144"><a href="#cb12-144"></a>   <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span><span class="op">,</span></span>
<span id="cb12-145"><a href="#cb12-145"></a>   <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb12-146"><a href="#cb12-146"></a>   <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb12-147"><a href="#cb12-147"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"instructions"</span></span>
<span id="cb12-148"><a href="#cb12-148"></a>   }</span>
<span id="cb12-149"><a href="#cb12-149"></a>}</span>
<span id="cb12-150"><a href="#cb12-150"></a></span>
<span id="cb12-151"><a href="#cb12-151"></a><span class="co">// ============================================</span></span>
<span id="cb12-152"><a href="#cb12-152"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb12-153"><a href="#cb12-153"></a><span class="co">// ============================================</span></span>
<span id="cb12-154"><a href="#cb12-154"></a></span>
<span id="cb12-155"><a href="#cb12-155"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb12-156"><a href="#cb12-156"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb12-157"><a href="#cb12-157"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb12-158"><a href="#cb12-158"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb12-159"><a href="#cb12-159"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb12-160"><a href="#cb12-160"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb12-161"><a href="#cb12-161"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb12-162"><a href="#cb12-162"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb12-163"><a href="#cb12-163"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb12-164"><a href="#cb12-164"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb12-165"><a href="#cb12-165"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb12-166"><a href="#cb12-166"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb12-167"><a href="#cb12-167"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb12-168"><a href="#cb12-168"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb12-169"><a href="#cb12-169"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb12-170"><a href="#cb12-170"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"flanker_data.csv"</span>)<span class="op">;</span></span>
<span id="cb12-171"><a href="#cb12-171"></a>    })<span class="op">;</span></span>
<span id="cb12-172"><a href="#cb12-172"></a>  }</span>
<span id="cb12-173"><a href="#cb12-173"></a>}<span class="op">;</span></span>
<span id="cb12-174"><a href="#cb12-174"></a></span>
<span id="cb12-175"><a href="#cb12-175"></a><span class="co">// ============================================</span></span>
<span id="cb12-176"><a href="#cb12-176"></a><span class="co">// Run jsPsych </span></span>
<span id="cb12-177"><a href="#cb12-177"></a><span class="co">// ============================================</span></span>
<span id="cb12-178"><a href="#cb12-178"></a></span>
<span id="cb12-179"><a href="#cb12-179"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb12-180"><a href="#cb12-180"></a>  instructions<span class="op">,</span></span>
<span id="cb12-181"><a href="#cb12-181"></a>  practice_flanker<span class="op">,</span></span>
<span id="cb12-182"><a href="#cb12-182"></a>  end_practice<span class="op">,</span></span>
<span id="cb12-183"><a href="#cb12-183"></a>  saveData</span>
<span id="cb12-184"><a href="#cb12-184"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb13-1"><a href="#cb13-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<div id="demo-container-4" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-4" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Instructions\n// ============================================\n\nconst instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    `<p>Welcome to the Experiment!</p>\n     <p>Use the buttons below to navigate through the instructions</p>`,\n    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` \n  ],\n  show_clickable_nav: true\n}\n\n// ============================================\n// Flanker Practice Block\n// ============================================\n\n// fixation\nlet practice_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet practice_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    },\n    on_finish: function(data){\n        // store accuracy\n        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)\n    }\n}\n\n// feedback\nlet practice_feedback = {\n   type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        // get the last response\n        let last_trial = jsPsych.data.get().last(1).values()[0]\n        let output  \n\n        if(last_trial.response === null){\n          // this will check for non-response first\n          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`\n          \n        } else if(last_trial.correct){\n          // else if correct\n          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`\n        } else {\n          // else incorrect\n          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`\n        }\n\n        return output;\n    },\n    choices: &quot;NO_KEYS&quot;,\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;feedback&quot;\n    }\n}\n\n// practice timeline\nlet practice_flanker = {\n    timeline: [\n        practice_fixation,\n        practice_stimulus,\n        practice_feedback\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker practice&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    },\n   loop_function: function(data) {\n\n      let trials = data.filter({trial_part: &quot;stimulus&quot;})\n\n      let correct_trials = trials.filter({correct: true})\n\n      let accuracy = correct_trials.count()/trials.count();\n      console.log(`Practice accuracy: ${accuracy}`);\n  \n      // If accuracy is below 75%, repeat the block\n      if (accuracy < 0.75) {\n           return true;  // Loop again\n        } else {\n           return false; // Move on\n      }\n    }\n};\n\n\nconst end_practice = {\n   type: jsPsychHtmlKeyboardResponse,\n   stimulus: `<p>You have completed the practice trials.</p>\n              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,\n   choices: &quot; &quot;,\n   post_trial_gap: 250,\n   data: {\n      phase: &quot;instructions&quot;\n   }\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);\n    });\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  instructions,\n  practice_flanker,\n  end_practice,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-4');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-4" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Instructions
// ============================================

const instructions = {
  type: jsPsychInstructions,
  pages: [
    `<p>Welcome to the Experiment!</p>
     <p>Use the buttons below to navigate through the instructions</p>`,
    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` 
  ],
  show_clickable_nav: true
}

// ============================================
// Flanker Practice Block
// ============================================

// fixation
let practice_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let practice_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    },
    on_finish: function(data){
        // store accuracy
        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)
    }
}

// feedback
let practice_feedback = {
   type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        // get the last response
        let last_trial = jsPsych.data.get().last(1).values()[0]
        let output  

        if(last_trial.response === null){
          // this will check for non-response first
          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`
          
        } else if(last_trial.correct){
          // else if correct
          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`
        } else {
          // else incorrect
          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`
        }

        return output;
    },
    choices: &quot;NO_KEYS&quot;,
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;feedback&quot;
    }
}

// practice timeline
let practice_flanker = {
    timeline: [
        practice_fixation,
        practice_stimulus,
        practice_feedback
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker practice&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    },
   loop_function: function(data) {

      let trials = data.filter({trial_part: &quot;stimulus&quot;})

      let correct_trials = trials.filter({correct: true})

      let accuracy = correct_trials.count()/trials.count();
      console.log(`Practice accuracy: ${accuracy}`);
  
      // If accuracy is below 75%, repeat the block
      if (accuracy < 0.75) {
           return true;  // Loop again
        } else {
           return false; // Move on
      }
    }
};


const end_practice = {
   type: jsPsychHtmlKeyboardResponse,
   stimulus: `<p>You have completed the practice trials.</p>
              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,
   choices: &quot; &quot;,
   post_trial_gap: 250,
   data: {
      phase: &quot;instructions&quot;
   }
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);
    });
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  instructions,
  practice_flanker,
  end_practice,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-4&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-4&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;‚úì Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="add-a-fallback-for-the-loop" class="level3" data-number="20.2.5">
<h3 data-number="20.2.5" class="anchored" data-anchor-id="add-a-fallback-for-the-loop"><span class="header-section-number">20.2.5</span> Add a Fallback for the Loop</h3>
<p>Now we have our practice looping, it‚Äôs possible for our participants to continue looping forever!</p>
<p>Let‚Äôs add some logic that will quit the loop if they‚Äôve failed too many times.</p>
<p><strong>Note</strong>: To test whether the logic is working, you can change <code>max_attempts</code> to 1 and see if it continues after one loop with accuracy &lt; 75%. Once you‚Äôve tested it, change it back to 3.</p>
<div class="cell">
<style type="text/css">
/* CB14 */


/* CB15 */
[id^="cb15-"]:nth-child(n+26):nth-child(-n+29),
[id^="cb15-"]:nth-child(n+127):nth-child(-n+128),
[id^="cb15-"]:nth-child(n+137):nth-child(-n+141) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB16 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb14-1"><a href="#cb14-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 8: Cognitive Control<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>    </span>
<span id="cb14-9"><a href="#cb14-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb14-10"><a href="#cb14-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb14-12"><a href="#cb14-12"></a></span>
<span id="cb14-13"><a href="#cb14-13"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb14-15"><a href="#cb14-15"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb14-16"><a href="#cb14-16"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb14-17"><a href="#cb14-17"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb14-18"><a href="#cb14-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb14-19"><a href="#cb14-19"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb14-20"><a href="#cb14-20"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb14-21"><a href="#cb14-21"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1"></a> </span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">// ============================================</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co">// ============================================</span></span>
<span id="cb15-5"><a href="#cb15-5"></a></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb15-7"><a href="#cb15-7"></a></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">// ============================================</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">// Instructions</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">// ============================================</span></span>
<span id="cb15-11"><a href="#cb15-11"></a></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb15-13"><a href="#cb15-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb15-14"><a href="#cb15-14"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb15-15"><a href="#cb15-15"></a>    <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="vs">     &lt;p&gt;Use the buttons below to navigate through the instructions&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb15-17"><a href="#cb15-17"></a>    <span class="vs">`&lt;p&gt;When you are ready to begin the first trial, press "Next"&lt;/p&gt;`</span> </span>
<span id="cb15-18"><a href="#cb15-18"></a>  ]<span class="op">,</span></span>
<span id="cb15-19"><a href="#cb15-19"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb15-20"><a href="#cb15-20"></a>}</span>
<span id="cb15-21"><a href="#cb15-21"></a></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="co">// ============================================</span></span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="co">// Flanker Practice Block</span></span>
<span id="cb15-24"><a href="#cb15-24"></a><span class="co">// ============================================</span></span>
<span id="cb15-25"><a href="#cb15-25"></a></span>
<span id="cb15-26"><a href="#cb15-26"></a><span class="co">// add a variable to track practice attempts</span></span>
<span id="cb15-27"><a href="#cb15-27"></a><span class="kw">let</span> attempts <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb15-28"><a href="#cb15-28"></a><span class="co">// this variable sets the maximum loops</span></span>
<span id="cb15-29"><a href="#cb15-29"></a><span class="kw">let</span> max_attempts <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb15-30"><a href="#cb15-30"></a></span>
<span id="cb15-31"><a href="#cb15-31"></a><span class="co">// fixation</span></span>
<span id="cb15-32"><a href="#cb15-32"></a><span class="kw">let</span> practice_fixation <span class="op">=</span> {</span>
<span id="cb15-33"><a href="#cb15-33"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb15-34"><a href="#cb15-34"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb15-35"><a href="#cb15-35"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb15-36"><a href="#cb15-36"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb15-37"><a href="#cb15-37"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb15-38"><a href="#cb15-38"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb15-39"><a href="#cb15-39"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb15-40"><a href="#cb15-40"></a>    }</span>
<span id="cb15-41"><a href="#cb15-41"></a>}</span>
<span id="cb15-42"><a href="#cb15-42"></a></span>
<span id="cb15-43"><a href="#cb15-43"></a><span class="co">// stimulus</span></span>
<span id="cb15-44"><a href="#cb15-44"></a><span class="kw">let</span> practice_stimulus <span class="op">=</span> {</span>
<span id="cb15-45"><a href="#cb15-45"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb15-46"><a href="#cb15-46"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb15-47"><a href="#cb15-47"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb15-48"><a href="#cb15-48"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb15-49"><a href="#cb15-49"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb15-50"><a href="#cb15-50"></a></span>
<span id="cb15-51"><a href="#cb15-51"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb15-52"><a href="#cb15-52"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb15-53"><a href="#cb15-53"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb15-54"><a href="#cb15-54"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb15-55"><a href="#cb15-55"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb15-56"><a href="#cb15-56"></a></span>
<span id="cb15-57"><a href="#cb15-57"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb15-58"><a href="#cb15-58"></a>    }<span class="op">,</span></span>
<span id="cb15-59"><a href="#cb15-59"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb15-60"><a href="#cb15-60"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb15-61"><a href="#cb15-61"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb15-62"><a href="#cb15-62"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb15-63"><a href="#cb15-63"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb15-64"><a href="#cb15-64"></a>    }<span class="op">,</span></span>
<span id="cb15-65"><a href="#cb15-65"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data){</span>
<span id="cb15-66"><a href="#cb15-66"></a>        <span class="co">// store accuracy</span></span>
<span id="cb15-67"><a href="#cb15-67"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)</span>
<span id="cb15-68"><a href="#cb15-68"></a>    }</span>
<span id="cb15-69"><a href="#cb15-69"></a>}</span>
<span id="cb15-70"><a href="#cb15-70"></a></span>
<span id="cb15-71"><a href="#cb15-71"></a><span class="co">// feedback</span></span>
<span id="cb15-72"><a href="#cb15-72"></a><span class="kw">let</span> practice_feedback <span class="op">=</span> {</span>
<span id="cb15-73"><a href="#cb15-73"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb15-74"><a href="#cb15-74"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb15-75"><a href="#cb15-75"></a>        <span class="co">// get the last response</span></span>
<span id="cb15-76"><a href="#cb15-76"></a>        <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb15-77"><a href="#cb15-77"></a>        <span class="kw">let</span> output  </span>
<span id="cb15-78"><a href="#cb15-78"></a></span>
<span id="cb15-79"><a href="#cb15-79"></a>        <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">response</span> <span class="op">===</span> <span class="kw">null</span>){</span>
<span id="cb15-80"><a href="#cb15-80"></a>          <span class="co">// this will check for non-response first</span></span>
<span id="cb15-81"><a href="#cb15-81"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Too Slow! Respond Faster!&lt;/p&gt;`</span></span>
<span id="cb15-82"><a href="#cb15-82"></a>          </span>
<span id="cb15-83"><a href="#cb15-83"></a>        } <span class="cf">else</span> <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">correct</span>){</span>
<span id="cb15-84"><a href="#cb15-84"></a>          <span class="co">// else if correct</span></span>
<span id="cb15-85"><a href="#cb15-85"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Correct!&lt;/p&gt;`</span></span>
<span id="cb15-86"><a href="#cb15-86"></a>        } <span class="cf">else</span> {</span>
<span id="cb15-87"><a href="#cb15-87"></a>          <span class="co">// else incorrect</span></span>
<span id="cb15-88"><a href="#cb15-88"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Incorrect!&lt;/p&gt;`</span></span>
<span id="cb15-89"><a href="#cb15-89"></a>        }</span>
<span id="cb15-90"><a href="#cb15-90"></a></span>
<span id="cb15-91"><a href="#cb15-91"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb15-92"><a href="#cb15-92"></a>    }<span class="op">,</span></span>
<span id="cb15-93"><a href="#cb15-93"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb15-94"><a href="#cb15-94"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb15-95"><a href="#cb15-95"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb15-96"><a href="#cb15-96"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb15-97"><a href="#cb15-97"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"feedback"</span></span>
<span id="cb15-98"><a href="#cb15-98"></a>    }</span>
<span id="cb15-99"><a href="#cb15-99"></a>}</span>
<span id="cb15-100"><a href="#cb15-100"></a></span>
<span id="cb15-101"><a href="#cb15-101"></a><span class="co">// practice timeline</span></span>
<span id="cb15-102"><a href="#cb15-102"></a><span class="kw">let</span> practice_flanker <span class="op">=</span> {</span>
<span id="cb15-103"><a href="#cb15-103"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb15-104"><a href="#cb15-104"></a>        practice_fixation<span class="op">,</span></span>
<span id="cb15-105"><a href="#cb15-105"></a>        practice_stimulus<span class="op">,</span></span>
<span id="cb15-106"><a href="#cb15-106"></a>        practice_feedback</span>
<span id="cb15-107"><a href="#cb15-107"></a>    ]<span class="op">,</span></span>
<span id="cb15-108"><a href="#cb15-108"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb15-109"><a href="#cb15-109"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb15-110"><a href="#cb15-110"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb15-111"><a href="#cb15-111"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb15-112"><a href="#cb15-112"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb15-113"><a href="#cb15-113"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb15-114"><a href="#cb15-114"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb15-115"><a href="#cb15-115"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb15-116"><a href="#cb15-116"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb15-117"><a href="#cb15-117"></a>    ]<span class="op">,</span></span>
<span id="cb15-118"><a href="#cb15-118"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb15-119"><a href="#cb15-119"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb15-120"><a href="#cb15-120"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker practice"</span><span class="op">,</span></span>
<span id="cb15-121"><a href="#cb15-121"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb15-122"><a href="#cb15-122"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb15-123"><a href="#cb15-123"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb15-124"><a href="#cb15-124"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb15-125"><a href="#cb15-125"></a>    }<span class="op">,</span></span>
<span id="cb15-126"><a href="#cb15-126"></a>   <span class="dt">loop_function</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb15-127"><a href="#cb15-127"></a>      <span class="co">// add one to attempts</span></span>
<span id="cb15-128"><a href="#cb15-128"></a>      attempts<span class="op">++</span>      </span>
<span id="cb15-129"><a href="#cb15-129"></a></span>
<span id="cb15-130"><a href="#cb15-130"></a>      <span class="kw">let</span> trials <span class="op">=</span> data<span class="op">.</span><span class="fu">filter</span>({<span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span>})</span>
<span id="cb15-131"><a href="#cb15-131"></a></span>
<span id="cb15-132"><a href="#cb15-132"></a>      <span class="kw">let</span> correct_trials <span class="op">=</span> trials<span class="op">.</span><span class="fu">filter</span>({<span class="dt">correct</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb15-133"><a href="#cb15-133"></a></span>
<span id="cb15-134"><a href="#cb15-134"></a>      <span class="kw">let</span> accuracy <span class="op">=</span> correct_trials<span class="op">.</span><span class="fu">count</span>()<span class="op">/</span>trials<span class="op">.</span><span class="fu">count</span>()<span class="op">;</span></span>
<span id="cb15-135"><a href="#cb15-135"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Practice accuracy: </span><span class="sc">${</span>accuracy<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb15-136"><a href="#cb15-136"></a>  </span>
<span id="cb15-137"><a href="#cb15-137"></a>      <span class="co">// add this before the accuracy check</span></span>
<span id="cb15-138"><a href="#cb15-138"></a>      <span class="co">// if attempts is greater than the max quit loop</span></span>
<span id="cb15-139"><a href="#cb15-139"></a>      <span class="cf">if</span>(attempts <span class="op">&gt;</span> max_attempts){</span>
<span id="cb15-140"><a href="#cb15-140"></a>          <span class="cf">return</span> <span class="kw">false</span></span>
<span id="cb15-141"><a href="#cb15-141"></a>      }</span>
<span id="cb15-142"><a href="#cb15-142"></a></span>
<span id="cb15-143"><a href="#cb15-143"></a>      <span class="co">// If accuracy is below 75%, repeat the block</span></span>
<span id="cb15-144"><a href="#cb15-144"></a>      <span class="cf">if</span> (accuracy <span class="op">&lt;</span> <span class="fl">0.75</span>) {</span>
<span id="cb15-145"><a href="#cb15-145"></a>           <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span>  <span class="co">// Loop again</span></span>
<span id="cb15-146"><a href="#cb15-146"></a>        } <span class="cf">else</span> {</span>
<span id="cb15-147"><a href="#cb15-147"></a>           <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span> <span class="co">// Move on</span></span>
<span id="cb15-148"><a href="#cb15-148"></a>      }</span>
<span id="cb15-149"><a href="#cb15-149"></a>    }</span>
<span id="cb15-150"><a href="#cb15-150"></a>}<span class="op">;</span></span>
<span id="cb15-151"><a href="#cb15-151"></a></span>
<span id="cb15-152"><a href="#cb15-152"></a><span class="kw">const</span> end_practice <span class="op">=</span> {</span>
<span id="cb15-153"><a href="#cb15-153"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb15-154"><a href="#cb15-154"></a>   <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;You have completed the practice trials.&lt;/p&gt;</span></span>
<span id="cb15-155"><a href="#cb15-155"></a><span class="vs">              &lt;p&gt;When you are ready to begin the experimental trials, press the space bar.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb15-156"><a href="#cb15-156"></a>   <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span><span class="op">,</span></span>
<span id="cb15-157"><a href="#cb15-157"></a>   <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb15-158"><a href="#cb15-158"></a>   <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb15-159"><a href="#cb15-159"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"instructions"</span></span>
<span id="cb15-160"><a href="#cb15-160"></a>   }</span>
<span id="cb15-161"><a href="#cb15-161"></a>}</span>
<span id="cb15-162"><a href="#cb15-162"></a></span>
<span id="cb15-163"><a href="#cb15-163"></a><span class="co">// ============================================</span></span>
<span id="cb15-164"><a href="#cb15-164"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb15-165"><a href="#cb15-165"></a><span class="co">// ============================================</span></span>
<span id="cb15-166"><a href="#cb15-166"></a></span>
<span id="cb15-167"><a href="#cb15-167"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb15-168"><a href="#cb15-168"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb15-169"><a href="#cb15-169"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb15-170"><a href="#cb15-170"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb15-171"><a href="#cb15-171"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb15-172"><a href="#cb15-172"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb15-173"><a href="#cb15-173"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb15-174"><a href="#cb15-174"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb15-175"><a href="#cb15-175"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb15-176"><a href="#cb15-176"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb15-177"><a href="#cb15-177"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb15-178"><a href="#cb15-178"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb15-179"><a href="#cb15-179"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb15-180"><a href="#cb15-180"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb15-181"><a href="#cb15-181"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb15-182"><a href="#cb15-182"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"flanker_data.csv"</span>)<span class="op">;</span></span>
<span id="cb15-183"><a href="#cb15-183"></a>    })<span class="op">;</span></span>
<span id="cb15-184"><a href="#cb15-184"></a>  }</span>
<span id="cb15-185"><a href="#cb15-185"></a>}<span class="op">;</span></span>
<span id="cb15-186"><a href="#cb15-186"></a></span>
<span id="cb15-187"><a href="#cb15-187"></a><span class="co">// ============================================</span></span>
<span id="cb15-188"><a href="#cb15-188"></a><span class="co">// Run jsPsych </span></span>
<span id="cb15-189"><a href="#cb15-189"></a><span class="co">// ============================================</span></span>
<span id="cb15-190"><a href="#cb15-190"></a></span>
<span id="cb15-191"><a href="#cb15-191"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb15-192"><a href="#cb15-192"></a>  instructions<span class="op">,</span></span>
<span id="cb15-193"><a href="#cb15-193"></a>  practice_flanker<span class="op">,</span></span>
<span id="cb15-194"><a href="#cb15-194"></a>  end_practice<span class="op">,</span></span>
<span id="cb15-195"><a href="#cb15-195"></a>  saveData</span>
<span id="cb15-196"><a href="#cb15-196"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb16-1"><a href="#cb16-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<div id="demo-container-4" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-4" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Instructions\n// ============================================\n\nconst instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    `<p>Welcome to the Experiment!</p>\n     <p>Use the buttons below to navigate through the instructions</p>`,\n    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` \n  ],\n  show_clickable_nav: true\n}\n\n// ============================================\n// Flanker Practice Block\n// ============================================\n\n// add a variable to track practice attempts\nlet attempts = 0\n// this variable sets the maximum loops\nlet max_attempts = 3\n\n// fixation\nlet practice_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet practice_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    },\n    on_finish: function(data){\n        // store accuracy\n        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)\n    }\n}\n\n// feedback\nlet practice_feedback = {\n   type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        // get the last response\n        let last_trial = jsPsych.data.get().last(1).values()[0]\n        let output  \n\n        if(last_trial.response === null){\n          // this will check for non-response first\n          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`\n          \n        } else if(last_trial.correct){\n          // else if correct\n          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`\n        } else {\n          // else incorrect\n          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`\n        }\n\n        return output;\n    },\n    choices: &quot;NO_KEYS&quot;,\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;feedback&quot;\n    }\n}\n\n// practice timeline\nlet practice_flanker = {\n    timeline: [\n        practice_fixation,\n        practice_stimulus,\n        practice_feedback\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker practice&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    },\n   loop_function: function(data) {\n      // add one to attempts\n      attempts++      \n\n      let trials = data.filter({trial_part: &quot;stimulus&quot;})\n\n      let correct_trials = trials.filter({correct: true})\n\n      let accuracy = correct_trials.count()/trials.count();\n      console.log(`Practice accuracy: ${accuracy}`);\n  \n      // add this before the accuracy check\n      // if attempts is greater than the max quit loop\n      if(attempts > max_attempts){\n          return false\n      }\n\n      // If accuracy is below 75%, repeat the block\n      if (accuracy < 0.75) {\n           return true;  // Loop again\n        } else {\n           return false; // Move on\n      }\n    }\n};\n\nconst end_practice = {\n   type: jsPsychHtmlKeyboardResponse,\n   stimulus: `<p>You have completed the practice trials.</p>\n              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,\n   choices: &quot; &quot;,\n   post_trial_gap: 250,\n   data: {\n      phase: &quot;instructions&quot;\n   }\n}\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);\n    });\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  instructions,\n  practice_flanker,\n  end_practice,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-4');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-4" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Instructions
// ============================================

const instructions = {
  type: jsPsychInstructions,
  pages: [
    `<p>Welcome to the Experiment!</p>
     <p>Use the buttons below to navigate through the instructions</p>`,
    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` 
  ],
  show_clickable_nav: true
}

// ============================================
// Flanker Practice Block
// ============================================

// add a variable to track practice attempts
let attempts = 0
// this variable sets the maximum loops
let max_attempts = 3

// fixation
let practice_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let practice_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    },
    on_finish: function(data){
        // store accuracy
        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)
    }
}

// feedback
let practice_feedback = {
   type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        // get the last response
        let last_trial = jsPsych.data.get().last(1).values()[0]
        let output  

        if(last_trial.response === null){
          // this will check for non-response first
          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`
          
        } else if(last_trial.correct){
          // else if correct
          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`
        } else {
          // else incorrect
          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`
        }

        return output;
    },
    choices: &quot;NO_KEYS&quot;,
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;feedback&quot;
    }
}

// practice timeline
let practice_flanker = {
    timeline: [
        practice_fixation,
        practice_stimulus,
        practice_feedback
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker practice&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    },
   loop_function: function(data) {
      // add one to attempts
      attempts++      

      let trials = data.filter({trial_part: &quot;stimulus&quot;})

      let correct_trials = trials.filter({correct: true})

      let accuracy = correct_trials.count()/trials.count();
      console.log(`Practice accuracy: ${accuracy}`);
  
      // add this before the accuracy check
      // if attempts is greater than the max quit loop
      if(attempts > max_attempts){
          return false
      }

      // If accuracy is below 75%, repeat the block
      if (accuracy < 0.75) {
           return true;  // Loop again
        } else {
           return false; // Move on
      }
    }
};

const end_practice = {
   type: jsPsychHtmlKeyboardResponse,
   stimulus: `<p>You have completed the practice trials.</p>
              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,
   choices: &quot; &quot;,
   post_trial_gap: 250,
   data: {
      phase: &quot;instructions&quot;
   }
}

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);
    });
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  instructions,
  practice_flanker,
  end_practice,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-4&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-4&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;‚úì Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="creat-experimental-block" class="level3" data-number="20.2.6">
<h3 data-number="20.2.6" class="anchored" data-anchor-id="creat-experimental-block"><span class="header-section-number">20.2.6</span> Creat Experimental Block</h3>
<p>We‚Äôll create the experimental block of flanker trials. This is almost identical to the practice, but there is no loop function and no feedback, currently.</p>
<p><strong>Important Note:</strong> You‚Äôll notice our experiment is getting long and it‚Äôs taking more time to test it to make sure it‚Äôs working. One way around this, is to ‚Äòcomment out‚Äô the sections inside <code>jsPsych.run</code> that we want to skip during testing.</p>
<p>For instance, in this part, we want to test the new experimental block and we already know our practice block works. We don‚Äôt want to sit through the practice phase each time we test it, so I can do this:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1"></a><span class="co">// ============================================</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co">// Run jsPsych </span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="co">// ============================================</span></span>
<span id="cb17-4"><a href="#cb17-4"></a></span>
<span id="cb17-5"><a href="#cb17-5"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb17-6"><a href="#cb17-6"></a>  instructions<span class="op">,</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>  <span class="co">// practice_flanker,</span></span>
<span id="cb17-8"><a href="#cb17-8"></a>  end_practice<span class="op">,</span></span>
<span id="cb17-9"><a href="#cb17-9"></a>  exp_flanker<span class="op">,</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>  saveData</span>
<span id="cb17-11"><a href="#cb17-11"></a>])<span class="op">;</span><span class="st">'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I added the comment <code>//</code> on the line with <code>practice_flanker</code> which means that the browser will ignore that line. This allows me to skip the practice phase for now.</p>
<p>BUT, we have to remember to remove the comment tag when we are finished so we see the whole experiment at the end.</p>
<div class="cell">
<style type="text/css">
/* CB18 */


/* CB19 */
[id^="cb19-"]:nth-child(n+163):nth-child(-n+165),
[id^="cb19-"]:nth-child(n+167):nth-child(-n+177),
[id^="cb19-"]:nth-child(n+179):nth-child(-n+205),
[id^="cb19-"]:nth-child(n+207):nth-child(-n+231),
[id^="cb19-"]:nth-child(n+263):nth-child(-n+263),
[id^="cb19-"]:nth-child(n+265):nth-child(-n+265)   {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB20 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb18-1"><a href="#cb18-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 8: Cognitive Control<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>    </span>
<span id="cb18-9"><a href="#cb18-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-12"><a href="#cb18-12"></a></span>
<span id="cb18-13"><a href="#cb18-13"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb18-15"><a href="#cb18-15"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb18-16"><a href="#cb18-16"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb18-17"><a href="#cb18-17"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb18-18"><a href="#cb18-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb18-19"><a href="#cb18-19"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb18-20"><a href="#cb18-20"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb18-21"><a href="#cb18-21"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell fullscreen">
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1"></a> </span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="co">// ============================================</span></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co">// ============================================</span></span>
<span id="cb19-5"><a href="#cb19-5"></a></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb19-7"><a href="#cb19-7"></a></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="co">// ============================================</span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="co">// Instructions</span></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co">// ============================================</span></span>
<span id="cb19-11"><a href="#cb19-11"></a></span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb19-13"><a href="#cb19-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb19-14"><a href="#cb19-14"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb19-15"><a href="#cb19-15"></a>    <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb19-16"><a href="#cb19-16"></a><span class="vs">     &lt;p&gt;Use the buttons below to navigate through the instructions&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb19-17"><a href="#cb19-17"></a>    <span class="vs">`&lt;p&gt;When you are ready to begin the first trial, press "Next"&lt;/p&gt;`</span> </span>
<span id="cb19-18"><a href="#cb19-18"></a>  ]<span class="op">,</span></span>
<span id="cb19-19"><a href="#cb19-19"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb19-20"><a href="#cb19-20"></a>}</span>
<span id="cb19-21"><a href="#cb19-21"></a></span>
<span id="cb19-22"><a href="#cb19-22"></a><span class="co">// ============================================</span></span>
<span id="cb19-23"><a href="#cb19-23"></a><span class="co">// Flanker Practice Block</span></span>
<span id="cb19-24"><a href="#cb19-24"></a><span class="co">// ============================================</span></span>
<span id="cb19-25"><a href="#cb19-25"></a></span>
<span id="cb19-26"><a href="#cb19-26"></a><span class="co">// add a variable to track practice attempts</span></span>
<span id="cb19-27"><a href="#cb19-27"></a><span class="kw">let</span> attempts <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb19-28"><a href="#cb19-28"></a><span class="co">// this variable sets the maximum loops</span></span>
<span id="cb19-29"><a href="#cb19-29"></a><span class="kw">let</span> max_attempts <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb19-30"><a href="#cb19-30"></a></span>
<span id="cb19-31"><a href="#cb19-31"></a><span class="co">// fixation</span></span>
<span id="cb19-32"><a href="#cb19-32"></a><span class="kw">let</span> practice_fixation <span class="op">=</span> {</span>
<span id="cb19-33"><a href="#cb19-33"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-34"><a href="#cb19-34"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb19-35"><a href="#cb19-35"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb19-36"><a href="#cb19-36"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb19-37"><a href="#cb19-37"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb19-38"><a href="#cb19-38"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb19-39"><a href="#cb19-39"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb19-40"><a href="#cb19-40"></a>    }</span>
<span id="cb19-41"><a href="#cb19-41"></a>}</span>
<span id="cb19-42"><a href="#cb19-42"></a></span>
<span id="cb19-43"><a href="#cb19-43"></a><span class="co">// stimulus</span></span>
<span id="cb19-44"><a href="#cb19-44"></a><span class="kw">let</span> practice_stimulus <span class="op">=</span> {</span>
<span id="cb19-45"><a href="#cb19-45"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-46"><a href="#cb19-46"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb19-47"><a href="#cb19-47"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb19-48"><a href="#cb19-48"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb19-49"><a href="#cb19-49"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb19-50"><a href="#cb19-50"></a></span>
<span id="cb19-51"><a href="#cb19-51"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb19-52"><a href="#cb19-52"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb19-53"><a href="#cb19-53"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb19-54"><a href="#cb19-54"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb19-55"><a href="#cb19-55"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb19-56"><a href="#cb19-56"></a></span>
<span id="cb19-57"><a href="#cb19-57"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb19-58"><a href="#cb19-58"></a>    }<span class="op">,</span></span>
<span id="cb19-59"><a href="#cb19-59"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb19-60"><a href="#cb19-60"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb19-61"><a href="#cb19-61"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb19-62"><a href="#cb19-62"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb19-63"><a href="#cb19-63"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb19-64"><a href="#cb19-64"></a>    }<span class="op">,</span></span>
<span id="cb19-65"><a href="#cb19-65"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data){</span>
<span id="cb19-66"><a href="#cb19-66"></a>        <span class="co">// store accuracy</span></span>
<span id="cb19-67"><a href="#cb19-67"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)</span>
<span id="cb19-68"><a href="#cb19-68"></a>    }</span>
<span id="cb19-69"><a href="#cb19-69"></a>}</span>
<span id="cb19-70"><a href="#cb19-70"></a></span>
<span id="cb19-71"><a href="#cb19-71"></a><span class="co">// feedback</span></span>
<span id="cb19-72"><a href="#cb19-72"></a><span class="kw">let</span> practice_feedback <span class="op">=</span> {</span>
<span id="cb19-73"><a href="#cb19-73"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-74"><a href="#cb19-74"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb19-75"><a href="#cb19-75"></a>        <span class="co">// get the last response</span></span>
<span id="cb19-76"><a href="#cb19-76"></a>        <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb19-77"><a href="#cb19-77"></a>        <span class="kw">let</span> output  </span>
<span id="cb19-78"><a href="#cb19-78"></a></span>
<span id="cb19-79"><a href="#cb19-79"></a>        <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">response</span> <span class="op">===</span> <span class="kw">null</span>){</span>
<span id="cb19-80"><a href="#cb19-80"></a>          <span class="co">// this will check for non-response first</span></span>
<span id="cb19-81"><a href="#cb19-81"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Too Slow! Respond Faster!&lt;/p&gt;`</span></span>
<span id="cb19-82"><a href="#cb19-82"></a>          </span>
<span id="cb19-83"><a href="#cb19-83"></a>        } <span class="cf">else</span> <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">correct</span>){</span>
<span id="cb19-84"><a href="#cb19-84"></a>          <span class="co">// else if correct</span></span>
<span id="cb19-85"><a href="#cb19-85"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Correct!&lt;/p&gt;`</span></span>
<span id="cb19-86"><a href="#cb19-86"></a>        } <span class="cf">else</span> {</span>
<span id="cb19-87"><a href="#cb19-87"></a>          <span class="co">// else incorrect</span></span>
<span id="cb19-88"><a href="#cb19-88"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Incorrect!&lt;/p&gt;`</span></span>
<span id="cb19-89"><a href="#cb19-89"></a>        }</span>
<span id="cb19-90"><a href="#cb19-90"></a></span>
<span id="cb19-91"><a href="#cb19-91"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb19-92"><a href="#cb19-92"></a>    }<span class="op">,</span></span>
<span id="cb19-93"><a href="#cb19-93"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb19-94"><a href="#cb19-94"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb19-95"><a href="#cb19-95"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb19-96"><a href="#cb19-96"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb19-97"><a href="#cb19-97"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"feedback"</span></span>
<span id="cb19-98"><a href="#cb19-98"></a>    }</span>
<span id="cb19-99"><a href="#cb19-99"></a>}</span>
<span id="cb19-100"><a href="#cb19-100"></a></span>
<span id="cb19-101"><a href="#cb19-101"></a><span class="co">// practice timeline</span></span>
<span id="cb19-102"><a href="#cb19-102"></a><span class="kw">let</span> practice_flanker <span class="op">=</span> {</span>
<span id="cb19-103"><a href="#cb19-103"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb19-104"><a href="#cb19-104"></a>        practice_fixation<span class="op">,</span></span>
<span id="cb19-105"><a href="#cb19-105"></a>        practice_stimulus<span class="op">,</span></span>
<span id="cb19-106"><a href="#cb19-106"></a>        practice_feedback</span>
<span id="cb19-107"><a href="#cb19-107"></a>    ]<span class="op">,</span></span>
<span id="cb19-108"><a href="#cb19-108"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb19-109"><a href="#cb19-109"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb19-110"><a href="#cb19-110"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb19-111"><a href="#cb19-111"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb19-112"><a href="#cb19-112"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb19-113"><a href="#cb19-113"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb19-114"><a href="#cb19-114"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb19-115"><a href="#cb19-115"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb19-116"><a href="#cb19-116"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb19-117"><a href="#cb19-117"></a>    ]<span class="op">,</span></span>
<span id="cb19-118"><a href="#cb19-118"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb19-119"><a href="#cb19-119"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb19-120"><a href="#cb19-120"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker practice"</span><span class="op">,</span></span>
<span id="cb19-121"><a href="#cb19-121"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb19-122"><a href="#cb19-122"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb19-123"><a href="#cb19-123"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb19-124"><a href="#cb19-124"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb19-125"><a href="#cb19-125"></a>    }<span class="op">,</span></span>
<span id="cb19-126"><a href="#cb19-126"></a>   <span class="dt">loop_function</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb19-127"><a href="#cb19-127"></a>      <span class="co">// add one to attempts</span></span>
<span id="cb19-128"><a href="#cb19-128"></a>      attempts<span class="op">++</span>      </span>
<span id="cb19-129"><a href="#cb19-129"></a></span>
<span id="cb19-130"><a href="#cb19-130"></a>      <span class="kw">let</span> trials <span class="op">=</span> data<span class="op">.</span><span class="fu">filter</span>({<span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span>})</span>
<span id="cb19-131"><a href="#cb19-131"></a></span>
<span id="cb19-132"><a href="#cb19-132"></a>      <span class="kw">let</span> correct_trials <span class="op">=</span> trials<span class="op">.</span><span class="fu">filter</span>({<span class="dt">correct</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb19-133"><a href="#cb19-133"></a></span>
<span id="cb19-134"><a href="#cb19-134"></a>      <span class="kw">let</span> accuracy <span class="op">=</span> correct_trials<span class="op">.</span><span class="fu">count</span>()<span class="op">/</span>trials<span class="op">.</span><span class="fu">count</span>()<span class="op">;</span></span>
<span id="cb19-135"><a href="#cb19-135"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Practice accuracy: </span><span class="sc">${</span>accuracy<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb19-136"><a href="#cb19-136"></a>  </span>
<span id="cb19-137"><a href="#cb19-137"></a>      <span class="co">// add this before the accuracy check</span></span>
<span id="cb19-138"><a href="#cb19-138"></a>      <span class="co">// if attempts is greater than the max quit loop</span></span>
<span id="cb19-139"><a href="#cb19-139"></a>      <span class="cf">if</span>(attempts <span class="op">&gt;</span> max_attempts){</span>
<span id="cb19-140"><a href="#cb19-140"></a>          <span class="cf">return</span> <span class="kw">false</span></span>
<span id="cb19-141"><a href="#cb19-141"></a>      }</span>
<span id="cb19-142"><a href="#cb19-142"></a></span>
<span id="cb19-143"><a href="#cb19-143"></a>      <span class="co">// If accuracy is below 75%, repeat the block</span></span>
<span id="cb19-144"><a href="#cb19-144"></a>      <span class="cf">if</span> (accuracy <span class="op">&lt;</span> <span class="fl">0.75</span>) {</span>
<span id="cb19-145"><a href="#cb19-145"></a>           <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span>  <span class="co">// Loop again</span></span>
<span id="cb19-146"><a href="#cb19-146"></a>        } <span class="cf">else</span> {</span>
<span id="cb19-147"><a href="#cb19-147"></a>           <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span> <span class="co">// Move on</span></span>
<span id="cb19-148"><a href="#cb19-148"></a>      }</span>
<span id="cb19-149"><a href="#cb19-149"></a>    }</span>
<span id="cb19-150"><a href="#cb19-150"></a>}<span class="op">;</span></span>
<span id="cb19-151"><a href="#cb19-151"></a></span>
<span id="cb19-152"><a href="#cb19-152"></a><span class="kw">const</span> end_practice <span class="op">=</span> {</span>
<span id="cb19-153"><a href="#cb19-153"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-154"><a href="#cb19-154"></a>   <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;You have completed the practice trials.&lt;/p&gt;</span></span>
<span id="cb19-155"><a href="#cb19-155"></a><span class="vs">              &lt;p&gt;When you are ready to begin the experimental trials, press the space bar.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb19-156"><a href="#cb19-156"></a>   <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span><span class="op">,</span></span>
<span id="cb19-157"><a href="#cb19-157"></a>   <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb19-158"><a href="#cb19-158"></a>   <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb19-159"><a href="#cb19-159"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"instructions"</span></span>
<span id="cb19-160"><a href="#cb19-160"></a>   }</span>
<span id="cb19-161"><a href="#cb19-161"></a>}</span>
<span id="cb19-162"><a href="#cb19-162"></a></span>
<span id="cb19-163"><a href="#cb19-163"></a><span class="co">// ============================================</span></span>
<span id="cb19-164"><a href="#cb19-164"></a><span class="co">// Flanker Experimental Block</span></span>
<span id="cb19-165"><a href="#cb19-165"></a><span class="co">// ============================================</span></span>
<span id="cb19-166"><a href="#cb19-166"></a></span>
<span id="cb19-167"><a href="#cb19-167"></a><span class="co">// fixation</span></span>
<span id="cb19-168"><a href="#cb19-168"></a><span class="kw">let</span> exp_fixation <span class="op">=</span> {</span>
<span id="cb19-169"><a href="#cb19-169"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-170"><a href="#cb19-170"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb19-171"><a href="#cb19-171"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb19-172"><a href="#cb19-172"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb19-173"><a href="#cb19-173"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb19-174"><a href="#cb19-174"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb19-175"><a href="#cb19-175"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb19-176"><a href="#cb19-176"></a>    }</span>
<span id="cb19-177"><a href="#cb19-177"></a>}</span>
<span id="cb19-178"><a href="#cb19-178"></a></span>
<span id="cb19-179"><a href="#cb19-179"></a><span class="co">// stimulus</span></span>
<span id="cb19-180"><a href="#cb19-180"></a><span class="kw">let</span> exp_stimulus <span class="op">=</span> {</span>
<span id="cb19-181"><a href="#cb19-181"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-182"><a href="#cb19-182"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb19-183"><a href="#cb19-183"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb19-184"><a href="#cb19-184"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb19-185"><a href="#cb19-185"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb19-186"><a href="#cb19-186"></a></span>
<span id="cb19-187"><a href="#cb19-187"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb19-188"><a href="#cb19-188"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb19-189"><a href="#cb19-189"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb19-190"><a href="#cb19-190"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb19-191"><a href="#cb19-191"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb19-192"><a href="#cb19-192"></a></span>
<span id="cb19-193"><a href="#cb19-193"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb19-194"><a href="#cb19-194"></a>    }<span class="op">,</span></span>
<span id="cb19-195"><a href="#cb19-195"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb19-196"><a href="#cb19-196"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb19-197"><a href="#cb19-197"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb19-198"><a href="#cb19-198"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb19-199"><a href="#cb19-199"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb19-200"><a href="#cb19-200"></a>    }<span class="op">,</span></span>
<span id="cb19-201"><a href="#cb19-201"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data){</span>
<span id="cb19-202"><a href="#cb19-202"></a>        <span class="co">// store accuracy</span></span>
<span id="cb19-203"><a href="#cb19-203"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)</span>
<span id="cb19-204"><a href="#cb19-204"></a>    }</span>
<span id="cb19-205"><a href="#cb19-205"></a>}</span>
<span id="cb19-206"><a href="#cb19-206"></a></span>
<span id="cb19-207"><a href="#cb19-207"></a><span class="co">// exp timeline</span></span>
<span id="cb19-208"><a href="#cb19-208"></a><span class="kw">let</span> exp_flanker <span class="op">=</span> {</span>
<span id="cb19-209"><a href="#cb19-209"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb19-210"><a href="#cb19-210"></a>        exp_fixation<span class="op">,</span></span>
<span id="cb19-211"><a href="#cb19-211"></a>        exp_stimulus</span>
<span id="cb19-212"><a href="#cb19-212"></a>    ]<span class="op">,</span></span>
<span id="cb19-213"><a href="#cb19-213"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb19-214"><a href="#cb19-214"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb19-215"><a href="#cb19-215"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb19-216"><a href="#cb19-216"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb19-217"><a href="#cb19-217"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb19-218"><a href="#cb19-218"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb19-219"><a href="#cb19-219"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb19-220"><a href="#cb19-220"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb19-221"><a href="#cb19-221"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb19-222"><a href="#cb19-222"></a>    ]<span class="op">,</span></span>
<span id="cb19-223"><a href="#cb19-223"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb19-224"><a href="#cb19-224"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb19-225"><a href="#cb19-225"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker"</span><span class="op">,</span></span>
<span id="cb19-226"><a href="#cb19-226"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb19-227"><a href="#cb19-227"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb19-228"><a href="#cb19-228"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb19-229"><a href="#cb19-229"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb19-230"><a href="#cb19-230"></a>    }</span>
<span id="cb19-231"><a href="#cb19-231"></a>}<span class="op">;</span></span>
<span id="cb19-232"><a href="#cb19-232"></a></span>
<span id="cb19-233"><a href="#cb19-233"></a><span class="co">// ============================================</span></span>
<span id="cb19-234"><a href="#cb19-234"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb19-235"><a href="#cb19-235"></a><span class="co">// ============================================</span></span>
<span id="cb19-236"><a href="#cb19-236"></a></span>
<span id="cb19-237"><a href="#cb19-237"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb19-238"><a href="#cb19-238"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb19-239"><a href="#cb19-239"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb19-240"><a href="#cb19-240"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb19-241"><a href="#cb19-241"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb19-242"><a href="#cb19-242"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb19-243"><a href="#cb19-243"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb19-244"><a href="#cb19-244"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb19-245"><a href="#cb19-245"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb19-246"><a href="#cb19-246"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb19-247"><a href="#cb19-247"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb19-248"><a href="#cb19-248"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb19-249"><a href="#cb19-249"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb19-250"><a href="#cb19-250"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb19-251"><a href="#cb19-251"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb19-252"><a href="#cb19-252"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"flanker_data.csv"</span>)<span class="op">;</span></span>
<span id="cb19-253"><a href="#cb19-253"></a>    })<span class="op">;</span></span>
<span id="cb19-254"><a href="#cb19-254"></a>  }</span>
<span id="cb19-255"><a href="#cb19-255"></a>}<span class="op">;</span></span>
<span id="cb19-256"><a href="#cb19-256"></a></span>
<span id="cb19-257"><a href="#cb19-257"></a><span class="co">// ============================================</span></span>
<span id="cb19-258"><a href="#cb19-258"></a><span class="co">// Run jsPsych </span></span>
<span id="cb19-259"><a href="#cb19-259"></a><span class="co">// ============================================</span></span>
<span id="cb19-260"><a href="#cb19-260"></a></span>
<span id="cb19-261"><a href="#cb19-261"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb19-262"><a href="#cb19-262"></a>  instructions<span class="op">,</span></span>
<span id="cb19-263"><a href="#cb19-263"></a>  <span class="co">// practice_flanker,</span></span>
<span id="cb19-264"><a href="#cb19-264"></a>  end_practice<span class="op">,</span></span>
<span id="cb19-265"><a href="#cb19-265"></a>  exp_flanker<span class="op">,</span></span>
<span id="cb19-266"><a href="#cb19-266"></a>  saveData</span>
<span id="cb19-267"><a href="#cb19-267"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb20-1"><a href="#cb20-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<div id="demo-container-5" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-5" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Instructions\n// ============================================\n\nconst instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    `<p>Welcome to the Experiment!</p>\n     <p>Use the buttons below to navigate through the instructions</p>`,\n    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` \n  ],\n  show_clickable_nav: true\n}\n\n// ============================================\n// Flanker Practice Block\n// ============================================\n\n// add a variable to track practice attempts\nlet attempts = 0\n// this variable sets the maximum loops\nlet max_attempts = 3\n\n// fixation\nlet practice_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet practice_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    },\n    on_finish: function(data){\n        // store accuracy\n        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)\n    }\n}\n\n// feedback\nlet practice_feedback = {\n   type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        // get the last response\n        let last_trial = jsPsych.data.get().last(1).values()[0]\n        let output  \n\n        if(last_trial.response === null){\n          // this will check for non-response first\n          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`\n          \n        } else if(last_trial.correct){\n          // else if correct\n          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`\n        } else {\n          // else incorrect\n          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`\n        }\n\n        return output;\n    },\n    choices: &quot;NO_KEYS&quot;,\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;feedback&quot;\n    }\n}\n\n// practice timeline\nlet practice_flanker = {\n    timeline: [\n        practice_fixation,\n        practice_stimulus,\n        practice_feedback\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker practice&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    },\n   loop_function: function(data) {\n      // add one to attempts\n      attempts++      \n\n      let trials = data.filter({trial_part: &quot;stimulus&quot;})\n\n      let correct_trials = trials.filter({correct: true})\n\n      let accuracy = correct_trials.count()/trials.count();\n      console.log(`Practice accuracy: ${accuracy}`);\n  \n      // add this before the accuracy check\n      // if attempts is greater than the max quit loop\n      if(attempts > max_attempts){\n          return false\n      }\n\n      // If accuracy is below 75%, repeat the block\n      if (accuracy < 0.75) {\n           return true;  // Loop again\n        } else {\n           return false; // Move on\n      }\n    }\n};\n\nconst end_practice = {\n   type: jsPsychHtmlKeyboardResponse,\n   stimulus: `<p>You have completed the practice trials.</p>\n              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,\n   choices: &quot; &quot;,\n   post_trial_gap: 250,\n   data: {\n      phase: &quot;instructions&quot;\n   }\n}\n\n// ============================================\n// Flanker Experimental Block\n// ============================================\n\n// fixation\nlet exp_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet exp_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    },\n    on_finish: function(data){\n        // store accuracy\n        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)\n    }\n}\n\n// exp timeline\nlet exp_flanker = {\n    timeline: [\n        exp_fixation,\n        exp_stimulus\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    }\n};\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);\n    });\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  instructions,\n  // practice_flanker,\n  end_practice,\n  exp_flanker,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-5');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-5" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Instructions
// ============================================

const instructions = {
  type: jsPsychInstructions,
  pages: [
    `<p>Welcome to the Experiment!</p>
     <p>Use the buttons below to navigate through the instructions</p>`,
    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` 
  ],
  show_clickable_nav: true
}

// ============================================
// Flanker Practice Block
// ============================================

// add a variable to track practice attempts
let attempts = 0
// this variable sets the maximum loops
let max_attempts = 3

// fixation
let practice_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let practice_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    },
    on_finish: function(data){
        // store accuracy
        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)
    }
}

// feedback
let practice_feedback = {
   type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        // get the last response
        let last_trial = jsPsych.data.get().last(1).values()[0]
        let output  

        if(last_trial.response === null){
          // this will check for non-response first
          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`
          
        } else if(last_trial.correct){
          // else if correct
          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`
        } else {
          // else incorrect
          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`
        }

        return output;
    },
    choices: &quot;NO_KEYS&quot;,
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;feedback&quot;
    }
}

// practice timeline
let practice_flanker = {
    timeline: [
        practice_fixation,
        practice_stimulus,
        practice_feedback
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker practice&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    },
   loop_function: function(data) {
      // add one to attempts
      attempts++      

      let trials = data.filter({trial_part: &quot;stimulus&quot;})

      let correct_trials = trials.filter({correct: true})

      let accuracy = correct_trials.count()/trials.count();
      console.log(`Practice accuracy: ${accuracy}`);
  
      // add this before the accuracy check
      // if attempts is greater than the max quit loop
      if(attempts > max_attempts){
          return false
      }

      // If accuracy is below 75%, repeat the block
      if (accuracy < 0.75) {
           return true;  // Loop again
        } else {
           return false; // Move on
      }
    }
};

const end_practice = {
   type: jsPsychHtmlKeyboardResponse,
   stimulus: `<p>You have completed the practice trials.</p>
              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,
   choices: &quot; &quot;,
   post_trial_gap: 250,
   data: {
      phase: &quot;instructions&quot;
   }
}

// ============================================
// Flanker Experimental Block
// ============================================

// fixation
let exp_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let exp_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    },
    on_finish: function(data){
        // store accuracy
        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)
    }
}

// exp timeline
let exp_flanker = {
    timeline: [
        exp_fixation,
        exp_stimulus
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    }
};

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);
    });
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  instructions,
  // practice_flanker,
  end_practice,
  exp_flanker,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-5&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-5&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;‚úì Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="add-conditional-feedback" class="level3" data-number="20.2.7">
<h3 data-number="20.2.7" class="anchored" data-anchor-id="add-conditional-feedback"><span class="header-section-number">20.2.7</span> Add Conditional Feedback</h3>
<p>For the experimental block of trials, we still want some kind of feedback, but it‚Äôs pretty disruptive to have the feedback on every trial.</p>
<p>So, we‚Äôll add feedback that is conditional on making an error. That is, they only see feedback if they were too slow or responded incorrectly.</p>
<div class="cell">
<style type="text/css">
/* CB21 */


/* CB22 */
[id^="cb22-"]:nth-child(n+207):nth-child(-n+245),
[id^="cb22-"]:nth-child(n+251):nth-child(-n+252) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB23 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb21-1"><a href="#cb21-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 8: Cognitive Control<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>    </span>
<span id="cb21-9"><a href="#cb21-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb21-11"><a href="#cb21-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb21-12"><a href="#cb21-12"></a></span>
<span id="cb21-13"><a href="#cb21-13"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb21-14"><a href="#cb21-14"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb21-17"><a href="#cb21-17"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb21-18"><a href="#cb21-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb21-19"><a href="#cb21-19"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb21-20"><a href="#cb21-20"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb21-21"><a href="#cb21-21"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1"></a> </span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="co">// ============================================</span></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="co">// ============================================</span></span>
<span id="cb22-5"><a href="#cb22-5"></a></span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb22-7"><a href="#cb22-7"></a></span>
<span id="cb22-8"><a href="#cb22-8"></a><span class="co">// ============================================</span></span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="co">// Instructions</span></span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="co">// ============================================</span></span>
<span id="cb22-11"><a href="#cb22-11"></a></span>
<span id="cb22-12"><a href="#cb22-12"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb22-13"><a href="#cb22-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb22-14"><a href="#cb22-14"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb22-15"><a href="#cb22-15"></a>    <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb22-16"><a href="#cb22-16"></a><span class="vs">     &lt;p&gt;Use the buttons below to navigate through the instructions&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb22-17"><a href="#cb22-17"></a>    <span class="vs">`&lt;p&gt;When you are ready to begin the first trial, press "Next"&lt;/p&gt;`</span> </span>
<span id="cb22-18"><a href="#cb22-18"></a>  ]<span class="op">,</span></span>
<span id="cb22-19"><a href="#cb22-19"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb22-20"><a href="#cb22-20"></a>}</span>
<span id="cb22-21"><a href="#cb22-21"></a></span>
<span id="cb22-22"><a href="#cb22-22"></a><span class="co">// ============================================</span></span>
<span id="cb22-23"><a href="#cb22-23"></a><span class="co">// Flanker Practice Block</span></span>
<span id="cb22-24"><a href="#cb22-24"></a><span class="co">// ============================================</span></span>
<span id="cb22-25"><a href="#cb22-25"></a></span>
<span id="cb22-26"><a href="#cb22-26"></a><span class="co">// add a variable to track practice attempts</span></span>
<span id="cb22-27"><a href="#cb22-27"></a><span class="kw">let</span> attempts <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb22-28"><a href="#cb22-28"></a><span class="co">// this variable sets the maximum loops</span></span>
<span id="cb22-29"><a href="#cb22-29"></a><span class="kw">let</span> max_attempts <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb22-30"><a href="#cb22-30"></a></span>
<span id="cb22-31"><a href="#cb22-31"></a><span class="co">// fixation</span></span>
<span id="cb22-32"><a href="#cb22-32"></a><span class="kw">let</span> practice_fixation <span class="op">=</span> {</span>
<span id="cb22-33"><a href="#cb22-33"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-34"><a href="#cb22-34"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb22-35"><a href="#cb22-35"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb22-36"><a href="#cb22-36"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb22-37"><a href="#cb22-37"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb22-38"><a href="#cb22-38"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-39"><a href="#cb22-39"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb22-40"><a href="#cb22-40"></a>    }</span>
<span id="cb22-41"><a href="#cb22-41"></a>}</span>
<span id="cb22-42"><a href="#cb22-42"></a></span>
<span id="cb22-43"><a href="#cb22-43"></a><span class="co">// stimulus</span></span>
<span id="cb22-44"><a href="#cb22-44"></a><span class="kw">let</span> practice_stimulus <span class="op">=</span> {</span>
<span id="cb22-45"><a href="#cb22-45"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-46"><a href="#cb22-46"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb22-47"><a href="#cb22-47"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb22-48"><a href="#cb22-48"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb22-49"><a href="#cb22-49"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb22-50"><a href="#cb22-50"></a></span>
<span id="cb22-51"><a href="#cb22-51"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb22-52"><a href="#cb22-52"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb22-53"><a href="#cb22-53"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb22-54"><a href="#cb22-54"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb22-55"><a href="#cb22-55"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb22-56"><a href="#cb22-56"></a></span>
<span id="cb22-57"><a href="#cb22-57"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb22-58"><a href="#cb22-58"></a>    }<span class="op">,</span></span>
<span id="cb22-59"><a href="#cb22-59"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb22-60"><a href="#cb22-60"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb22-61"><a href="#cb22-61"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb22-62"><a href="#cb22-62"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-63"><a href="#cb22-63"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb22-64"><a href="#cb22-64"></a>    }<span class="op">,</span></span>
<span id="cb22-65"><a href="#cb22-65"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data){</span>
<span id="cb22-66"><a href="#cb22-66"></a>        <span class="co">// store accuracy</span></span>
<span id="cb22-67"><a href="#cb22-67"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)</span>
<span id="cb22-68"><a href="#cb22-68"></a>    }</span>
<span id="cb22-69"><a href="#cb22-69"></a>}</span>
<span id="cb22-70"><a href="#cb22-70"></a></span>
<span id="cb22-71"><a href="#cb22-71"></a><span class="co">// feedback</span></span>
<span id="cb22-72"><a href="#cb22-72"></a><span class="kw">let</span> practice_feedback <span class="op">=</span> {</span>
<span id="cb22-73"><a href="#cb22-73"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-74"><a href="#cb22-74"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb22-75"><a href="#cb22-75"></a>        <span class="co">// get the last response</span></span>
<span id="cb22-76"><a href="#cb22-76"></a>        <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb22-77"><a href="#cb22-77"></a>        <span class="kw">let</span> output  </span>
<span id="cb22-78"><a href="#cb22-78"></a></span>
<span id="cb22-79"><a href="#cb22-79"></a>        <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">response</span> <span class="op">===</span> <span class="kw">null</span>){</span>
<span id="cb22-80"><a href="#cb22-80"></a>          <span class="co">// this will check for non-response first</span></span>
<span id="cb22-81"><a href="#cb22-81"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Too Slow! Respond Faster!&lt;/p&gt;`</span></span>
<span id="cb22-82"><a href="#cb22-82"></a>          </span>
<span id="cb22-83"><a href="#cb22-83"></a>        } <span class="cf">else</span> <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">correct</span>){</span>
<span id="cb22-84"><a href="#cb22-84"></a>          <span class="co">// else if correct</span></span>
<span id="cb22-85"><a href="#cb22-85"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Correct!&lt;/p&gt;`</span></span>
<span id="cb22-86"><a href="#cb22-86"></a>        } <span class="cf">else</span> {</span>
<span id="cb22-87"><a href="#cb22-87"></a>          <span class="co">// else incorrect</span></span>
<span id="cb22-88"><a href="#cb22-88"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Incorrect!&lt;/p&gt;`</span></span>
<span id="cb22-89"><a href="#cb22-89"></a>        }</span>
<span id="cb22-90"><a href="#cb22-90"></a></span>
<span id="cb22-91"><a href="#cb22-91"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb22-92"><a href="#cb22-92"></a>    }<span class="op">,</span></span>
<span id="cb22-93"><a href="#cb22-93"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb22-94"><a href="#cb22-94"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb22-95"><a href="#cb22-95"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb22-96"><a href="#cb22-96"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-97"><a href="#cb22-97"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"feedback"</span></span>
<span id="cb22-98"><a href="#cb22-98"></a>    }</span>
<span id="cb22-99"><a href="#cb22-99"></a>}</span>
<span id="cb22-100"><a href="#cb22-100"></a></span>
<span id="cb22-101"><a href="#cb22-101"></a><span class="co">// practice timeline</span></span>
<span id="cb22-102"><a href="#cb22-102"></a><span class="kw">let</span> practice_flanker <span class="op">=</span> {</span>
<span id="cb22-103"><a href="#cb22-103"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb22-104"><a href="#cb22-104"></a>        practice_fixation<span class="op">,</span></span>
<span id="cb22-105"><a href="#cb22-105"></a>        practice_stimulus<span class="op">,</span></span>
<span id="cb22-106"><a href="#cb22-106"></a>        practice_feedback</span>
<span id="cb22-107"><a href="#cb22-107"></a>    ]<span class="op">,</span></span>
<span id="cb22-108"><a href="#cb22-108"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb22-109"><a href="#cb22-109"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb22-110"><a href="#cb22-110"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb22-111"><a href="#cb22-111"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb22-112"><a href="#cb22-112"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb22-113"><a href="#cb22-113"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb22-114"><a href="#cb22-114"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb22-115"><a href="#cb22-115"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb22-116"><a href="#cb22-116"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb22-117"><a href="#cb22-117"></a>    ]<span class="op">,</span></span>
<span id="cb22-118"><a href="#cb22-118"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb22-119"><a href="#cb22-119"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-120"><a href="#cb22-120"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker practice"</span><span class="op">,</span></span>
<span id="cb22-121"><a href="#cb22-121"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb22-122"><a href="#cb22-122"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb22-123"><a href="#cb22-123"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb22-124"><a href="#cb22-124"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb22-125"><a href="#cb22-125"></a>    }<span class="op">,</span></span>
<span id="cb22-126"><a href="#cb22-126"></a>   <span class="dt">loop_function</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb22-127"><a href="#cb22-127"></a>      <span class="co">// add one to attempts</span></span>
<span id="cb22-128"><a href="#cb22-128"></a>      attempts<span class="op">++</span>      </span>
<span id="cb22-129"><a href="#cb22-129"></a></span>
<span id="cb22-130"><a href="#cb22-130"></a>      <span class="kw">let</span> trials <span class="op">=</span> data<span class="op">.</span><span class="fu">filter</span>({<span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span>})</span>
<span id="cb22-131"><a href="#cb22-131"></a></span>
<span id="cb22-132"><a href="#cb22-132"></a>      <span class="kw">let</span> correct_trials <span class="op">=</span> trials<span class="op">.</span><span class="fu">filter</span>({<span class="dt">correct</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb22-133"><a href="#cb22-133"></a></span>
<span id="cb22-134"><a href="#cb22-134"></a>      <span class="kw">let</span> accuracy <span class="op">=</span> correct_trials<span class="op">.</span><span class="fu">count</span>()<span class="op">/</span>trials<span class="op">.</span><span class="fu">count</span>()<span class="op">;</span></span>
<span id="cb22-135"><a href="#cb22-135"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Practice accuracy: </span><span class="sc">${</span>accuracy<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb22-136"><a href="#cb22-136"></a>  </span>
<span id="cb22-137"><a href="#cb22-137"></a>      <span class="co">// add this before the accuracy check</span></span>
<span id="cb22-138"><a href="#cb22-138"></a>      <span class="co">// if attempts is greater than the max quit loop</span></span>
<span id="cb22-139"><a href="#cb22-139"></a>      <span class="cf">if</span>(attempts <span class="op">&gt;</span> max_attempts){</span>
<span id="cb22-140"><a href="#cb22-140"></a>          <span class="cf">return</span> <span class="kw">false</span></span>
<span id="cb22-141"><a href="#cb22-141"></a>      }</span>
<span id="cb22-142"><a href="#cb22-142"></a></span>
<span id="cb22-143"><a href="#cb22-143"></a>      <span class="co">// If accuracy is below 75%, repeat the block</span></span>
<span id="cb22-144"><a href="#cb22-144"></a>      <span class="cf">if</span> (accuracy <span class="op">&lt;</span> <span class="fl">0.75</span>) {</span>
<span id="cb22-145"><a href="#cb22-145"></a>           <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span>  <span class="co">// Loop again</span></span>
<span id="cb22-146"><a href="#cb22-146"></a>        } <span class="cf">else</span> {</span>
<span id="cb22-147"><a href="#cb22-147"></a>           <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span> <span class="co">// Move on</span></span>
<span id="cb22-148"><a href="#cb22-148"></a>      }</span>
<span id="cb22-149"><a href="#cb22-149"></a>    }</span>
<span id="cb22-150"><a href="#cb22-150"></a>}<span class="op">;</span></span>
<span id="cb22-151"><a href="#cb22-151"></a></span>
<span id="cb22-152"><a href="#cb22-152"></a><span class="kw">const</span> end_practice <span class="op">=</span> {</span>
<span id="cb22-153"><a href="#cb22-153"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-154"><a href="#cb22-154"></a>   <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;You have completed the practice trials.&lt;/p&gt;</span></span>
<span id="cb22-155"><a href="#cb22-155"></a><span class="vs">              &lt;p&gt;When you are ready to begin the experimental trials, press the space bar.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb22-156"><a href="#cb22-156"></a>   <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span><span class="op">,</span></span>
<span id="cb22-157"><a href="#cb22-157"></a>   <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb22-158"><a href="#cb22-158"></a>   <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-159"><a href="#cb22-159"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"instructions"</span></span>
<span id="cb22-160"><a href="#cb22-160"></a>   }</span>
<span id="cb22-161"><a href="#cb22-161"></a>}</span>
<span id="cb22-162"><a href="#cb22-162"></a></span>
<span id="cb22-163"><a href="#cb22-163"></a><span class="co">// ============================================</span></span>
<span id="cb22-164"><a href="#cb22-164"></a><span class="co">// Flanker Experimental Block</span></span>
<span id="cb22-165"><a href="#cb22-165"></a><span class="co">// ============================================</span></span>
<span id="cb22-166"><a href="#cb22-166"></a></span>
<span id="cb22-167"><a href="#cb22-167"></a><span class="co">// fixation</span></span>
<span id="cb22-168"><a href="#cb22-168"></a><span class="kw">let</span> exp_fixation <span class="op">=</span> {</span>
<span id="cb22-169"><a href="#cb22-169"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-170"><a href="#cb22-170"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb22-171"><a href="#cb22-171"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb22-172"><a href="#cb22-172"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb22-173"><a href="#cb22-173"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb22-174"><a href="#cb22-174"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-175"><a href="#cb22-175"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb22-176"><a href="#cb22-176"></a>    }</span>
<span id="cb22-177"><a href="#cb22-177"></a>}</span>
<span id="cb22-178"><a href="#cb22-178"></a></span>
<span id="cb22-179"><a href="#cb22-179"></a><span class="co">// stimulus</span></span>
<span id="cb22-180"><a href="#cb22-180"></a><span class="kw">let</span> exp_stimulus <span class="op">=</span> {</span>
<span id="cb22-181"><a href="#cb22-181"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-182"><a href="#cb22-182"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb22-183"><a href="#cb22-183"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb22-184"><a href="#cb22-184"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb22-185"><a href="#cb22-185"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb22-186"><a href="#cb22-186"></a></span>
<span id="cb22-187"><a href="#cb22-187"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb22-188"><a href="#cb22-188"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb22-189"><a href="#cb22-189"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb22-190"><a href="#cb22-190"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb22-191"><a href="#cb22-191"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb22-192"><a href="#cb22-192"></a></span>
<span id="cb22-193"><a href="#cb22-193"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb22-194"><a href="#cb22-194"></a>    }<span class="op">,</span></span>
<span id="cb22-195"><a href="#cb22-195"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb22-196"><a href="#cb22-196"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb22-197"><a href="#cb22-197"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb22-198"><a href="#cb22-198"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-199"><a href="#cb22-199"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb22-200"><a href="#cb22-200"></a>    }<span class="op">,</span></span>
<span id="cb22-201"><a href="#cb22-201"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data){</span>
<span id="cb22-202"><a href="#cb22-202"></a>        <span class="co">// store accuracy</span></span>
<span id="cb22-203"><a href="#cb22-203"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)</span>
<span id="cb22-204"><a href="#cb22-204"></a>    }</span>
<span id="cb22-205"><a href="#cb22-205"></a>}</span>
<span id="cb22-206"><a href="#cb22-206"></a></span>
<span id="cb22-207"><a href="#cb22-207"></a><span class="co">// conditional feedback</span></span>
<span id="cb22-208"><a href="#cb22-208"></a><span class="kw">let</span> exp_feedback <span class="op">=</span> {</span>
<span id="cb22-209"><a href="#cb22-209"></a>   <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb22-210"><a href="#cb22-210"></a>      {</span>
<span id="cb22-211"><a href="#cb22-211"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-212"><a href="#cb22-212"></a>        <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb22-213"><a href="#cb22-213"></a>          <span class="co">// get the last response</span></span>
<span id="cb22-214"><a href="#cb22-214"></a>          <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb22-215"><a href="#cb22-215"></a>          <span class="kw">let</span> output  </span>
<span id="cb22-216"><a href="#cb22-216"></a>  </span>
<span id="cb22-217"><a href="#cb22-217"></a>          <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">response</span> <span class="op">===</span> <span class="kw">null</span>){</span>
<span id="cb22-218"><a href="#cb22-218"></a>            <span class="co">// this will check for non-response first</span></span>
<span id="cb22-219"><a href="#cb22-219"></a>            output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Too Slow! Respond Faster!&lt;/p&gt;`</span></span>
<span id="cb22-220"><a href="#cb22-220"></a>            </span>
<span id="cb22-221"><a href="#cb22-221"></a>          } <span class="cf">else</span> {</span>
<span id="cb22-222"><a href="#cb22-222"></a>            <span class="co">// else incorrect</span></span>
<span id="cb22-223"><a href="#cb22-223"></a>            output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Incorrect!&lt;/p&gt;`</span></span>
<span id="cb22-224"><a href="#cb22-224"></a>          }</span>
<span id="cb22-225"><a href="#cb22-225"></a>  </span>
<span id="cb22-226"><a href="#cb22-226"></a>          <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb22-227"><a href="#cb22-227"></a>        }<span class="op">,</span></span>
<span id="cb22-228"><a href="#cb22-228"></a>        <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb22-229"><a href="#cb22-229"></a>        <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb22-230"><a href="#cb22-230"></a>        <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb22-231"><a href="#cb22-231"></a>        <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-232"><a href="#cb22-232"></a>          <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"feedback"</span></span>
<span id="cb22-233"><a href="#cb22-233"></a>          }</span>
<span id="cb22-234"><a href="#cb22-234"></a>      }</span>
<span id="cb22-235"><a href="#cb22-235"></a>  ]<span class="op">,</span></span>
<span id="cb22-236"><a href="#cb22-236"></a>  <span class="dt">conditional_function</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb22-237"><a href="#cb22-237"></a>    <span class="co">// get the last response</span></span>
<span id="cb22-238"><a href="#cb22-238"></a>    <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb22-239"><a href="#cb22-239"></a>    <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">correct</span>){</span>
<span id="cb22-240"><a href="#cb22-240"></a>      <span class="cf">return</span> <span class="kw">false</span></span>
<span id="cb22-241"><a href="#cb22-241"></a>    } <span class="cf">else</span> {</span>
<span id="cb22-242"><a href="#cb22-242"></a>      <span class="cf">return</span> <span class="kw">true</span></span>
<span id="cb22-243"><a href="#cb22-243"></a>    }</span>
<span id="cb22-244"><a href="#cb22-244"></a>  }</span>
<span id="cb22-245"><a href="#cb22-245"></a>}</span>
<span id="cb22-246"><a href="#cb22-246"></a></span>
<span id="cb22-247"><a href="#cb22-247"></a><span class="co">// exp timeline</span></span>
<span id="cb22-248"><a href="#cb22-248"></a><span class="kw">let</span> exp_flanker <span class="op">=</span> {</span>
<span id="cb22-249"><a href="#cb22-249"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb22-250"><a href="#cb22-250"></a>        exp_fixation<span class="op">,</span></span>
<span id="cb22-251"><a href="#cb22-251"></a>        exp_stimulus<span class="op">,</span></span>
<span id="cb22-252"><a href="#cb22-252"></a>        exp_feedback</span>
<span id="cb22-253"><a href="#cb22-253"></a>    ]<span class="op">,</span></span>
<span id="cb22-254"><a href="#cb22-254"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb22-255"><a href="#cb22-255"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb22-256"><a href="#cb22-256"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb22-257"><a href="#cb22-257"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb22-258"><a href="#cb22-258"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb22-259"><a href="#cb22-259"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb22-260"><a href="#cb22-260"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb22-261"><a href="#cb22-261"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb22-262"><a href="#cb22-262"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb22-263"><a href="#cb22-263"></a>    ]<span class="op">,</span></span>
<span id="cb22-264"><a href="#cb22-264"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb22-265"><a href="#cb22-265"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb22-266"><a href="#cb22-266"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker"</span><span class="op">,</span></span>
<span id="cb22-267"><a href="#cb22-267"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb22-268"><a href="#cb22-268"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb22-269"><a href="#cb22-269"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb22-270"><a href="#cb22-270"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb22-271"><a href="#cb22-271"></a>    }</span>
<span id="cb22-272"><a href="#cb22-272"></a>}<span class="op">;</span></span>
<span id="cb22-273"><a href="#cb22-273"></a></span>
<span id="cb22-274"><a href="#cb22-274"></a><span class="co">// ============================================</span></span>
<span id="cb22-275"><a href="#cb22-275"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb22-276"><a href="#cb22-276"></a><span class="co">// ============================================</span></span>
<span id="cb22-277"><a href="#cb22-277"></a></span>
<span id="cb22-278"><a href="#cb22-278"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb22-279"><a href="#cb22-279"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb22-280"><a href="#cb22-280"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb22-281"><a href="#cb22-281"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb22-282"><a href="#cb22-282"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb22-283"><a href="#cb22-283"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb22-284"><a href="#cb22-284"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb22-285"><a href="#cb22-285"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb22-286"><a href="#cb22-286"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb22-287"><a href="#cb22-287"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb22-288"><a href="#cb22-288"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb22-289"><a href="#cb22-289"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb22-290"><a href="#cb22-290"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb22-291"><a href="#cb22-291"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb22-292"><a href="#cb22-292"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb22-293"><a href="#cb22-293"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"flanker_data.csv"</span>)<span class="op">;</span></span>
<span id="cb22-294"><a href="#cb22-294"></a>    })<span class="op">;</span></span>
<span id="cb22-295"><a href="#cb22-295"></a>  }</span>
<span id="cb22-296"><a href="#cb22-296"></a>}<span class="op">;</span></span>
<span id="cb22-297"><a href="#cb22-297"></a></span>
<span id="cb22-298"><a href="#cb22-298"></a><span class="co">// ============================================</span></span>
<span id="cb22-299"><a href="#cb22-299"></a><span class="co">// Run jsPsych </span></span>
<span id="cb22-300"><a href="#cb22-300"></a><span class="co">// ============================================</span></span>
<span id="cb22-301"><a href="#cb22-301"></a></span>
<span id="cb22-302"><a href="#cb22-302"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb22-303"><a href="#cb22-303"></a>  instructions<span class="op">,</span></span>
<span id="cb22-304"><a href="#cb22-304"></a>  <span class="co">// practice_flanker,</span></span>
<span id="cb22-305"><a href="#cb22-305"></a>  end_practice<span class="op">,</span></span>
<span id="cb22-306"><a href="#cb22-306"></a>  exp_flanker<span class="op">,</span></span>
<span id="cb22-307"><a href="#cb22-307"></a>  saveData</span>
<span id="cb22-308"><a href="#cb22-308"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb23-1"><a href="#cb23-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<div id="demo-container-6" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-6" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Instructions\n// ============================================\n\nconst instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    `<p>Welcome to the Experiment!</p>\n     <p>Use the buttons below to navigate through the instructions</p>`,\n    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` \n  ],\n  show_clickable_nav: true\n}\n\n// ============================================\n// Flanker Practice Block\n// ============================================\n\n// add a variable to track practice attempts\nlet attempts = 0\n// this variable sets the maximum loops\nlet max_attempts = 3\n\n// fixation\nlet practice_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet practice_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    },\n    on_finish: function(data){\n        // store accuracy\n        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)\n    }\n}\n\n// feedback\nlet practice_feedback = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        // get the last response\n        let last_trial = jsPsych.data.get().last(1).values()[0]\n        let output  \n\n        if(last_trial.response === null){\n          // this will check for non-response first\n          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`\n          \n        } else if(last_trial.correct){\n          // else if correct\n          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`\n        } else {\n          // else incorrect\n          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`\n        }\n\n        return output;\n    },\n    choices: &quot;NO_KEYS&quot;,\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;feedback&quot;\n    }\n}\n\n// practice timeline\nlet practice_flanker = {\n    timeline: [\n        practice_fixation,\n        practice_stimulus,\n        practice_feedback\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker practice&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    },\n   loop_function: function(data) {\n      // add one to attempts\n      attempts++      \n\n      let trials = data.filter({trial_part: &quot;stimulus&quot;})\n\n      let correct_trials = trials.filter({correct: true})\n\n      let accuracy = correct_trials.count()/trials.count();\n      console.log(`Practice accuracy: ${accuracy}`);\n  \n      // add this before the accuracy check\n      // if attempts is greater than the max quit loop\n      if(attempts > max_attempts){\n          return false\n      }\n\n      // If accuracy is below 75%, repeat the block\n      if (accuracy < 0.75) {\n           return true;  // Loop again\n        } else {\n           return false; // Move on\n      }\n    }\n};\n\nconst end_practice = {\n   type: jsPsychHtmlKeyboardResponse,\n   stimulus: `<p>You have completed the practice trials.</p>\n              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,\n   choices: &quot; &quot;,\n   post_trial_gap: 250,\n   data: {\n      phase: &quot;instructions&quot;\n   }\n}\n\n// ============================================\n// Flanker Experimental Block\n// ============================================\n\n// fixation\nlet exp_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet exp_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    },\n    on_finish: function(data){\n        // store accuracy\n        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)\n    }\n}\n\n// conditional feedback\nlet exp_feedback = {\n   timeline: [\n      {\n        type: jsPsychHtmlKeyboardResponse,\n        stimulus: function(){\n          // get the last response\n          let last_trial = jsPsych.data.get().last(1).values()[0]\n          let output  \n  \n          if(last_trial.response === null){\n            // this will check for non-response first\n            output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`\n            \n          } else {\n            // else incorrect\n            output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`\n          }\n  \n          return output;\n        },\n        choices: &quot;NO_KEYS&quot;,\n        trial_duration: 1000,\n        post_trial_gap: 250,\n        data: {\n          trial_part: &quot;feedback&quot;\n          }\n      }\n  ],\n  conditional_function: function() {\n    // get the last response\n    let last_trial = jsPsych.data.get().last(1).values()[0]\n    if(last_trial.correct){\n      return false\n    } else {\n      return true\n    }\n  }\n}\n\n// exp timeline\nlet exp_flanker = {\n    timeline: [\n        exp_fixation,\n        exp_stimulus,\n        exp_feedback\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    }\n};\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);\n    });\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  instructions,\n  // practice_flanker,\n  end_practice,\n  exp_flanker,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-6');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-6" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Instructions
// ============================================

const instructions = {
  type: jsPsychInstructions,
  pages: [
    `<p>Welcome to the Experiment!</p>
     <p>Use the buttons below to navigate through the instructions</p>`,
    `<p>When you are ready to begin the first trial, press &quot;Next&quot;</p>` 
  ],
  show_clickable_nav: true
}

// ============================================
// Flanker Practice Block
// ============================================

// add a variable to track practice attempts
let attempts = 0
// this variable sets the maximum loops
let max_attempts = 3

// fixation
let practice_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let practice_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    },
    on_finish: function(data){
        // store accuracy
        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)
    }
}

// feedback
let practice_feedback = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        // get the last response
        let last_trial = jsPsych.data.get().last(1).values()[0]
        let output  

        if(last_trial.response === null){
          // this will check for non-response first
          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`
          
        } else if(last_trial.correct){
          // else if correct
          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`
        } else {
          // else incorrect
          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`
        }

        return output;
    },
    choices: &quot;NO_KEYS&quot;,
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;feedback&quot;
    }
}

// practice timeline
let practice_flanker = {
    timeline: [
        practice_fixation,
        practice_stimulus,
        practice_feedback
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker practice&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    },
   loop_function: function(data) {
      // add one to attempts
      attempts++      

      let trials = data.filter({trial_part: &quot;stimulus&quot;})

      let correct_trials = trials.filter({correct: true})

      let accuracy = correct_trials.count()/trials.count();
      console.log(`Practice accuracy: ${accuracy}`);
  
      // add this before the accuracy check
      // if attempts is greater than the max quit loop
      if(attempts > max_attempts){
          return false
      }

      // If accuracy is below 75%, repeat the block
      if (accuracy < 0.75) {
           return true;  // Loop again
        } else {
           return false; // Move on
      }
    }
};

const end_practice = {
   type: jsPsychHtmlKeyboardResponse,
   stimulus: `<p>You have completed the practice trials.</p>
              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,
   choices: &quot; &quot;,
   post_trial_gap: 250,
   data: {
      phase: &quot;instructions&quot;
   }
}

// ============================================
// Flanker Experimental Block
// ============================================

// fixation
let exp_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let exp_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    },
    on_finish: function(data){
        // store accuracy
        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)
    }
}

// conditional feedback
let exp_feedback = {
   timeline: [
      {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: function(){
          // get the last response
          let last_trial = jsPsych.data.get().last(1).values()[0]
          let output  
  
          if(last_trial.response === null){
            // this will check for non-response first
            output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`
            
          } else {
            // else incorrect
            output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`
          }
  
          return output;
        },
        choices: &quot;NO_KEYS&quot;,
        trial_duration: 1000,
        post_trial_gap: 250,
        data: {
          trial_part: &quot;feedback&quot;
          }
      }
  ],
  conditional_function: function() {
    // get the last response
    let last_trial = jsPsych.data.get().last(1).values()[0]
    if(last_trial.correct){
      return false
    } else {
      return true
    }
  }
}

// exp timeline
let exp_flanker = {
    timeline: [
        exp_fixation,
        exp_stimulus,
        exp_feedback
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    }
};

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);
    });
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  instructions,
  // practice_flanker,
  end_practice,
  exp_flanker,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-6&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-6&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;‚úì Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="add-instructions" class="level3" data-number="20.2.8">
<h3 data-number="20.2.8" class="anchored" data-anchor-id="add-instructions"><span class="header-section-number">20.2.8</span> Add Instructions</h3>
<p>Finally, we can go ahead and fill out our instructions.</p>
<p>I‚Äôll also remove the comments on the <code>practice_flanker</code> so that the whole experiment is displayed.</p>
<div class="cell">
<style type="text/css">
/* CB24 */


/* CB25 */
[id^="cb25-"]:nth-child(n+12):nth-child(-n+37),
[id^="cb25-"]:nth-child(n+321):nth-child(-n+321) {
  background-color: #e1f5fe;
  box-shadow: inset 5px 0 0 0 #0288d1; 
  padding-right: 1rem;
}

/* CB26 */


</style>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">index.html</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">exp.js</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false">style.css</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-4" role="tab" aria-controls="tabset-8-4" aria-selected="false">Result</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb24-1"><a href="#cb24-1"></a> <span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lab 8: Cognitive Control<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>    <span class="co">&lt;!-- jsPsych --&gt;</span></span>
<span id="cb24-6"><a href="#cb24-6"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/jspsych.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb24-7"><a href="#cb24-7"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"jspsych/jspsych.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb24-8"><a href="#cb24-8"></a>    </span>
<span id="cb24-9"><a href="#cb24-9"></a>    <span class="co">&lt;!-- jPsych plugins --&gt;</span></span>
<span id="cb24-10"><a href="#cb24-10"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-instructions.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb24-11"><a href="#cb24-11"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"jspsych/plugin-html-keyboard-response.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb24-12"><a href="#cb24-12"></a></span>
<span id="cb24-13"><a href="#cb24-13"></a>    <span class="co">&lt;!-- custom CSS --&gt;</span></span>
<span id="cb24-14"><a href="#cb24-14"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> href</span><span class="op">=</span><span class="st">"style.css"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb24-15"><a href="#cb24-15"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb24-16"><a href="#cb24-16"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb24-17"><a href="#cb24-17"></a>  <span class="co">&lt;!-- custom JS --&gt;</span></span>
<span id="cb24-18"><a href="#cb24-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"exp.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb24-19"><a href="#cb24-19"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb24-20"><a href="#cb24-20"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb24-21"><a href="#cb24-21"></a> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1"></a> </span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="co">// ============================================</span></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="co">// Initiate jsPsych</span></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="co">// ============================================</span></span>
<span id="cb25-5"><a href="#cb25-5"></a></span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="kw">const</span> jsPsych <span class="op">=</span> <span class="fu">initJsPsych</span>()<span class="op">;</span> </span>
<span id="cb25-7"><a href="#cb25-7"></a></span>
<span id="cb25-8"><a href="#cb25-8"></a><span class="co">// ============================================</span></span>
<span id="cb25-9"><a href="#cb25-9"></a><span class="co">// Instructions</span></span>
<span id="cb25-10"><a href="#cb25-10"></a><span class="co">// ============================================</span></span>
<span id="cb25-11"><a href="#cb25-11"></a></span>
<span id="cb25-12"><a href="#cb25-12"></a><span class="kw">const</span> instructions <span class="op">=</span> {</span>
<span id="cb25-13"><a href="#cb25-13"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychInstructions<span class="op">,</span></span>
<span id="cb25-14"><a href="#cb25-14"></a>  <span class="dt">pages</span><span class="op">:</span> [</span>
<span id="cb25-15"><a href="#cb25-15"></a>    <span class="vs">`&lt;p&gt;Welcome to the Experiment!&lt;/p&gt;</span></span>
<span id="cb25-16"><a href="#cb25-16"></a><span class="vs">     &lt;p&gt;Use the buttons below to navigate through the instructions.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb25-17"><a href="#cb25-17"></a></span>
<span id="cb25-18"><a href="#cb25-18"></a>    <span class="vs">`&lt;p&gt;In this experiment, you will complete what's known as a &lt;strong&gt;flanker task&lt;/strong&gt;.&lt;/p&gt;</span></span>
<span id="cb25-19"><a href="#cb25-19"></a><span class="vs">     &lt;p&gt;On each trial, you will see a row of arrows displayed on the screen.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb25-20"><a href="#cb25-20"></a></span>
<span id="cb25-21"><a href="#cb25-21"></a>    <span class="vs">`&lt;p&gt;Your task is to respond to the &lt;strong&gt;direction of the center arrow&lt;/strong&gt; only.&lt;/p&gt;</span></span>
<span id="cb25-22"><a href="#cb25-22"></a><span class="vs">     &lt;p&gt;Ignore the arrows on either side (the "flankers").&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb25-23"><a href="#cb25-23"></a></span>
<span id="cb25-24"><a href="#cb25-24"></a>    <span class="vs">`&lt;p&gt;&lt;strong&gt;Response Keys:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb25-25"><a href="#cb25-25"></a><span class="vs">     &lt;p&gt;Press &lt;strong&gt;A&lt;/strong&gt; if the center arrow points LEFT&lt;/p&gt;</span></span>
<span id="cb25-26"><a href="#cb25-26"></a><span class="vs">     &lt;p&gt;Press &lt;strong&gt;L&lt;/strong&gt; if the center arrow points RIGHT&lt;/p&gt;</span></span>
<span id="cb25-27"><a href="#cb25-27"></a><span class="vs">     &lt;p&gt;You will only have 1 second to respond to each trial. &lt;/p&gt;</span></span>
<span id="cb25-28"><a href="#cb25-28"></a><span class="vs">     &lt;p&gt;Respond as quickly and accurately as possible.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb25-29"><a href="#cb25-29"></a></span>
<span id="cb25-30"><a href="#cb25-30"></a>    <span class="vs">`&lt;p&gt;The experiment consists of two parts:&lt;/p&gt;</span></span>
<span id="cb25-31"><a href="#cb25-31"></a><span class="vs">     &lt;p&gt;1. A &lt;strong&gt;practice block&lt;/strong&gt; to familiarize yourself with the task&lt;/p&gt;</span></span>
<span id="cb25-32"><a href="#cb25-32"></a><span class="vs">     &lt;p&gt;2. An &lt;strong&gt;experimental block&lt;/strong&gt; with the main trials&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb25-33"><a href="#cb25-33"></a></span>
<span id="cb25-34"><a href="#cb25-34"></a>    <span class="vs">`&lt;p&gt;When you are ready to begin the practice trials, press "Next".&lt;/p&gt;`</span></span>
<span id="cb25-35"><a href="#cb25-35"></a>  ]<span class="op">,</span></span>
<span id="cb25-36"><a href="#cb25-36"></a>  <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb25-37"><a href="#cb25-37"></a>}</span>
<span id="cb25-38"><a href="#cb25-38"></a></span>
<span id="cb25-39"><a href="#cb25-39"></a><span class="co">// ============================================</span></span>
<span id="cb25-40"><a href="#cb25-40"></a><span class="co">// Flanker Practice Block</span></span>
<span id="cb25-41"><a href="#cb25-41"></a><span class="co">// ============================================</span></span>
<span id="cb25-42"><a href="#cb25-42"></a></span>
<span id="cb25-43"><a href="#cb25-43"></a><span class="co">// add a variable to track practice attempts</span></span>
<span id="cb25-44"><a href="#cb25-44"></a><span class="kw">let</span> attempts <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb25-45"><a href="#cb25-45"></a><span class="co">// this variable sets the maximum loops</span></span>
<span id="cb25-46"><a href="#cb25-46"></a><span class="kw">let</span> max_attempts <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb25-47"><a href="#cb25-47"></a></span>
<span id="cb25-48"><a href="#cb25-48"></a><span class="co">// fixation</span></span>
<span id="cb25-49"><a href="#cb25-49"></a><span class="kw">let</span> practice_fixation <span class="op">=</span> {</span>
<span id="cb25-50"><a href="#cb25-50"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb25-51"><a href="#cb25-51"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb25-52"><a href="#cb25-52"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb25-53"><a href="#cb25-53"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb25-54"><a href="#cb25-54"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb25-55"><a href="#cb25-55"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-56"><a href="#cb25-56"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb25-57"><a href="#cb25-57"></a>    }</span>
<span id="cb25-58"><a href="#cb25-58"></a>}</span>
<span id="cb25-59"><a href="#cb25-59"></a></span>
<span id="cb25-60"><a href="#cb25-60"></a><span class="co">// stimulus</span></span>
<span id="cb25-61"><a href="#cb25-61"></a><span class="kw">let</span> practice_stimulus <span class="op">=</span> {</span>
<span id="cb25-62"><a href="#cb25-62"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb25-63"><a href="#cb25-63"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb25-64"><a href="#cb25-64"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb25-65"><a href="#cb25-65"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb25-66"><a href="#cb25-66"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb25-67"><a href="#cb25-67"></a></span>
<span id="cb25-68"><a href="#cb25-68"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb25-69"><a href="#cb25-69"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb25-70"><a href="#cb25-70"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb25-71"><a href="#cb25-71"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb25-72"><a href="#cb25-72"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb25-73"><a href="#cb25-73"></a></span>
<span id="cb25-74"><a href="#cb25-74"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb25-75"><a href="#cb25-75"></a>    }<span class="op">,</span></span>
<span id="cb25-76"><a href="#cb25-76"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb25-77"><a href="#cb25-77"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb25-78"><a href="#cb25-78"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb25-79"><a href="#cb25-79"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-80"><a href="#cb25-80"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb25-81"><a href="#cb25-81"></a>    }<span class="op">,</span></span>
<span id="cb25-82"><a href="#cb25-82"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data){</span>
<span id="cb25-83"><a href="#cb25-83"></a>        <span class="co">// store accuracy</span></span>
<span id="cb25-84"><a href="#cb25-84"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)</span>
<span id="cb25-85"><a href="#cb25-85"></a>    }</span>
<span id="cb25-86"><a href="#cb25-86"></a>}</span>
<span id="cb25-87"><a href="#cb25-87"></a></span>
<span id="cb25-88"><a href="#cb25-88"></a><span class="co">// feedback</span></span>
<span id="cb25-89"><a href="#cb25-89"></a><span class="kw">let</span> practice_feedback <span class="op">=</span> {</span>
<span id="cb25-90"><a href="#cb25-90"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb25-91"><a href="#cb25-91"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb25-92"><a href="#cb25-92"></a>        <span class="co">// get the last response</span></span>
<span id="cb25-93"><a href="#cb25-93"></a>        <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb25-94"><a href="#cb25-94"></a>        <span class="kw">let</span> output  </span>
<span id="cb25-95"><a href="#cb25-95"></a></span>
<span id="cb25-96"><a href="#cb25-96"></a>        <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">response</span> <span class="op">===</span> <span class="kw">null</span>){</span>
<span id="cb25-97"><a href="#cb25-97"></a>          <span class="co">// this will check for non-response first</span></span>
<span id="cb25-98"><a href="#cb25-98"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Too Slow! Respond Faster!&lt;/p&gt;`</span></span>
<span id="cb25-99"><a href="#cb25-99"></a>          </span>
<span id="cb25-100"><a href="#cb25-100"></a>        } <span class="cf">else</span> <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">correct</span>){</span>
<span id="cb25-101"><a href="#cb25-101"></a>          <span class="co">// else if correct</span></span>
<span id="cb25-102"><a href="#cb25-102"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Correct!&lt;/p&gt;`</span></span>
<span id="cb25-103"><a href="#cb25-103"></a>        } <span class="cf">else</span> {</span>
<span id="cb25-104"><a href="#cb25-104"></a>          <span class="co">// else incorrect</span></span>
<span id="cb25-105"><a href="#cb25-105"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Incorrect!&lt;/p&gt;`</span></span>
<span id="cb25-106"><a href="#cb25-106"></a>        }</span>
<span id="cb25-107"><a href="#cb25-107"></a></span>
<span id="cb25-108"><a href="#cb25-108"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb25-109"><a href="#cb25-109"></a>    }<span class="op">,</span></span>
<span id="cb25-110"><a href="#cb25-110"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb25-111"><a href="#cb25-111"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb25-112"><a href="#cb25-112"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb25-113"><a href="#cb25-113"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-114"><a href="#cb25-114"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"feedback"</span></span>
<span id="cb25-115"><a href="#cb25-115"></a>    }</span>
<span id="cb25-116"><a href="#cb25-116"></a>}</span>
<span id="cb25-117"><a href="#cb25-117"></a></span>
<span id="cb25-118"><a href="#cb25-118"></a><span class="co">// practice timeline</span></span>
<span id="cb25-119"><a href="#cb25-119"></a><span class="kw">let</span> practice_flanker <span class="op">=</span> {</span>
<span id="cb25-120"><a href="#cb25-120"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb25-121"><a href="#cb25-121"></a>        practice_fixation<span class="op">,</span></span>
<span id="cb25-122"><a href="#cb25-122"></a>        practice_stimulus<span class="op">,</span></span>
<span id="cb25-123"><a href="#cb25-123"></a>        practice_feedback</span>
<span id="cb25-124"><a href="#cb25-124"></a>    ]<span class="op">,</span></span>
<span id="cb25-125"><a href="#cb25-125"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb25-126"><a href="#cb25-126"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb25-127"><a href="#cb25-127"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb25-128"><a href="#cb25-128"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb25-129"><a href="#cb25-129"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb25-130"><a href="#cb25-130"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb25-131"><a href="#cb25-131"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb25-132"><a href="#cb25-132"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb25-133"><a href="#cb25-133"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb25-134"><a href="#cb25-134"></a>    ]<span class="op">,</span></span>
<span id="cb25-135"><a href="#cb25-135"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb25-136"><a href="#cb25-136"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-137"><a href="#cb25-137"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker practice"</span><span class="op">,</span></span>
<span id="cb25-138"><a href="#cb25-138"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb25-139"><a href="#cb25-139"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb25-140"><a href="#cb25-140"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb25-141"><a href="#cb25-141"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb25-142"><a href="#cb25-142"></a>    }<span class="op">,</span></span>
<span id="cb25-143"><a href="#cb25-143"></a>   <span class="dt">loop_function</span><span class="op">:</span> <span class="kw">function</span>(data) {</span>
<span id="cb25-144"><a href="#cb25-144"></a>      <span class="co">// add one to attempts</span></span>
<span id="cb25-145"><a href="#cb25-145"></a>      attempts<span class="op">++</span>      </span>
<span id="cb25-146"><a href="#cb25-146"></a></span>
<span id="cb25-147"><a href="#cb25-147"></a>      <span class="kw">let</span> trials <span class="op">=</span> data<span class="op">.</span><span class="fu">filter</span>({<span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span>})</span>
<span id="cb25-148"><a href="#cb25-148"></a></span>
<span id="cb25-149"><a href="#cb25-149"></a>      <span class="kw">let</span> correct_trials <span class="op">=</span> trials<span class="op">.</span><span class="fu">filter</span>({<span class="dt">correct</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb25-150"><a href="#cb25-150"></a></span>
<span id="cb25-151"><a href="#cb25-151"></a>      <span class="kw">let</span> accuracy <span class="op">=</span> correct_trials<span class="op">.</span><span class="fu">count</span>()<span class="op">/</span>trials<span class="op">.</span><span class="fu">count</span>()<span class="op">;</span></span>
<span id="cb25-152"><a href="#cb25-152"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Practice accuracy: </span><span class="sc">${</span>accuracy<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb25-153"><a href="#cb25-153"></a>  </span>
<span id="cb25-154"><a href="#cb25-154"></a>      <span class="co">// add this before the accuracy check</span></span>
<span id="cb25-155"><a href="#cb25-155"></a>      <span class="co">// if attempts is greater than the max quit loop</span></span>
<span id="cb25-156"><a href="#cb25-156"></a>      <span class="cf">if</span>(attempts <span class="op">&gt;</span> max_attempts){</span>
<span id="cb25-157"><a href="#cb25-157"></a>          <span class="cf">return</span> <span class="kw">false</span></span>
<span id="cb25-158"><a href="#cb25-158"></a>      }</span>
<span id="cb25-159"><a href="#cb25-159"></a></span>
<span id="cb25-160"><a href="#cb25-160"></a>      <span class="co">// If accuracy is below 75%, repeat the block</span></span>
<span id="cb25-161"><a href="#cb25-161"></a>      <span class="cf">if</span> (accuracy <span class="op">&lt;</span> <span class="fl">0.75</span>) {</span>
<span id="cb25-162"><a href="#cb25-162"></a>           <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span>  <span class="co">// Loop again</span></span>
<span id="cb25-163"><a href="#cb25-163"></a>        } <span class="cf">else</span> {</span>
<span id="cb25-164"><a href="#cb25-164"></a>           <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span> <span class="co">// Move on</span></span>
<span id="cb25-165"><a href="#cb25-165"></a>      }</span>
<span id="cb25-166"><a href="#cb25-166"></a>    }</span>
<span id="cb25-167"><a href="#cb25-167"></a>}<span class="op">;</span></span>
<span id="cb25-168"><a href="#cb25-168"></a></span>
<span id="cb25-169"><a href="#cb25-169"></a><span class="kw">const</span> end_practice <span class="op">=</span> {</span>
<span id="cb25-170"><a href="#cb25-170"></a>   <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb25-171"><a href="#cb25-171"></a>   <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p&gt;You have completed the practice trials.&lt;/p&gt;</span></span>
<span id="cb25-172"><a href="#cb25-172"></a><span class="vs">              &lt;p&gt;When you are ready to begin the experimental trials, press the space bar.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb25-173"><a href="#cb25-173"></a>   <span class="dt">choices</span><span class="op">:</span> <span class="st">" "</span><span class="op">,</span></span>
<span id="cb25-174"><a href="#cb25-174"></a>   <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb25-175"><a href="#cb25-175"></a>   <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-176"><a href="#cb25-176"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"instructions"</span></span>
<span id="cb25-177"><a href="#cb25-177"></a>   }</span>
<span id="cb25-178"><a href="#cb25-178"></a>}</span>
<span id="cb25-179"><a href="#cb25-179"></a></span>
<span id="cb25-180"><a href="#cb25-180"></a><span class="co">// ============================================</span></span>
<span id="cb25-181"><a href="#cb25-181"></a><span class="co">// Flanker Experimental Block</span></span>
<span id="cb25-182"><a href="#cb25-182"></a><span class="co">// ============================================</span></span>
<span id="cb25-183"><a href="#cb25-183"></a></span>
<span id="cb25-184"><a href="#cb25-184"></a><span class="co">// fixation</span></span>
<span id="cb25-185"><a href="#cb25-185"></a><span class="kw">let</span> exp_fixation <span class="op">=</span> {</span>
<span id="cb25-186"><a href="#cb25-186"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb25-187"><a href="#cb25-187"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`&lt;p style="font-size:48px"&gt;+&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb25-188"><a href="#cb25-188"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb25-189"><a href="#cb25-189"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb25-190"><a href="#cb25-190"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb25-191"><a href="#cb25-191"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-192"><a href="#cb25-192"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"fixation"</span></span>
<span id="cb25-193"><a href="#cb25-193"></a>    }</span>
<span id="cb25-194"><a href="#cb25-194"></a>}</span>
<span id="cb25-195"><a href="#cb25-195"></a></span>
<span id="cb25-196"><a href="#cb25-196"></a><span class="co">// stimulus</span></span>
<span id="cb25-197"><a href="#cb25-197"></a><span class="kw">let</span> exp_stimulus <span class="op">=</span> {</span>
<span id="cb25-198"><a href="#cb25-198"></a>    <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb25-199"><a href="#cb25-199"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb25-200"><a href="#cb25-200"></a>        <span class="kw">let</span> target <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"target"</span>)<span class="op">;</span></span>
<span id="cb25-201"><a href="#cb25-201"></a>        <span class="kw">let</span> distractor <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">;</span></span>
<span id="cb25-202"><a href="#cb25-202"></a>        <span class="kw">let</span> distance <span class="op">=</span> jsPsych<span class="op">.</span><span class="fu">evaluateTimelineVariable</span>(<span class="st">"distance"</span>)<span class="op">;</span></span>
<span id="cb25-203"><a href="#cb25-203"></a></span>
<span id="cb25-204"><a href="#cb25-204"></a>        <span class="co">// Create HTML with custom spacing</span></span>
<span id="cb25-205"><a href="#cb25-205"></a>        <span class="kw">let</span> output <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb25-206"><a href="#cb25-206"></a><span class="vs">            &lt;div style="font-size: 100px; font-family: monospace;"&gt;</span></span>
<span id="cb25-207"><a href="#cb25-207"></a><span class="vs">              </span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span><span class="vs">&lt;span style="margin: 0 </span><span class="sc">${</span>distance<span class="sc">}</span><span class="vs">px;"&gt;</span><span class="sc">${</span>target<span class="sc">}</span><span class="vs">&lt;/span&gt;</span><span class="sc">${</span>distractor<span class="sc">}${</span>distractor<span class="sc">}</span></span>
<span id="cb25-208"><a href="#cb25-208"></a><span class="vs">            &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb25-209"><a href="#cb25-209"></a></span>
<span id="cb25-210"><a href="#cb25-210"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb25-211"><a href="#cb25-211"></a>    }<span class="op">,</span></span>
<span id="cb25-212"><a href="#cb25-212"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"a"</span><span class="op">,</span> <span class="st">"l"</span>]<span class="op">,</span></span>
<span id="cb25-213"><a href="#cb25-213"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb25-214"><a href="#cb25-214"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb25-215"><a href="#cb25-215"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-216"><a href="#cb25-216"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"stimulus"</span></span>
<span id="cb25-217"><a href="#cb25-217"></a>    }<span class="op">,</span></span>
<span id="cb25-218"><a href="#cb25-218"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw">function</span>(data){</span>
<span id="cb25-219"><a href="#cb25-219"></a>        <span class="co">// store accuracy</span></span>
<span id="cb25-220"><a href="#cb25-220"></a>        data<span class="op">.</span><span class="at">correct</span> <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">pluginAPI</span><span class="op">.</span><span class="fu">compareKeys</span>(data<span class="op">.</span><span class="at">response</span><span class="op">,</span> data<span class="op">.</span><span class="at">correct_response</span>)</span>
<span id="cb25-221"><a href="#cb25-221"></a>    }</span>
<span id="cb25-222"><a href="#cb25-222"></a>}</span>
<span id="cb25-223"><a href="#cb25-223"></a></span>
<span id="cb25-224"><a href="#cb25-224"></a><span class="co">// conditional feedback</span></span>
<span id="cb25-225"><a href="#cb25-225"></a><span class="kw">let</span> exp_feedback <span class="op">=</span> {</span>
<span id="cb25-226"><a href="#cb25-226"></a>   <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb25-227"><a href="#cb25-227"></a>      {</span>
<span id="cb25-228"><a href="#cb25-228"></a>        <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb25-229"><a href="#cb25-229"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb25-230"><a href="#cb25-230"></a>        <span class="co">// get the last response</span></span>
<span id="cb25-231"><a href="#cb25-231"></a>        <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb25-232"><a href="#cb25-232"></a>        <span class="kw">let</span> output  </span>
<span id="cb25-233"><a href="#cb25-233"></a></span>
<span id="cb25-234"><a href="#cb25-234"></a>        <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">response</span> <span class="op">===</span> <span class="kw">null</span>){</span>
<span id="cb25-235"><a href="#cb25-235"></a>          <span class="co">// this will check for non-response first</span></span>
<span id="cb25-236"><a href="#cb25-236"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Too Slow! Respond Faster!&lt;/p&gt;`</span></span>
<span id="cb25-237"><a href="#cb25-237"></a>          </span>
<span id="cb25-238"><a href="#cb25-238"></a>        } <span class="cf">else</span> {</span>
<span id="cb25-239"><a href="#cb25-239"></a>          <span class="co">// else incorrect</span></span>
<span id="cb25-240"><a href="#cb25-240"></a>          output <span class="op">=</span> <span class="vs">`&lt;p style="font-size:48px"&gt;Incorrect!&lt;/p&gt;`</span></span>
<span id="cb25-241"><a href="#cb25-241"></a>        }</span>
<span id="cb25-242"><a href="#cb25-242"></a></span>
<span id="cb25-243"><a href="#cb25-243"></a>        <span class="cf">return</span> output<span class="op">;</span></span>
<span id="cb25-244"><a href="#cb25-244"></a>    }<span class="op">,</span></span>
<span id="cb25-245"><a href="#cb25-245"></a>    <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb25-246"><a href="#cb25-246"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb25-247"><a href="#cb25-247"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb25-248"><a href="#cb25-248"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-249"><a href="#cb25-249"></a>      <span class="dt">trial_part</span><span class="op">:</span> <span class="st">"feedback"</span></span>
<span id="cb25-250"><a href="#cb25-250"></a>      }</span>
<span id="cb25-251"><a href="#cb25-251"></a>    }</span>
<span id="cb25-252"><a href="#cb25-252"></a>   ]<span class="op">,</span></span>
<span id="cb25-253"><a href="#cb25-253"></a>  <span class="dt">conditional_function</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb25-254"><a href="#cb25-254"></a>    <span class="co">// get the last response</span></span>
<span id="cb25-255"><a href="#cb25-255"></a>    <span class="kw">let</span> last_trial <span class="op">=</span> jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">last</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">values</span>()[<span class="dv">0</span>]</span>
<span id="cb25-256"><a href="#cb25-256"></a>    <span class="cf">if</span>(last_trial<span class="op">.</span><span class="at">correct</span>){</span>
<span id="cb25-257"><a href="#cb25-257"></a>      <span class="cf">return</span> <span class="kw">false</span></span>
<span id="cb25-258"><a href="#cb25-258"></a>    } <span class="cf">else</span> {</span>
<span id="cb25-259"><a href="#cb25-259"></a>      <span class="cf">return</span> <span class="kw">true</span></span>
<span id="cb25-260"><a href="#cb25-260"></a>    }</span>
<span id="cb25-261"><a href="#cb25-261"></a>  }</span>
<span id="cb25-262"><a href="#cb25-262"></a>}</span>
<span id="cb25-263"><a href="#cb25-263"></a></span>
<span id="cb25-264"><a href="#cb25-264"></a><span class="co">// exp timeline</span></span>
<span id="cb25-265"><a href="#cb25-265"></a><span class="kw">let</span> exp_flanker <span class="op">=</span> {</span>
<span id="cb25-266"><a href="#cb25-266"></a>    <span class="dt">timeline</span><span class="op">:</span> [</span>
<span id="cb25-267"><a href="#cb25-267"></a>        exp_fixation<span class="op">,</span></span>
<span id="cb25-268"><a href="#cb25-268"></a>        exp_stimulus<span class="op">,</span></span>
<span id="cb25-269"><a href="#cb25-269"></a>        exp_feedback</span>
<span id="cb25-270"><a href="#cb25-270"></a>    ]<span class="op">,</span></span>
<span id="cb25-271"><a href="#cb25-271"></a>    <span class="dt">timeline_variables</span><span class="op">:</span> [</span>
<span id="cb25-272"><a href="#cb25-272"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span> }<span class="op">,</span></span>
<span id="cb25-273"><a href="#cb25-273"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb25-274"><a href="#cb25-274"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb25-275"><a href="#cb25-275"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"a"</span>  }<span class="op">,</span></span>
<span id="cb25-276"><a href="#cb25-276"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span>  }<span class="op">,</span></span>
<span id="cb25-277"><a href="#cb25-277"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&lt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"incongruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb25-278"><a href="#cb25-278"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }<span class="op">,</span></span>
<span id="cb25-279"><a href="#cb25-279"></a>        { <span class="dt">target</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distractor</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">distance</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">congruency</span><span class="op">:</span> <span class="st">"congruent"</span><span class="op">,</span> <span class="dt">correct_response</span><span class="op">:</span> <span class="st">"l"</span> }</span>
<span id="cb25-280"><a href="#cb25-280"></a>    ]<span class="op">,</span></span>
<span id="cb25-281"><a href="#cb25-281"></a>    <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb25-282"><a href="#cb25-282"></a>    <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb25-283"><a href="#cb25-283"></a>      <span class="dt">phase</span><span class="op">:</span> <span class="st">"flanker"</span><span class="op">,</span></span>
<span id="cb25-284"><a href="#cb25-284"></a>      <span class="dt">target</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"target"</span>)<span class="op">,</span></span>
<span id="cb25-285"><a href="#cb25-285"></a>      <span class="dt">distractor</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"distractor"</span>)<span class="op">,</span></span>
<span id="cb25-286"><a href="#cb25-286"></a>      <span class="dt">congruency</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"congruency"</span>)<span class="op">,</span></span>
<span id="cb25-287"><a href="#cb25-287"></a>      <span class="dt">correct_response</span><span class="op">:</span> jsPsych<span class="op">.</span><span class="fu">timelineVariable</span>(<span class="st">"correct_response"</span>)</span>
<span id="cb25-288"><a href="#cb25-288"></a>    }</span>
<span id="cb25-289"><a href="#cb25-289"></a>}<span class="op">;</span></span>
<span id="cb25-290"><a href="#cb25-290"></a></span>
<span id="cb25-291"><a href="#cb25-291"></a><span class="co">// ============================================</span></span>
<span id="cb25-292"><a href="#cb25-292"></a><span class="co">// Savd Data Trial</span></span>
<span id="cb25-293"><a href="#cb25-293"></a><span class="co">// ============================================</span></span>
<span id="cb25-294"><a href="#cb25-294"></a></span>
<span id="cb25-295"><a href="#cb25-295"></a><span class="kw">const</span> saveData <span class="op">=</span> {</span>
<span id="cb25-296"><a href="#cb25-296"></a>  <span class="dt">type</span><span class="op">:</span> jsPsychHtmlKeyboardResponse<span class="op">,</span></span>
<span id="cb25-297"><a href="#cb25-297"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="vs">`</span></span>
<span id="cb25-298"><a href="#cb25-298"></a><span class="vs">    &lt;div style="text-align: center;"&gt;</span></span>
<span id="cb25-299"><a href="#cb25-299"></a><span class="vs">      &lt;p&gt;Experiment complete!&lt;/p&gt;</span></span>
<span id="cb25-300"><a href="#cb25-300"></a><span class="vs">      &lt;p&gt;Click the button below to save your data locally:&lt;/p&gt;</span></span>
<span id="cb25-301"><a href="#cb25-301"></a><span class="vs">      &lt;button id="save-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"&gt;</span></span>
<span id="cb25-302"><a href="#cb25-302"></a><span class="vs">        Click here to save the data locally</span></span>
<span id="cb25-303"><a href="#cb25-303"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb25-304"><a href="#cb25-304"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb25-305"><a href="#cb25-305"></a><span class="vs">  `</span><span class="op">,</span></span>
<span id="cb25-306"><a href="#cb25-306"></a>  <span class="dt">choices</span><span class="op">:</span> <span class="st">"NO_KEYS"</span><span class="op">,</span></span>
<span id="cb25-307"><a href="#cb25-307"></a>  <span class="dt">trial_duration</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb25-308"><a href="#cb25-308"></a>  <span class="dt">on_load</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb25-309"><a href="#cb25-309"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"save-btn"</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb25-310"><a href="#cb25-310"></a>      jsPsych<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">get</span>()<span class="op">.</span><span class="fu">localSave</span>(<span class="st">"csv"</span><span class="op">,</span> <span class="st">"flanker_data.csv"</span>)<span class="op">;</span></span>
<span id="cb25-311"><a href="#cb25-311"></a>    })<span class="op">;</span></span>
<span id="cb25-312"><a href="#cb25-312"></a>  }</span>
<span id="cb25-313"><a href="#cb25-313"></a>}<span class="op">;</span></span>
<span id="cb25-314"><a href="#cb25-314"></a></span>
<span id="cb25-315"><a href="#cb25-315"></a><span class="co">// ============================================</span></span>
<span id="cb25-316"><a href="#cb25-316"></a><span class="co">// Run jsPsych </span></span>
<span id="cb25-317"><a href="#cb25-317"></a><span class="co">// ============================================</span></span>
<span id="cb25-318"><a href="#cb25-318"></a></span>
<span id="cb25-319"><a href="#cb25-319"></a>jsPsych<span class="op">.</span><span class="fu">run</span>([</span>
<span id="cb25-320"><a href="#cb25-320"></a>  instructions<span class="op">,</span></span>
<span id="cb25-321"><a href="#cb25-321"></a>  practice_flanker<span class="op">,</span></span>
<span id="cb25-322"><a href="#cb25-322"></a>  end_practice<span class="op">,</span></span>
<span id="cb25-323"><a href="#cb25-323"></a>  exp_flanker<span class="op">,</span></span>
<span id="cb25-324"><a href="#cb25-324"></a>  saveData</span>
<span id="cb25-325"><a href="#cb25-325"></a>])<span class="op">;</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb26-1"><a href="#cb26-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-8-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-4-tab">
<div id="demo-container-7" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s ease;">
<div style="background-color: #f8f9fa; padding: 8px 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
<div>
<span style="font-weight: bold; color: #495057;">Live JsPsych Demo</span>
<span class="focus-indicator-7" style="margin-left: 10px; font-size: 11px; color: #6c757d; font-style: italic;">Click inside the demo to activate demo</span>
</div>
<div style="display: flex; gap: 8px;">
<button onclick="
            console.log('Full screen button clicked');
            var htmlContent = '<!DOCTYPE html>\n<html>\n  <head>\n    <title>Live JsPsych Demo</title>\n    <script src=\'https://unpkg.com/jspsych@8.2.2\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-preload@2.1.0\' crossorigin></script>\n    <script src=\'https://unpkg.com/@jspsych/plugin-instructions@2.1.0\' crossorigin></script>\n    <link href=\'https://unpkg.com/jspsych@8.2.2/css/jspsych.css\' rel=\'stylesheet\' type=\'text/css\' crossorigin />\n    <style>\n      /* Paused overlay styles */\n      #paused-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        display: none;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      }\n\n      #paused-message {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        text-align: center;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 300px;\n      }\n\n      #paused-message h2 {\n        margin-top: 0;\n        color: #dc3545;\n        font-size: 24px;\n      }\n\n      #paused-message p {\n        color: #666;\n        margin-bottom: 0;\n        font-size: 16px;\n      }\n\n      .pulse {\n        animation: pulse 2s infinite;\n      }\n\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    </style>\n  </head>\n  <body>\n    <!-- Paused overlay -->\n    <div id=\'paused-overlay\'>\n      <div id=\'paused-message\'>\n        <h2>Demo Paused</h2>\n        <p class=\'pulse\'>Click Anywhere to Resume</p>\n      </div>\n    </div>\n  </body>\n  <script>\n// Initialize jsPsych with interaction tracking and overlay control\nconst jsPsych = initJsPsych({\n  on_interaction_data_update: function(data) {\n    const overlay = document.getElementById(\'paused-overlay\');\n\n    if (data.event === \'blur\') {\n      // User clicked away - pause experiment and show overlay\n      jsPsych.pauseExperiment();\n      if (overlay) {\n        overlay.style.display = \'flex\';\n      }\n    } else if (data.event === \'focus\') {\n      // User returned - resume experiment and hide overlay\n      jsPsych.resumeExperiment();\n      if (overlay) {\n        overlay.style.display = \'none\';\n      }\n    }\n  }\n});\n\n// Make the overlay clickable to resume\ndocument.addEventListener(\'DOMContentLoaded\', function() {\n  const overlay = document.getElementById(\'paused-overlay\');\n  if (overlay) {\n    overlay.addEventListener(\'click\', function() {\n      // Focus the window and let the interaction handler resume\n      window.focus();\n    });\n  }\n});\n\n\n\n// ============================================\n// Instructions\n// ============================================\n\nconst instructions = {\n  type: jsPsychInstructions,\n  pages: [\n    `<p>Welcome to the Experiment!</p>\n     <p>Use the buttons below to navigate through the instructions.</p>`,\n\n    `<p>In this experiment, you will complete what\'s known as a <strong>flanker task</strong>.</p>\n     <p>On each trial, you will see a row of arrows displayed on the screen.</p>`,\n\n    `<p>Your task is to respond to the <strong>direction of the center arrow</strong> only.</p>\n     <p>Ignore the arrows on either side (the &quot;flankers&quot;).</p>`,\n\n    `<p><strong>Response Keys:</strong></p>\n     <p>Press <strong>A</strong> if the center arrow points LEFT</p>\n     <p>Press <strong>L</strong> if the center arrow points RIGHT</p>\n     <p>You will only have 1 second to respond to each trial. </p>\n     <p>Respond as quickly and accurately as possible.</p>`,\n\n    `<p>The experiment consists of two parts:</p>\n     <p>1. A <strong>practice block</strong> to familiarize yourself with the task</p>\n     <p>2. An <strong>experimental block</strong> with the main trials</p>`,\n\n    `<p>When you are ready to begin the practice trials, press &quot;Next&quot;.</p>`\n  ],\n  show_clickable_nav: true\n}\n\n// ============================================\n// Flanker Practice Block\n// ============================================\n\n// add a variable to track practice attempts\nlet attempts = 0\n// this variable sets the maximum loops\nlet max_attempts = 3\n\n// fixation\nlet practice_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet practice_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    },\n    on_finish: function(data){\n        // store accuracy\n        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)\n    }\n}\n\n// feedback\nlet practice_feedback = {\n   type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        // get the last response\n        let last_trial = jsPsych.data.get().last(1).values()[0]\n        let output  \n\n        if(last_trial.response === null){\n          // this will check for non-response first\n          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`\n          \n        } else if(last_trial.correct){\n          // else if correct\n          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`\n        } else {\n          // else incorrect\n          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`\n        }\n\n        return output;\n    },\n    choices: &quot;NO_KEYS&quot;,\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;feedback&quot;\n    }\n}\n\n// practice timeline\nlet practice_flanker = {\n    timeline: [\n        practice_fixation,\n        practice_stimulus,\n        practice_feedback\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker practice&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    },\n   loop_function: function(data) {\n      // add one to attempts\n      attempts++      \n\n      let trials = data.filter({trial_part: &quot;stimulus&quot;})\n\n      let correct_trials = trials.filter({correct: true})\n\n      let accuracy = correct_trials.count()/trials.count();\n      console.log(`Practice accuracy: ${accuracy}`);\n  \n      // add this before the accuracy check\n      // if attempts is greater than the max quit loop\n      if(attempts > max_attempts){\n          return false\n      }\n\n      // If accuracy is below 75%, repeat the block\n      if (accuracy < 0.75) {\n           return true;  // Loop again\n        } else {\n           return false; // Move on\n      }\n    }\n};\n\nconst end_practice = {\n   type: jsPsychHtmlKeyboardResponse,\n   stimulus: `<p>You have completed the practice trials.</p>\n              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,\n   choices: &quot; &quot;,\n   post_trial_gap: 250,\n   data: {\n      phase: &quot;instructions&quot;\n   }\n}\n\n// ============================================\n// Flanker Experimental Block\n// ============================================\n\n// fixation\nlet exp_fixation = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,\n    choices: &quot;NO_KEYS&quot;,\n    post_trial_gap: 250,\n    trial_duration: 1000,\n    data: {\n      trial_part: &quot;fixation&quot;\n    }\n}\n\n// stimulus\nlet exp_stimulus = {\n    type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);\n        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);\n        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);\n\n        // Create HTML with custom spacing\n        let output = `\n            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>\n              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}\n            </div>`;\n\n        return output;\n    },\n    choices: [&quot;a&quot;, &quot;l&quot;],\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;stimulus&quot;\n    },\n    on_finish: function(data){\n        // store accuracy\n        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)\n    }\n}\n\n// conditional feedback\nlet exp_feedback = {\n   timeline: [\n      {\n        type: jsPsychHtmlKeyboardResponse,\n    stimulus: function(){\n        // get the last response\n        let last_trial = jsPsych.data.get().last(1).values()[0]\n        let output  \n\n        if(last_trial.response === null){\n          // this will check for non-response first\n          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`\n          \n        } else {\n          // else incorrect\n          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`\n        }\n\n        return output;\n    },\n    choices: &quot;NO_KEYS&quot;,\n    trial_duration: 1000,\n    post_trial_gap: 250,\n    data: {\n      trial_part: &quot;feedback&quot;\n      }\n    }\n   ],\n  conditional_function: function() {\n    // get the last response\n    let last_trial = jsPsych.data.get().last(1).values()[0]\n    if(last_trial.correct){\n      return false\n    } else {\n      return true\n    }\n  }\n}\n\n// exp timeline\nlet exp_flanker = {\n    timeline: [\n        exp_fixation,\n        exp_stimulus,\n        exp_feedback\n    ],\n    timeline_variables: [\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },\n        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },\n        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },\n        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }\n    ],\n    randomize_order: true,\n    data: {\n      phase: &quot;flanker&quot;,\n      target: jsPsych.timelineVariable(&quot;target&quot;),\n      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),\n      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),\n      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)\n    }\n};\n\n// ============================================\n// Savd Data Trial\n// ============================================\n\nconst saveData = {\n  type: jsPsychHtmlKeyboardResponse,\n  stimulus: `\n    <div style=&quot;text-align: center;&quot;>\n      <p>Experiment complete!</p>\n      <p>Click the button below to save your data locally:</p>\n      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>\n        Click here to save the data locally\n      </button>\n    </div>\n  `,\n  choices: &quot;NO_KEYS&quot;,\n  trial_duration: null,\n  on_load: function() {\n    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {\n      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);\n    });\n  }\n};\n\n// ============================================\n// Run jsPsych \n// ============================================\n\njsPsych.run([\n  instructions,\n  practice_flanker,\n  end_practice,\n  exp_flanker,\n  saveData\n]);\n  </script>\n</html>';
            var newWindow = window.open('', '_blank');
            if (newWindow) {
              newWindow.document.write(htmlContent);
              newWindow.document.close();
            } else {
              alert('Pop-up blocked! Please allow pop-ups for this site.');
            }
          " style="background-color: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Open in New Tab</button>
<button onclick="
            var iframe = document.getElementById('demo-iframe-7');
            var srcdoc = iframe.getAttribute('srcdoc');
            iframe.setAttribute('srcdoc', '');
            setTimeout(function() {
              iframe.setAttribute('srcdoc', srcdoc);
            }, 10);
          " style="background-color: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Refresh</button>
</div>
</div>
<iframe id="demo-iframe-7" srcdoc="<!DOCTYPE html>
<html>
  <head>
    <title>Live JsPsych Demo</title>
    <script src='https://unpkg.com/jspsych@8.2.2' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-preload@2.1.0' crossorigin></script>
    <script src='https://unpkg.com/@jspsych/plugin-instructions@2.1.0' crossorigin></script>
    <link href='https://unpkg.com/jspsych@8.2.2/css/jspsych.css' rel='stylesheet' type='text/css' crossorigin />
    <style>
      /* Paused overlay styles */
      #paused-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: Arial, sans-serif;
      }

      #paused-message {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 300px;
      }

      #paused-message h2 {
        margin-top: 0;
        color: #dc3545;
        font-size: 24px;
      }

      #paused-message p {
        color: #666;
        margin-bottom: 0;
        font-size: 16px;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body style='max-height: 300px'>
    <!-- Paused overlay -->
    <div id='paused-overlay'>
      <div id='paused-message'>
        <h2>Demo Paused</h2>
        <p class='pulse'>Click Anywhere to Resume</p>
      </div>
    </div>
  </body>
  <script>
// Initialize jsPsych with interaction tracking and overlay control
const jsPsych = initJsPsych({
  on_interaction_data_update: function(data) {
    const overlay = document.getElementById('paused-overlay');

    if (data.event === 'blur') {
      // User clicked away - pause experiment and show overlay
      jsPsych.pauseExperiment();
      if (overlay) {
        overlay.style.display = 'flex';
      }
    } else if (data.event === 'focus') {
      // User returned - resume experiment and hide overlay
      jsPsych.resumeExperiment();
      if (overlay) {
        overlay.style.display = 'none';
      }
    }
  }
});

// Make the overlay clickable to resume
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('paused-overlay');
  if (overlay) {
    overlay.addEventListener('click', function() {
      // Focus the window and let the interaction handler resume
      window.focus();
    });
  }
});



// ============================================
// Instructions
// ============================================

const instructions = {
  type: jsPsychInstructions,
  pages: [
    `<p>Welcome to the Experiment!</p>
     <p>Use the buttons below to navigate through the instructions.</p>`,

    `<p>In this experiment, you will complete what's known as a <strong>flanker task</strong>.</p>
     <p>On each trial, you will see a row of arrows displayed on the screen.</p>`,

    `<p>Your task is to respond to the <strong>direction of the center arrow</strong> only.</p>
     <p>Ignore the arrows on either side (the &quot;flankers&quot;).</p>`,

    `<p><strong>Response Keys:</strong></p>
     <p>Press <strong>A</strong> if the center arrow points LEFT</p>
     <p>Press <strong>L</strong> if the center arrow points RIGHT</p>
     <p>You will only have 1 second to respond to each trial. </p>
     <p>Respond as quickly and accurately as possible.</p>`,

    `<p>The experiment consists of two parts:</p>
     <p>1. A <strong>practice block</strong> to familiarize yourself with the task</p>
     <p>2. An <strong>experimental block</strong> with the main trials</p>`,

    `<p>When you are ready to begin the practice trials, press &quot;Next&quot;.</p>`
  ],
  show_clickable_nav: true
}

// ============================================
// Flanker Practice Block
// ============================================

// add a variable to track practice attempts
let attempts = 0
// this variable sets the maximum loops
let max_attempts = 3

// fixation
let practice_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let practice_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    },
    on_finish: function(data){
        // store accuracy
        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)
    }
}

// feedback
let practice_feedback = {
   type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        // get the last response
        let last_trial = jsPsych.data.get().last(1).values()[0]
        let output  

        if(last_trial.response === null){
          // this will check for non-response first
          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`
          
        } else if(last_trial.correct){
          // else if correct
          output = `<p style=&quot;font-size:48px&quot;>Correct!</p>`
        } else {
          // else incorrect
          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`
        }

        return output;
    },
    choices: &quot;NO_KEYS&quot;,
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;feedback&quot;
    }
}

// practice timeline
let practice_flanker = {
    timeline: [
        practice_fixation,
        practice_stimulus,
        practice_feedback
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker practice&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    },
   loop_function: function(data) {
      // add one to attempts
      attempts++      

      let trials = data.filter({trial_part: &quot;stimulus&quot;})

      let correct_trials = trials.filter({correct: true})

      let accuracy = correct_trials.count()/trials.count();
      console.log(`Practice accuracy: ${accuracy}`);
  
      // add this before the accuracy check
      // if attempts is greater than the max quit loop
      if(attempts > max_attempts){
          return false
      }

      // If accuracy is below 75%, repeat the block
      if (accuracy < 0.75) {
           return true;  // Loop again
        } else {
           return false; // Move on
      }
    }
};

const end_practice = {
   type: jsPsychHtmlKeyboardResponse,
   stimulus: `<p>You have completed the practice trials.</p>
              <p>When you are ready to begin the experimental trials, press the space bar.</p>`,
   choices: &quot; &quot;,
   post_trial_gap: 250,
   data: {
      phase: &quot;instructions&quot;
   }
}

// ============================================
// Flanker Experimental Block
// ============================================

// fixation
let exp_fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style=&quot;font-size:48px&quot;>+</p>`,
    choices: &quot;NO_KEYS&quot;,
    post_trial_gap: 250,
    trial_duration: 1000,
    data: {
      trial_part: &quot;fixation&quot;
    }
}

// stimulus
let exp_stimulus = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        let target = jsPsych.evaluateTimelineVariable(&quot;target&quot;);
        let distractor = jsPsych.evaluateTimelineVariable(&quot;distractor&quot;);
        let distance = jsPsych.evaluateTimelineVariable(&quot;distance&quot;);

        // Create HTML with custom spacing
        let output = `
            <div style=&quot;font-size: 100px; font-family: monospace;&quot;>
              ${distractor}${distractor}<span style=&quot;margin: 0 ${distance}px;&quot;>${target}</span>${distractor}${distractor}
            </div>`;

        return output;
    },
    choices: [&quot;a&quot;, &quot;l&quot;],
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;stimulus&quot;
    },
    on_finish: function(data){
        // store accuracy
        data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response)
    }
}

// conditional feedback
let exp_feedback = {
   timeline: [
      {
        type: jsPsychHtmlKeyboardResponse,
    stimulus: function(){
        // get the last response
        let last_trial = jsPsych.data.get().last(1).values()[0]
        let output  

        if(last_trial.response === null){
          // this will check for non-response first
          output = `<p style=&quot;font-size:48px&quot;>Too Slow! Respond Faster!</p>`
          
        } else {
          // else incorrect
          output = `<p style=&quot;font-size:48px&quot;>Incorrect!</p>`
        }

        return output;
    },
    choices: &quot;NO_KEYS&quot;,
    trial_duration: 1000,
    post_trial_gap: 250,
    data: {
      trial_part: &quot;feedback&quot;
      }
    }
   ],
  conditional_function: function() {
    // get the last response
    let last_trial = jsPsych.data.get().last(1).values()[0]
    if(last_trial.correct){
      return false
    } else {
      return true
    }
  }
}

// exp timeline
let exp_flanker = {
    timeline: [
        exp_fixation,
        exp_stimulus,
        exp_feedback
    ],
    timeline_variables: [
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot; },
        { target: &quot;<&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;<&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;a&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 0, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot;  },
        { target: &quot;>&quot;, distractor: &quot;<&quot;, distance: 50, congruency: &quot;incongruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 0, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; },
        { target: &quot;>&quot;, distractor: &quot;>&quot;, distance: 50, congruency: &quot;congruent&quot;, correct_response: &quot;l&quot; }
    ],
    randomize_order: true,
    data: {
      phase: &quot;flanker&quot;,
      target: jsPsych.timelineVariable(&quot;target&quot;),
      distractor: jsPsych.timelineVariable(&quot;distractor&quot;),
      congruency: jsPsych.timelineVariable(&quot;congruency&quot;),
      correct_response: jsPsych.timelineVariable(&quot;correct_response&quot;)
    }
};

// ============================================
// Savd Data Trial
// ============================================

const saveData = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: `
    <div style=&quot;text-align: center;&quot;>
      <p>Experiment complete!</p>
      <p>Click the button below to save your data locally:</p>
      <button id=&quot;save-btn&quot; style=&quot;padding: 10px 20px; font-size: 16px; cursor: pointer;&quot;>
        Click here to save the data locally
      </button>
    </div>
  `,
  choices: &quot;NO_KEYS&quot;,
  trial_duration: null,
  on_load: function() {
    document.getElementById(&quot;save-btn&quot;).addEventListener(&quot;click&quot;, function() {
      jsPsych.data.get().localSave(&quot;csv&quot;, &quot;flanker_data.csv&quot;);
    });
  }
};

// ============================================
// Run jsPsych 
// ============================================

jsPsych.run([
  instructions,
  practice_flanker,
  end_practice,
  exp_flanker,
  saveData
]);
  </script>
</html>" width="100%" height="300px" scrolling="yes" style="border: none; display: block;" onload="javascript:(function(iframe){
        var container = document.getElementById(&quot;demo-container-7&quot;);
        var indicator = container.querySelector(&quot;.focus-indicator-7&quot;);

        function showFocus() {
          container.style.boxShadow = &quot;0 0 0 3px #007bff&quot;;
          if (indicator) {
            indicator.textContent = &quot;‚úì Demo Active&quot;;
            indicator.style.color = &quot;#28a745&quot;;
          }
        }

        function hideFocus() {
          container.style.boxShadow = &quot;none&quot;;
          if (indicator) {
            indicator.textContent = &quot;Click inside the demo to activate&quot;;
            indicator.style.color = &quot;#6c757d&quot;;
          }
        }

        var iframeWindow = iframe.contentWindow;
        if (iframeWindow) {
          iframeWindow.onfocus = showFocus;
          iframeWindow.onblur = hideFocus;
          iframeWindow.document.addEventListener(&quot;click&quot;, function() {
            iframeWindow.focus();
            showFocus();
          });
          document.addEventListener(&quot;click&quot;, function(e) {
            if (!container.contains(e.target)) {
              iframeWindow.blur();
              hideFocus();
            }
          });
        }
      }(this));"></iframe>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="test-and-savecheck-data" class="level2" data-number="20.3">
<h2 data-number="20.3" class="anchored" data-anchor-id="test-and-savecheck-data"><span class="header-section-number">20.3</span> Test and Save/Check Data</h2>
<p>Now that it‚Äôs complete, run yourself through the whole experiment and save the data file (it‚Äôll end up in your Downloads folder). Confirm that the data looks as expected and that everything is saving correctly.</p>
</section>
<section id="stretch-goals" class="level2" data-number="20.4">
<h2 data-number="20.4" class="anchored" data-anchor-id="stretch-goals"><span class="header-section-number">20.4</span> Stretch Goals</h2>
<section id="end-the-experiment-for-participants-who-fail-the-practice" class="level3" data-number="20.4.1">
<h3 data-number="20.4.1" class="anchored" data-anchor-id="end-the-experiment-for-participants-who-fail-the-practice"><span class="header-section-number">20.4.1</span> End the experiment for participants who fail the practice</h3>
<p>If participants fail the practice three times, let‚Äôs end the experiment early. This keeps poor participants from continuing.</p>
<p>This can be accomplished by adding conditional logic that will skip the <code>exp_flanker</code> if <code>attempts</code> is greater than <code>max_attempts</code>.</p>
</section>
<section id="add-a-display-that-pauses-the-experiment-if-they-miss-three-responses-in-a-row" class="level3" data-number="20.4.2">
<h3 data-number="20.4.2" class="anchored" data-anchor-id="add-a-display-that-pauses-the-experiment-if-they-miss-three-responses-in-a-row"><span class="header-section-number">20.4.2</span> Add a display that pauses the experiment if they miss three responses in a row</h3>
<p>Change the experimental block so that if participants fail to respond three trials in a row, the experiment stops with a screen that says ‚ÄúYou have a missed three responses in a row. Please try to respond as quickly as possible. Press the space bar to continue‚Äù.</p>
<p>You‚Äôll need a variable to track missed responses, adding one if they miss and resetting it to 0 when they don‚Äôt miss. Then you‚Äôll need a new conditional trial that checks the miss count and displays the trial if misses are greater than 3.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./19-dynamic-flow.html" class="pagination-link" aria-label="Controlling the Flow">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Controlling the Flow</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./21-L09.html" class="pagination-link" aria-label="Lab 9: Working Memory">
        <span class="nav-page-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Lab 9: Working Memory</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/icoglab/online-behavioural-research-methods/edit/main/20-L08.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/icoglab/online-behavioural-research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>